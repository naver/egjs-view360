"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5905],{3905:(t,e,i)=>{i.d(e,{Zo:()=>_,kt:()=>d});var s=i(7294);function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function a(t,e){if(null==t)return{};var i,s,n=function(t,e){if(null==t)return{};var i,s,n={},r=Object.keys(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||(n[i]=t[i]);return n}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var h=s.createContext({}),l=function(t){var e=s.useContext(h),i=e;return t&&(i="function"==typeof t?t(e):o(o({},e),t)),i},_=function(t){var e=l(t.components);return s.createElement(h.Provider,{value:e},t.children)},c={inlineCode:"code",wrapper:function(t){var e=t.children;return s.createElement(s.Fragment,{},e)}},u=s.forwardRef((function(t,e){var i=t.components,n=t.mdxType,r=t.originalType,h=t.parentName,_=a(t,["components","mdxType","originalType","parentName"]),u=l(i),d=n,p=u["".concat(h,".").concat(d)]||u[d]||c[d]||r;return i?s.createElement(p,o(o({ref:e},_),{},{components:i})):s.createElement(p,o({ref:e},_))}));function d(t,e){var i=arguments,n=e&&e.mdxType;if("string"==typeof t||n){var r=i.length,o=new Array(r);o[0]=u;var a={};for(var h in e)hasOwnProperty.call(e,h)&&(a[h]=e[h]);a.originalType=t,a.mdxType="string"==typeof t?t:n,o[1]=a;for(var l=2;l<r;l++)o[l]=i[l];return s.createElement.apply(null,o)}return s.createElement.apply(null,i)}u.displayName="MDXCreateElement"},4801:(t,e,i)=>{i.d(e,{Z:()=>d});var s=i(6010),n=i(7294);const r="container_KAvi",o="tags_yIZ0",a="tag_NTEP",h="dark_QuFp",l="info_Tfvv",_="warning_OxPl",c="success_OgfR",u="link_PhWZ",d=t=>{let{type:e,defaultVal:i,added:d}=t;return n.createElement("div",{className:r},e&&n.createElement("div",{className:o},n.createElement("span",{className:(0,s.Z)(a,h)},"Type"),n.createElement("span",{className:(0,s.Z)(a,l)},e)),i&&n.createElement("div",{className:o},n.createElement("span",{className:(0,s.Z)(a,h)},"Default"),n.createElement("span",{className:(0,s.Z)(a,_)},i)),d&&n.createElement("div",{className:o},n.createElement("span",{className:(0,s.Z)(a,h)},"Added in"),n.createElement("a",{className:u,href:"https://github.com/naver/egjs-view360/releases/tag/"+d,target:"_blank",rel:"noopener noreferrer"},n.createElement("span",{className:(0,s.Z)(a,c)},"v",d))))}},1028:(t,e,i)=>{i.d(e,{$:()=>c,Dx:()=>l,FP:()=>s,GS:()=>m,H3:()=>g,L2:()=>r,T:()=>o,WV:()=>a,bQ:()=>p,gf:()=>h,jN:()=>_,kq:()=>u,ml:()=>d,yy:()=>n});const s={MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",WHEEL:"wheel",RESIZE:"resize",CONTEXT_MENU:"contextmenu",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_UP:"pointerup",POINTER_CANCEL:"pointercancel",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",KEY_DOWN:"keydown",KEY_UP:"keyup",LOAD:"load",ERROR:"error",CLICK:"click",DOUBLE_CLICK:"dblclick",CONTEXT_CREATE_ERROR:"webglcontextcreationerror",CONTEXT_LOST:"webglcontextlost",CONTEXT_RESTORED:"webglcontextrestored",DEVICE_ORIENTATION:"deviceorientation",DEVICE_MOTION:"devicemotion",ORIENTATION_CHANGE:"orientationchange",VIDEO_PLAY:"play",VIDEO_PAUSE:"pause",VIDEO_LOADED_DATA:"loadeddata",VIDEO_VOLUME_CHANGE:"volumechange",VIDEO_TIME_UPDATE:"timeupdate",VIDEO_DURATION_CHANGE:"durationchange",VIDEO_CAN_PLAYTHROUGH:"canplaythrough",TRANSITION_END:"transitionend",XR_END:"end"},n="div",r="button";let o;!function(t){t[t.LEFT=0]="LEFT",t[t.MIDDLE=1]="MIDDLE",t[t.RIGHT=2]="RIGHT"}(o||(o={}));const a={GRAB:"grab",GRABBING:"grabbing",NONE:""},h=["LEFT","UP","RIGHT","DOWN"];let l;!function(t){t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN"}(l||(l={}));const _=32,c={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"},u=" ",d=["requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","webkitCancelFullScreen","mozRequestFullScreen","msRequestFullscreen"],p=["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"],g=["exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"],m=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"]},4949:(t,e,i)=>{i.d(e,{ZP:()=>s});const s={CODES:{WRONG_TYPE:0,WRONG_OPTION:1,ELEMENT_NOT_FOUND:2,CANVAS_NOT_FOUND:3,WEBGL_NOT_SUPPORTED:4,FAILED_CREATE_CONTEXT_2D:5,PROVIDE_PROJECTION_FIRST:6,FAILED_LINKING_PROGRAM:7,INSUFFICIENT_ARGS:8},MESSAGES:{WRONG_TYPE:(t,e)=>typeof t+" is not a "+e.map((t=>'"'+t+'"')).join(" or ")+".",WRONG_OPTION:(t,e)=>'Bad option: given "'+t+'" for option "'+e+'".',ELEMENT_NOT_FOUND:t=>'Element with selector "'+t+'" not found.',CANVAS_NOT_FOUND:"The canvas element was not found inside the given root element.",WEBGL_NOT_SUPPORTED:"WebGL is not supported on this browser.",FAILED_CREATE_CONTEXT_2D:"Failed to create canvas 2D context",PROVIDE_PROJECTION_FIRST:'"projection" should be provided before initialization.',FAILED_LINKING_PROGRAM:(t,e)=>'Failed linking WebGL program - "'+t+"\nShader compile Log: "+e,INSUFFICIENT_ARGS:(t,e)=>'Insufficient arguments: given "'+t+'" for "'+e+'".'}}},6260:(t,e,i)=>{i.d(e,{FP:()=>n,Qz:()=>s,Xt:()=>r});const s={CONTAINER:"view360-container",CANVAS:"view360-canvas",CTX_LOST:"view360-ctx-lost",IN_VR:"view360-vr-presenting",HOTSPOT_CONTAINER:"view360-hotspots",HOTSPOT:"view360-hotspot",HOTSPOT_VISIBLE:"view360-hotspot-visible",HOTSPOT_FLIP_X:"view360-hotspot-flip-x",HOTSPOT_FLIP_Y:"view360-hotspot-flip-y"},n={READY:"ready",LOAD_START:"loadStart",LOAD:"load",PROJECTION_CHANGE:"projectionChange",RESIZE:"resize",BEFORE_RENDER:"beforeRender",RENDER:"render",INPUT_START:"inputStart",INPUT_END:"inputEnd",VIEW_CHANGE:"viewChange",STATIC_CLICK:"staticClick",VR_START:"vrStart",VR_END:"vrEnd"},r={LINEAR:t=>t,SINE_WAVE:t=>Math.sin(t*Math.PI*2),EASE_OUT_CUBIC:t=>1-Math.pow(1-t,3),EASE_OUT_BOUNCE:t=>{const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375}}},9952:(t,e,i)=>{i.d(e,{AG:()=>E,De:()=>u,Ib:()=>T,K$:()=>l,QA:()=>o,YB:()=>m,ZX:()=>a,_F:()=>_,gI:()=>b,jl:()=>h,ju:()=>d,lD:()=>p,oK:()=>c,r6:()=>g,u1:()=>r});var s,n=i(6260);const r={CHANGE:"change",ANIMATION_END:"animationEnd"},o={INPUT_START:"inputStart",CHANGE:"change",INPUT_END:"inputEnd",ENABLE:"enable",DISABLE:"disable",STATIC_CLICK:"staticClick"},a=Math.PI/180,h=180/Math.PI,l=n.Xt.EASE_OUT_CUBIC,_=300,c={min:-1/0,max:1/0},u={min:-90,max:90},d={min:.6,max:10};let p;!function(t){t[t.ZERO=0]="ZERO",t[t.CW_90=1]="CW_90",t[t.CCW_90=2]="CCW_90",t[t.CW_180=3]="CW_180"}(p||(p={}));const g="view360videotimechange",m="http://www.w3.org/2000/svg",E="immersive-vr",b="local",T=null!=(s=Number.EPSILON)?s:2220446049250313e-31},5821:(t,e,i)=>{i.d(e,{Z:()=>d});var s=i(2665),n=i(3181),r=i(8200),o=i(1028),a=i(9952),h=i(8388);const l={PITCH_DELTA:1,YAW_DELTA_BY_ROLL:2,YAW_DELTA_BY_YAW:3};l[l.PITCH_DELTA]={targetAxis:[0,1,0],meshPoint:[0,0,1]},l[l.YAW_DELTA_BY_ROLL]={targetAxis:[0,1,0],meshPoint:[1,0,0]},l[l.YAW_DELTA_BY_YAW]={targetAxis:[1,0,0],meshPoint:[0,0,1]};class _ extends s.Z{get enabled(){return this._enabled}get orientationUpdated(){return this._orientationUpdated}get ignoreRoll(){return this._ignoreRoll}set ignoreRoll(t){this._ignoreRoll=t}constructor(){super(),this._onDeviceOrientation=t=>{const e=this._orientation,{alpha:i,beta:s,gamma:n}=t;null!=i&&null!=s&&null!=n&&(e.alpha=i,e.beta=s,e.gamma=n,this._orientationUpdated=!0,this._needsCalibrate&&(this._needsCalibrate=!1,this._calibrateSensor()))},this._updateScreenOrientation=()=>{window.screen&&window.screen.orientation&&void 0!==window.screen.orientation.angle?this._screenOrientation=screen.orientation.angle:void 0!==window.orientation?this._screenOrientation=window.orientation>=0?window.orientation:360+window.orientation:this._screenOrientation=0},this.quaternion=n.Ue(),this._orientation={alpha:0,beta:90,gamma:0},this._yawOrigin=0,this._yawOffset=0,this._orientationUpdated=!1,this._screenOrientation=0,this._needsCalibrate=!0,this._enabled=!1}enable(){this._enabled||(window.addEventListener(o.FP.DEVICE_ORIENTATION,this._onDeviceOrientation),window.addEventListener(o.FP.ORIENTATION_CHANGE,this._updateScreenOrientation),this._updateScreenOrientation(),this._orientationUpdated=!1,this._needsCalibrate=!0,this._enabled=!0)}disable(){this._enabled&&(window.removeEventListener(o.FP.DEVICE_ORIENTATION,this._onDeviceOrientation),window.removeEventListener(o.FP.ORIENTATION_CHANGE,this._updateScreenOrientation),this._enabled=!1)}update(){this._updateRotation(),this._orientationUpdated=!1}collectDelta(){if(!this._orientationUpdated)return{pitch:0,yaw:0};const t=n.d9(this.quaternion);return this._updateRotation(),this._orientationUpdated=!1,this._toEulerDelta(t,this.quaternion)}setInitialRotation(t){this._yawOrigin=t}_calibrateSensor(){const t=this._yawOrigin,e=this.quaternion;this._yawOffset=0,this._updateRotation();const{yaw:i}=(0,h.b6)(e);this._yawOffset=i-t,this._updateRotation(),this._needsCalibrate=!1}_updateRotation(){const t=this.quaternion,{alpha:e,beta:i,gamma:s}=this._orientation;n.yR(t),n.uD(t,t,(e-this._yawOffset)*a.ZX),n.lM(t,t,i*a.ZX),n.jI(t,t,-s*a.ZX);const r=n.Ue(),o=.5*-this._screenOrientation*a.ZX,h=n.al(-Math.sqrt(.5),0,0,Math.sqrt(.5));n.t8(r,0,Math.sin(o),0,Math.cos(o)),n.Jp(t,t,r),n.Jp(t,t,h),n.Fv(t,t)}_toEulerDelta(t,e){return{yaw:this._getDeltaYaw(t,e),pitch:this._getDeltaPitch(t,e)}}_getDeltaYaw(t,e){const i=this._getRotationDelta(t,e,l.YAW_DELTA_BY_YAW);return this._getRotationDelta(t,e,l.YAW_DELTA_BY_ROLL)*Math.sin(this._extractPitchFromQuat(e))+i}_getDeltaPitch(t,e){return this._getRotationDelta(t,e,l.PITCH_DELTA)}_getRotationDelta(t,e,i){const s=r.al(l[i].targetAxis[0],l[i].targetAxis[1],l[i].targetAxis[2]),o=l[i].meshPoint,h=n.d9(t),_=n.d9(e);n.Fv(h,h),n.Fv(_,_);let c=r.al(0,0,1),u=r.al(0,0,1);r.VC(c,c,h),r.VC(u,u,_),r.VC(s,s,_);const d=r.AK(s,r.kC(r.Ue(),c,u))>0?1:-1,p=r.al(o[0],o[1],o[2]);let g;g=i!==l.YAW_DELTA_BY_YAW?r.al(0,d,0):r.al(d,0,0),r.VC(p,p,_),r.VC(g,g,_);const m=p,E=g,b=r.Ue();r.kC(b,m,E),r.Fv(b,b);const T=b[0],v=b[1],R=b[2];u=r.al(o[0],o[1],o[2]),r.VC(u,u,_),c=r.al(o[0],o[1],o[2]),r.VC(c,c,h);let f=Math.abs(c[0]*T+c[1]*v+c[2]*R);const A=r.Ue();r.$X(A,c,r.bA(r.Ue(),b,f));let y=(A[0]*u[0]+A[1]*u[1]+A[2]*u[2])/(r.kE(A)*r.kE(u));y>1&&(y=1);const w=Math.acos(y),O=r.kC(r.Ue(),u,A);let P;f=T*O[0]+v*O[1]+R*O[2],P=i!==l.YAW_DELTA_BY_YAW?f>0?1:-1:f<0?1:-1;return w*P*d*a.jl}_extractPitchFromQuat(t){const e=r.al(0,0,1);return r.VC(e,e,t),-1*Math.atan2(e[1],Math.sqrt(Math.pow(e[0],2)+Math.pow(e[2],2)))}}const c=_;class u extends s.Z{get enabled(){return this._input.enabled}get enableBlocked(){return this._enableBlocked}get animating(){return this._input.enabled&&this._input.orientationUpdated}get ignoreRoll(){return this._ignoreRoll}set ignoreRoll(t){this._ignoreRoll=t}static async isAvailable(){if(!DeviceMotionEvent)return!1;let t;return Promise.race([new Promise((e=>{t=t=>{e(t.rotationRate&&null!=t.rotationRate.alpha)},window.addEventListener(o.FP.DEVICE_MOTION,t)})),new Promise((t=>{setTimeout((()=>t(!1)),1e3)}))]).then((e=>(window.removeEventListener(o.FP.DEVICE_MOTION,t),e)))}static async requestSensorPermission(){return!(0,h.yj)()||DeviceMotionEvent.requestPermission().then((t=>"granted"===t)).catch((()=>!1))}constructor(t,e){let{ignoreRoll:i=!0}=void 0===e?{}:e;super(),this._enableBlocked=t,this._ignoreRoll=i,this._input=new c}destroy(){this.disable(),this._input.off(),this.off()}update(t,e,i,s){this._ignoreRoll?this._updateYawPitch(t,e,i,s):this._updateQuaternion(t,s)}enable(){this._input.enabled||(this._input.enable(),this._enableBlocked=!1,this.trigger(a.QA.ENABLE,{control:this,updateCursor:!1}))}disable(){this._input.enabled&&(this._input.disable(),this.trigger(a.QA.DISABLE,{updateCursor:!1}))}sync(){}_updateYawPitch(t,e,i,s){const n=this._input;if(!n.enabled)return;const{yaw:r,pitch:o}=n.collectDelta();e.add(r),i.add(o),t.lookAt({yaw:e.val,pitch:i.val,zoom:s})}_updateQuaternion(t,e){const i=this._input;i.enabled&&(i.update(),t.rotate(i.quaternion,e))}}const d=u},8861:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(2665),n=i(1028),r=i(9952);class o extends s.Z{constructor(){super(),this._onMouseDown=t=>{const e=this._el;e&&t.button===n.T.LEFT&&(t.preventDefault(),e.focus?e.focus():window.focus(),this._prevPos[0]=t.clientX,this._prevPos[1]=t.clientY,window.addEventListener(n.FP.MOUSE_MOVE,this._onMouseMove,!1),window.addEventListener(n.FP.MOUSE_UP,this._onMouseUp,!1),this.trigger(r.QA.INPUT_START,{srcEvent:t,isTouch:!1,isKeyboard:!1}))},this._onMouseMove=t=>{t.preventDefault();const e=t.clientX,i=t.clientY,s=this._prevPos,n=e-s[0],o=i-s[1];this.trigger(r.QA.CHANGE,{delta:{x:n,y:o},isTouch:!1,isKeyboard:!1}),s[0]=e,s[1]=i},this._onMouseUp=()=>{this._prevPos[0]=0,this._prevPos[1]=0,window.removeEventListener(n.FP.MOUSE_MOVE,this._onMouseMove,!1),window.removeEventListener(n.FP.MOUSE_UP,this._onMouseUp,!1),this.trigger(r.QA.INPUT_END,{isTouch:!1,isKeyboard:!1,scrolling:!1})},this._el=null,this._prevPos=[0,0]}enable(t){this._el||(t.addEventListener(n.FP.MOUSE_DOWN,this._onMouseDown),this._el=t)}disable(){const t=this._el;t&&(t.removeEventListener(n.FP.MOUSE_DOWN,this._onMouseDown),window.removeEventListener(n.FP.MOUSE_MOVE,this._onMouseMove,!1),window.removeEventListener(n.FP.MOUSE_UP,this._onMouseUp,!1),this._el=null)}}const a=o},2197:(t,e,i)=>{i.d(e,{Z:()=>h});var s=i(2665),n=i(1028),r=i(9952),o=i(8388);class a extends s.Z{get scrollable(){return this._scrollable}set scrollable(t){this._scrollable=t}constructor(){super(),this._onTouchStart=t=>{if(t.touches.length>1||this._scrolling)return;const e=t.touches[0];this._isFirstTouch=!0,this._prevPos[0]=e.clientX,this._prevPos[1]=e.clientY,this.trigger(r.QA.INPUT_START,{srcEvent:t,isTouch:!0,isKeyboard:!1})},this._onTouchMove=t=>{if(t.touches.length>1||this._scrolling)return;const e=t.touches[0],i=this._scrollable,s=this._prevPos,n=e.clientX,a=e.clientY,h=n-s[0],l=a-s[1];if(this._isFirstTouch){if(i&&!(0,o.rm)()&&Math.abs(l)>Math.abs(h))return void(this._scrolling=!0);this._isFirstTouch=!1}!1!==t.cancelable&&t.preventDefault(),this.trigger(r.QA.CHANGE,{delta:{x:h,y:l},isTouch:!0,isKeyboard:!1}),s[0]=n,s[1]=a},this._onTouchEnd=t=>{if(0!==t.touches.length)return;const e=t.touches[0],i=this._prevPos;e?(i[0]=e.clientX,i[1]=e.clientY):(i[0]=0,i[1]=0,this.trigger(r.QA.INPUT_END,{isTouch:!0,isKeyboard:!1,scrolling:this._scrolling})),!1!==t.cancelable&&t.preventDefault(),this._scrolling=!1},this._el=null,this._prevPos=[0,0],this._isFirstTouch=!1,this._scrolling=!1,this._scrollable=!1}enable(t){this._el||(t.addEventListener(n.FP.TOUCH_START,this._onTouchStart,{passive:!1}),t.addEventListener(n.FP.TOUCH_MOVE,this._onTouchMove,{passive:!1}),t.addEventListener(n.FP.TOUCH_END,this._onTouchEnd),this._el=t)}disable(){const t=this._el;t&&(t.removeEventListener(n.FP.TOUCH_START,this._onTouchStart),t.removeEventListener(n.FP.TOUCH_MOVE,this._onTouchMove),t.removeEventListener(n.FP.TOUCH_END,this._onTouchEnd),this._el=null)}}const h=a},7035:(t,e,i)=>{i.d(e,{Z:()=>r});var s=i(8388),n=i(9952);const r=class{get val(){return this._val}get start(){return this._start}get end(){return this._end}get progress(){return this._progress}get activated(){return this._activated}get duration(){return this._duration}set duration(t){this._duration=t}get loop(){return this._loop}set loop(t){this._loop=t}get range(){return this._range}get easing(){return this._easing}set easing(t){this._easing=t}constructor(t){let{duration:e=n._F,loop:i=!1,range:s={min:0,max:1},easing:r=n.K$}=void 0===t?{}:t;this._duration=e,this._loop=i,this._range=s,this._easing=r,this._activated=!1,this.reset(0)}update(t){if(!this._activated)return this._val=this._end,0;const e=this._start,i=this._end,n=this._duration,r=this._val,o=this._loop,a=this._progress+t/n;this._progress=o?(0,s.zc)(a,0,1):(0,s.uZ)(a,0,1);const h=this._easing(this._progress);return this._val=(0,s.t7)(e,i,h),!o&&this._progress>=1&&(this._activated=!1),this._val-r}reset(t){const e=this._range,i=(0,s.uZ)(t,e.min,e.max);this._start=i,this._end=i,this._val=i,this._progress=0,this._activated=!1}add(t){const e=this._range;this._start=(0,s.uZ)(this._start+t,e.min,e.max),this._end=(0,s.uZ)(this._end+t,e.min,e.max),this._val=(0,s.uZ)(this._val+t,e.min,e.max)}setNewEndByDelta(t){const e=this._range;this._start=this._val,this._end=(0,s.uZ)(this._end+t,e.min,e.max),this._progress=0,this._activated=!0}setRange(t,e){this._start=(0,s.uZ)(this._start,t,e),this._end=(0,s.uZ)(this._end,t,e),this._range={min:t,max:e}}}},9290:(t,e,i)=>{i.d(e,{Z:()=>s});const s=class{constructor(t,e,i,s){this.program=t.createProgram(e,i),this.uniforms=s,this.uniformLocations=t.getUniformLocations(this.program,s)}}},1815:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(211),n=i(3181),r=i(8200);const o=class{constructor(){this.matrix=s.Ue(),this.rotation=n.Ue(),this.position=r.al(0,0,0),this.scale=r.al(1,1,1)}updateMatrix(){s.Iw(this.matrix,this.rotation,this.position,this.scale)}};const a=class extends o{constructor(t,e){super(),this.vao=t,this.program=e}destroy(t){t.releaseVAO(this.vao),t.releaseShaderResources(this.program)}}},9658:(t,e,i)=>{i.d(e,{Z:()=>n});class s extends Error{constructor(t,e){super(t),Object.setPrototypeOf(this,s.prototype),this.name="View360Error",this.code=e}}const n=s},7337:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(4074),n=i(9952),r=i(8388);class o extends s.Z{constructor(t){let{order:e,rotateUV:i}=t;const s=1/3,o=[];for(let n=1;n>=0;n--)for(let t=0;t<3;t++){const e=[t*s,.5*n,(t+1)*s,.5*n,(t+1)*s,.5*(n+1),t*s,.5*(n+1)];o.push(e)}i&&i.forEach(((t,e)=>{if(t===n.lD.ZERO)return;const i=o[e];let s;s=t===n.lD.CW_90?[1,2,3,0]:t===n.lD.CCW_90?[3,0,1,2]:[2,3,0,1];const r=Array(i.length);for(let n=0;n<i.length/2;n++)r[2*n+0]=i[2*s[n]+0],r[2*n+1]=i[2*s[n]+1];o[e]=r}));super([1,-1,1,-1,-1,1,-1,1,1,1,1,1,-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,1,-1,1,1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,-1,-1,-1,-1,-1,1,-1,-1,1,-1,1,1,1,1,1,1,-1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1],[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],(0,r.rM)(o,e,"BFUDRL").reduce(((t,e)=>t.concat(e)),[]))}}const a=o},4074:(t,e,i)=>{i.d(e,{Z:()=>n});const s=class{constructor(t,e){this.data=t,this.itemSize=e,this.count=t.length/e}};const n=class{constructor(t,e,i){this.vertices=new s(new Float32Array(t),3),this.indicies=new s(new Uint16Array(e),1),this.uvs=new s(new Float32Array(i),2)}}},8824:(t,e,i)=>{i.d(e,{ZP:()=>Q});var s=i(2665),n=i(8200),r=i(3181),o=i(211),a=i(7035),h=i(9952),l=i(8388);const _=class{get duration(){return this._motion.duration}set duration(t){this._motion.duration=t}get easing(){return this._motion.easing}set easing(t){this._motion.easing=t}constructor(t,e,i,s){let{duration:n=h._F,easing:r=h.K$}=void 0===s?{}:s;this._camera=t,this._motion=new a.Z({duration:n,easing:r,range:{min:0,max:1}}),this._from=e,this._to=i,this._finishPromise=new Promise((t=>{this._finish=t})),this._motion.setNewEndByDelta(1)}getFinishPromise(){return this._finishPromise}update(t){const e=this._camera,i=this._from,s=this._to,n=this._motion;n.update(t);const o=n.val,a=r.Ue(),h=(0,l.t7)(i.zoom,s.zoom,o);r.ZA(a,i.rotation,s.rotation,o),e.rotate(a,h),o>=1&&this._finish()}};class c extends s.Z{get aspect(){return this._aspect}get changed(){return this._changed}get yawRange(){return this._initialYawRange}set yawRange(t){this._initialYawRange=t}get pitchRange(){return this._initialPitchRange}set pitchRange(t){this._initialPitchRange=t}get zoomRange(){return this._initialZoomRange}set zoomRange(t){this._initialZoomRange=t}constructor(t){let{initialYaw:e,initialPitch:i,initialZoom:s,yawRange:a,pitchRange:h,zoomRange:l,fov:_}=t;super(),this.yaw=e,this.pitch=i,this.zoom=s,this.rollOffset=0,this.initialYaw=e,this.initialPitch=i,this.initialZoom=s,this.position=n.Ue(),this.animation=null,this._up=n.al(0,1,0),this._aspect=1,this._initialYawRange=a,this._initialPitchRange=h,this._initialZoomRange=l,this._yawRange=a,this._pitchRange=h,this._zoomRange=l,this.quaternion=r.Ue(),this._updateQuaternion(),this.viewMatrix=o.Ue(),this.projectionMatrix=o.Ue(),this.fov=_,this._maxRenderHeight=-1}destroy(){this.off()}resize(t,e){const i=this._aspect;this._aspect=t/e,this._aspect!==i&&this.updateMatrix()}lookAt(t){let{yaw:e=this.yaw,pitch:i=this.pitch,zoom:s=this.zoom}=t;const n=r.d9(this.quaternion),o=this.zoom;this.yaw=(0,l.zc)(e,0,360),this.pitch=(0,l.uZ)(i,-90,90),this.zoom=s,this._updateQuaternion();const a=Math.abs(s-o);(!r.fS(this.quaternion,n)||a>=10*h.Ib)&&this.updateMatrix()}rotate(t,e){void 0===e&&(e=this.zoom);const i=r.Fv(r.Ue(),t),s=r.fS(this.quaternion,i);r.JG(this.quaternion,i);const n=this.zoom,{yaw:o,pitch:a}=(0,l.b6)(i);this.yaw=o,this.pitch=a,this.zoom=e;const _=Math.abs(e-n);(!s||_>=10*h.Ib)&&this.updateMatrix()}async animateTo(t){let{yaw:e=this.yaw,pitch:i=this.pitch,zoom:s=this.zoom,duration:n=0,easing:o=h.K$}=void 0===t?{}:t;if(this.yaw===e&&this.pitch===i&&this.zoom===s)return;const a={rotation:r.d9(this.quaternion),zoom:this.zoom},c={rotation:(0,l.nk)(r.Ue(),e,i,this.rollOffset),zoom:s},u=new _(this,a,c,{duration:n,easing:o}),d=u.getFinishPromise();return this.animation=u,d.then((()=>{this.animation=null,this.trigger(h.u1.ANIMATION_END,{animation:u})})),d}restrictYawRange(t,e){this._yawRange={min:t,max:e}}restrictPitchRange(t,e){this._pitchRange={min:t,max:e}}restrictZoomRange(t,e){this._zoomRange={min:t,max:e}}restrictRenderHeight(t){this._maxRenderHeight=t}resetRange(){this._yawRange=this._initialYawRange,this._pitchRange=this._initialPitchRange,this._zoomRange=this._initialZoomRange,this._maxRenderHeight=-1}getYawRange(t){const e=this._yawRange,i=this._maxRenderHeight;if(!e)return h.oK;const s=.5*this.getHorizontalFov(t);let n=e.min,r=e.max;if(i>0){const t=(0,l.Jx)(s*h.ZX,this._aspect),o=.5*i,a=Math.tan(t),_=Math.sqrt((1+o*o)/(1+a*a)),c=Math.atan(Math.tan(s*h.ZX)*_)*h.jl;n=e.min+c,r=e.max-c}return n>r&&(n=0,r=0),{min:n,max:r}}getPitchRange(t){const e=this._pitchRange,i=this._maxRenderHeight;if(!e)return h.De;let s=e.min,n=e.max;if(i>0){const i=.5*this.getVerticalFov(t);s=e.min+i,n=e.max-i}return s>n&&(s=0,n=0),{min:Math.max(s,-90),max:Math.min(n,90)}}getZoomRange(){var t;const e=null!=(t=this._zoomRange)?t:h.ju,i=this.getHorizontalFov(e.max),s=this.getHorizontalFov(e.min),n=this.getHorizontalFov(this.zoom);return{min:Math.max(i,1),max:Math.min(s,180),current:n}}getHorizontalFov(t){return void 0===t&&(t=this.zoom),this._getZoomedHorizontalFov(t)*h.jl}getVerticalFov(t){void 0===t&&(t=this.zoom);const e=this._aspect,i=this._getZoomedHorizontalFov(t);return(0,l.Jx)(i,e)*h.jl}fovToZoom(t){const e=this.fov;return Math.tan(h.ZX*e*.5)/Math.tan(h.ZX*t*.5)}updateMatrix(){const t=this._up,e=this._aspect,i=this.viewMatrix,s=this.projectionMatrix,r=this.position,a=this.quaternion,h=n.Ue(),_=n.al(0,0,-1);n.VC(_,_,a),n.VC(h,t,a);const c=this._getZoomedHorizontalFov(),u=(0,l.Jx)(c,e);o.zB(i,r,_,h),o.G3(s,u,e,.1,100),this._changed=!0}onFrameRender(){this._changed=!1}_updateQuaternion(){(0,l.nk)(this.quaternion,this.yaw,this.pitch,this.rollOffset)}_getZoomedHorizontalFov(t){return void 0===t&&(t=this.zoom),2*Math.atan(Math.tan(h.ZX*this.fov*.5)/t)}}const u=c;var d=i(8861),p=i(2197),g=i(1028);class m extends s.Z{get active(){const t=this._pressed;return t.LEFT||t.UP||t.RIGHT||t.DOWN}constructor(){super(),this._onKeyDown=t=>{if(t.location!==KeyboardEvent.DOM_KEY_LOCATION_STANDARD)return;this._updateKeyPress(t,!0);const e=this._getPressedKeyCount();e<=0||(t.preventDefault(),1!==e||t.repeat||this.trigger(h.QA.INPUT_START,{srcEvent:t,isTouch:!1,isKeyboard:!0}))},this._onKeyUp=t=>{if(t.location!==KeyboardEvent.DOM_KEY_LOCATION_STANDARD)return;this._updateKeyPress(t,!1);this._getPressedKeyCount()>0||this.trigger(h.QA.INPUT_END,{isTouch:!1,isKeyboard:!0,scrolling:!1})},this._el=null,this._clearPressedKeys()}enable(t){this._el||(t.addEventListener(g.FP.KEY_DOWN,this._onKeyDown),t.addEventListener(g.FP.KEY_UP,this._onKeyUp),this._el=t,this._clearPressedKeys())}disable(){const t=this._el;t&&(t.removeEventListener(g.FP.KEY_DOWN,this._onKeyDown),t.removeEventListener(g.FP.KEY_UP,this._onKeyUp),this._el=null,this._clearPressedKeys())}update(){const t=this._getDeltaByPressedKeys();0===t.x&&0===t.y||this.trigger(h.QA.CHANGE,{delta:t,isTouch:!1,isKeyboard:!0})}_clearPressedKeys(){this._pressed=g.gf.reduce(((t,e)=>({...t,[e]:!1})),{})}_updateKeyPress(t,e){const i=this._pressed,s=null!=t.keyCode?g.Dx[t.keyCode]:g.$[t.key];s&&(i[s]=e)}_getPressedKeyCount(){return g.gf.filter((t=>this._pressed[t])).length}_getDeltaByPressedKeys(){const t=this._pressed;let e=0,i=0;return t.LEFT&&(e+=1),t.RIGHT&&(e-=1),t.UP&&(i+=1),t.DOWN&&(i-=1),{x:e,y:i}}}const E=m;class b extends s.Z{get enabled(){return this._enabled}get enableBlocked(){return this._enableBlocked}get animating(){return this._keyboardInput.active||this._xMotion.activated||this._yMotion.activated}get yaw(){return this._xMotion}get pitch(){return this._yMotion}get scrollable(){return this._touchInput.scrollable}set scrollable(t){this._touchInput.scrollable=t}get pointerScale(){return this._pointerScale}set pointerScale(t){this._pointerScale=t}get keyboardScale(){return this._keyboardScale}set keyboardScale(t){this._keyboardScale=t}get duration(){return this._duration}set duration(t){this._duration=t,this._xMotion.duration=t,this._yMotion.duration=t}get easing(){return this._easing}set easing(t){this._easing=t,this._xMotion.easing=t,this._yMotion.easing=t}get disablePitch(){return this._disablePitch}set disablePitch(t){this._disablePitch=t}get disableYaw(){return this._disableYaw}set disableYaw(t){this._disableYaw=t}get disableKeyboard(){return this._disableKeyboard}set disableKeyboard(t){this._disableKeyboard=t}constructor(t,e,i){let{duration:s=h._F,easing:n=h.K$,pointerScale:r=[1,1],keyboardScale:o=[1,1],disablePitch:l=!1,disableYaw:_=!1,disableKeyboard:c=!1}=void 0===i?{}:i;super(),this._onInputStart=t=>{this._changedWhileDragging=!1,this.trigger(h.QA.INPUT_START,{...t,inputType:"rotate"})},this._onChange=t=>{const e=t.delta,i=1/this._zoomScale,s=this._screenScale,n=this._keyboardScale,r=this._pointerScale;let o;o=t.isKeyboard?[n[0]*i,n[1]*i]:[r[0]*s[0]*i,r[1]*s[1]*i];const a=e.x*o[0],h=e.y*o[1];this._xMotion.setNewEndByDelta(a),this._yMotion.setNewEndByDelta(h),this._changedWhileDragging=!0},this._onInputEnd=t=>{this.trigger(h.QA.INPUT_END,{...t,inputType:"rotate"}),this._changedWhileDragging||t.isKeyboard||t.scrolling||this.trigger(h.QA.STATIC_CLICK,{isTouch:t.isTouch}),this._changedWhileDragging=!1},this._controlEl=t,this._pointerScale=r,this._keyboardScale=o,this._duration=s,this._easing=n,this._disablePitch=l,this._disableYaw=_,this._disableKeyboard=c,this._enableBlocked=e,this._mouseInput=new d.Z,this._touchInput=new p.Z,this._keyboardInput=new E,this._xMotion=new a.Z({duration:s,range:h.oK,easing:n}),this._yMotion=new a.Z({duration:s,range:h.De,easing:n}),this._screenScale=[1,1],this._zoomScale=1,this._enabled=!1,this._changedWhileDragging=!1,this._bindInputs()}destroy(){this.disable(),this._mouseInput.off(),this._touchInput.off(),this._keyboardInput.off(),this.off(),this._changedWhileDragging=!1}update(t){if(!this._enabled)return;const e=this._xMotion,i=this._yMotion,s=this._keyboardInput;this._disableKeyboard||s.update(),this._disablePitch||i.update(t),this._disableYaw||e.update(t)}updateRange(t,e){const i=t.getYawRange(e),s=t.getPitchRange(e);this._xMotion.setRange(i.min,i.max),this._yMotion.setRange(s.min,s.max)}setZoomScale(t){this._zoomScale=t}resize(t,e,i,s){const n=(0,l.Jx)(t*h.ZX,e)*h.jl;this._screenScale[0]=t/i,this._screenScale[1]=n/s}enable(){if(this._enabled)return;const t=this._controlEl;this._mouseInput.enable(t),this._touchInput.enable(t),this._keyboardInput.enable(t),this._enabled=!0,this._enableBlocked=!1,this.trigger(h.QA.ENABLE,{control:this,updateCursor:!0})}disable(){this._enabled&&(this._mouseInput.disable(),this._touchInput.disable(),this._keyboardInput.disable(),this._enabled=!1,this.trigger(h.QA.DISABLE,{updateCursor:!0}))}sync(t){this.updateRange(t,t.zoom),this._xMotion.reset(t.yaw),this._yMotion.reset(t.pitch)}_bindInputs(){const t=this._mouseInput,e=this._touchInput,i=this._keyboardInput;t.on(h.QA.INPUT_START,this._onInputStart),t.on(h.QA.CHANGE,this._onChange),t.on(h.QA.INPUT_END,this._onInputEnd),e.on(h.QA.INPUT_START,this._onInputStart),e.on(h.QA.CHANGE,this._onChange),e.on(h.QA.INPUT_END,this._onInputEnd),i.on(h.QA.INPUT_START,this._onInputStart),i.on(h.QA.CHANGE,this._onChange),i.on(h.QA.INPUT_END,this._onInputEnd)}}const T=b;class v extends s.Z{get scrollable(){return this._scrollable}set scrollable(t){this._scrollable=t}constructor(){super(),this._onWheel=t=>{const e=this._scrollable;if(0===t.deltaY||e)return;t.preventDefault(),t.stopPropagation(),this._inputTimer<0?this.trigger(h.QA.INPUT_START,{srcEvent:t,isTouch:!1,isKeyboard:!1}):this._clearTimer();const i=this._baseScale*t.deltaY;this.trigger(h.QA.CHANGE,{delta:i,isTouch:!1,isKeyboard:!1}),this._inputTimer=window.setTimeout((()=>{this.trigger(h.QA.INPUT_END,{isTouch:!1,isKeyboard:!1,scrolling:!1}),this._inputTimer=-1}),h._F)},this._el=null,this._baseScale=.04,this._scrollable=!1,this._inputTimer=-1}enable(t){this._el||(t.addEventListener(g.FP.WHEEL,this._onWheel,{passive:!1,capture:!1}),this._el=t,this._clearTimer())}disable(){const t=this._el;t&&(t.removeEventListener(g.FP.WHEEL,this._onWheel,!1),this._el=null,this._clearTimer())}_clearTimer(){window.clearTimeout(this._inputTimer),this._inputTimer=-1}}const R=v;class f extends s.Z{constructor(){super(),this._onTouchMove=t=>{const e=t.touches;if(2!==e.length)return;if(!t.cancelable)return;t.preventDefault(),t.stopPropagation();const i=this._prevDistance,s=[e[0].pageX-e[1].pageX,e[0].pageY-e[1].pageY],n=Math.sqrt(s[0]*s[0]+s[1]*s[1])*this._baseScale,r=this._isFirstTouch?0:n-i;this._isFirstTouch&&this.trigger(h.QA.INPUT_START,{srcEvent:t,isTouch:!0,isKeyboard:!1}),this._prevDistance=n,this._isFirstTouch=!1,this.trigger(h.QA.CHANGE,{delta:r,isTouch:!0,isKeyboard:!1})},this._onTouchEnd=t=>{0===t.touches.length&&(this._isFirstTouch||this.trigger(h.QA.INPUT_END,{isTouch:!0,isKeyboard:!1,scrolling:!1}),this._prevDistance=-1,this._isFirstTouch=!0)},this._el=null,this._baseScale=-.2,this._prevDistance=-1,this._isFirstTouch=!0}enable(t){this._el||(t.addEventListener(g.FP.TOUCH_MOVE,this._onTouchMove,{passive:!1,capture:!1}),t.addEventListener(g.FP.TOUCH_END,this._onTouchEnd),this._el=t,this._prevDistance=-1,this._isFirstTouch=!0)}disable(){const t=this._el;t&&(t.removeEventListener(g.FP.TOUCH_MOVE,this._onTouchMove,!1),t.removeEventListener(g.FP.TOUCH_END,this._onTouchEnd),this._el=null)}}const A=f;class y extends s.Z{get enabled(){return this._enabled}get enableBlocked(){return this._enableBlocked}get animating(){return this._motion.activated}get zoom(){return this._motion.val}get scrollable(){return this._wheelInput.scrollable}set scrollable(t){this._wheelInput.scrollable=t}get range(){return this._motion.range}get scale(){return this._scale}set scale(t){this._scale=t}get duration(){return this._motion.duration}get easing(){return this._motion.easing}constructor(t,e,i){let{scale:s=1,duration:n=h._F,easing:r=h.K$}=void 0===i?{}:i;super(),this._onInputStart=t=>{this.trigger(h.QA.INPUT_START,{...t,inputType:"zoom"})},this._onChange=t=>{let{delta:e}=t;const i=e*this._scale;this._motion.setNewEndByDelta(i)},this._onInputEnd=t=>{this.trigger(h.QA.INPUT_END,{...t,inputType:"zoom"})},this._scale=s,this._controlEl=t,this._enableBlocked=e,this._wheelInput=new R,this._pinchInput=new A,this._motion=new a.Z({duration:n,easing:r,range:h.oK}),this._enabled=!1,this._bindInputs()}destroy(){this.disable(),this._wheelInput.off(),this._pinchInput.off(),this.off()}update(t){if(!this._enabled)return;this._motion.update(t)}enable(){if(this._enabled)return;const t=this._controlEl;this._wheelInput.enable(t),this._pinchInput.enable(t),this._enabled=!0,this._enableBlocked=!1,this.trigger(h.QA.ENABLE,{control:this,updateCursor:!1})}disable(){this._enabled&&(this._wheelInput.disable(),this._pinchInput.disable(),this._enabled=!1,this.trigger(h.QA.DISABLE,{updateCursor:!1}))}sync(t){const e=this._motion,i=t.getZoomRange();e.setRange(i.min,i.max),e.reset(i.current)}_bindInputs(){const t=this._wheelInput,e=this._pinchInput;t.on(h.QA.INPUT_START,this._onInputStart),t.on(h.QA.CHANGE,this._onChange),t.on(h.QA.INPUT_END,this._onInputEnd),e.on(h.QA.INPUT_START,this._onInputStart),e.on(h.QA.CHANGE,this._onChange),e.on(h.QA.INPUT_END,this._onInputEnd)}}const w=y;var O=i(5821);const P=class{get useGrabCursor(){return this._useGrabCursor}set useGrabCursor(t){t!==this._useGrabCursor&&(this._useGrabCursor=t,t&&this._enabled?this._setCursor(g.WV.GRAB):t||this._setCursor(g.WV.NONE))}get disableContextMenu(){return this._disableContextMenu}set disableContextMenu(t){t!==this._disableContextMenu&&(this._disableContextMenu=t,t&&this._enabled?this._blockContextMenu():t||this._restoreContextMenu())}get scrollable(){return this._rotateControl.scrollable}set scrollable(t){this._rotateControl.scrollable=t}get wheelScrollable(){return this._zoomControl.scrollable}set wheelScrollable(t){this._zoomControl.scrollable=t}get ignoreZoomScale(){return this._ignoreZoomScale}set ignoreZoomScale(t){this._ignoreZoomScale=t}get enabled(){return this._enabled}get rotate(){return this._rotateControl}get zoom(){return this._zoomControl}get gyro(){return this._gyroControl}get animating(){return this._rotateControl.animating||this._zoomControl.animating||this._gyroControl.animating}constructor(t,e,i){let{useGrabCursor:s,scrollable:n,wheelScrollable:r,disableContextMenu:o,rotate:a,zoom:h,gyro:_}=i;this._preventContextMenu=t=>{t.preventDefault()},this._onInputStart=t=>{this._useGrabCursor&&!t.isKeyboard&&this._setCursor(g.WV.GRABBING)},this._onInputEnd=t=>{this._useGrabCursor&&!t.isKeyboard&&this._setCursor(g.WV.GRAB)},this._onEnable=t=>{let{control:e,updateCursor:i}=t;i&&this._useGrabCursor&&this._setCursor(g.WV.GRAB),e.sync(this._camera)},this._onDisable=t=>{let{updateCursor:e}=t;e&&this._setCursor(g.WV.NONE)},this._onCameraAnimationEnd=t=>{let{animation:e}=t;e.getFinishPromise().then((()=>{this.sync()}))},this._useGrabCursor=s,this._disableContextMenu=o,this._camera=e,this._controlEl=t,this._ignoreZoomScale=!1,this._enabled=!1,this._rotateControl=new T(t,!a,(0,l.PO)(a)),this._zoomControl=new w(t,!h,(0,l.PO)(h)),this._gyroControl=new O.Z(!_,(0,l.PO)(_)),this._rotateControl.scrollable=n,this._zoomControl.scrollable=r,this._bindEvents()}destroy(){this.disable(),this._rotateControl.destroy(),this._zoomControl.destroy(),this._setCursor(g.WV.NONE)}resize(t,e){const i=this._camera;this._rotateControl.resize(i.fov,i.aspect,t,e)}async enable(){this._enabled||(this._rotateControl.enableBlocked||this._rotateControl.enable(),this._zoomControl.enableBlocked||this._zoomControl.enable(),this._gyroControl.enableBlocked||await O.Z.isAvailable()&&this._gyroControl.enable(),this.sync(),this._disableContextMenu&&this._blockContextMenu(),this._enabled=!0)}disable(){this._enabled&&(this._rotateControl.disable(),this._zoomControl.disable(),this._gyroControl.disable(),this._restoreContextMenu(),this._enabled=!1)}update(t){const e=this._camera,i=this._rotateControl,s=this._zoomControl,n=this._gyroControl;s.update(t);const r=(0,l.h4)(e.fov,s.zoom),o=this._ignoreZoomScale?1:Math.max(r,1);i.setZoomScale(o),i.updateRange(e,r),i.update(t);const a=i.yaw,h=i.pitch;n.enabled?n.update(e,a,h,r):e.lookAt({yaw:a.val,pitch:h.val,zoom:r})}sync(){const t=this._camera;this._zoomControl.sync(t),this._rotateControl.sync(t)}_blockContextMenu(){this._controlEl.addEventListener(g.FP.CONTEXT_MENU,this._preventContextMenu)}_restoreContextMenu(){this._controlEl.removeEventListener(g.FP.CONTEXT_MENU,this._preventContextMenu)}_setCursor(t){if(!this._useGrabCursor&&t!==g.WV.NONE)return;this._controlEl.style.cursor=t}_bindEvents(){const t=this._rotateControl,e=this._zoomControl;t.on(h.QA.INPUT_START,this._onInputStart),t.on(h.QA.INPUT_END,this._onInputEnd),t.on(h.QA.ENABLE,this._onEnable),t.on(h.QA.DISABLE,this._onDisable),e.on(h.QA.ENABLE,this._onEnable),e.on(h.QA.DISABLE,this._onDisable),this._camera.on(h.u1.ANIMATION_END,this._onCameraAnimationEnd)}};var x=i(518);const I=class{constructor(t){let{width:e,height:i,flipY:s}=t;this.width=e,this.height=i,this.flipY=s,this.wrapS=WebGLRenderingContext.CLAMP_TO_EDGE,this.wrapT=WebGLRenderingContext.CLAMP_TO_EDGE}destroy(){}isVideo(){return!1}isCube(){return!1}};const C=class extends I{constructor(t){let{source:e,width:i,height:s,flipY:n}=t;super({width:i,height:s,flipY:n}),this.source=e}};const S=class extends C{destroy(){const t=this.source;t.pause(),t.removeAttribute("src"),t.load()}isVideo(){return!0}isPaused(){const t=this.source;return t.paused||t.ended||t.readyState<=2}hasAudio(){const t=this.source;return t.audioTracks?t.audioTracks.length>0:null!=t.webkitAudioDecodedByteCount?t.webkitAudioDecodedByteCount>0:null==t.mozHasAudio||t.mozHasAudio}};const N=class extends I{constructor(t){let{sources:e,width:i,height:s,flipY:n}=t;super({width:i,height:s,flipY:n}),this.sources=e}isCube(){return!0}};const M=class{constructor(){this._loadChecker=new x.ZP}async load(t,e){if(e)return this.loadVideo(t,(0,l.PO)(e));if(Array.isArray(t)&&t.length>1)return this.loadCubeImage(t);{const e=Array.isArray(t)?t[0]:t;return this.loadImage(e)}}async loadImage(t){const e=this._toImageArray(t);return this._load(e,(t=>{const i=e[0];t(new C({source:i,width:i.naturalWidth,height:i.naturalHeight,flipY:!0}))}))}async loadCubeImage(t){const e=this._toImageArray(t);return this._load(e,(t=>{t(new N({sources:e,width:e[0].naturalWidth,height:e[0].naturalHeight,flipY:!1}))}))}async loadVideo(t,e){const i={autoplay:!0,muted:!0,loop:!1,volume:1,...e},s=this._toVideoElement(t,i);return this._load([s],(t=>{const{autoplay:e,muted:n}=i;s.currentTime=0,e&&n&&s.play().catch((()=>{})),t(new S({source:s,width:s.videoWidth,height:s.videoHeight,flipY:!0}))}))}_load(t,e){const i=this._loadChecker;return new Promise(((s,n)=>{i.once("ready",(t=>{t.errorCount>0||e(s)})),i.once("error",n),i.check(t)}))}_toImageArray(t){return(Array.isArray(t)?t:[t]).map((t=>{if((0,l.HD)(t)){const e=new Image;return e.crossOrigin="anonymous",e.src=t,e}return t}))}_toVideoElement(t,e){let{muted:i,loop:s,volume:n}=e;if(t instanceof HTMLVideoElement)return t;const r=document.createElement("video");r.crossOrigin="anonymous",r.playsInline=!0,r.setAttribute("webkit-playsinline",""),r.muted=i,r.volume=n,r.loop=s,Array.isArray(t)?t.forEach((t=>this._appendSourceElement(r,t))):this._appendSourceElement(r,t);return r.querySelectorAll("source").length>0&&r.readyState<1&&r.load(),r}_appendSourceElement(t,e){if(e instanceof HTMLSourceElement)return e;const i=document.createElement("source");i.src=e,t.appendChild(i)}};const D=class{constructor(t,e){void 0===e&&(e=window),this.maxDeltaTime=t,this._context=e,this._rafId=-1,this._rafTimer=-1,this._lastUpdateTime=-1}start(t){const e=this._context;if(!e||!t)return;if(this._rafId>=0||this._rafTimer>=0)return;const i=(s,n)=>{const r=Date.now(),o=Math.min(r-this._lastUpdateTime,1e3*this.maxDeltaTime);t(o,n),this._lastUpdateTime=r,this._rafId=e.requestAnimationFrame(i)};this._lastUpdateTime=Date.now(),this._rafId=e.requestAnimationFrame(i)}stop(){this._rafId>=0&&this._context.cancelAnimationFrame(this._rafId),this._rafTimer>=0&&clearTimeout(this._rafTimer),this._rafId=-1,this._rafTimer=-1}changeContext(t){this.stop(),this._context=t}};const L=class{get useResizeObserver(){return this._useResizeObserver}get enabled(){return this._enabled}constructor(t,e){this._skipFirstResize=(()=>{let t=!0;return()=>{t?t=!1:this._onResize()}})(),this._useResizeObserver=t,this._enabled=!1,this._resizeObserver=null,this._onResize=e}enable(t){if(this._enabled&&this.disable(),this._useResizeObserver&&window.ResizeObserver){const e=t.getBoundingClientRect(),i=0!==e.width||0!==e.height,s=new ResizeObserver(i?this._skipFirstResize:this._onResize);s.observe(t),this._resizeObserver=s}else window.addEventListener(g.FP.RESIZE,this._onResize);return this._enabled=!0,this}disable(){if(!this._enabled)return this;const t=this._resizeObserver;return t?(t.disconnect(),this._resizeObserver=null):window.removeEventListener(g.FP.RESIZE,this._onResize),this._enabled=!1,this}};const U=class{get enabled(){return this._enabled}get enableBlocked(){return this._enableBlocked}get playing(){return this._enabled&&!this._interrupted}get delay(){return this._delay}set delay(t){this._delay=t}get delayOnMouseLeave(){return this._delayOnMouseLeave}set delayOnMouseLeave(t){this._delayOnMouseLeave=t}get speed(){return this._speed}set speed(t){this._speed=t}get pauseOnHover(){return this._pauseOnHover}set pauseOnHover(t){this._pauseOnHover=t}get canInterrupt(){return this._canInterrupt}set canInterrupt(t){this._canInterrupt=t}get disableOnInterrupt(){return this._disableOnInterrupt}set disableOnInterrupt(t){this._disableOnInterrupt=t}constructor(t,e,i){this._onInputStart=()=>{this._canInterrupt&&(this._interrupted=!0,this._clearTimeout())},this._onInputEnd=()=>{this._setUninterruptedAfterDelay(this._delay)},this._onGyroEnable=()=>{this.disable()},this._onMouseEnter=()=>{this._pauseOnHover&&(this._interrupted=!0,this._hovering=!0)},this._onMouseLeave=()=>{this._pauseOnHover&&(this._hovering=!1,this._setUninterruptedAfterDelay(this._delayOnMouseLeave))},this._camera=t.camera,this._control=t.control,this._element=e,this._enabled=!1,this._interrupted=!1,this._interruptionTimer=-1,this._hovering=!1;const{delay:s=2e3,delayOnMouseLeave:n=0,speed:r=1,pauseOnHover:o=!1,canInterrupt:a=!0,disableOnInterrupt:h=!1}=(0,l.PO)(i);this._enableBlocked=!i,this._delay=s,this._delayOnMouseLeave=n,this._speed=r,this._pauseOnHover=o,this._canInterrupt=a,this._disableOnInterrupt=h}destroy(){this.disable()}update(t){if(!this._enabled)return;if(this._interrupted)return void(this._disableOnInterrupt&&this.disable());const e=this._camera,i=-this._speed*t/100;e.yaw=(0,l.zc)(e.yaw+i,0,360)}enable(){const t=this._control,e=this._element;this._enabled||t.gyro.enabled||(t.rotate.on(h.QA.INPUT_START,this._onInputStart),t.rotate.on(h.QA.INPUT_END,this._onInputEnd),t.zoom.on(h.QA.INPUT_START,this._onInputStart),t.zoom.on(h.QA.INPUT_END,this._onInputEnd),t.gyro.on(h.QA.ENABLE,this._onGyroEnable),e.addEventListener(g.FP.MOUSE_ENTER,this._onMouseEnter,!1),e.addEventListener(g.FP.MOUSE_LEAVE,this._onMouseLeave,!1),this._enabled=!0,this._enableBlocked=!1)}enableAfterDelay(){this.enable(),this._interrupted=!0,this._setUninterruptedAfterDelay(this._delay)}disable(){if(!this._enabled)return;const t=this._control,e=this._element;t.rotate.off(h.QA.INPUT_START,this._onInputStart),t.rotate.off(h.QA.INPUT_END,this._onInputEnd),t.zoom.off(h.QA.INPUT_START,this._onInputStart),t.zoom.off(h.QA.INPUT_END,this._onInputEnd),t.gyro.off(h.QA.ENABLE,this._onGyroEnable),e.removeEventListener(g.FP.MOUSE_ENTER,this._onMouseEnter,!1),e.removeEventListener(g.FP.MOUSE_LEAVE,this._onMouseLeave,!1),this._enabled=!1,this._interrupted=!1,this._hovering=!1,this._clearTimeout()}_setUninterruptedAfterDelay(t){this._hovering||(this._clearTimeout(),t>0?this._interruptionTimer=window.setTimeout((()=>{this._interrupted=!1,this._interruptionTimer=-1}),t):(this._interrupted=!1,this._interruptionTimer=-1))}_clearTimeout(){this._interruptionTimer>=0&&(window.clearTimeout(this._interruptionTimer),this._interruptionTimer=-1)}};var F=i(6260);class z extends s.Z{constructor(t,e){void 0===e&&(e={}),super(),this.destroy=()=>{this.exit(),this.off()},this._onSessionEnd=()=>{this.exit(),this.trigger(F.FP.VR_END)},this._xrSession=null,this._xrRefSpace=null,this._ctx=t,this._options=e}async isAvailable(){const t=window.navigator.xr;return!!t&&t.isSessionSupported(h.AG).then((t=>t)).catch((()=>!1))}async enter(){const t=this._ctx,e=window.navigator.xr;if(!e)return;await O.Z.requestSensorPermission();const i={requiredFeatures:[h.gI],...this._options};await t.makeXRCompatible();const s=await e.requestSession(h.AG,i);t.bindXRLayer(s);const n=await s.requestReferenceSpace(h.gI);this._setSession(s,n),this.trigger(F.FP.VR_START,{session:s})}exit(){const t=this._xrSession;t&&t.end().catch((()=>{})),this._xrSession=null,this._xrRefSpace=null}canRender(t){const e=this._xrRefSpace;if(!e)return!1;return!!t.getViewerPose(e)}getEyeParams(t){const e=t.session,i=t.getViewerPose(this._xrRefSpace);if(!i)return null;const s=e.renderState.baseLayer;return s?i.views.map((t=>({viewport:s.getViewport(t),vMatrix:t.transform.inverse.matrix,pMatrix:t.projectionMatrix}))):null}_setSession(t,e){this._xrSession=t,this._xrRefSpace=e,t.addEventListener(g.FP.XR_END,this._onSessionEnd)}}const Z=z;var B=i(9658),G=i(4096);const V=class{constructor(t,e){this.element=t,this.position=e}};var k=i(4949);const W=class{constructor(t,e,i){let{zoom:s=!1}=i;this._containerEl=(0,l.S3)("."+F.Qz.HOTSPOT_CONTAINER,t),this._renderer=e,this._hotspots=[],this._zoom=s}refresh(){const t=this._containerEl;if(!t)return;const e=[].slice.apply(t.querySelectorAll("."+F.Qz.HOTSPOT));this._hotspots=e.map((t=>this._parseHotspot(t)))}render(t){const e=this._hotspots,i=.5*this._renderer.width,s=.5*this._renderer.height,r=t.zoom,o="translate(-50%, -50%)",a=this._zoom?"scale("+r+")":"";e.forEach((e=>{const r=e.position,h=n.Ue();if(n.JG(h,r),n.fF(h,h,t.viewMatrix),n.fF(h,h,t.projectionMatrix),h[2]>1||h[2]<0)return void e.element.classList.remove(F.Qz.HOTSPOT_VISIBLE);const l=G.al(h[0]*i+i,-h[1]*s+s);e.element.classList.add(F.Qz.HOTSPOT_VISIBLE),e.element.style.transform=[o,"translate("+l[0]+"px, "+l[1]+"px)",a].join(" ")}))}_parseHotspot(t){const e=t.dataset.yaw,i=t.dataset.pitch,s=t.dataset.position;if(e||i){const s=e?parseFloat(e):0,n=i?parseFloat(i):0,r=this._yawPitchToVec3(s,n);return new V(t,r)}if(s){const e=s.split(" ").map((t=>parseFloat(t)));if(e.length<3)throw new B.Z(k.ZP.MESSAGES.INSUFFICIENT_ARGS(s,'hotspot attribute "data-position"'),k.ZP.CODES.INSUFFICIENT_ARGS);return new V(t,n.al(e[0],e[1],e[2]))}{const e=n.al(0,0,-1);return new V(t,e)}}_yawPitchToVec3(t,e){const i=t*h.ZX,s=e*h.ZX,r=n.Ue();return r[1]=Math.sin(s),r[2]=Math.cos(s),r[0]=r[2]*Math.sin(-i),r[2]=-r[2]*Math.cos(-i),r}};const H=class{get count(){return this.geometry.indicies.count}constructor(t,e,i){this.obj=t,this.geometry=e,this.buffers=i}};const Y=class{get canvas(){return this._canvas}get maxTextureSize(){return this._maxTextureSize}get isWebGL2(){return this._isWebGL2}get supportVAO(){return this._isWebGL2||!!this._extensions.vao}get lost(){return this._contextLost}get debug(){return this._debug}constructor(t,e){this._onContextLost=()=>{this._canvas.classList.add(F.Qz.CTX_LOST),this._contextLost=!0},this._onContextRestore=()=>{this._canvas.classList.remove(F.Qz.CTX_LOST),this._contextLost=!1},this._canvas=t,this._contextLost=!1,this._debug=e,this._extensions={vao:null,loseContext:null}}init(){const t=this._canvas,{gl:e,isWebGL2:i}=this._getContext(t);this._gl=e,this._maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this._isWebGL2=i,this._isWebGL2||(this._extensions.vao=e.getExtension("OES_vertex_array_object")),this._extensions.loseContext=e.getExtension("WEBGL_lose_context"),t.addEventListener(g.FP.CONTEXT_LOST,this._onContextLost),t.addEventListener(g.FP.CONTEXT_RESTORED,this._onContextRestore)}destroy(){const t=this._gl,e=this._canvas;t&&(t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),e.removeEventListener(g.FP.CONTEXT_LOST,this._onContextLost),e.removeEventListener(g.FP.CONTEXT_RESTORED,this._onContextRestore)}forceLoseContext(){const t=this._extensions.loseContext;t&&t.loseContext()}forceRestoreContext(){const t=this._extensions.loseContext;t&&t.restoreContext()}clear(){const t=this._gl;t.clear(t.COLOR_BUFFER_BIT)}resize(){const t=this._gl;t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}viewport(t,e,i,s){this._gl.viewport(t,e,i,s)}createVAO(t,e){const i=this._createNativeVAO(),s=new H(i,t,{indicies:this._createBuffer(),position:this._createBuffer(),uv:this._createBuffer()});return i&&(this._bindNativeVAO(i),this._supplyGeometryData(s,e),this._bindNativeVAO(null),this._unbindBuffers()),s}draw(t,e){const i=this._gl;t.obj?this._bindNativeVAO(t.obj):this._supplyGeometryData(t,e),i.drawElements(i.TRIANGLES,t.count,i.UNSIGNED_SHORT,0),t.obj?this._bindNativeVAO(null):this._unbindBuffers()}releaseVAO(t){t.obj&&this._deleteNativeVAO(t.obj),this._deleteBuffer(t.buffers.indicies),this._deleteBuffer(t.buffers.position),this._deleteBuffer(t.buffers.uv)}getUniformLocations(t,e){const i=this._gl,s=Object.keys(e).reduce(((e,s)=>(e[s]=i.getUniformLocation(t,s),e)),{});return{...this._getCommonUniformLocations(t),...s}}updateCommonUniforms(t,e,i){const s=this._gl,n=i.uniformLocations,r=t.matrix,a=o.Ue();o.Jp(a,e.viewMatrix,r),s.uniformMatrix4fv(n.uMVMatrix,!1,a),s.uniformMatrix4fv(n.uPMatrix,!1,e.projectionMatrix)}updateVRUniforms(t,e,i,s){const n=this._gl,r=t.uniformLocations;n.uniformMatrix4fv(r.uMVMatrix,!1,e),n.uniformMatrix4fv(r.uPMatrix,!1,i),r.uEye&&n.uniform1f(r.uEye,s)}updateUniforms(t){const e=this._gl,i=t.uniforms,s=t.uniformLocations;for(const n in i){const t=i[n],r=s[n];t&&(t.needsUpdate&&t.update(e,r,this._isWebGL2))}}releaseShaderResources(t){const e=this._gl,i=t.uniforms;for(const s in i){const t=i[s];t&&(t.needsUpdate&&t.destroy(e))}e.deleteProgram(t.program)}useProgram(t){this._gl.useProgram(t.program)}createProgram(t,e){const i=this._gl,s=i.createProgram(),n=this._compileShader(i.VERTEX_SHADER,t),r=this._compileShader(i.FRAGMENT_SHADER,e);if(i.attachShader(s,n),i.attachShader(s,r),i.bindAttribLocation(s,0,"position"),i.bindAttribLocation(s,1,"uv"),i.linkProgram(s),this._debug&&!i.getProgramParameter(s,i.LINK_STATUS)){let t=null;throw i.getShaderParameter(n,i.COMPILE_STATUS)?i.getShaderParameter(r,i.COMPILE_STATUS)||(t=i.getShaderInfoLog(r)):t=i.getShaderInfoLog(n),new B.Z(k.ZP.MESSAGES.FAILED_LINKING_PROGRAM(i.getProgramInfoLog(s),t),k.ZP.CODES.FAILED_LINKING_PROGRAM)}return i.deleteShader(n),i.deleteShader(r),s}createWebGLTexture(t){const e=this._gl,i=e.createTexture();if(e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapS),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapT),!t.isVideo()&&this._isWebGL2){const i=e;i.texStorage2D(i.TEXTURE_2D,1,i.RGBA8,t.width,t.height)}return i}createWebGLCubeTexture(t,e){const i=this._gl,s=i.createTexture();if(i.bindTexture(i.TEXTURE_CUBE_MAP,s),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_WRAP_S,t.wrapS),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_WRAP_T,t.wrapT),this._isWebGL2){const t=i;t.texStorage2D(t.TEXTURE_CUBE_MAP,1,t.RGBA8,e,e)}return s}async makeXRCompatible(){const t=this._gl,e=t.getContextAttributes();e&&!0!==e.xrCompatible&&await t.makeXRCompatible()}bindXRLayer(t){const e=this._gl,i=new XRWebGLLayer(t,e);t.updateRenderState({baseLayer:i})}bindXRFrame(t){const e=this._gl,i=t.session.renderState.baseLayer;e.bindFramebuffer(e.FRAMEBUFFER,i.framebuffer)}useDefaultFrameBuffer(){const t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,null)}_createBuffer(){return this._gl.createBuffer()}_deleteBuffer(t){return this._gl.deleteBuffer(t)}_createNativeVAO(){const t=this._gl;if(this._isWebGL2)return t.createVertexArray();{const t=this._extensions.vao;return(null==t?void 0:t.createVertexArrayOES())||null}}_bindNativeVAO(t){const e=this._gl;if(this._isWebGL2)e.bindVertexArray(t);else{const e=this._extensions.vao;null==e||e.bindVertexArrayOES(t)}}_deleteNativeVAO(t){const e=this._gl;if(this._isWebGL2)e.deleteVertexArray(t);else{const e=this._extensions.vao;null==e||e.deleteVertexArrayOES(t)}}_supplyGeometryData(t,e){const i=t.geometry;this._supplyIndiciesData(i.indicies,t.buffers.indicies),this._supplyAttributeData(i.vertices,e.program,"position",t.buffers.position),this._supplyAttributeData(i.uvs,e.program,"uv",t.buffers.uv)}_unbindBuffers(){const t=this._gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindBuffer(t.ARRAY_BUFFER,null)}_supplyIndiciesData(t,e){const i=this._gl;i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t.data,i.STATIC_DRAW)}_supplyAttributeData(t,e,i,s){const n=this._gl,r=n.getAttribLocation(e,i);r<0||(n.bindBuffer(n.ARRAY_BUFFER,s),n.bufferData(n.ARRAY_BUFFER,t.data,n.STATIC_DRAW),n.vertexAttribPointer(r,t.itemSize,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r))}_compileShader(t,e){const i=this._gl,s=i.createShader(t);return i.shaderSource(s,e),i.compileShader(s),s}_getCommonUniformLocations(t){const e=this._gl;return{uMVMatrix:e.getUniformLocation(t,"uMVMatrix"),uPMatrix:e.getUniformLocation(t,"uPMatrix")}}_getContext(t){const e=["webgl2","webgl","experimental-webgl","webkit-3d","moz-webgl"];let i=null,s=!1;const n={preserveDrawingBuffer:!1,antialias:!1},r=t=>t.statusMessage;t.addEventListener(g.FP.CONTEXT_CREATE_ERROR,r);for(const a of e){try{i=t.getContext(a,n),s="webgl2"===a}catch(o){}if(i)break}if(t.removeEventListener(g.FP.CONTEXT_CREATE_ERROR,r),!i)throw new B.Z(k.ZP.MESSAGES.WEBGL_NOT_SUPPORTED,k.ZP.CODES.WEBGL_NOT_SUPPORTED);return{gl:i,isWebGL2:s}}};const X=class{get canvas(){return this._canvas}get width(){return this._elementSize.x}get height(){return this._elementSize.y}get pixelRatio(){return this._pixelRatio}get aspect(){return this._elementSize.x/this._elementSize.y}constructor(t,e){this._canvas=t,this._elementSize={x:0,y:0},this._pixelRatio=1,this.ctx=new Y(t,e)}destroy(){const t=this._canvas;this.ctx.destroy(),t.width=1,t.height=1}resize(){const t=this._canvas,e=this._elementSize,i=window.devicePixelRatio;e.x=t.clientWidth,e.y=t.clientHeight,t.width=e.x*i,t.height=e.y*i,this._pixelRatio=i,this.ctx.resize()}render(t,e){const i=this.ctx,s=t.getMesh();!i.lost&&s&&(i.clear(),i.useProgram(s.program),i.updateCommonUniforms(s,e,s.program),t.update(e),i.updateUniforms(s.program),i.draw(s.vao,s.program))}renderVR(t,e,i){const s=this.ctx,n=t.getMesh(),r=e.getEyeParams(i);r&&n&&(s.bindXRFrame(i),s.useProgram(n.program),s.updateUniforms(n.program),r.forEach(((t,e)=>{const i=t.viewport,r=o.Jp(o.Ue(),t.vMatrix,n.matrix);s.viewport(i.x,i.y,i.width,i.height),s.updateVRUniforms(n.program,r,t.pMatrix,e),s.draw(n.vao,n.program)})))}};class j extends s.Z{get rootEl(){return this._rootEl}get renderer(){return this._renderer}get camera(){return this._camera}get control(){return this._control}get vr(){return this._vr}get hotspot(){return this._hotspot}get plugins(){return this._plugins}get projection(){return this._projection}set projection(t){this._initialized&&t?this.load(t):this._projection=t}get initialized(){return this._initialized}get autoplay(){return this._autoplay}get autoInit(){return this._autoInit}get autoResize(){return this._autoResize}get canvasSelector(){return this._canvasSelector}get useResizeObserver(){return this._useResizeObserver}get tabIndex(){return this._tabIndex}set tabIndex(t){const e=this._renderer.canvas;this._tabIndex=t,null!=t?e.tabIndex=t:e.removeAttribute("tabindex")}get maxDeltaTime(){return this._animator.maxDeltaTime}set maxDeltaTime(t){this._animator.maxDeltaTime=t}get debug(){return this._debug}set debug(t){this._debug=t}get initialYaw(){return this._camera.initialYaw}set initialYaw(t){this._camera.initialYaw=t}get initialPitch(){return this._camera.initialPitch}set initialPitch(t){this._camera.initialPitch=t}get initialZoom(){return this._camera.initialZoom}set initialZoom(t){this._camera.initialZoom=t}get yawRange(){return this._camera.yawRange}set yawRange(t){this._camera.yawRange=t,this._projection&&this._projection.updateCamera(this._camera)}get pitchRange(){return this._camera.pitchRange}set pitchRange(t){this._camera.pitchRange=t,this._projection&&this._projection.updateCamera(this._camera)}get zoomRange(){return this._camera.zoomRange}set zoomRange(t){this._camera.zoomRange=t,this._projection&&this._projection.updateCamera(this._camera)}get fov(){return this._camera.fov}set fov(t){const e=this._camera,i=this._control;e.fov=t,e.updateMatrix(),i.sync()}get rotate(){return this._control.rotate}get zoom(){return this._control.zoom}get gyro(){return this._control.gyro}get useGrabCursor(){return this._control.useGrabCursor}set useGrabCursor(t){this._control.useGrabCursor=t}get disableContextMenu(){return this._control.disableContextMenu}set disableContextMenu(t){this._control.disableContextMenu=t}get scrollable(){return this._control.scrollable}set scrollable(t){this._control.scrollable=t}get wheelScrollable(){return this._control.wheelScrollable}set wheelScrollable(t){this._control.wheelScrollable=t}constructor(t,e){let{projection:i=null,initialYaw:s=0,initialPitch:n=0,initialZoom:r=1,yawRange:o=null,pitchRange:a=null,zoomRange:h=null,fov:_=90,useGrabCursor:c=!0,disableContextMenu:d=!1,rotate:p=!0,zoom:g=!0,gyro:m=!1,scrollable:E=!0,wheelScrollable:b=!1,autoplay:T=!1,hotspot:v={},autoInit:R=!0,autoResize:f=!0,canvasSelector:A="canvas",useResizeObserver:y=!0,on:w={},plugins:O=[],maxDeltaTime:x=1/30,tabIndex:I=0,debug:C=!1}=void 0===e?{}:e;super(),this.renderFrame=t=>{const e=this._camera,i=this._renderer,s=this._control,n=this._hotspot,r=this._autoplay,o=this._projection;o&&(this._emit(F.FP.BEFORE_RENDER),r.playing&&(r.update(t),s.sync()),e.animation?e.animation.update(t):s.update(t),i.render(o,e),n.render(e),e.changed&&this._emit(F.FP.VIEW_CHANGE,{yaw:e.yaw,pitch:e.pitch,zoom:e.zoom,quaternion:[e.quaternion[0],e.quaternion[1],e.quaternion[2],e.quaternion[3]]}),e.onFrameRender(),this._emit(F.FP.RENDER))},this._renderFrameOnDemand=t=>{var e;const i=this._camera,s=this._control,n=this._autoplay,r=null==(e=this._projection)?void 0:e.getTexture();this._initialized&&r&&(i.animation||s.animating||n.playing||r.isVideo())&&this.renderFrame(t)},this._renderVRFrame=(t,e)=>{const i=this._vr,s=this._projection,n=this._renderer;s&&(this._emit(F.FP.BEFORE_RENDER),n.renderVR(s,i,e),this._emit(F.FP.RENDER))},this._rootEl=(0,l.sb)(t),this._plugins=O,this._initialized=!1,this._autoInit=R,this._autoResize=f,this._canvasSelector=A,this._useResizeObserver=y,this._tabIndex=I,this._debug=C;const S=(0,l.gE)(this._rootEl,A);this._renderer=new X(S,C),this._camera=new u({initialYaw:s,initialPitch:n,initialZoom:r,fov:_,yawRange:o,pitchRange:a,zoomRange:h}),this._control=new P(S,this._camera,{useGrabCursor:c,scrollable:E,wheelScrollable:b,disableContextMenu:d,rotate:p,zoom:g,gyro:m}),this._animator=new D(x),this._autoplay=new U(this,S,T),this._projection=i,this._autoResizer=new L(y,(()=>this.resize())),this._vr=new Z(this._renderer.ctx),this._hotspot=new W(this._rootEl,this._renderer,v),this._addEventHandlers(w),i&&R&&this.init()}destroy(){this._camera.destroy(),this._animator.stop(),this._renderer.destroy(),this._control.destroy(),this._autoResizer.disable(),this._projection&&(this._projection.releaseAllResources(this._renderer.ctx),this._projection=null),this._plugins.forEach((t=>t.destroy(this))),this._initialized=!1}async init(){if(!this._projection)throw new B.Z(k.ZP.MESSAGES.PROVIDE_PROJECTION_FIRST,k.ZP.CODES.PROVIDE_PROJECTION_FIRST);const t=this._renderer,e=this._camera,i=this._control,s=this._animator,n=this._hotspot,r=this._projection,o=t.canvas;this._bindComponentEvents(),t.ctx.init(),this._resizeComponents(),e.updateMatrix(),this._autoResize&&this._autoResizer.enable(o),this._autoplay.enableBlocked||this._autoplay.enable(),this._plugins.forEach((t=>{t.init(this)}));const a=await this._loadTexture(r);this._applyProjection(r,a,null),n.refresh(),s.start(this._renderFrameOnDemand),await i.enable(),null==this._tabIndex||o.hasAttribute("tabIndex")||(o.tabIndex=this._tabIndex),this._initialized=!0,this.renderFrame(0),this._emit(F.FP.READY)}async load(t){if(!t)return!1;if(this._initialized){const e=await this._loadTexture(t);this._applyProjection(t,e,this._projection),this.renderFrame(0)}else this._projection=t,this.init();return!0}resize(){if(!this._initialized)return;this._resizeComponents(),this.renderFrame(0);const{width:t,height:e}=this._renderer;this._emit(F.FP.RESIZE,{width:t,height:e})}addPlugins(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this._initialized&&e.forEach((t=>{t.init(this)})),this._plugins.push(...e)}removePlugins(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((t=>{const e=this._plugins.indexOf(t);e<0||(t.destroy(this),this._plugins.splice(e,1))}))}_emit(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];const n=i?i[0]:{};this.trigger(t,{type:t,target:this,...n})}_applyProjection(t,e,i){const s=this._camera,n=this._control,r=this._renderer;i&&i.releaseAllResources(this._renderer.ctx),t.applyTexture(r.ctx,e),t.updateCamera(s),t.updateControl(n),this._projection=t,this._emit(F.FP.PROJECTION_CHANGE,{projection:t})}async _loadTexture(t){const e=new M,{src:i,video:s}=t;this._emit(F.FP.LOAD_START,{src:i,video:s});const n=await e.load(i,s);return this._emit(F.FP.LOAD,{src:i,video:s}),n}_resizeComponents(){const t=this._renderer,e=this._camera,i=this._control;t.resize(),e.resize(t.width,t.height),i.resize(t.width,t.height)}_addEventHandlers(t){Object.keys(t).forEach((e=>{this.on(e,t[e])}))}_bindComponentEvents(){const t=this._rootEl,e=this._control,i=this._animator,s=this._renderer,n=this._vr;[h.QA.STATIC_CLICK,h.QA.INPUT_START,h.QA.INPUT_END].forEach((t=>{e.rotate.on(t,(e=>{this._emit(t,e)})),e.zoom.on(t,(e=>{this._emit(t,e)}))})),n.on(F.FP.VR_START,(e=>{t.classList.add(F.Qz.IN_VR),i.changeContext(e.session),i.start(this._renderVRFrame),this._emit(F.FP.VR_START)})),n.on(F.FP.VR_END,(()=>{t.classList.remove(F.Qz.IN_VR),s.ctx.useDefaultFrameBuffer(),i.changeContext(window),i.start(this._renderFrameOnDemand),this.resize(),this._emit(F.FP.VR_END)}))}}j.VERSION="#__VERSION__#";const Q=j},9580:(t,e,i)=>{i.d(e,{Z:()=>g});var s=i(4098),n=i(8388),r=i(8602);class o extends r.Z{constructor(t,e,i){super(),this.texture=e,this._webglTexture=t.createWebGLCubeTexture(e,e.width),this._cubemapOrder=i}destroy(t){this.texture.destroy(),t.deleteTexture(this._webglTexture)}update(t,e,i){const s=this.texture;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,s.flipY),t.uniform1i(e,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_CUBE_MAP,this._webglTexture);(0,n.rM)(s.sources,this._cubemapOrder).forEach(((e,s)=>{i?t.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e):t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)})),s.isVideo()||(this.needsUpdate=!1)}}const a=o;const h=class{get size(){return this._size}constructor(t,e){this.texture=t,this._renderingOrder=(0,n.rM)((0,n.w6)(6),e);const i=document.createElement("canvas");this._calcRenderingSize(),i.width=this._size,i.height=this._size,this._canvas=i,this._ctx=i.getContext("2d")}destroy(){const t=this._canvas;t.width=1,t.height=1,this._canvas=null}draw(t,e){const i=this._size,s=this.texture;let n=0;for(let r=0;r<this._row;r++)for(let o=0;o<this._column;o++){const a=i*o,h=i*r,l=this._renderingOrder[n];this._ctx.drawImage(s.source,a,h,i,i,0,0,i,i),e?t.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this._canvas):t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._canvas),n++}}_calcRenderingSize(){const{width:t,height:e}=this.texture,i=t/e;i===1/6?(this._size=t,this._row=6,this._column=1):6===i?(this._size=e,this._row=1,this._column=6):i===2/3?(this._size=.5*t,this._row=3,this._column=2):(this._size=t/3,this._row=2,this._column=3)}};class l extends r.Z{get texture(){return this._painter.texture}constructor(t,e,i){super(),this._painter=new h(e,i),this._webglTexture=t.createWebGLCubeTexture(e,this._painter.size)}destroy(t){t.deleteTexture(this._webglTexture),this._painter.destroy()}update(t,e,i){const s=this.texture;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.uniform1i(e,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_CUBE_MAP,this._webglTexture),this._painter.draw(t,i),s.isVideo()||(this.needsUpdate=!1)}}const _=l;var c=i(1815),u=i(9290),d=i(7337);class p extends s.Z{constructor(t){super(t);const{cubemapOrder:e="RLUDFB",cubemapFlipX:i=!1}=t;this._cubemapOrder=e,this._cubemapFlipX=i}applyTexture(t,e){const i=this._cubemapOrder,s=this._cubemapFlipX,n={uTexture:e.isCube()?new a(t,e,i):new _(t,e,i)},r=new d.Z({order:i}),o=new u.Z(t,"#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvarying highp vec3 vPos;\n\nvoid main() {\n  vPos = position;\n  gl_Position = uPMatrix * uMVMatrix * vec4(position, 1.0);\n}\n","#define GLSLIFY 1\nuniform samplerCube uTexture;\n\nvarying highp vec3 vPos;\n\nvoid main() {\n  // As textureCube uses (+Z as front), we flip that\n  gl_FragColor = textureCube(uTexture, vec3(vPos.x, vPos.y, -vPos.z));\n}\n",n),h=t.createVAO(r,o),l=new c.Z(h,o);s&&(l.scale[0]=-1),l.updateMatrix(),this._mesh=l}}const g=p},4098:(t,e,i)=>{i.d(e,{Z:()=>s});const s=class{constructor(t){let{src:e,video:i=!1}=t;this.src=e,this.video=i,this._mesh=null}releaseAllResources(t){var e;null==(e=this._mesh)||e.destroy(t)}updateCamera(t){t.resetRange()}updateControl(t){t.ignoreZoomScale=!1}update(t){}getTexture(){return this._mesh?this._mesh.program.uniforms.uTexture.texture:null}getMesh(){return this._mesh}}},8602:(t,e,i)=>{i.d(e,{Z:()=>s});const s=class{constructor(){this.needsUpdate=!0}destroy(t){}}},8388:(t,e,i)=>{i.d(e,{HD:()=>l,Jx:()=>v,PO:()=>T,S3:()=>c,az:()=>_,b6:()=>O,cx:()=>b,gE:()=>d,h4:()=>y,nk:()=>w,rM:()=>R,rm:()=>f,sb:()=>u,t7:()=>m,uZ:()=>g,w6:()=>p,yj:()=>A,zc:()=>E});var s=i(3181),n=i(8200),r=i(9658),o=i(4949),a=i(1028),h=i(9952);const l=t=>"string"==typeof t,_=function(t,e){void 0===e&&(e=a.yy);const i=document.createElement(e);return i.classList.add(t),i},c=(t,e)=>{let i=null;if(l(t)){const s=(e||document).querySelector(t);if(!s)return null;i=s}else(s=t)&&s.nodeType===Node.ELEMENT_NODE&&(i=t);var s;return i},u=(t,e)=>{const i=c(t,e);if(!i)throw l(t)?new r.Z(o.ZP.MESSAGES.ELEMENT_NOT_FOUND(t),o.ZP.CODES.ELEMENT_NOT_FOUND):new r.Z(o.ZP.MESSAGES.WRONG_TYPE(t,["HTMLElement","string"]),o.ZP.CODES.WRONG_TYPE);return i},d=(t,e)=>{const i=t.querySelector(e);if(!i)throw new r.Z(o.ZP.MESSAGES.CANVAS_NOT_FOUND,o.ZP.CODES.CANVAS_NOT_FOUND);return i},p=t=>!t||t<=0?[]:Array.apply(0,Array(t)).map(((t,e)=>e)),g=(t,e,i)=>Math.max(Math.min(t,i),e),m=(t,e,i)=>t*(1-i)+e*i,E=(t,e,i)=>{const s=Math.abs(i-e);if(t<e){t=i-(e-t)%s}else if(t>i){t=e+(t-i)%s}return t},b=(t,e)=>{for(let i=0;i<t.length;i++)if(e(t[i]))return i;return-1},T=t=>"object"==typeof t?t:{},v=(t,e)=>2*Math.atan(Math.tan(.5*t)/e),R=function(t,e,i){return void 0===i&&(i="RLUDFB"),i.split("").map((t=>e.indexOf(t))).map((e=>t[e]))},f=()=>{if(!document)return!1;for(const t of a.bQ)if(document[t])return!0;return!1},A=()=>!!DeviceMotionEvent&&"requestPermission"in DeviceMotionEvent&&window.isSecureContext,y=(t,e)=>Math.tan(h.ZX*t*.5)/Math.tan(h.ZX*e*.5),w=(t,e,i,n)=>{s.yR(t);const r=g(i,-89.99,89.99);return s.uD(t,t,e*h.ZX),s.lM(t,t,r*h.ZX),s.jI(t,t,n*h.ZX),t},O=t=>{const e=t[0],i=t[1],s=t[2],r=t[3],o=e*e+i*i+s*s+r*r,a=e*r-i*s;let l,_;if(a>.499995*o)l=Math.PI/2,_=2*Math.atan2(i,e);else if(a<-.499995*o)l=-Math.PI/2,_=-2*Math.atan2(i,e);else{const e=n.al(0,0,1),i=n.al(0,1,0);n.VC(e,e,t),n.VC(i,i,t);const s=Math.sqrt(e[0]*e[0]+e[2]*e[2]);l=Math.atan2(-e[1],s),_=Math.atan2(e[0],e[2])}return{pitch:g(l*h.jl,-90,90),yaw:E(_*h.jl,0,360)}}},8008:(t,e,i)=>{i.r(e),i.d(e,{assets:()=>g,contentTitle:()=>d,default:()=>b,frontMatter:()=>u,metadata:()=>p,toc:()=>m});var s=i(7462),n=i(7294),r=i(3905),o=i(4801),a=i(4996),h=i(8824),l=i(9580),_=i(6010);const c=()=>{const t=(0,n.useRef)(),[e,i]=(0,n.useState)(),[s,r]=(0,n.useState)(90),{withBaseUrl:o}=(0,a.C)();return(0,n.useEffect)((()=>{const e=new h.ZP(t.current,{projection:new l.Z({src:o("/pano/cube/cubemap.jpg")})});return i(e),()=>{e.destroy()}}),[]),(0,n.useEffect)((()=>{e&&(e.fov=s,e.renderFrame(0))}),[s]),n.createElement(n.Fragment,null,n.createElement("div",{style:{marginBottom:"0.5rem"}},n.createElement("input",{type:"range",min:1,max:180,step:1,value:s,onChange:t=>{r(parseFloat(t.target.value))}}),n.createElement("span",null,"fov: ",s)),n.createElement("div",{ref:t,className:(0,_.Z)("view360-container","is-16by9")},n.createElement("canvas",{className:"view360-canvas"})))},u={},d=void 0,p={unversionedId:"options/camera/fov",id:"options/camera/fov",title:"fov",description:"\uc218\ud3c9\ubc29\ud5a5 \uc2dc\uc57c\uac01 (FOV, Field-of-View)\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4.",source:"@site/i18n/ko/docusaurus-plugin-content-docs/current/options/camera/fov.mdx",sourceDirName:"options/camera",slug:"/options/camera/fov",permalink:"/egjs-view360/ko/docs/options/camera/fov",draft:!1,editUrl:"https://github.com/naver/egjs-view360/edit/master/demo/docs/options/camera/fov.mdx",tags:[],version:"current",frontMatter:{},sidebar:"options",previous:{title:"projection",permalink:"/egjs-view360/ko/docs/options/source/projection"},next:{title:"initialPitch",permalink:"/egjs-view360/ko/docs/options/camera/initialPitch"}},g={},m=[{value:"\uc608\uc2dc",id:"\uc608\uc2dc",level:2}],E={toc:m};function b(t){let{components:e,...i}=t;return(0,r.kt)("wrapper",(0,s.Z)({},E,i,{components:e,mdxType:"MDXLayout"}),(0,r.kt)(o.Z,{type:"number",defaultVal:"90",added:"4.0.0",mdxType:"OptionDescriptor"}),(0,r.kt)("p",null,"\uc218\ud3c9\ubc29\ud5a5 \uc2dc\uc57c\uac01 (FOV, Field-of-View)\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4."),(0,r.kt)("h2",{id:"\uc608\uc2dc"},"\uc608\uc2dc"),(0,r.kt)("p",null,"FOV\uac12\uc744 \uc870\uc808\ud574\ubcf4\uc138\uc694, \uae30\ubcf8\uac12\uc740 ",(0,r.kt)("inlineCode",{parentName:"p"},"90"),"\uc785\ub2c8\ub2e4."),(0,r.kt)(c,{mdxType:"FOV"}))}b.isMDXComponent=!0}}]);