"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5817],{3905:(e,t,s)=>{s.d(t,{Zo:()=>c,kt:()=>d});var i=s(7294);function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){n(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function a(e,t){if(null==e)return{};var s,i,n=function(e,t){if(null==e)return{};var s,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)s=o[i],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)s=o[i],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}var l=i.createContext({}),h=function(e){var t=i.useContext(l),s=t;return e&&(s="function"==typeof e?e(t):r(r({},t),e)),s},c=function(e){var t=h(e.components);return i.createElement(l.Provider,{value:t},e.children)},_={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var s=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),u=h(s),d=n,m=u["".concat(l,".").concat(d)]||u[d]||_[d]||o;return s?i.createElement(m,r(r({ref:t},c),{},{components:s})):i.createElement(m,r({ref:t},c))}));function d(e,t){var s=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=s.length,r=new Array(o);r[0]=u;var a={};for(var l in t)hasOwnProperty.call(t,l)&&(a[l]=t[l]);a.originalType=e,a.mdxType="string"==typeof e?e:n,r[1]=a;for(var h=2;h<o;h++)r[h]=s[h];return i.createElement.apply(null,r)}return i.createElement.apply(null,s)}u.displayName="MDXCreateElement"},4801:(e,t,s)=>{s.d(t,{Z:()=>d});var i=s(6010),n=s(7294);const o="container_KAvi",r="tags_yIZ0",a="tag_NTEP",l="dark_QuFp",h="info_Tfvv",c="warning_OxPl",_="success_OgfR",u="link_PhWZ",d=e=>{let{type:t,defaultVal:s,added:d}=e;return n.createElement("div",{className:o},t&&n.createElement("div",{className:r},n.createElement("span",{className:(0,i.Z)(a,l)},"Type"),n.createElement("span",{className:(0,i.Z)(a,h)},t)),s&&n.createElement("div",{className:r},n.createElement("span",{className:(0,i.Z)(a,l)},"Default"),n.createElement("span",{className:(0,i.Z)(a,c)},s)),d&&n.createElement("div",{className:r},n.createElement("span",{className:(0,i.Z)(a,l)},"Added in"),n.createElement("a",{className:u,href:"https://github.com/naver/egjs-view360/releases/tag/"+d,target:"_blank",rel:"noopener noreferrer"},n.createElement("span",{className:(0,i.Z)(a,_)},"v",d))))}},241:(e,t,s)=>{s.d(t,{VS:()=>_.VS,Xt:()=>_.Xt,FP:()=>_.FP,ZP:()=>Oe});var i=s(6010),n=s(7294),o=s(4996),r=s(826),a=s(6260),l=s(8388);class h{constructor(e){let{className:t={}}=void 0===e?{}:e;this._startLoading=e=>{let{target:t}=e;t.rootEl.appendChild(this._container),t.initialized?t.once(a.FP.LOAD,this._detachElements):t.once(a.FP.READY,this._detachElements)},this._detachElements=e=>{let{target:t}=e;const s=this._container;s&&s.parentElement===t.rootEl&&t.rootEl.removeChild(s)},this.className=t,this._container=this._createElements()}init(e){e.on(a.FP.LOAD_START,this._startLoading)}destroy(e){e.off(a.FP.LOAD_START,this._startLoading),this._detachElements({target:e})}_createElements(){const e={...this.className,...h.DEFAULT_CLASS},t=(0,l.az)(e.CONTAINER),s=(0,l.az)(e.RING);return t.appendChild(s),t}}h.DEFAULT_CLASS={CONTAINER:"view360-spinner",RING:"view360-spinner-ring"};const c=h;var _=s(397),u=s(6563),d=s(9580),m=s(4098),p=s(1815),E=s(9290),g=s(2278),v=s(7337),T=s(5846),b=s(459);class f extends m.Z{constructor(e){super(e);const{cubemapOrder:t="RLUDFB",cubemapFlipX:s=!1}=e;this._cubemapOrder=t,this._cubemapFlipX=s}applyTexture(e,t){const s=this._cubemapOrder,i=this._cubemapFlipX,n={uTexture:new g.Z(e,t)},o=new v.Z({order:s}),r=new E.Z(e,T.Z,b.Z,n),a=e.createVAO(o,r),l=new p.Z(a,r);i&&(l.scale[0]=-1),l.updateMatrix(),this._mesh=l}}const w=f;var C=s(9952);class O extends m.Z{applyTexture(e,t){const s={uTexture:new g.Z(e,t)},i=new v.Z({order:"LFRDBU",rotateUV:[C.lD.ZERO,C.lD.ZERO,C.lD.ZERO,C.lD.CW_90,C.lD.CCW_90,C.lD.CW_90]}),n=new E.Z(e,T.Z,"#define PI 3.14159265359\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\n\nvarying highp vec2 vUV;\n\nconst vec2 OPERATE_COORDS_RANGE = vec2(-1.0, 1.0);\nconst vec2 TEXTURE_COORDS_RANGE = vec2(0.0, 1.0);\nconst float ONE_THIRD = 1.0 / 3.0;\nconst float EAC_CONST = 2.0 / PI;\n\nfloat scale(vec2 domainRange, vec2 targetRange, float val) {\n  float unit = 1.0 / (domainRange[1] - domainRange[0]);\n  return targetRange[0] + (targetRange[1] - targetRange[0]) * (val - domainRange[0]) * unit;\n}\n\nvoid main(void) {\n  float transformedCoordX;\n  float transformedCoordY;\n\n  float texRangeXStart = floor(vUV.s * 3.) * ONE_THIRD;\n  float texRangeYStart = floor(vUV.t * 2.) * 0.5;\n\n  vec2 orgTextureRangeX = vec2(texRangeXStart, texRangeXStart + ONE_THIRD);\n  vec2 orgTextureRangeY = vec2(texRangeYStart, texRangeYStart + 0.5);\n\n  // scaling coords by the coordinates following the range from -1.0 to 1.0.\n  float px = scale(orgTextureRangeX, OPERATE_COORDS_RANGE, vUV.s);\n  float py = scale(orgTextureRangeY, OPERATE_COORDS_RANGE, vUV.t);\n\n  float qu = EAC_CONST * atan(px) + 0.5;\n  float qv = EAC_CONST * atan(py) + 0.5;\n\n  // re-scaling coords by original coordinates ranges\n  transformedCoordX = scale(TEXTURE_COORDS_RANGE, orgTextureRangeX, qu);\n  transformedCoordY = scale(TEXTURE_COORDS_RANGE, orgTextureRangeY, qv);\n\n  gl_FragColor = texture2D(uTexture, vec2(transformedCoordX, transformedCoordY));\n}\n",s),o=e.createVAO(i,n),r=new p.Z(o,n);this._mesh=r}}const A=O;var R=s(7191),P=s(4074);class N extends P.Z{constructor(e){const t=[],s=[],i=[],n=[-.5,.5],o=1/60,r=e*o;for(let a=0;a<2;a++){const l=n[a];for(let n=0;n<=60;n++){const h=n*r+Math.PI-.5*e,c=Math.cos(h),_=Math.sin(h),u=n*o,d=a;if(i.push(u,d),t.push(c,l,_),0===a&&n<60){const e=n,t=e+60+1;s.push(e,t,e+1,t,t+1,e+1)}}}super(t,s,i)}}const I=N;class y extends m.Z{constructor(e){super(e);const{partial:t=!1}=e;this._partial=t}applyTexture(e,t){const s=this._partial,{width:i,height:n}=t,o=i/n,r=180/o,a=s?1:2*Math.tan(r*C.ZX),l=s?o:2*Math.PI,h=new I(l),c=new E.Z(e,T.Z,b.Z,{uTexture:new g.Z(e,t)}),_=e.createVAO(h,c),u=new p.Z(_,c);u.scale[1]=a,R.yR(u.rotation),R.uD(u.rotation,u.rotation,-Math.PI/2),u.updateMatrix(),this._mesh=u}updateCamera(e){super.updateCamera(e);const t=this._mesh;if(!t)return;const s=t.program.uniforms.uTexture.texture,{width:i,height:n}=s,o=i/n,r=.5*t.scale[1];if(this._partial){const t=.5*o*C.jl;e.restrictYawRange(-t,t)}const a=Math.atan2(r,1)*C.jl,l=Math.tan(e.fov*C.ZX*.5)/(r*e.aspect);e.restrictPitchRange(-a,a),e.restrictZoomRange(l,1/0),e.restrictRenderHeight(2*r)}}const L=y;var x=s(8155),S=s(8602);class D extends S.Z{constructor(e){super(),this.val=e}update(e,t){e.uniform4fv(t,this.val.reduce(((e,t)=>[...e,...t]),[])),this.needsUpdate=!1}}const U=D;class M extends S.Z{constructor(e){super(),this.val=e}update(e,t){e.uniform1f(t,this.val),this.needsUpdate=!1}}const F=M;class B extends m.Z{constructor(e){super(e),this._mode=e.mode}applyTexture(e,t){let s,i;if(this._mode===B.MODE.LEFT_RIGHT)s=[.5,1,0,0],i=[.5,1,.5,0];else s=[1,.5,0,0],i=[1,.5,0,.5];const n={uTexture:new g.Z(e,t),uEye:new F(0),uTexScaleOffset:new U([s,i])},o=new x.Z,r=new E.Z(e,"#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform vec4 uTexScaleOffset[2];\nuniform float uEye;\n\nvarying highp vec2 vUV;\n\nvoid main() {\n  vec4 scaleOffset = uTexScaleOffset[int(uEye)];\n  vUV = uv.xy * scaleOffset.xy + scaleOffset.zw;\n  gl_Position = uPMatrix * uMVMatrix * vec4(position, 1.0);\n}\n",b.Z,n),a=e.createVAO(o,r),l=new p.Z(a,r);this._mesh=l}}B.MODE={LEFT_RIGHT:"left_right",TOP_BOTTOM:"top_bottom"};const V=B;class Z extends P.Z{constructor(e,t,s){void 0===e&&(e=2),void 0===t&&(t=2),void 0===s&&(s=-1);const i=.5*e,n=.5*t;super([-i,-n,s,i,-n,s,-i,n,s,i,n,s],[0,1,2,2,1,3],[0,0,1,0,0,1,1,1])}}const k=Z;class z extends m.Z{constructor(e){super(e)}applyTexture(e,t){t.wrapS=WebGLRenderingContext.REPEAT,t.wrapT=WebGLRenderingContext.REPEAT;const s={uTexture:new g.Z(e,t),uYaw:new F(0),uPitch:new F(.5),uZoom:new F(1)},i=new k,n=new E.Z(e,"#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvarying highp vec2 vUV;\n\nvoid main() {\n  vUV = uv;\n  gl_Position = vec4(position, 1.0);\n}\n","precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\nuniform float uYaw;\nuniform float uPitch;\nuniform float uZoom;\n\nvarying highp vec2 vUV;\n\nconst float PI = 3.1415926536;\nconst float PI_2 = PI * 0.5;\n\n// https://mathworld.wolfram.com/StereographicProjection.html\nvec2 toStereographicUV(in vec2 uv, in vec2 center) {\n  float R = 1. * uZoom;\n\n  // lat & lon from texture UV (x: -PI~PI, y: -PI/2 ~ PI/2)\n  vec2 texLatLon = (uv * 2. - 1.) * vec2(PI, PI_2);\n  // Central point (x: 0 ~ 2*PI, y: -PI/2 ~ PI/2)\n  vec2 central = (center * 2. - 1.) * vec2(PI, PI_2) + vec2(PI, 0);\n\n  float x = texLatLon.x;\n  float y = texLatLon.y;\n\n  float rou = sqrt(x * x + y * y);\n  float c = 2.0 * atan(rou, R * 0.5);\n\tfloat sin_c = sin(c);\n  float cos_c = cos(c);\n  // center\n  float sin_cy = sin(central.y);\n  float cos_cy = cos(central.y);\n\n  float lat = asin(cos_c * sin_cy + (y * sin_c * cos_cy) / rou);\n\tfloat lon = central.x + atan(x * sin_c, rou * cos_cy * cos_c - y * sin_cy * sin_c);\n\n  float u = (lon / PI + 1.0) * 0.5;\n\tfloat v = (lat / PI_2 + 1.0) * 0.5;\n\n  return vec2(u, v);\n}\n\nvoid main() {\n  vec2 central = vec2(uYaw, uPitch);\n  vec2 uv = toStereographicUV(vUV, central);\n\n  gl_FragColor = texture2D(uTexture, uv);\n}\n",s),o=e.createVAO(i,n),r=new p.Z(o,n);this._mesh=r}updateControl(e){e.ignoreZoomScale=!0}update(e){const t=this._mesh;if(!t)return;const s=t.program.uniforms;s.uYaw.val=e.yaw/360,s.uPitch.val=e.pitch/180+.5,s.uZoom.val=e.zoom,s.uYaw.needsUpdate=!0,s.uPitch.needsUpdate=!0,s.uZoom.needsUpdate=!0}}const G=z,H="wrapper_RNhm";class j extends n.Component{constructor(e){super(e),this.state={done:!1}}render(){return this.state.done?n.createElement(n.Fragment,null):n.createElement("div",{className:H},n.createElement("button",{className:"button button--lg button--primary",onClick:()=>{this.props.onClick(),this.setState({done:!0})}},"LOAD"))}}const Y=j;var X=s(5488),W=s(5162),Q=s(814);const K=e=>{let{options:t,serializer:s}=e;const{projection:i}=t.projection,o="import View360, { "+i+' } from "@egjs/view360";';return n.createElement(Q.Z,{className:"language-jsx"},o+'\n\nconst viewer = new View360("#ID_OF_YOUR_CONTAINER", '+s.serialize(t,4)+");")},q=e=>{let{options:t,serializer:s}=e;const{projection:i,projectionOptions:o}=t.projection,r=['import React, { useMemo } from "react";',"import View360, { "+i+' } from "@egjs/react-view360";'].join("\n");return n.createElement(Q.Z,{className:"language-jsx"},r+"\n\nexport default () => {\n  const projection = useMemo(() => new "+i+"("+s.serialize(o,2,1)+"), []);\n\n  return <View360 "+s.serializeJSX(t,2,1)+" />\n}")},J=e=>{let{options:t,serializer:s}=e;const{projection:i}=t.projection,o=['import { Component } from "@angular/core";',"import { View360Options, "+i+' } from "@egjs/ngx-view360";'].join("\n");return n.createElement(n.Fragment,null,n.createElement(Q.Z,{className:"language-ts",title:"app.module.ts"},'import { NgModule } from "@angular/core";\nimport { BrowserModule } from "@angular/platform-browser";\nimport { AppComponent } from "./app.component";\nimport { NgxView360Module } from "@egjs/ngx-view360";\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    NgxView360Module\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n'),n.createElement(Q.Z,{className:"language-ts",title:"demo.component.ts"},o+'\n\n@Component({\n  selector: "some-demo-component",\n  template: `\n    <ngx-view360 [options]="options" />\n  `\n})\nexport class View360Demo {\n  options: Partial<View360Options> = '+s.serialize(t,2,1)+"\n}"))},$=e=>{let{options:t,serializer:s}=e;const{projection:i,projectionOptions:o}=t.projection,r="import { View360, "+i+' } from "@egjs/vue-view360";';return n.createElement(Q.Z,{className:"language-html"},"<template>\n  <View360 "+s.serializeVue(t,2,1)+" />\n</template>\n<script>\n"+r+"\n\nexport default {\n  created() {\n    this.projection = new "+i+"("+s.serialize(o,2,2)+");\n  },\n  components: {\n    View360\n  }\n}\n<\/script>")},ee=e=>{let{options:t,serializer:s}=e;const{projection:i,projectionOptions:o}=t.projection,r="import { View360, "+i+' } from "@egjs/vue3-view360";';return n.createElement(Q.Z,{className:"language-html"},"<template>\n  <View360 "+s.serializeVue(t,2,1)+' />\n</template>\n<script>\nimport { defineComponent } from "vue";\n'+r+"\n\nexport default {\n  setup() {\n    const projection = new "+i+"("+s.serialize(o,2,2)+");\n\n    return {\n      projection\n    }\n  },\n  components: {\n    View360\n  }\n}\n<\/script>")},te=e=>{let{options:t,serializer:s}=e;const{projection:i,projectionOptions:o}=t.projection,r=["import View360, { "+i+' } from "@egjs/svelte-view360";'].join("\n");return n.createElement(Q.Z,{className:"language-html"},"<script>\n"+r+"\n\nconst projection = new "+i+"("+s.serialize(o,2)+");\n<\/script>\n<View360 "+s.serializeJSX(t,2)+" />")};const se=class{constructor(e,t){this.projection=e,this.projectionOptions=t}};const ie=class{serialize(e,t,s){void 0===s&&(s=0);const i=Object.keys(e),n=[],o=" ".repeat(t*s);return n.push("{"),i.forEach(((o,r)=>{n.push(this._toText(o,e[o],t,s+1,r===i.length-1))})),n.push(o+"}"),n.join("\n")}serializeJSX(e,t,s){void 0===s&&(s=0);const i=" ".repeat(t*(s+1));return Object.keys(e).map((s=>s+"="+("string"==typeof e[s]?'"'+e[s]+'"':e[s]instanceof se?"{projection}":"{"+JSON.stringify(e[s],void 0,t)+"}").replace(/\n/g,"\n"+i))).join("\n"+i)}serializeVue(e,t,s){void 0===s&&(s=0);const i=" ".repeat(t*(s+1));return Object.keys(e).map((t=>"string"==typeof e[t]?t+'="'+e[t]+'"':e[t]instanceof se?':projection="projection"':":"+t+'="'+JSON.stringify(e[t]).replace(/\"/g,"'")+'"')).join("\n"+i)}_toText(e,t,s,i,n){const o=" ".repeat(s*i);if(t instanceof se){const r=t.projectionOptions;let a=Object.keys(r).map(((e,t)=>this._toText(e,r[e],s,i+1,t===r.length-1))).join("\n");return a&&(a="\n"+a+"\n"+o),""+o+e+": new "+t.projection+"({"+a+"})"+(n?"":",")}if(Array.isArray(t)||"object"!=typeof t){return""+o+e+": "+JSON.stringify(t,void 0,4).replace(/"([^"]+)":/g,"$1:").replace(/\n/g,"\n"+o)+(n?"":",")}{const r=Object.keys(t);let a=r.map(((e,n)=>this._toText(e,t[e],s,i+1,n===r.length-1))).join("\n");return a&&(a="\n"+a+"\n"+o),""+o+e+": {"+a+"}"+(n?"":",")}}},ne={EQUIRECTANGULAR:"equirect",CUBEMAP:"cubemap",CUBESTRIP:"cubestrip",EAC:"eac",CYLINDRICAL:"cylindrical",STEREOSCOPIC_EQUI:"stereoequi",LITTLE_PLANET:"littleplanet"},oe={[ne.EQUIRECTANGULAR]:"EquirectProjection",[ne.CUBEMAP]:"CubemapProjection",[ne.CUBESTRIP]:"CubestripProjection",[ne.EAC]:"EquiangularProjection",[ne.CYLINDRICAL]:"CylindricalProjection",[ne.STEREOSCOPIC_EQUI]:"StereoEquiProjection",[ne.LITTLE_PLANET]:"LittlePlanetProjection"};var re=s(3991);const ae=e=>{let{options:t={},projectionType:s,projectionOptions:i}=e;t.projection=new se(oe[s],i);const o=new ie;return n.createElement("div",null,n.createElement(X.Z,{groupId:"options",defaultValue:"json",lazy:!0,values:[{label:n.createElement("div",{className:"framework-wrapper"},n.createElement(re.U3t,{width:"18",height:"18"})," JSON"),value:"json"},{label:n.createElement("div",{className:"framework-wrapper"},n.createElement(re.PF2,{width:"18",height:"18"})," Javascript"),value:"js",attributes:{"data-framework":"js"}},{label:n.createElement("div",{className:"framework-wrapper"},n.createElement(re.err,{width:"18",height:"18"})," React"),value:"react",attributes:{"data-framework":"react"}},{label:n.createElement("div",{className:"framework-wrapper"},n.createElement(re.j3E,{width:"18",height:"18"})," Angular"),value:"ng",attributes:{"data-framework":"ng"}},{label:n.createElement("div",{className:"framework-wrapper"},n.createElement(re.IAF,{width:"18",height:"18"})," Vue@2"),value:"vue2",attributes:{"data-framework":"vue"}},{label:n.createElement("div",{className:"framework-wrapper"},n.createElement(re.IAF,{width:"18",height:"18"})," Vue@3"),value:"vue3",attributes:{"data-framework":"vue"}},{label:n.createElement("div",{className:"framework-wrapper"},n.createElement(re.qn2,{width:"18",height:"18"})," Svelte"),value:"svelte",attributes:{"data-framework":"svelte"}}]},n.createElement(W.Z,{value:"json"},n.createElement(Q.Z,{className:"language-json"},o.serialize(t,4))),n.createElement(W.Z,{value:"js"},n.createElement(K,{options:t,serializer:o})),n.createElement(W.Z,{value:"react"},n.createElement(q,{options:t,serializer:o})),n.createElement(W.Z,{value:"ng"},n.createElement(J,{options:t,serializer:o})),n.createElement(W.Z,{value:"vue2"},n.createElement($,{options:t,serializer:o})),n.createElement(W.Z,{value:"vue3"},n.createElement(ee,{options:t,serializer:o})),n.createElement(W.Z,{value:"svelte"},n.createElement(te,{options:t,serializer:o}))))};var le=s(7462),he=s(9960);const ce="wrapper_mU0X",_e={veste:{name:"Veste Oberhaus",link:"https://commons.wikimedia.org/wiki/File:Veste_Oberhaus_(Passau,_full_spherical_panoramic_image,_equirectangular_projection).jpg",author:"J\xfcrgen Matern / Wikimedia Commons",authorLink:"https://juergen-matern.de/",license:"CC BY-SA 4.0"},fisherman:{name:"Fisherman's Bastion",link:"https://www.humus.name/index.php?page=Textures&ID=117",author:"Humus",authorLink:"https://www.humus.name/",license:"CC BY 3.0"},burano:{name:"Burano",link:"https://www.behance.net/gallery/59305251/Burano-360-painting-animation-in-VR",author:"Maja Wro\u0144ska",authorLink:"https://www.behance.net/takmaj",license:"CC BY-NC 3.0"},bathroom:{name:"The Bathroom",link:"https://www.youtube.com/watch?v=r7hv9K-u3U8",author:"jan Ke Tami",authorLink:"https://www.youtube.com/user/IamSamys",license:"CC BY 3.0"},snow_mountain:{name:"Snow Mountains Panorama",link:"https://pixabay.com/photos/snow-mountains-panorama-panoramic-1868299/",author:"Pexels",authorLink:"https://pixabay.com/users/pexels-2286921/",license:"Pixabay License"},san_francisco:{name:"San Francisco Panorama",link:"https://pixabay.com/images/id-2131951/",author:"pixexid",authorLink:"https://pixabay.com/ko/users/pixexid-4729217/",license:"Pixabay License"},witness:{name:"The Witness",link:"http://the-witness.net/",author:"Thekla, Inc.",authorLink:"http://the-witness.net/",ansel:!0},battlefieldV:{name:"Battlefield V",link:"https://www.ea.com/games/battlefield/battlefield-5",author:"DICE",authorLink:"https://www.dice.se/",ansel:!0},qube2:{name:"Q.U.B.E. 2",link:"https://www.toxicgames.co.uk/qube2",author:"Toxic Games",authorLink:"https://www.toxicgames.co.uk/",ansel:!0},drg:{name:"Deep Rock Galactic",link:"https://www.deeprockgalactic.com/",author:"Ghost Ship Games",authorLink:"https://ghostship.dk/",ansel:!0},for_honor:{name:"For Honor",link:"https://www.ubisoft.com/en-us/game/for-honor",author:"Ubisoft",authorLink:"https://www.ubisoft.com/",ansel:!0},dq11:{name:"Dragon Quest XI S: Echoes of an Elusive Age",link:"https://dragonquest.square-enix-games.com/xi",author:"Square Enix",authorLink:"https://www.square-enix.com/",ansel:!0},ff15:{name:"FINAL FANTASY XV",link:"https://finalfantasyxv.square-enix-games.com/",author:"Square Enix",authorLink:"https://www.square-enix.com/",ansel:!0}},ue={CC0:"https://creativecommons.org/publicdomain/zero/1.0/","CC BY 4.0":"https://creativecommons.org/licenses/by/4.0/","CC BY-SA 4.0":"https://creativecommons.org/licenses/by-sa/4.0/","CC BY-NC 3.0":"https://creativecommons.org/licenses/by-nc/3.0/","CC BY-NC-SA 4.0":"http://creativecommons.org/licenses/by-nc-sa/4.0/","CC BY 3.0":"https://creativecommons.org/licenses/by/3.0/","Pixabay License":"https://pixabay.com/service/terms/"};class de extends n.Component{constructor(e){super(e),this._modalRef=n.createRef(),this.state={license:e.item?_e[e.item]:null,visible:!1}}componentDidUpdate(e){this.props.item!==e.item&&this.setState({license:_e[this.props.item]})}render(){const e=this._modalRef,{item:t,...s}=this.props,o=this.state.license;return o?n.createElement(n.Fragment,null,n.createElement("div",(0,le.Z)({className:(0,i.Z)("license-container",ce)},s,{title:"Show Attribution",onClick:e=>{e.stopPropagation(),this.setState({visible:!0})}})),n.createElement("div",{ref:e,key:t,className:(0,i.Z)({visible:this.state.visible,"demo-viewer-modal":!0}),onClick:()=>{this.setState({visible:!1})}},this.state.visible&&n.createElement("div",{className:"content"},o.ansel&&n.createElement(n.Fragment,null,n.createElement("span",null,"Screenshot from ")),n.createElement(he.Z,{href:o.link,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation()},o.name),n.createElement("span",null," by "),n.createElement(he.Z,{href:o.authorLink,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation()},o.author),o.license&&n.createElement(n.Fragment,null,n.createElement("span",null," licensed under "),n.createElement(he.Z,{href:ue[o.license],target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation()},o.license)),o.ansel&&n.createElement(n.Fragment,null,n.createElement("span",null," taken with "),n.createElement(he.Z,{href:"https://www.nvidia.com/en-us/geforce/geforce-experience/ansel/",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation()},"NVidia Ansel"))))):n.createElement(n.Fragment,null)}}de.defaultProps={item:null};const me=de;var pe=s(6577);class Ee extends pe.Z{constructor(e){let{position:t=r.Z.POSITION.MAIN_RIGHT,order:s=0}=void 0===e?{}:e;super({position:t,order:s}),this._toggleModal=()=>{const e=this._viewer,t=this._modalEl;if(t.classList.toggle("visible"),!e||!e.projection)return;if(!t.classList.contains("visible"))return this._clearModal();const s=e.projection.src,i=Array.isArray(s)?s:[s],n=!!e.projection.video;i.forEach((e=>{const s=n?document.createElement("video"):document.createElement("img");s.classList.add("content"),s.src=e,n&&(s.addEventListener("click",(e=>{e.stopPropagation()})),s.controls=!0),t.appendChild(s)}))},this._clearModal=()=>{const e=this._modalEl;for(;e.firstChild;){if(e.firstChild instanceof HTMLVideoElement){const t=e.firstChild;t.pause(),t.removeAttribute("src"),t.load()}e.removeChild(e.firstChild)}},this.element=document.createElement("button"),this.element.classList.add("demo-controls-orig-image"),this.element.title="Show original image/video",this._modalEl=document.createElement("div"),this._modalEl.classList.add("demo-viewer-modal"),this._modalEl.addEventListener("click",this._toggleModal),this._viewer=null}init(e,t){const s=this.element,i=t.className.CONTROLS_BUTTON;s.classList.add(i),s.addEventListener("click",this._toggleModal),this._attachModal(e.rootEl),this._viewer=e}destroy(e,t){const s=this.element,i=t.className.CONTROLS_BUTTON;s.classList.remove(i),s.removeEventListener("click",this._toggleModal),this._detachModal(e.rootEl),this._clearModal(),this._viewer=null}_attachModal(e){e.appendChild(this._modalEl)}_detachModal(e){this._modalEl.parentElement===e&&e.removeChild(this._modalEl)}}const ge=Ee,ve={header:"header_PUyx",footer:"footer_Qblj",separator:"separator_Hyh3",btn:"btn_iUkw"},Te={[a.FP.INPUT_START]:"#4b5bab",[a.FP.INPUT_END]:"#3ca370",[a.FP.STATIC_CLICK]:"#8c3f5d",[a.FP.BEFORE_RENDER]:"#ba6156",[a.FP.RENDER]:"#f2a65e",[a.FP.RESIZE]:"#5e315b",[a.FP.LOAD_START]:"#bd4882",[a.FP.LOAD]:"#80366b",[a.FP.PROJECTION_CHANGE]:"#eb564b",[a.FP.READY]:"#7e7e8f",[a.FP.VIEW_CHANGE]:"#323e4f",[a.FP.VR_START]:"#b0305c",[a.FP.VR_END]:"#73275c"};class be extends n.Component{constructor(e){super(e),this._onEvent=e=>{const t=this.state.events,s=t[t.length-1];s&&e.type===s.name?s.count+=1:(t.push({name:e.type,count:1,evt:e}),t.length>20&&t.splice(0,t.length-20)),this.setState({events:t})},this.state={events:[]}}componentDidMount(){setTimeout((()=>{const{viewer:e,events:t}=this.props;Object.values(t).forEach((t=>{e.on(t,this._onEvent)}))}))}render(){const e=this.state.events;return n.createElement("div",null,n.createElement("h4",null,"Events Triggered"),e.map(((e,t)=>{var s;let{name:o,count:r,evt:a}=e;return n.createElement("div",{key:t,className:(0,i.Z)(ve.btn,"button button--active button--info"),style:{backgroundColor:null!=(s=Te[o])?s:""}},n.createElement("span",null,o),n.createElement("span",{className:ve.separator},"x"),n.createElement("span",{className:ve.count},r))})))}}be.defaultProps={events:[]};const fe=be,we=n.forwardRef(((e,t)=>{let{license:s=null,showControlBar:a=!0,showSpinner:h=!0,clickToLoad:u=!1,showExampleCode:d=!1,showEvents:m=[],ratio:p="16by9",projectionType:E=ne.EQUIRECTANGULAR,projectionOptions:g={},...v}=e;const[T,b]=(0,n.useState)(),f=(0,n.useRef)(),{withBaseUrl:w}=(0,o.C)();(0,n.useEffect)((()=>{T&&T.load(Ce(E,g,w))}),[E,g]),(0,n.useEffect)((()=>{const{children:e,plugins:t=[],...s}=v;if(a){const e=new ge;t.push(new r.Z({...(0,l.PO)(a),customItems:[e]}))}h&&t.push(new c((0,l.PO)(h))),u&&(s.autoInit=!1);const i={...s,plugins:t,projection:g.src?Ce(E,g,w):null},n=new _.ZP(f.current,i);return b(n),()=>{n.destroy()}}),[]),(0,n.useImperativeHandle)(t,(()=>({load:(e,t)=>{T&&T.load(Ce(e,t,w))},refreshHotspots:()=>{T&&T.hotspot.refresh()},viewer:()=>T})),[T]);const{children:C,className:O,style:A,on:R,...P}=v,N=Array.isArray(d)?d:[],I=Object.keys(P).filter((e=>e in _.ZP.prototype||N.includes(e))).reduce(((e,t)=>({...e,[t]:P[t]})),{}),y=["view360-container"];return p&&y.push("is-"+p),n.createElement(n.Fragment,null,n.createElement("div",{ref:f,className:(0,i.Z)(...y,O),style:A},n.createElement("canvas",{className:"view360-canvas"}),s&&n.createElement(me,{item:s}),u&&n.createElement(Y,{onClick:()=>{T.init()}}),C),d&&n.createElement(ae,{options:I,projectionType:E,projectionOptions:g}),m.length>0&&n.createElement(fe,{viewer:T,events:m}))})),Ce=(e,t,s)=>{switch(t.src&&("string"==typeof t.src||Array.isArray(t.src))&&(t.src=Array.isArray(t.src)?t.src.map((e=>s(e))):s(t.src)),e){case ne.EQUIRECTANGULAR:return new u.Z(t);case ne.CUBEMAP:return new d.Z(t);case ne.CUBESTRIP:return new w(t);case ne.EAC:return new A(t);case ne.CYLINDRICAL:return new L(t);case ne.STEREOSCOPIC_EQUI:return new V(t);case ne.LITTLE_PLANET:return new G(t);default:throw new Error("Wrong projection, given: "+e)}},Oe=we},1028:(e,t,s)=>{s.d(t,{$:()=>_,Dx:()=>h,FP:()=>i,GS:()=>E,H3:()=>p,L2:()=>o,T:()=>r,WV:()=>a,bQ:()=>m,gf:()=>l,jN:()=>c,kq:()=>u,ml:()=>d,yy:()=>n});const i={MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",WHEEL:"wheel",RESIZE:"resize",CONTEXT_MENU:"contextmenu",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_UP:"pointerup",POINTER_CANCEL:"pointercancel",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",KEY_DOWN:"keydown",KEY_UP:"keyup",LOAD:"load",ERROR:"error",CLICK:"click",DOUBLE_CLICK:"dblclick",CONTEXT_CREATE_ERROR:"webglcontextcreationerror",CONTEXT_LOST:"webglcontextlost",CONTEXT_RESTORED:"webglcontextrestored",DEVICE_ORIENTATION:"deviceorientation",DEVICE_MOTION:"devicemotion",ORIENTATION_CHANGE:"orientationchange",VIDEO_PLAY:"play",VIDEO_PAUSE:"pause",VIDEO_LOADED_DATA:"loadeddata",VIDEO_VOLUME_CHANGE:"volumechange",VIDEO_TIME_UPDATE:"timeupdate",VIDEO_DURATION_CHANGE:"durationchange",VIDEO_CAN_PLAYTHROUGH:"canplaythrough",TRANSITION_END:"transitionend",XR_END:"end"},n="div",o="button";let r;!function(e){e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT"}(r||(r={}));const a={GRAB:"grab",GRABBING:"grabbing",NONE:""},l=["LEFT","UP","RIGHT","DOWN"];let h;!function(e){e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN"}(h||(h={}));const c=32,_={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"},u=" ",d=["requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","webkitCancelFullScreen","mozRequestFullScreen","msRequestFullscreen"],m=["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"],p=["exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"],E=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"]},4949:(e,t,s)=>{s.d(t,{ZP:()=>i});const i={CODES:{WRONG_TYPE:0,WRONG_OPTION:1,ELEMENT_NOT_FOUND:2,CANVAS_NOT_FOUND:3,WEBGL_NOT_SUPPORTED:4,FAILED_CREATE_CONTEXT_2D:5,PROVIDE_PROJECTION_FIRST:6,FAILED_LINKING_PROGRAM:7,INSUFFICIENT_ARGS:8},MESSAGES:{WRONG_TYPE:(e,t)=>typeof e+" is not a "+t.map((e=>'"'+e+'"')).join(" or ")+".",WRONG_OPTION:(e,t)=>'Bad option: given "'+e+'" for option "'+t+'".',ELEMENT_NOT_FOUND:e=>'Element with selector "'+e+'" not found.',CANVAS_NOT_FOUND:"The canvas element was not found inside the given root element.",WEBGL_NOT_SUPPORTED:"WebGL is not supported on this browser.",FAILED_CREATE_CONTEXT_2D:"Failed to create canvas 2D context",PROVIDE_PROJECTION_FIRST:'"projection" should be provided before initialization.',FAILED_LINKING_PROGRAM:(e,t)=>'Failed linking WebGL program - "'+e+"\nShader compile Log: "+t,INSUFFICIENT_ARGS:(e,t)=>'Insufficient arguments: given "'+e+'" for "'+t+'".'}}},6260:(e,t,s)=>{s.d(t,{FP:()=>n,Qz:()=>i,Xt:()=>o});const i={CONTAINER:"view360-container",CANVAS:"view360-canvas",CTX_LOST:"view360-ctx-lost",IN_VR:"view360-vr-presenting",HOTSPOT_CONTAINER:"view360-hotspots",HOTSPOT:"view360-hotspot",HOTSPOT_VISIBLE:"view360-hotspot-visible",HOTSPOT_FLIP_X:"view360-hotspot-flip-x",HOTSPOT_FLIP_Y:"view360-hotspot-flip-y"},n={READY:"ready",LOAD_START:"loadStart",LOAD:"load",PROJECTION_CHANGE:"projectionChange",RESIZE:"resize",BEFORE_RENDER:"beforeRender",RENDER:"render",INPUT_START:"inputStart",INPUT_END:"inputEnd",VIEW_CHANGE:"viewChange",STATIC_CLICK:"staticClick",VR_START:"vrStart",VR_END:"vrEnd"},o={LINEAR:e=>e,SINE_WAVE:e=>Math.sin(e*Math.PI*2),EASE_OUT_CUBIC:e=>1-Math.pow(1-e,3),EASE_OUT_BOUNCE:e=>{const t=7.5625,s=2.75;return e<1/s?t*e*e:e<2/s?t*(e-=1.5/s)*e+.75:e<2.5/s?t*(e-=2.25/s)*e+.9375:t*(e-=2.625/s)*e+.984375}}},9952:(e,t,s)=>{s.d(t,{AG:()=>g,De:()=>u,Ib:()=>T,K$:()=>h,QA:()=>r,YB:()=>E,ZX:()=>a,_F:()=>c,gI:()=>v,jl:()=>l,ju:()=>d,lD:()=>m,oK:()=>_,r6:()=>p,u1:()=>o});var i,n=s(6260);const o={CHANGE:"change",ANIMATION_END:"animationEnd"},r={INPUT_START:"inputStart",CHANGE:"change",INPUT_END:"inputEnd",ENABLE:"enable",DISABLE:"disable",STATIC_CLICK:"staticClick"},a=Math.PI/180,l=180/Math.PI,h=n.Xt.EASE_OUT_CUBIC,c=300,_={min:-1/0,max:1/0},u={min:-90,max:90},d={min:.6,max:10};let m;!function(e){e[e.ZERO=0]="ZERO",e[e.CW_90=1]="CW_90",e[e.CCW_90=2]="CCW_90",e[e.CW_180=3]="CW_180"}(m||(m={}));const p="view360videotimechange",E="http://www.w3.org/2000/svg",g="immersive-vr",v="local",T=null!=(i=Number.EPSILON)?i:2220446049250313e-31},5821:(e,t,s)=>{s.d(t,{Z:()=>d});var i=s(2921),n=s(7191),o=s(7962),r=s(1028),a=s(9952),l=s(8388);const h={PITCH_DELTA:1,YAW_DELTA_BY_ROLL:2,YAW_DELTA_BY_YAW:3};h[h.PITCH_DELTA]={targetAxis:[0,1,0],meshPoint:[0,0,1]},h[h.YAW_DELTA_BY_ROLL]={targetAxis:[0,1,0],meshPoint:[1,0,0]},h[h.YAW_DELTA_BY_YAW]={targetAxis:[1,0,0],meshPoint:[0,0,1]};class c extends i.Z{get enabled(){return this._enabled}get orientationUpdated(){return this._orientationUpdated}get ignoreRoll(){return this._ignoreRoll}set ignoreRoll(e){this._ignoreRoll=e}constructor(){super(),this._onDeviceOrientation=e=>{const t=this._orientation,{alpha:s,beta:i,gamma:n}=e;null!=s&&null!=i&&null!=n&&(t.alpha=s,t.beta=i,t.gamma=n,this._orientationUpdated=!0,this._needsCalibrate&&(this._needsCalibrate=!1,this._calibrateSensor()))},this._updateScreenOrientation=()=>{window.screen&&window.screen.orientation&&void 0!==window.screen.orientation.angle?this._screenOrientation=screen.orientation.angle:void 0!==window.orientation?this._screenOrientation=window.orientation>=0?window.orientation:360+window.orientation:this._screenOrientation=0},this.quaternion=n.Ue(),this._orientation={alpha:0,beta:90,gamma:0},this._yawOrigin=0,this._yawOffset=0,this._orientationUpdated=!1,this._screenOrientation=0,this._needsCalibrate=!0,this._enabled=!1}enable(){this._enabled||(window.addEventListener(r.FP.DEVICE_ORIENTATION,this._onDeviceOrientation),window.addEventListener(r.FP.ORIENTATION_CHANGE,this._updateScreenOrientation),this._updateScreenOrientation(),this._orientationUpdated=!1,this._needsCalibrate=!0,this._enabled=!0)}disable(){this._enabled&&(window.removeEventListener(r.FP.DEVICE_ORIENTATION,this._onDeviceOrientation),window.removeEventListener(r.FP.ORIENTATION_CHANGE,this._updateScreenOrientation),this._enabled=!1)}update(){this._updateRotation(),this._orientationUpdated=!1}collectDelta(){if(!this._orientationUpdated)return{pitch:0,yaw:0};const e=n.d9(this.quaternion);return this._updateRotation(),this._orientationUpdated=!1,this._toEulerDelta(e,this.quaternion)}setInitialRotation(e){this._yawOrigin=e}_calibrateSensor(){const e=this._yawOrigin,t=this.quaternion;this._yawOffset=0,this._updateRotation();const{yaw:s}=(0,l.b6)(t);this._yawOffset=s-e,this._updateRotation(),this._needsCalibrate=!1}_updateRotation(){const e=this.quaternion,{alpha:t,beta:s,gamma:i}=this._orientation;n.yR(e),n.uD(e,e,(t-this._yawOffset)*a.ZX),n.lM(e,e,s*a.ZX),n.jI(e,e,-i*a.ZX);const o=n.Ue(),r=.5*-this._screenOrientation*a.ZX,l=n.al(-Math.sqrt(.5),0,0,Math.sqrt(.5));n.t8(o,0,Math.sin(r),0,Math.cos(r)),n.Jp(e,e,o),n.Jp(e,e,l),n.Fv(e,e)}_toEulerDelta(e,t){return{yaw:this._getDeltaYaw(e,t),pitch:this._getDeltaPitch(e,t)}}_getDeltaYaw(e,t){const s=this._getRotationDelta(e,t,h.YAW_DELTA_BY_YAW);return this._getRotationDelta(e,t,h.YAW_DELTA_BY_ROLL)*Math.sin(this._extractPitchFromQuat(t))+s}_getDeltaPitch(e,t){return this._getRotationDelta(e,t,h.PITCH_DELTA)}_getRotationDelta(e,t,s){const i=o.al(h[s].targetAxis[0],h[s].targetAxis[1],h[s].targetAxis[2]),r=h[s].meshPoint,l=n.d9(e),c=n.d9(t);n.Fv(l,l),n.Fv(c,c);let _=o.al(0,0,1),u=o.al(0,0,1);o.VC(_,_,l),o.VC(u,u,c),o.VC(i,i,c);const d=o.AK(i,o.kC(o.Ue(),_,u))>0?1:-1,m=o.al(r[0],r[1],r[2]);let p;p=s!==h.YAW_DELTA_BY_YAW?o.al(0,d,0):o.al(d,0,0),o.VC(m,m,c),o.VC(p,p,c);const E=m,g=p,v=o.Ue();o.kC(v,E,g),o.Fv(v,v);const T=v[0],b=v[1],f=v[2];u=o.al(r[0],r[1],r[2]),o.VC(u,u,c),_=o.al(r[0],r[1],r[2]),o.VC(_,_,l);let w=Math.abs(_[0]*T+_[1]*b+_[2]*f);const C=o.Ue();o.$X(C,_,o.bA(o.Ue(),v,w));let O=(C[0]*u[0]+C[1]*u[1]+C[2]*u[2])/(o.kE(C)*o.kE(u));O>1&&(O=1);const A=Math.acos(O),R=o.kC(o.Ue(),u,C);let P;w=T*R[0]+b*R[1]+f*R[2],P=s!==h.YAW_DELTA_BY_YAW?w>0?1:-1:w<0?1:-1;return A*P*d*a.jl}_extractPitchFromQuat(e){const t=o.al(0,0,1);return o.VC(t,t,e),-1*Math.atan2(t[1],Math.sqrt(Math.pow(t[0],2)+Math.pow(t[2],2)))}}const _=c;class u extends i.Z{get enabled(){return this._input.enabled}get enableBlocked(){return this._enableBlocked}get animating(){return this._input.enabled&&this._input.orientationUpdated}get ignoreRoll(){return this._ignoreRoll}set ignoreRoll(e){this._ignoreRoll=e}static async isAvailable(){if(!DeviceMotionEvent)return!1;let e;return Promise.race([new Promise((t=>{e=e=>{t(e.rotationRate&&null!=e.rotationRate.alpha)},window.addEventListener(r.FP.DEVICE_MOTION,e)})),new Promise((e=>{setTimeout((()=>e(!1)),1e3)}))]).then((t=>(window.removeEventListener(r.FP.DEVICE_MOTION,e),t)))}static async requestSensorPermission(){return!(0,l.yj)()||DeviceMotionEvent.requestPermission().then((e=>"granted"===e)).catch((()=>!1))}constructor(e,t){let{ignoreRoll:s=!0}=void 0===t?{}:t;super(),this._enableBlocked=e,this._ignoreRoll=s,this._input=new _}destroy(){this.disable(),this._input.off(),this.off()}update(e,t,s,i){this._ignoreRoll?this._updateYawPitch(e,t,s,i):this._updateQuaternion(e,i)}enable(){this._input.enabled||(this._input.enable(),this._enableBlocked=!1,this.trigger(a.QA.ENABLE,{control:this,updateCursor:!1}))}disable(){this._input.enabled&&(this._input.disable(),this.trigger(a.QA.DISABLE,{updateCursor:!1}))}sync(){}_updateYawPitch(e,t,s,i){const n=this._input;if(!n.enabled)return;const{yaw:o,pitch:r}=n.collectDelta();t.add(o),s.add(r),e.lookAt({yaw:t.val,pitch:s.val,zoom:i})}_updateQuaternion(e,t){const s=this._input;s.enabled&&(s.update(),e.rotate(s.quaternion,t))}}const d=u},8861:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(2921),n=s(1028),o=s(9952);class r extends i.Z{constructor(){super(),this._onMouseDown=e=>{const t=this._el;t&&e.button===n.T.LEFT&&(e.preventDefault(),t.focus?t.focus():window.focus(),this._prevPos[0]=e.clientX,this._prevPos[1]=e.clientY,window.addEventListener(n.FP.MOUSE_MOVE,this._onMouseMove,!1),window.addEventListener(n.FP.MOUSE_UP,this._onMouseUp,!1),this.trigger(o.QA.INPUT_START,{srcEvent:e,isTouch:!1,isKeyboard:!1}))},this._onMouseMove=e=>{e.preventDefault();const t=e.clientX,s=e.clientY,i=this._prevPos,n=t-i[0],r=s-i[1];this.trigger(o.QA.CHANGE,{delta:{x:n,y:r},isTouch:!1,isKeyboard:!1}),i[0]=t,i[1]=s},this._onMouseUp=()=>{this._prevPos[0]=0,this._prevPos[1]=0,window.removeEventListener(n.FP.MOUSE_MOVE,this._onMouseMove,!1),window.removeEventListener(n.FP.MOUSE_UP,this._onMouseUp,!1),this.trigger(o.QA.INPUT_END,{isTouch:!1,isKeyboard:!1,scrolling:!1})},this._el=null,this._prevPos=[0,0]}enable(e){this._el||(e.addEventListener(n.FP.MOUSE_DOWN,this._onMouseDown),this._el=e)}disable(){const e=this._el;e&&(e.removeEventListener(n.FP.MOUSE_DOWN,this._onMouseDown),window.removeEventListener(n.FP.MOUSE_MOVE,this._onMouseMove,!1),window.removeEventListener(n.FP.MOUSE_UP,this._onMouseUp,!1),this._el=null)}}const a=r},2197:(e,t,s)=>{s.d(t,{Z:()=>l});var i=s(2921),n=s(1028),o=s(9952),r=s(8388);class a extends i.Z{get scrollable(){return this._scrollable}set scrollable(e){this._scrollable=e}constructor(){super(),this._onTouchStart=e=>{if(e.touches.length>1||this._scrolling)return;const t=e.touches[0];this._isFirstTouch=!0,this._prevPos[0]=t.clientX,this._prevPos[1]=t.clientY,this.trigger(o.QA.INPUT_START,{srcEvent:e,isTouch:!0,isKeyboard:!1})},this._onTouchMove=e=>{if(e.touches.length>1||this._scrolling)return;const t=e.touches[0],s=this._scrollable,i=this._prevPos,n=t.clientX,a=t.clientY,l=n-i[0],h=a-i[1];if(this._isFirstTouch){if(s&&!(0,r.rm)()&&Math.abs(h)>Math.abs(l))return void(this._scrolling=!0);this._isFirstTouch=!1}!1!==e.cancelable&&e.preventDefault(),this.trigger(o.QA.CHANGE,{delta:{x:l,y:h},isTouch:!0,isKeyboard:!1}),i[0]=n,i[1]=a},this._onTouchEnd=e=>{if(0!==e.touches.length)return;const t=e.touches[0],s=this._prevPos;t?(s[0]=t.clientX,s[1]=t.clientY):(s[0]=0,s[1]=0,this.trigger(o.QA.INPUT_END,{isTouch:!0,isKeyboard:!1,scrolling:this._scrolling})),!1!==e.cancelable&&e.preventDefault(),this._scrolling=!1},this._el=null,this._prevPos=[0,0],this._isFirstTouch=!1,this._scrolling=!1,this._scrollable=!1}enable(e){this._el||(e.addEventListener(n.FP.TOUCH_START,this._onTouchStart,{passive:!1}),e.addEventListener(n.FP.TOUCH_MOVE,this._onTouchMove,{passive:!1}),e.addEventListener(n.FP.TOUCH_END,this._onTouchEnd),this._el=e)}disable(){const e=this._el;e&&(e.removeEventListener(n.FP.TOUCH_START,this._onTouchStart),e.removeEventListener(n.FP.TOUCH_MOVE,this._onTouchMove),e.removeEventListener(n.FP.TOUCH_END,this._onTouchEnd),this._el=null)}}const l=a},7035:(e,t,s)=>{s.d(t,{Z:()=>o});var i=s(8388),n=s(9952);const o=class{get val(){return this._val}get start(){return this._start}get end(){return this._end}get progress(){return this._progress}get activated(){return this._activated}get duration(){return this._duration}set duration(e){this._duration=e}get loop(){return this._loop}set loop(e){this._loop=e}get range(){return this._range}get easing(){return this._easing}set easing(e){this._easing=e}constructor(e){let{duration:t=n._F,loop:s=!1,range:i={min:0,max:1},easing:o=n.K$}=void 0===e?{}:e;this._duration=t,this._loop=s,this._range=i,this._easing=o,this._activated=!1,this.reset(0)}update(e){if(!this._activated)return this._val=this._end,0;const t=this._start,s=this._end,n=this._duration,o=this._val,r=this._loop,a=this._progress+e/n;this._progress=r?(0,i.zc)(a,0,1):(0,i.uZ)(a,0,1);const l=this._easing(this._progress);return this._val=(0,i.t7)(t,s,l),!r&&this._progress>=1&&(this._activated=!1),this._val-o}reset(e){const t=this._range,s=(0,i.uZ)(e,t.min,t.max);this._start=s,this._end=s,this._val=s,this._progress=0,this._activated=!1}add(e){const t=this._range;this._start=(0,i.uZ)(this._start+e,t.min,t.max),this._end=(0,i.uZ)(this._end+e,t.min,t.max),this._val=(0,i.uZ)(this._val+e,t.min,t.max)}setNewEndByDelta(e){const t=this._range;this._start=this._val,this._end=(0,i.uZ)(this._end+e,t.min,t.max),this._progress=0,this._activated=!0}setRange(e,t){this._start=(0,i.uZ)(this._start,e,t),this._end=(0,i.uZ)(this._end,e,t),this._range={min:e,max:t}}}},9290:(e,t,s)=>{s.d(t,{Z:()=>i});const i=class{constructor(e,t,s,i){this.program=e.createProgram(t,s),this.uniforms=i,this.uniformLocations=e.getUniformLocations(this.program,i)}}},1815:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(1839),n=s(7191),o=s(7962);const r=class{constructor(){this.matrix=i.Ue(),this.rotation=n.Ue(),this.position=o.al(0,0,0),this.scale=o.al(1,1,1)}updateMatrix(){i.Iw(this.matrix,this.rotation,this.position,this.scale)}};const a=class extends r{constructor(e,t){super(),this.vao=e,this.program=t}destroy(e){e.releaseVAO(this.vao),e.releaseShaderResources(this.program)}}},9658:(e,t,s)=>{s.d(t,{Z:()=>n});class i extends Error{constructor(e,t){super(e),Object.setPrototypeOf(this,i.prototype),this.name="View360Error",this.code=t}}const n=i},7337:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(4074),n=s(9952),o=s(8388);class r extends i.Z{constructor(e){let{order:t,rotateUV:s}=e;const i=1/3,r=[];for(let n=1;n>=0;n--)for(let e=0;e<3;e++){const t=[e*i,.5*n,(e+1)*i,.5*n,(e+1)*i,.5*(n+1),e*i,.5*(n+1)];r.push(t)}s&&s.forEach(((e,t)=>{if(e===n.lD.ZERO)return;const s=r[t];let i;i=e===n.lD.CW_90?[1,2,3,0]:e===n.lD.CCW_90?[3,0,1,2]:[2,3,0,1];const o=Array(s.length);for(let n=0;n<s.length/2;n++)o[2*n+0]=s[2*i[n]+0],o[2*n+1]=s[2*i[n]+1];r[t]=o}));super([1,-1,1,-1,-1,1,-1,1,1,1,1,1,-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,1,-1,1,1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,-1,-1,-1,-1,-1,1,-1,-1,1,-1,1,1,1,1,1,1,-1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1],[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],(0,o.rM)(r,t,"BFUDRL").reduce(((e,t)=>e.concat(t)),[]))}}const a=r},4074:(e,t,s)=>{s.d(t,{Z:()=>n});const i=class{constructor(e,t){this.data=e,this.itemSize=t,this.count=e.length/t}};const n=class{constructor(e,t,s){this.vertices=new i(new Float32Array(e),3),this.indicies=new i(new Uint16Array(t),1),this.uvs=new i(new Float32Array(s),2)}}},8155:(e,t,s)=>{s.d(t,{Z:()=>o});var i=s(4074);class n extends i.Z{constructor(){const e=60,t=-.5*Math.PI,s=[],i=[],n=[];let o,r;for(o=0;o<=60;o++){const a=(o/60-.5)*Math.PI,l=Math.sin(a),h=Math.cos(a);for(r=0;r<=e;r++){const a=2*(r/e-.5)*Math.PI+t,c=Math.sin(a),_=Math.cos(a)*h,u=l,d=c*h,m=r/e,p=o/60;if(s.push(m,p),i.push(_,u,d),r!==e&&60!==o){const t=61*o+r,s=t+e+1;n.push(t,t+1,s,s,t+1,s+1)}}}super(i,n,s)}}const o=n},397:(e,t,s)=>{s.d(t,{VS:()=>K.Z,Xt:()=>F.Xt,FP:()=>F.FP,ZP:()=>q});var i=s(2921),n=s(7962),o=s(7191),r=s(1839),a=s(7035),l=s(9952),h=s(8388);const c=class{get duration(){return this._motion.duration}set duration(e){this._motion.duration=e}get easing(){return this._motion.easing}set easing(e){this._motion.easing=e}constructor(e,t,s,i){let{duration:n=l._F,easing:o=l.K$}=void 0===i?{}:i;this._camera=e,this._motion=new a.Z({duration:n,easing:o,range:{min:0,max:1}}),this._from=t,this._to=s,this._finishPromise=new Promise((e=>{this._finish=e})),this._motion.setNewEndByDelta(1)}getFinishPromise(){return this._finishPromise}update(e){const t=this._camera,s=this._from,i=this._to,n=this._motion;n.update(e);const r=n.val,a=o.Ue(),l=(0,h.t7)(s.zoom,i.zoom,r);o.ZA(a,s.rotation,i.rotation,r),t.rotate(a,l),r>=1&&this._finish()}};class _ extends i.Z{get aspect(){return this._aspect}get changed(){return this._changed}get yawRange(){return this._initialYawRange}set yawRange(e){this._initialYawRange=e}get pitchRange(){return this._initialPitchRange}set pitchRange(e){this._initialPitchRange=e}get zoomRange(){return this._initialZoomRange}set zoomRange(e){this._initialZoomRange=e}constructor(e){let{initialYaw:t,initialPitch:s,initialZoom:i,yawRange:a,pitchRange:l,zoomRange:h,fov:c}=e;super(),this.yaw=t,this.pitch=s,this.zoom=i,this.rollOffset=0,this.initialYaw=t,this.initialPitch=s,this.initialZoom=i,this.position=n.Ue(),this.animation=null,this._up=n.al(0,1,0),this._aspect=1,this._initialYawRange=a,this._initialPitchRange=l,this._initialZoomRange=h,this._yawRange=a,this._pitchRange=l,this._zoomRange=h,this.quaternion=o.Ue(),this._updateQuaternion(),this.viewMatrix=r.Ue(),this.projectionMatrix=r.Ue(),this.fov=c,this._maxRenderHeight=-1}destroy(){this.off()}resize(e,t){const s=this._aspect;this._aspect=e/t,this._aspect!==s&&this.updateMatrix()}lookAt(e){let{yaw:t=this.yaw,pitch:s=this.pitch,zoom:i=this.zoom}=e;const n=o.d9(this.quaternion),r=this.zoom;this.yaw=(0,h.zc)(t,0,360),this.pitch=(0,h.uZ)(s,-90,90),this.zoom=i,this._updateQuaternion();const a=Math.abs(i-r);(!o.fS(this.quaternion,n)||a>=10*l.Ib)&&this.updateMatrix()}rotate(e,t){void 0===t&&(t=this.zoom);const s=o.Fv(o.Ue(),e),i=o.fS(this.quaternion,s);o.JG(this.quaternion,s);const n=this.zoom,{yaw:r,pitch:a}=(0,h.b6)(s);this.yaw=r,this.pitch=a,this.zoom=t;const c=Math.abs(t-n);(!i||c>=10*l.Ib)&&this.updateMatrix()}async animateTo(e){let{yaw:t=this.yaw,pitch:s=this.pitch,zoom:i=this.zoom,duration:n=0,easing:r=l.K$}=void 0===e?{}:e;if(this.yaw===t&&this.pitch===s&&this.zoom===i)return;const a={rotation:o.d9(this.quaternion),zoom:this.zoom},_={rotation:(0,h.nk)(o.Ue(),t,s,this.rollOffset),zoom:i},u=new c(this,a,_,{duration:n,easing:r}),d=u.getFinishPromise();return this.animation=u,d.then((()=>{this.animation=null,this.trigger(l.u1.ANIMATION_END,{animation:u})})),d}restrictYawRange(e,t){this._yawRange={min:e,max:t}}restrictPitchRange(e,t){this._pitchRange={min:e,max:t}}restrictZoomRange(e,t){this._zoomRange={min:e,max:t}}restrictRenderHeight(e){this._maxRenderHeight=e}resetRange(){this._yawRange=this._initialYawRange,this._pitchRange=this._initialPitchRange,this._zoomRange=this._initialZoomRange,this._maxRenderHeight=-1}getYawRange(e){const t=this._yawRange,s=this._maxRenderHeight;if(!t)return l.oK;const i=.5*this.getHorizontalFov(e);let n=t.min,o=t.max;if(s>0){const e=(0,h.Jx)(i*l.ZX,this._aspect),r=.5*s,a=Math.tan(e),c=Math.sqrt((1+r*r)/(1+a*a)),_=Math.atan(Math.tan(i*l.ZX)*c)*l.jl;n=t.min+_,o=t.max-_}return n>o&&(n=0,o=0),{min:n,max:o}}getPitchRange(e){const t=this._pitchRange,s=this._maxRenderHeight;if(!t)return l.De;let i=t.min,n=t.max;if(s>0){const s=.5*this.getVerticalFov(e);i=t.min+s,n=t.max-s}return i>n&&(i=0,n=0),{min:Math.max(i,-90),max:Math.min(n,90)}}getZoomRange(){var e;const t=null!=(e=this._zoomRange)?e:l.ju,s=this.getHorizontalFov(t.max),i=this.getHorizontalFov(t.min),n=this.getHorizontalFov(this.zoom);return{min:Math.max(s,1),max:Math.min(i,180),current:n}}getHorizontalFov(e){return void 0===e&&(e=this.zoom),this._getZoomedHorizontalFov(e)*l.jl}getVerticalFov(e){void 0===e&&(e=this.zoom);const t=this._aspect,s=this._getZoomedHorizontalFov(e);return(0,h.Jx)(s,t)*l.jl}fovToZoom(e){const t=this.fov;return Math.tan(l.ZX*t*.5)/Math.tan(l.ZX*e*.5)}updateMatrix(){const e=this._up,t=this._aspect,s=this.viewMatrix,i=this.projectionMatrix,o=this.position,a=this.quaternion,l=n.Ue(),c=n.al(0,0,-1);n.VC(c,c,a),n.VC(l,e,a);const _=this._getZoomedHorizontalFov(),u=(0,h.Jx)(_,t);r.zB(s,o,c,l),r.G3(i,u,t,.1,100),this._changed=!0}onFrameRender(){this._changed=!1}_updateQuaternion(){(0,h.nk)(this.quaternion,this.yaw,this.pitch,this.rollOffset)}_getZoomedHorizontalFov(e){return void 0===e&&(e=this.zoom),2*Math.atan(Math.tan(l.ZX*this.fov*.5)/e)}}const u=_;var d=s(8861),m=s(2197),p=s(1028);class E extends i.Z{get active(){const e=this._pressed;return e.LEFT||e.UP||e.RIGHT||e.DOWN}constructor(){super(),this._onKeyDown=e=>{if(e.location!==KeyboardEvent.DOM_KEY_LOCATION_STANDARD)return;this._updateKeyPress(e,!0);const t=this._getPressedKeyCount();t<=0||(e.preventDefault(),1!==t||e.repeat||this.trigger(l.QA.INPUT_START,{srcEvent:e,isTouch:!1,isKeyboard:!0}))},this._onKeyUp=e=>{if(e.location!==KeyboardEvent.DOM_KEY_LOCATION_STANDARD)return;this._updateKeyPress(e,!1);this._getPressedKeyCount()>0||this.trigger(l.QA.INPUT_END,{isTouch:!1,isKeyboard:!0,scrolling:!1})},this._el=null,this._clearPressedKeys()}enable(e){this._el||(e.addEventListener(p.FP.KEY_DOWN,this._onKeyDown),e.addEventListener(p.FP.KEY_UP,this._onKeyUp),this._el=e,this._clearPressedKeys())}disable(){const e=this._el;e&&(e.removeEventListener(p.FP.KEY_DOWN,this._onKeyDown),e.removeEventListener(p.FP.KEY_UP,this._onKeyUp),this._el=null,this._clearPressedKeys())}update(){const e=this._getDeltaByPressedKeys();0===e.x&&0===e.y||this.trigger(l.QA.CHANGE,{delta:e,isTouch:!1,isKeyboard:!0})}_clearPressedKeys(){this._pressed=p.gf.reduce(((e,t)=>({...e,[t]:!1})),{})}_updateKeyPress(e,t){const s=this._pressed,i=null!=e.keyCode?p.Dx[e.keyCode]:p.$[e.key];i&&(s[i]=t)}_getPressedKeyCount(){return p.gf.filter((e=>this._pressed[e])).length}_getDeltaByPressedKeys(){const e=this._pressed;let t=0,s=0;return e.LEFT&&(t+=1),e.RIGHT&&(t-=1),e.UP&&(s+=1),e.DOWN&&(s-=1),{x:t,y:s}}}const g=E;class v extends i.Z{get enabled(){return this._enabled}get enableBlocked(){return this._enableBlocked}get animating(){return this._keyboardInput.active||this._xMotion.activated||this._yMotion.activated}get yaw(){return this._xMotion}get pitch(){return this._yMotion}get scrollable(){return this._touchInput.scrollable}set scrollable(e){this._touchInput.scrollable=e}get pointerScale(){return this._pointerScale}set pointerScale(e){this._pointerScale=e}get keyboardScale(){return this._keyboardScale}set keyboardScale(e){this._keyboardScale=e}get duration(){return this._duration}set duration(e){this._duration=e,this._xMotion.duration=e,this._yMotion.duration=e}get easing(){return this._easing}set easing(e){this._easing=e,this._xMotion.easing=e,this._yMotion.easing=e}get disablePitch(){return this._disablePitch}set disablePitch(e){this._disablePitch=e}get disableYaw(){return this._disableYaw}set disableYaw(e){this._disableYaw=e}get disableKeyboard(){return this._disableKeyboard}set disableKeyboard(e){this._disableKeyboard=e}constructor(e,t,s){let{duration:i=l._F,easing:n=l.K$,pointerScale:o=[1,1],keyboardScale:r=[1,1],disablePitch:h=!1,disableYaw:c=!1,disableKeyboard:_=!1}=void 0===s?{}:s;super(),this._onInputStart=e=>{this._changedWhileDragging=!1,this.trigger(l.QA.INPUT_START,{...e,inputType:"rotate"})},this._onChange=e=>{const t=e.delta,s=1/this._zoomScale,i=this._screenScale,n=this._keyboardScale,o=this._pointerScale;let r;r=e.isKeyboard?[n[0]*s,n[1]*s]:[o[0]*i[0]*s,o[1]*i[1]*s];const a=t.x*r[0],l=t.y*r[1];this._xMotion.setNewEndByDelta(a),this._yMotion.setNewEndByDelta(l),this._changedWhileDragging=!0},this._onInputEnd=e=>{this.trigger(l.QA.INPUT_END,{...e,inputType:"rotate"}),this._changedWhileDragging||e.isKeyboard||e.scrolling||this.trigger(l.QA.STATIC_CLICK,{isTouch:e.isTouch}),this._changedWhileDragging=!1},this._controlEl=e,this._pointerScale=o,this._keyboardScale=r,this._duration=i,this._easing=n,this._disablePitch=h,this._disableYaw=c,this._disableKeyboard=_,this._enableBlocked=t,this._mouseInput=new d.Z,this._touchInput=new m.Z,this._keyboardInput=new g,this._xMotion=new a.Z({duration:i,range:l.oK,easing:n}),this._yMotion=new a.Z({duration:i,range:l.De,easing:n}),this._screenScale=[1,1],this._zoomScale=1,this._enabled=!1,this._changedWhileDragging=!1,this._bindInputs()}destroy(){this.disable(),this._mouseInput.off(),this._touchInput.off(),this._keyboardInput.off(),this.off(),this._changedWhileDragging=!1}update(e){if(!this._enabled)return;const t=this._xMotion,s=this._yMotion,i=this._keyboardInput;this._disableKeyboard||i.update(),this._disablePitch||s.update(e),this._disableYaw||t.update(e)}updateRange(e,t){const s=e.getYawRange(t),i=e.getPitchRange(t);this._xMotion.setRange(s.min,s.max),this._yMotion.setRange(i.min,i.max)}setZoomScale(e){this._zoomScale=e}resize(e,t,s,i){const n=(0,h.Jx)(e*l.ZX,t)*l.jl;this._screenScale[0]=e/s,this._screenScale[1]=n/i}enable(){if(this._enabled)return;const e=this._controlEl;this._mouseInput.enable(e),this._touchInput.enable(e),this._keyboardInput.enable(e),this._enabled=!0,this._enableBlocked=!1,this.trigger(l.QA.ENABLE,{control:this,updateCursor:!0})}disable(){this._enabled&&(this._mouseInput.disable(),this._touchInput.disable(),this._keyboardInput.disable(),this._enabled=!1,this.trigger(l.QA.DISABLE,{updateCursor:!0}))}sync(e){this.updateRange(e,e.zoom),this._xMotion.reset(e.yaw),this._yMotion.reset(e.pitch)}_bindInputs(){const e=this._mouseInput,t=this._touchInput,s=this._keyboardInput;e.on(l.QA.INPUT_START,this._onInputStart),e.on(l.QA.CHANGE,this._onChange),e.on(l.QA.INPUT_END,this._onInputEnd),t.on(l.QA.INPUT_START,this._onInputStart),t.on(l.QA.CHANGE,this._onChange),t.on(l.QA.INPUT_END,this._onInputEnd),s.on(l.QA.INPUT_START,this._onInputStart),s.on(l.QA.CHANGE,this._onChange),s.on(l.QA.INPUT_END,this._onInputEnd)}}const T=v;class b extends i.Z{get scrollable(){return this._scrollable}set scrollable(e){this._scrollable=e}constructor(){super(),this._onWheel=e=>{const t=this._scrollable;if(0===e.deltaY||t)return;e.preventDefault(),e.stopPropagation(),this._inputTimer<0?this.trigger(l.QA.INPUT_START,{srcEvent:e,isTouch:!1,isKeyboard:!1}):this._clearTimer();const s=this._baseScale*e.deltaY;this.trigger(l.QA.CHANGE,{delta:s,isTouch:!1,isKeyboard:!1}),this._inputTimer=window.setTimeout((()=>{this.trigger(l.QA.INPUT_END,{isTouch:!1,isKeyboard:!1,scrolling:!1}),this._inputTimer=-1}),l._F)},this._el=null,this._baseScale=.04,this._scrollable=!1,this._inputTimer=-1}enable(e){this._el||(e.addEventListener(p.FP.WHEEL,this._onWheel,{passive:!1,capture:!1}),this._el=e,this._clearTimer())}disable(){const e=this._el;e&&(e.removeEventListener(p.FP.WHEEL,this._onWheel,!1),this._el=null,this._clearTimer())}_clearTimer(){window.clearTimeout(this._inputTimer),this._inputTimer=-1}}const f=b;class w extends i.Z{constructor(){super(),this._onTouchMove=e=>{const t=e.touches;if(2!==t.length)return;if(!e.cancelable)return;e.preventDefault(),e.stopPropagation();const s=this._prevDistance,i=[t[0].pageX-t[1].pageX,t[0].pageY-t[1].pageY],n=Math.sqrt(i[0]*i[0]+i[1]*i[1])*this._baseScale,o=this._isFirstTouch?0:n-s;this._isFirstTouch&&this.trigger(l.QA.INPUT_START,{srcEvent:e,isTouch:!0,isKeyboard:!1}),this._prevDistance=n,this._isFirstTouch=!1,this.trigger(l.QA.CHANGE,{delta:o,isTouch:!0,isKeyboard:!1})},this._onTouchEnd=e=>{0===e.touches.length&&(this._isFirstTouch||this.trigger(l.QA.INPUT_END,{isTouch:!0,isKeyboard:!1,scrolling:!1}),this._prevDistance=-1,this._isFirstTouch=!0)},this._el=null,this._baseScale=-.2,this._prevDistance=-1,this._isFirstTouch=!0}enable(e){this._el||(e.addEventListener(p.FP.TOUCH_MOVE,this._onTouchMove,{passive:!1,capture:!1}),e.addEventListener(p.FP.TOUCH_END,this._onTouchEnd),this._el=e,this._prevDistance=-1,this._isFirstTouch=!0)}disable(){const e=this._el;e&&(e.removeEventListener(p.FP.TOUCH_MOVE,this._onTouchMove,!1),e.removeEventListener(p.FP.TOUCH_END,this._onTouchEnd),this._el=null)}}const C=w;class O extends i.Z{get enabled(){return this._enabled}get enableBlocked(){return this._enableBlocked}get animating(){return this._motion.activated}get zoom(){return this._motion.val}get scrollable(){return this._wheelInput.scrollable}set scrollable(e){this._wheelInput.scrollable=e}get range(){return this._motion.range}get scale(){return this._scale}set scale(e){this._scale=e}get duration(){return this._motion.duration}get easing(){return this._motion.easing}constructor(e,t,s){let{scale:i=1,duration:n=l._F,easing:o=l.K$}=void 0===s?{}:s;super(),this._onInputStart=e=>{this.trigger(l.QA.INPUT_START,{...e,inputType:"zoom"})},this._onChange=e=>{let{delta:t}=e;const s=t*this._scale;this._motion.setNewEndByDelta(s)},this._onInputEnd=e=>{this.trigger(l.QA.INPUT_END,{...e,inputType:"zoom"})},this._scale=i,this._controlEl=e,this._enableBlocked=t,this._wheelInput=new f,this._pinchInput=new C,this._motion=new a.Z({duration:n,easing:o,range:l.oK}),this._enabled=!1,this._bindInputs()}destroy(){this.disable(),this._wheelInput.off(),this._pinchInput.off(),this.off()}update(e){if(!this._enabled)return;this._motion.update(e)}enable(){if(this._enabled)return;const e=this._controlEl;this._wheelInput.enable(e),this._pinchInput.enable(e),this._enabled=!0,this._enableBlocked=!1,this.trigger(l.QA.ENABLE,{control:this,updateCursor:!1})}disable(){this._enabled&&(this._wheelInput.disable(),this._pinchInput.disable(),this._enabled=!1,this.trigger(l.QA.DISABLE,{updateCursor:!1}))}sync(e){const t=this._motion,s=e.getZoomRange();t.setRange(s.min,s.max),t.reset(s.current)}_bindInputs(){const e=this._wheelInput,t=this._pinchInput;e.on(l.QA.INPUT_START,this._onInputStart),e.on(l.QA.CHANGE,this._onChange),e.on(l.QA.INPUT_END,this._onInputEnd),t.on(l.QA.INPUT_START,this._onInputStart),t.on(l.QA.CHANGE,this._onChange),t.on(l.QA.INPUT_END,this._onInputEnd)}}const A=O;var R=s(5821);const P=class{get useGrabCursor(){return this._useGrabCursor}set useGrabCursor(e){e!==this._useGrabCursor&&(this._useGrabCursor=e,e&&this._enabled?this._setCursor(p.WV.GRAB):e||this._setCursor(p.WV.NONE))}get disableContextMenu(){return this._disableContextMenu}set disableContextMenu(e){e!==this._disableContextMenu&&(this._disableContextMenu=e,e&&this._enabled?this._blockContextMenu():e||this._restoreContextMenu())}get scrollable(){return this._rotateControl.scrollable}set scrollable(e){this._rotateControl.scrollable=e}get wheelScrollable(){return this._zoomControl.scrollable}set wheelScrollable(e){this._zoomControl.scrollable=e}get ignoreZoomScale(){return this._ignoreZoomScale}set ignoreZoomScale(e){this._ignoreZoomScale=e}get enabled(){return this._enabled}get rotate(){return this._rotateControl}get zoom(){return this._zoomControl}get gyro(){return this._gyroControl}get animating(){return this._rotateControl.animating||this._zoomControl.animating||this._gyroControl.animating}constructor(e,t,s){let{useGrabCursor:i,scrollable:n,wheelScrollable:o,disableContextMenu:r,rotate:a,zoom:l,gyro:c}=s;this._preventContextMenu=e=>{e.preventDefault()},this._onInputStart=e=>{this._useGrabCursor&&!e.isKeyboard&&this._setCursor(p.WV.GRABBING)},this._onInputEnd=e=>{this._useGrabCursor&&!e.isKeyboard&&this._setCursor(p.WV.GRAB)},this._onEnable=e=>{let{control:t,updateCursor:s}=e;s&&this._useGrabCursor&&this._setCursor(p.WV.GRAB),t.sync(this._camera)},this._onDisable=e=>{let{updateCursor:t}=e;t&&this._setCursor(p.WV.NONE)},this._onCameraAnimationEnd=e=>{let{animation:t}=e;t.getFinishPromise().then((()=>{this.sync()}))},this._useGrabCursor=i,this._disableContextMenu=r,this._camera=t,this._controlEl=e,this._ignoreZoomScale=!1,this._enabled=!1,this._rotateControl=new T(e,!a,(0,h.PO)(a)),this._zoomControl=new A(e,!l,(0,h.PO)(l)),this._gyroControl=new R.Z(!c,(0,h.PO)(c)),this._rotateControl.scrollable=n,this._zoomControl.scrollable=o,this._bindEvents()}destroy(){this.disable(),this._rotateControl.destroy(),this._zoomControl.destroy(),this._setCursor(p.WV.NONE)}resize(e,t){const s=this._camera;this._rotateControl.resize(s.fov,s.aspect,e,t)}async enable(){this._enabled||(this._rotateControl.enableBlocked||this._rotateControl.enable(),this._zoomControl.enableBlocked||this._zoomControl.enable(),this._gyroControl.enableBlocked||await R.Z.isAvailable()&&this._gyroControl.enable(),this.sync(),this._disableContextMenu&&this._blockContextMenu(),this._enabled=!0)}disable(){this._enabled&&(this._rotateControl.disable(),this._zoomControl.disable(),this._gyroControl.disable(),this._restoreContextMenu(),this._enabled=!1)}update(e){const t=this._camera,s=this._rotateControl,i=this._zoomControl,n=this._gyroControl;i.update(e);const o=(0,h.h4)(t.fov,i.zoom),r=this._ignoreZoomScale?1:Math.max(o,1);s.setZoomScale(r),s.updateRange(t,o),s.update(e);const a=s.yaw,l=s.pitch;n.enabled?n.update(t,a,l,o):t.lookAt({yaw:a.val,pitch:l.val,zoom:o})}sync(){const e=this._camera;this._zoomControl.sync(e),this._rotateControl.sync(e)}_blockContextMenu(){this._controlEl.addEventListener(p.FP.CONTEXT_MENU,this._preventContextMenu)}_restoreContextMenu(){this._controlEl.removeEventListener(p.FP.CONTEXT_MENU,this._preventContextMenu)}_setCursor(e){if(!this._useGrabCursor&&e!==p.WV.NONE)return;this._controlEl.style.cursor=e}_bindEvents(){const e=this._rotateControl,t=this._zoomControl;e.on(l.QA.INPUT_START,this._onInputStart),e.on(l.QA.INPUT_END,this._onInputEnd),e.on(l.QA.ENABLE,this._onEnable),e.on(l.QA.DISABLE,this._onDisable),t.on(l.QA.ENABLE,this._onEnable),t.on(l.QA.DISABLE,this._onDisable),this._camera.on(l.u1.ANIMATION_END,this._onCameraAnimationEnd)}};var N=s(5011);const I=class{constructor(e){let{width:t,height:s,flipY:i}=e;this.width=t,this.height=s,this.flipY=i,this.wrapS=WebGLRenderingContext.CLAMP_TO_EDGE,this.wrapT=WebGLRenderingContext.CLAMP_TO_EDGE}destroy(){}isVideo(){return!1}isCube(){return!1}};const y=class extends I{constructor(e){let{source:t,width:s,height:i,flipY:n}=e;super({width:s,height:i,flipY:n}),this.source=t}};const L=class extends y{destroy(){const e=this.source;e.pause(),e.removeAttribute("src"),e.load()}isVideo(){return!0}isPaused(){const e=this.source;return e.paused||e.ended||e.readyState<=2}hasAudio(){const e=this.source;return e.audioTracks?e.audioTracks.length>0:null!=e.webkitAudioDecodedByteCount?e.webkitAudioDecodedByteCount>0:null==e.mozHasAudio||e.mozHasAudio}};const x=class extends I{constructor(e){let{sources:t,width:s,height:i,flipY:n}=e;super({width:s,height:i,flipY:n}),this.sources=t}isCube(){return!0}};const S=class{constructor(){this._loadChecker=new N.ZP}async load(e,t){if(t)return this.loadVideo(e,(0,h.PO)(t));if(Array.isArray(e)&&e.length>1)return this.loadCubeImage(e);{const t=Array.isArray(e)?e[0]:e;return this.loadImage(t)}}async loadImage(e){const t=this._toImageArray(e);return this._load(t,(e=>{const s=t[0];e(new y({source:s,width:s.naturalWidth,height:s.naturalHeight,flipY:!0}))}))}async loadCubeImage(e){const t=this._toImageArray(e);return this._load(t,(e=>{e(new x({sources:t,width:t[0].naturalWidth,height:t[0].naturalHeight,flipY:!1}))}))}async loadVideo(e,t){const s={autoplay:!0,muted:!0,loop:!1,volume:1,...t},i=this._toVideoElement(e,s);return this._load([i],(e=>{const{autoplay:t,muted:n}=s;i.currentTime=0,t&&n&&i.play().catch((()=>{})),e(new L({source:i,width:i.videoWidth,height:i.videoHeight,flipY:!0}))}))}_load(e,t){const s=this._loadChecker;return new Promise(((i,n)=>{s.once("ready",(e=>{e.errorCount>0||t(i)})),s.once("error",n),s.check(e)}))}_toImageArray(e){return(Array.isArray(e)?e:[e]).map((e=>{if((0,h.HD)(e)){const t=new Image;return t.crossOrigin="anonymous",t.src=e,t}return e}))}_toVideoElement(e,t){let{muted:s,loop:i,volume:n}=t;if(e instanceof HTMLVideoElement)return e;const o=document.createElement("video");o.crossOrigin="anonymous",o.playsInline=!0,o.setAttribute("webkit-playsinline",""),o.muted=s,o.volume=n,o.loop=i,Array.isArray(e)?e.forEach((e=>this._appendSourceElement(o,e))):this._appendSourceElement(o,e);return o.querySelectorAll("source").length>0&&o.readyState<1&&o.load(),o}_appendSourceElement(e,t){if(t instanceof HTMLSourceElement)return t;const s=document.createElement("source");s.src=t,e.appendChild(s)}};const D=class{constructor(e,t){void 0===t&&(t=window),this.maxDeltaTime=e,this._context=t,this._rafId=-1,this._rafTimer=-1,this._lastUpdateTime=-1}start(e){const t=this._context;if(!t||!e)return;if(this._rafId>=0||this._rafTimer>=0)return;const s=(i,n)=>{const o=Date.now(),r=Math.min(o-this._lastUpdateTime,1e3*this.maxDeltaTime);e(r,n),this._lastUpdateTime=o,this._rafId=t.requestAnimationFrame(s)};this._lastUpdateTime=Date.now(),this._rafId=t.requestAnimationFrame(s)}stop(){this._rafId>=0&&this._context.cancelAnimationFrame(this._rafId),this._rafTimer>=0&&clearTimeout(this._rafTimer),this._rafId=-1,this._rafTimer=-1}changeContext(e){this.stop(),this._context=e}};const U=class{get useResizeObserver(){return this._useResizeObserver}get enabled(){return this._enabled}constructor(e,t){this._skipFirstResize=(()=>{let e=!0;return()=>{e?e=!1:this._onResize()}})(),this._useResizeObserver=e,this._enabled=!1,this._resizeObserver=null,this._onResize=t}enable(e){if(this._enabled&&this.disable(),this._useResizeObserver&&window.ResizeObserver){const t=e.getBoundingClientRect(),s=0!==t.width||0!==t.height,i=new ResizeObserver(s?this._skipFirstResize:this._onResize);i.observe(e),this._resizeObserver=i}else window.addEventListener(p.FP.RESIZE,this._onResize);return this._enabled=!0,this}disable(){if(!this._enabled)return this;const e=this._resizeObserver;return e?(e.disconnect(),this._resizeObserver=null):window.removeEventListener(p.FP.RESIZE,this._onResize),this._enabled=!1,this}};const M=class{get enabled(){return this._enabled}get enableBlocked(){return this._enableBlocked}get playing(){return this._enabled&&!this._interrupted}get delay(){return this._delay}set delay(e){this._delay=e}get delayOnMouseLeave(){return this._delayOnMouseLeave}set delayOnMouseLeave(e){this._delayOnMouseLeave=e}get speed(){return this._speed}set speed(e){this._speed=e}get pauseOnHover(){return this._pauseOnHover}set pauseOnHover(e){this._pauseOnHover=e}get canInterrupt(){return this._canInterrupt}set canInterrupt(e){this._canInterrupt=e}get disableOnInterrupt(){return this._disableOnInterrupt}set disableOnInterrupt(e){this._disableOnInterrupt=e}constructor(e,t,s){this._onInputStart=()=>{this._canInterrupt&&(this._interrupted=!0,this._clearTimeout())},this._onInputEnd=()=>{this._setUninterruptedAfterDelay(this._delay)},this._onGyroEnable=()=>{this.disable()},this._onMouseEnter=()=>{this._pauseOnHover&&(this._interrupted=!0,this._hovering=!0)},this._onMouseLeave=()=>{this._pauseOnHover&&(this._hovering=!1,this._setUninterruptedAfterDelay(this._delayOnMouseLeave))},this._camera=e.camera,this._control=e.control,this._element=t,this._enabled=!1,this._interrupted=!1,this._interruptionTimer=-1,this._hovering=!1;const{delay:i=2e3,delayOnMouseLeave:n=0,speed:o=1,pauseOnHover:r=!1,canInterrupt:a=!0,disableOnInterrupt:l=!1}=(0,h.PO)(s);this._enableBlocked=!s,this._delay=i,this._delayOnMouseLeave=n,this._speed=o,this._pauseOnHover=r,this._canInterrupt=a,this._disableOnInterrupt=l}destroy(){this.disable()}update(e){if(!this._enabled)return;if(this._interrupted)return void(this._disableOnInterrupt&&this.disable());const t=this._camera,s=-this._speed*e/100;t.yaw=(0,h.zc)(t.yaw+s,0,360)}enable(){const e=this._control,t=this._element;this._enabled||e.gyro.enabled||(e.rotate.on(l.QA.INPUT_START,this._onInputStart),e.rotate.on(l.QA.INPUT_END,this._onInputEnd),e.zoom.on(l.QA.INPUT_START,this._onInputStart),e.zoom.on(l.QA.INPUT_END,this._onInputEnd),e.gyro.on(l.QA.ENABLE,this._onGyroEnable),t.addEventListener(p.FP.MOUSE_ENTER,this._onMouseEnter,!1),t.addEventListener(p.FP.MOUSE_LEAVE,this._onMouseLeave,!1),this._enabled=!0,this._enableBlocked=!1)}enableAfterDelay(){this.enable(),this._interrupted=!0,this._setUninterruptedAfterDelay(this._delay)}disable(){if(!this._enabled)return;const e=this._control,t=this._element;e.rotate.off(l.QA.INPUT_START,this._onInputStart),e.rotate.off(l.QA.INPUT_END,this._onInputEnd),e.zoom.off(l.QA.INPUT_START,this._onInputStart),e.zoom.off(l.QA.INPUT_END,this._onInputEnd),e.gyro.off(l.QA.ENABLE,this._onGyroEnable),t.removeEventListener(p.FP.MOUSE_ENTER,this._onMouseEnter,!1),t.removeEventListener(p.FP.MOUSE_LEAVE,this._onMouseLeave,!1),this._enabled=!1,this._interrupted=!1,this._hovering=!1,this._clearTimeout()}_setUninterruptedAfterDelay(e){this._hovering||(this._clearTimeout(),e>0?this._interruptionTimer=window.setTimeout((()=>{this._interrupted=!1,this._interruptionTimer=-1}),e):(this._interrupted=!1,this._interruptionTimer=-1))}_clearTimeout(){this._interruptionTimer>=0&&(window.clearTimeout(this._interruptionTimer),this._interruptionTimer=-1)}};var F=s(6260);class B extends i.Z{constructor(e,t){void 0===t&&(t={}),super(),this.destroy=()=>{this.exit(),this.off()},this._onSessionEnd=()=>{this.exit(),this.trigger(F.FP.VR_END)},this._xrSession=null,this._xrRefSpace=null,this._ctx=e,this._options=t}async isAvailable(){const e=window.navigator.xr;return!!e&&e.isSessionSupported(l.AG).then((e=>e)).catch((()=>!1))}async enter(){const e=this._ctx,t=window.navigator.xr;if(!t)return;await R.Z.requestSensorPermission();const s={requiredFeatures:[l.gI],...this._options};await e.makeXRCompatible();const i=await t.requestSession(l.AG,s);e.bindXRLayer(i);const n=await i.requestReferenceSpace(l.gI);this._setSession(i,n),this.trigger(F.FP.VR_START,{session:i})}exit(){const e=this._xrSession;e&&e.end().catch((()=>{})),this._xrSession=null,this._xrRefSpace=null}canRender(e){const t=this._xrRefSpace;if(!t)return!1;return!!e.getViewerPose(t)}getEyeParams(e){const t=e.session,s=e.getViewerPose(this._xrRefSpace);if(!s)return null;const i=t.renderState.baseLayer;return i?s.views.map((e=>({viewport:i.getViewport(e),vMatrix:e.transform.inverse.matrix,pMatrix:e.projectionMatrix}))):null}_setSession(e,t){this._xrSession=e,this._xrRefSpace=t,e.addEventListener(p.FP.XR_END,this._onSessionEnd)}}const V=B;var Z=s(9658),k=s(9617);const z=class{constructor(e,t){this.element=e,this.position=t}};var G=s(4949);const H=class{constructor(e,t,s){let{zoom:i=!1}=s;this._containerEl=(0,h.S3)("."+F.Qz.HOTSPOT_CONTAINER,e),this._renderer=t,this._hotspots=[],this._zoom=i}refresh(){const e=this._containerEl;if(!e)return;const t=[].slice.apply(e.querySelectorAll("."+F.Qz.HOTSPOT));this._hotspots=t.map((e=>this._parseHotspot(e)))}render(e){const t=this._hotspots,s=.5*this._renderer.width,i=.5*this._renderer.height,o=e.zoom,r="translate(-50%, -50%)",a=this._zoom?"scale("+o+")":"";t.forEach((t=>{const o=t.position,l=n.Ue();if(n.JG(l,o),n.fF(l,l,e.viewMatrix),n.fF(l,l,e.projectionMatrix),l[2]>1||l[2]<0)return void t.element.classList.remove(F.Qz.HOTSPOT_VISIBLE);const h=k.al(l[0]*s+s,-l[1]*i+i);t.element.classList.add(F.Qz.HOTSPOT_VISIBLE),t.element.style.transform=[r,"translate("+h[0]+"px, "+h[1]+"px)",a].join(" ")}))}_parseHotspot(e){const t=e.dataset.yaw,s=e.dataset.pitch,i=e.dataset.position;if(t||s){const i=t?parseFloat(t):0,n=s?parseFloat(s):0,o=this._yawPitchToVec3(i,n);return new z(e,o)}if(i){const t=i.split(" ").map((e=>parseFloat(e)));if(t.length<3)throw new Z.Z(G.ZP.MESSAGES.INSUFFICIENT_ARGS(i,'hotspot attribute "data-position"'),G.ZP.CODES.INSUFFICIENT_ARGS);return new z(e,n.al(t[0],t[1],t[2]))}{const t=n.al(0,0,-1);return new z(e,t)}}_yawPitchToVec3(e,t){const s=e*l.ZX,i=t*l.ZX,o=n.Ue();return o[1]=Math.sin(i),o[2]=Math.cos(i),o[0]=o[2]*Math.sin(-s),o[2]=-o[2]*Math.cos(-s),o}};const j=class{get count(){return this.geometry.indicies.count}constructor(e,t,s){this.obj=e,this.geometry=t,this.buffers=s}};const Y=class{get canvas(){return this._canvas}get maxTextureSize(){return this._maxTextureSize}get isWebGL2(){return this._isWebGL2}get supportVAO(){return this._isWebGL2||!!this._extensions.vao}get lost(){return this._contextLost}get debug(){return this._debug}constructor(e,t){this._onContextLost=()=>{this._canvas.classList.add(F.Qz.CTX_LOST),this._contextLost=!0},this._onContextRestore=()=>{this._canvas.classList.remove(F.Qz.CTX_LOST),this._contextLost=!1},this._canvas=e,this._contextLost=!1,this._debug=t,this._extensions={vao:null,loseContext:null}}init(){const e=this._canvas,{gl:t,isWebGL2:s}=this._getContext(e);this._gl=t,this._maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this._isWebGL2=s,this._isWebGL2||(this._extensions.vao=t.getExtension("OES_vertex_array_object")),this._extensions.loseContext=t.getExtension("WEBGL_lose_context"),e.addEventListener(p.FP.CONTEXT_LOST,this._onContextLost),e.addEventListener(p.FP.CONTEXT_RESTORED,this._onContextRestore)}destroy(){const e=this._gl,t=this._canvas;e&&(e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),t.removeEventListener(p.FP.CONTEXT_LOST,this._onContextLost),t.removeEventListener(p.FP.CONTEXT_RESTORED,this._onContextRestore)}forceLoseContext(){const e=this._extensions.loseContext;e&&e.loseContext()}forceRestoreContext(){const e=this._extensions.loseContext;e&&e.restoreContext()}clear(){const e=this._gl;e.clear(e.COLOR_BUFFER_BIT)}resize(){const e=this._gl;e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight)}viewport(e,t,s,i){this._gl.viewport(e,t,s,i)}createVAO(e,t){const s=this._createNativeVAO(),i=new j(s,e,{indicies:this._createBuffer(),position:this._createBuffer(),uv:this._createBuffer()});return s&&(this._bindNativeVAO(s),this._supplyGeometryData(i,t),this._bindNativeVAO(null),this._unbindBuffers()),i}draw(e,t){const s=this._gl;e.obj?this._bindNativeVAO(e.obj):this._supplyGeometryData(e,t),s.drawElements(s.TRIANGLES,e.count,s.UNSIGNED_SHORT,0),e.obj?this._bindNativeVAO(null):this._unbindBuffers()}releaseVAO(e){e.obj&&this._deleteNativeVAO(e.obj),this._deleteBuffer(e.buffers.indicies),this._deleteBuffer(e.buffers.position),this._deleteBuffer(e.buffers.uv)}getUniformLocations(e,t){const s=this._gl,i=Object.keys(t).reduce(((t,i)=>(t[i]=s.getUniformLocation(e,i),t)),{});return{...this._getCommonUniformLocations(e),...i}}updateCommonUniforms(e,t,s){const i=this._gl,n=s.uniformLocations,o=e.matrix,a=r.Ue();r.Jp(a,t.viewMatrix,o),i.uniformMatrix4fv(n.uMVMatrix,!1,a),i.uniformMatrix4fv(n.uPMatrix,!1,t.projectionMatrix)}updateVRUniforms(e,t,s,i){const n=this._gl,o=e.uniformLocations;n.uniformMatrix4fv(o.uMVMatrix,!1,t),n.uniformMatrix4fv(o.uPMatrix,!1,s),o.uEye&&n.uniform1f(o.uEye,i)}updateUniforms(e){const t=this._gl,s=e.uniforms,i=e.uniformLocations;for(const n in s){const e=s[n],o=i[n];e&&(e.needsUpdate&&e.update(t,o,this._isWebGL2))}}releaseShaderResources(e){const t=this._gl,s=e.uniforms;for(const i in s){const e=s[i];e&&(e.needsUpdate&&e.destroy(t))}t.deleteProgram(e.program)}useProgram(e){this._gl.useProgram(e.program)}createProgram(e,t){const s=this._gl,i=s.createProgram(),n=this._compileShader(s.VERTEX_SHADER,e),o=this._compileShader(s.FRAGMENT_SHADER,t);if(s.attachShader(i,n),s.attachShader(i,o),s.bindAttribLocation(i,0,"position"),s.bindAttribLocation(i,1,"uv"),s.linkProgram(i),this._debug&&!s.getProgramParameter(i,s.LINK_STATUS)){let e=null;throw s.getShaderParameter(n,s.COMPILE_STATUS)?s.getShaderParameter(o,s.COMPILE_STATUS)||(e=s.getShaderInfoLog(o)):e=s.getShaderInfoLog(n),new Z.Z(G.ZP.MESSAGES.FAILED_LINKING_PROGRAM(s.getProgramInfoLog(i),e),G.ZP.CODES.FAILED_LINKING_PROGRAM)}return s.deleteShader(n),s.deleteShader(o),i}createWebGLTexture(e){const t=this._gl,s=t.createTexture();if(t.bindTexture(t.TEXTURE_2D,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapS),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapT),!e.isVideo()&&this._isWebGL2){const s=t;s.texStorage2D(s.TEXTURE_2D,1,s.RGBA8,e.width,e.height)}return s}createWebGLCubeTexture(e,t){const s=this._gl,i=s.createTexture();if(s.bindTexture(s.TEXTURE_CUBE_MAP,i),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_S,e.wrapS),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_T,e.wrapT),this._isWebGL2){const e=s;e.texStorage2D(e.TEXTURE_CUBE_MAP,1,e.RGBA8,t,t)}return i}async makeXRCompatible(){const e=this._gl,t=e.getContextAttributes();t&&!0!==t.xrCompatible&&await e.makeXRCompatible()}bindXRLayer(e){const t=this._gl,s=new XRWebGLLayer(e,t);e.updateRenderState({baseLayer:s})}bindXRFrame(e){const t=this._gl,s=e.session.renderState.baseLayer;t.bindFramebuffer(t.FRAMEBUFFER,s.framebuffer)}useDefaultFrameBuffer(){const e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,null)}_createBuffer(){return this._gl.createBuffer()}_deleteBuffer(e){return this._gl.deleteBuffer(e)}_createNativeVAO(){const e=this._gl;if(this._isWebGL2)return e.createVertexArray();{const e=this._extensions.vao;return(null==e?void 0:e.createVertexArrayOES())||null}}_bindNativeVAO(e){const t=this._gl;if(this._isWebGL2)t.bindVertexArray(e);else{const t=this._extensions.vao;null==t||t.bindVertexArrayOES(e)}}_deleteNativeVAO(e){const t=this._gl;if(this._isWebGL2)t.deleteVertexArray(e);else{const t=this._extensions.vao;null==t||t.deleteVertexArrayOES(e)}}_supplyGeometryData(e,t){const s=e.geometry;this._supplyIndiciesData(s.indicies,e.buffers.indicies),this._supplyAttributeData(s.vertices,t.program,"position",e.buffers.position),this._supplyAttributeData(s.uvs,t.program,"uv",e.buffers.uv)}_unbindBuffers(){const e=this._gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindBuffer(e.ARRAY_BUFFER,null)}_supplyIndiciesData(e,t){const s=this._gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,t),s.bufferData(s.ELEMENT_ARRAY_BUFFER,e.data,s.STATIC_DRAW)}_supplyAttributeData(e,t,s,i){const n=this._gl,o=n.getAttribLocation(t,s);o<0||(n.bindBuffer(n.ARRAY_BUFFER,i),n.bufferData(n.ARRAY_BUFFER,e.data,n.STATIC_DRAW),n.vertexAttribPointer(o,e.itemSize,n.FLOAT,!1,0,0),n.enableVertexAttribArray(o))}_compileShader(e,t){const s=this._gl,i=s.createShader(e);return s.shaderSource(i,t),s.compileShader(i),i}_getCommonUniformLocations(e){const t=this._gl;return{uMVMatrix:t.getUniformLocation(e,"uMVMatrix"),uPMatrix:t.getUniformLocation(e,"uPMatrix")}}_getContext(e){const t=["webgl2","webgl","experimental-webgl","webkit-3d","moz-webgl"];let s=null,i=!1;const n={preserveDrawingBuffer:!1,antialias:!1},o=e=>e.statusMessage;e.addEventListener(p.FP.CONTEXT_CREATE_ERROR,o);for(const a of t){try{s=e.getContext(a,n),i="webgl2"===a}catch(r){}if(s)break}if(e.removeEventListener(p.FP.CONTEXT_CREATE_ERROR,o),!s)throw new Z.Z(G.ZP.MESSAGES.WEBGL_NOT_SUPPORTED,G.ZP.CODES.WEBGL_NOT_SUPPORTED);return{gl:s,isWebGL2:i}}};const X=class{get canvas(){return this._canvas}get width(){return this._elementSize.x}get height(){return this._elementSize.y}get pixelRatio(){return this._pixelRatio}get aspect(){return this._elementSize.x/this._elementSize.y}constructor(e,t){this._canvas=e,this._elementSize={x:0,y:0},this._pixelRatio=1,this.ctx=new Y(e,t)}destroy(){const e=this._canvas;this.ctx.destroy(),e.width=1,e.height=1}resize(){const e=this._canvas,t=this._elementSize,s=window.devicePixelRatio;t.x=e.clientWidth,t.y=e.clientHeight,e.width=t.x*s,e.height=t.y*s,this._pixelRatio=s,this.ctx.resize()}render(e,t){const s=this.ctx,i=e.getMesh();!s.lost&&i&&(s.clear(),s.useProgram(i.program),s.updateCommonUniforms(i,t,i.program),e.update(t),s.updateUniforms(i.program),s.draw(i.vao,i.program))}renderVR(e,t,s){const i=this.ctx,n=e.getMesh(),o=t.getEyeParams(s);o&&n&&(i.bindXRFrame(s),i.useProgram(n.program),i.updateUniforms(n.program),o.forEach(((e,t)=>{const s=e.viewport,o=r.Jp(r.Ue(),e.vMatrix,n.matrix);i.viewport(s.x,s.y,s.width,s.height),i.updateVRUniforms(n.program,o,e.pMatrix,t),i.draw(n.vao,n.program)})))}};class W extends i.Z{get rootEl(){return this._rootEl}get renderer(){return this._renderer}get camera(){return this._camera}get control(){return this._control}get vr(){return this._vr}get hotspot(){return this._hotspot}get plugins(){return this._plugins}get projection(){return this._projection}set projection(e){this._initialized&&e?this.load(e):this._projection=e}get initialized(){return this._initialized}get autoplay(){return this._autoplay}get autoInit(){return this._autoInit}get autoResize(){return this._autoResize}get canvasSelector(){return this._canvasSelector}get useResizeObserver(){return this._useResizeObserver}get tabIndex(){return this._tabIndex}set tabIndex(e){const t=this._renderer.canvas;this._tabIndex=e,null!=e?t.tabIndex=e:t.removeAttribute("tabindex")}get maxDeltaTime(){return this._animator.maxDeltaTime}set maxDeltaTime(e){this._animator.maxDeltaTime=e}get debug(){return this._debug}set debug(e){this._debug=e}get initialYaw(){return this._camera.initialYaw}set initialYaw(e){this._camera.initialYaw=e}get initialPitch(){return this._camera.initialPitch}set initialPitch(e){this._camera.initialPitch=e}get initialZoom(){return this._camera.initialZoom}set initialZoom(e){this._camera.initialZoom=e}get yawRange(){return this._camera.yawRange}set yawRange(e){this._camera.yawRange=e,this._projection&&this._projection.updateCamera(this._camera)}get pitchRange(){return this._camera.pitchRange}set pitchRange(e){this._camera.pitchRange=e,this._projection&&this._projection.updateCamera(this._camera)}get zoomRange(){return this._camera.zoomRange}set zoomRange(e){this._camera.zoomRange=e,this._projection&&this._projection.updateCamera(this._camera)}get fov(){return this._camera.fov}set fov(e){const t=this._camera,s=this._control;t.fov=e,t.updateMatrix(),s.sync()}get rotate(){return this._control.rotate}get zoom(){return this._control.zoom}get gyro(){return this._control.gyro}get useGrabCursor(){return this._control.useGrabCursor}set useGrabCursor(e){this._control.useGrabCursor=e}get disableContextMenu(){return this._control.disableContextMenu}set disableContextMenu(e){this._control.disableContextMenu=e}get scrollable(){return this._control.scrollable}set scrollable(e){this._control.scrollable=e}get wheelScrollable(){return this._control.wheelScrollable}set wheelScrollable(e){this._control.wheelScrollable=e}constructor(e,t){let{projection:s=null,initialYaw:i=0,initialPitch:n=0,initialZoom:o=1,yawRange:r=null,pitchRange:a=null,zoomRange:l=null,fov:c=90,useGrabCursor:_=!0,disableContextMenu:d=!1,rotate:m=!0,zoom:p=!0,gyro:E=!1,scrollable:g=!0,wheelScrollable:v=!1,autoplay:T=!1,hotspot:b={},autoInit:f=!0,autoResize:w=!0,canvasSelector:C="canvas",useResizeObserver:O=!0,on:A={},plugins:R=[],maxDeltaTime:N=1/30,tabIndex:I=0,debug:y=!1}=void 0===t?{}:t;super(),this.renderFrame=e=>{const t=this._camera,s=this._renderer,i=this._control,n=this._hotspot,o=this._autoplay,r=this._projection;r&&(this._emit(F.FP.BEFORE_RENDER),o.playing&&(o.update(e),i.sync()),t.animation?t.animation.update(e):i.update(e),s.render(r,t),n.render(t),t.changed&&this._emit(F.FP.VIEW_CHANGE,{yaw:t.yaw,pitch:t.pitch,zoom:t.zoom,quaternion:[t.quaternion[0],t.quaternion[1],t.quaternion[2],t.quaternion[3]]}),t.onFrameRender(),this._emit(F.FP.RENDER))},this._renderFrameOnDemand=e=>{var t;const s=this._camera,i=this._control,n=this._autoplay,o=null==(t=this._projection)?void 0:t.getTexture();this._initialized&&o&&(s.animation||i.animating||n.playing||o.isVideo())&&this.renderFrame(e)},this._renderVRFrame=(e,t)=>{const s=this._vr,i=this._projection,n=this._renderer;i&&(this._emit(F.FP.BEFORE_RENDER),n.renderVR(i,s,t),this._emit(F.FP.RENDER))},this._rootEl=(0,h.sb)(e),this._plugins=R,this._initialized=!1,this._autoInit=f,this._autoResize=w,this._canvasSelector=C,this._useResizeObserver=O,this._tabIndex=I,this._debug=y;const L=(0,h.gE)(this._rootEl,C);this._renderer=new X(L,y),this._camera=new u({initialYaw:i,initialPitch:n,initialZoom:o,fov:c,yawRange:r,pitchRange:a,zoomRange:l}),this._control=new P(L,this._camera,{useGrabCursor:_,scrollable:g,wheelScrollable:v,disableContextMenu:d,rotate:m,zoom:p,gyro:E}),this._animator=new D(N),this._autoplay=new M(this,L,T),this._projection=s,this._autoResizer=new U(O,(()=>this.resize())),this._vr=new V(this._renderer.ctx),this._hotspot=new H(this._rootEl,this._renderer,b),this._addEventHandlers(A),s&&f&&this.init()}destroy(){this._camera.destroy(),this._animator.stop(),this._renderer.destroy(),this._control.destroy(),this._autoResizer.disable(),this._projection&&(this._projection.releaseAllResources(this._renderer.ctx),this._projection=null),this._plugins.forEach((e=>e.destroy(this))),this._initialized=!1}async init(){if(!this._projection)throw new Z.Z(G.ZP.MESSAGES.PROVIDE_PROJECTION_FIRST,G.ZP.CODES.PROVIDE_PROJECTION_FIRST);const e=this._renderer,t=this._camera,s=this._control,i=this._animator,n=this._hotspot,o=this._projection,r=e.canvas;this._bindComponentEvents(),e.ctx.init(),this._resizeComponents(),t.updateMatrix(),this._autoResize&&this._autoResizer.enable(r),this._autoplay.enableBlocked||this._autoplay.enable(),this._plugins.forEach((e=>{e.init(this)}));const a=await this._loadTexture(o);this._applyProjection(o,a,null),n.refresh(),i.start(this._renderFrameOnDemand),await s.enable(),null==this._tabIndex||r.hasAttribute("tabIndex")||(r.tabIndex=this._tabIndex),this._initialized=!0,this.renderFrame(0),this._emit(F.FP.READY)}async load(e){if(!e)return!1;if(this._initialized){const t=await this._loadTexture(e);this._applyProjection(e,t,this._projection),this.renderFrame(0)}else this._projection=e,this.init();return!0}resize(){if(!this._initialized)return;this._resizeComponents(),this.renderFrame(0);const{width:e,height:t}=this._renderer;this._emit(F.FP.RESIZE,{width:e,height:t})}addPlugins(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._initialized&&t.forEach((e=>{e.init(this)})),this._plugins.push(...t)}removePlugins(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];t.forEach((e=>{const t=this._plugins.indexOf(e);t<0||(e.destroy(this),this._plugins.splice(t,1))}))}_emit(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];const n=s?s[0]:{};this.trigger(e,{type:e,target:this,...n})}_applyProjection(e,t,s){const i=this._camera,n=this._control,o=this._renderer;s&&s.releaseAllResources(this._renderer.ctx),e.applyTexture(o.ctx,t),e.updateCamera(i),e.updateControl(n),this._projection=e,this._emit(F.FP.PROJECTION_CHANGE,{projection:e})}async _loadTexture(e){const t=new S,{src:s,video:i}=e;this._emit(F.FP.LOAD_START,{src:s,video:i});const n=await t.load(s,i);return this._emit(F.FP.LOAD,{src:s,video:i}),n}_resizeComponents(){const e=this._renderer,t=this._camera,s=this._control;e.resize(),t.resize(e.width,e.height),s.resize(e.width,e.height)}_addEventHandlers(e){Object.keys(e).forEach((t=>{this.on(t,e[t])}))}_bindComponentEvents(){const e=this._rootEl,t=this._control,s=this._animator,i=this._renderer,n=this._vr;[l.QA.STATIC_CLICK,l.QA.INPUT_START,l.QA.INPUT_END].forEach((e=>{t.rotate.on(e,(t=>{this._emit(e,t)})),t.zoom.on(e,(t=>{this._emit(e,t)}))})),n.on(F.FP.VR_START,(t=>{e.classList.add(F.Qz.IN_VR),s.changeContext(t.session),s.start(this._renderVRFrame),this._emit(F.FP.VR_START)})),n.on(F.FP.VR_END,(()=>{e.classList.remove(F.Qz.IN_VR),i.ctx.useDefaultFrameBuffer(),s.changeContext(window),s.start(this._renderFrameOnDemand),this.resize(),this._emit(F.FP.VR_END)}))}}W.VERSION="#__VERSION__#";const Q=W;var K=s(826);const q=Q},826:(e,t,s)=>{s.d(t,{Z:()=>M});var i=s(6577),n=s(2921);const o={CONTROLS_ROOT:"view360-controls",CONTROLS_BG:"view360-controls-background",CONTROLS_MAIN:"view360-controls-main",CONTROLS_TOP:"view360-controls-top",CONTROLS_BOTTOM:"view360-controls-bottom",CONTROLS_MID:"view360-controls-mid",CONTROLS_LEFT:"view360-controls-left",CONTROLS_RIGHT:"view360-controls-right",CONTROLS_FLOAT_LEFT:"view360-controls-float-left",CONTROLS_FLOAT_RIGHT:"view360-controls-float-right",CONTROLS_BUTTON:"view360-controls-button",PROGRESS_ROOT:"view360-controls-progress",VOLUME_ROOT:"view360-controls-volume",RANGE_ROOT:"view360-range",RANGE_TRACK:"view360-range-track",RANGE_THUMB:"view360-range-thumb",RANGE_FILLER:"view360-range-filler",PLAY_BUTTON:"view360-controls-play",PAUSE_BUTTON:"view360-controls-pause",UNMUTED_BUTTON:"view360-controls-unmuted",MUTED_BUTTON:"view360-controls-muted",FULLSCREEN_BUTTON:"view360-controls-fullscreen",FULLSCREEN_EXIT_BUTTON:"view360-controls-fullscreen-exit",VR_BUTTON:"view360-controls-vr",GYRO_ENABLED:"view360-controls-gyro-enabled",GYRO_DISABLED:"view360-controls-gyro-disabled",VIDEO_TIME_DISPLAY:"view360-controls-time",PIEVIEW_ROOT:"view360-controls-pie",FIXED:"view360-controls-fixed",UNAVAILABLE:"view360-controls-unavailable",HIDDEN:"view360-controls-hidden"},r={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",MAIN_TOP:"main-top",MAIN_BOTTOM:"main-bottom",MAIN_LEFT:"main-left",MAIN_RIGHT:"main-right"};var a=s(7035),l=s(8861),h=s(2197),c=s(9952),_=s(8388),u=s(1028);class d extends n.Z{constructor(){super(),this._onHold=e=>{var t;let{srcEvent:s,isTouch:i}=e;const n=this._bbox;if(!n)return;const o=i?s.touches[0].pageX:s.pageX,r=n.x+(null!=(t=window.scrollX)?t:window.pageXOffset),a=(0,_.uZ)(o,r,r+n.width),l=(a-r)/n.width;this._motion.reset(a),this.thumbEl.classList.add(this._fixedClass),this.trigger(c.QA.INPUT_START,l)},this._onChange=e=>{var t;let{delta:s}=e;const i=this._motion,n=this._bbox;if(!n)return;i.setNewEndByDelta(s.x),i.update(1);const o=n.x+(null!=(t=window.scrollX)?t:window.pageXOffset),r=((0,_.uZ)(i.val,o,o+n.width)-o)/n.width;this.trigger(c.QA.CHANGE,r)},this._onRelease=()=>{this._bbox&&(this.thumbEl.classList.remove(this._fixedClass),this.trigger(c.QA.INPUT_END))};const e=document.createElement(u.yy),t=document.createElement(u.yy),s=document.createElement(u.yy),i=document.createElement(u.yy);e.draggable=!1,t.appendChild(i),t.appendChild(s),e.appendChild(t),this.rootEl=e,this.trackEl=t,this.thumbEl=s,this.fillerEl=i,this._mouseInput=new l.Z,this._touchInput=new h.Z,this._motion=new a.Z({duration:1,range:c.oK,easing:e=>e}),this._bbox={x:0,y:0,width:0,height:0,left:0,right:0,bottom:0,top:0},this._fixedClass=o.FIXED}init(e){const t=this._mouseInput,s=this._touchInput;this.rootEl.classList.add(e.RANGE_ROOT),this.trackEl.classList.add(e.RANGE_TRACK),this.thumbEl.classList.add(e.RANGE_THUMB),this.fillerEl.classList.add(e.RANGE_FILLER),this._fixedClass=e.FIXED,t.on(c.QA.INPUT_START,this._onHold),s.on(c.QA.INPUT_START,this._onHold),t.on(c.QA.INPUT_END,this._onRelease),s.on(c.QA.INPUT_END,this._onRelease),t.on(c.QA.CHANGE,this._onChange),s.on(c.QA.CHANGE,this._onChange),t.enable(this.rootEl),s.enable(this.rootEl),this.resize()}destroy(){const e=this._mouseInput,t=this._touchInput;this.rootEl.className="",this.trackEl.className="",this.thumbEl.className="",this.fillerEl.className="",e.off(),t.off(),e.disable(),t.disable()}resize(){this._bbox=this.trackEl.getBoundingClientRect()}updateStyle(e){const t=this._bbox.width,s=(0,_.uZ)(e,0,1);this.fillerEl.style.width=100*s+"%",this.thumbEl.style.transform="translateX("+s*t+"px)"}}const m=d;var p=s(6260);class E extends i.Z{get element(){return this._rangeControl.rootEl}constructor(e){let{position:t=r.MAIN_TOP,order:s=9999}=void 0===e?{}:e;super({position:t,order:s}),this._onResize=()=>{this._rangeControl.resize()},this._onTimeUpdate=()=>{const e=this._video;e&&(this._currentTime=e.source.currentTime,this._rangeControl.updateStyle(this._currentTime/this._duration))},this._onDurationChange=()=>{const e=this._video;e&&(this._duration=e.source.duration,this._rangeControl.updateStyle(this._currentTime/this._duration))},this._onHold=e=>{const t=this._video,s=this._controlBar;if(!t||!s)return;const i=t.isPaused();t.source.pause();const n=t.source.duration*e;t.source.currentTime=n,t.source.dispatchEvent(new CustomEvent(c.r6,{detail:{time:n}})),s.rootEl.classList.add(s.className.FIXED),this._wasPaused=!this._playPromise&&i},this._onControl=e=>{const t=this._video;if(!t)return;const s=t.source.duration*e;t.source.currentTime=s,t.source.dispatchEvent(new CustomEvent(c.r6,{detail:{time:s}}))},this._onRelease=()=>{const e=this._video,t=this._controlBar;e&&t&&(this._wasPaused||this._playPromise||(this._playPromise=e.source.play().catch((()=>{})),this._playPromise.then((()=>{this._playPromise=null})),t.rootEl.classList.remove(t.className.FIXED))),this._wasPaused=!1},this.position=t,this.order=s,this._controlBar=null,this._rangeControl=new m,this._video=null,this._wasPaused=!1,this._currentTime=0,this._duration=0,this._playPromise=null}init(e,t){var s;const i=null==(s=e.projection)?void 0:s.getTexture(),n=this.element,o=this._rangeControl,r=t.className.UNAVAILABLE;i&&i.isVideo()?(n.classList.remove(r),n.classList.add(t.className.PROGRESS_ROOT),e.on(p.FP.RESIZE,this._onResize),i.source.addEventListener(u.FP.VIDEO_TIME_UPDATE,this._onTimeUpdate),i.source.addEventListener(u.FP.VIDEO_DURATION_CHANGE,this._onDurationChange),i.source.addEventListener(c.r6,this._onTimeUpdate),o.init(t.className),o.on(c.QA.INPUT_START,this._onHold),o.on(c.QA.CHANGE,this._onControl),o.on(c.QA.INPUT_END,this._onRelease),this._video=i,this._currentTime=i.source.currentTime,this._duration=i.source.duration,this._controlBar=t,o.updateStyle(this._currentTime/this._duration)):n.classList.add(r)}destroy(e){const t=this._video;e.off(p.FP.RESIZE,this._onResize),t&&(t.source.removeEventListener(u.FP.VIDEO_TIME_UPDATE,this._onTimeUpdate),t.source.removeEventListener(u.FP.VIDEO_DURATION_CHANGE,this._onDurationChange),t.source.removeEventListener(c.r6,this._onTimeUpdate)),this._rangeControl.destroy(),this._video=null,this._playPromise=null}}const g=E;class v extends i.Z{constructor(e){let{position:t=r.MAIN_LEFT,order:s=9999}=void 0===e?{}:e;super({position:t,order:s}),this._onClick=()=>{const e=this._video;e&&(this._paused?e.source.play():e.source.pause())},this._onPlay=()=>{if(!this._controlBar)return;const e=this.element,t=this._controlBar.className;e.classList.add(t.PAUSE_BUTTON),e.classList.remove(t.PLAY_BUTTON),e.title="Pause Video",this._paused=!1},this._onPause=()=>{if(!this._controlBar)return;const e=this.element,t=this._controlBar.className;e.classList.add(t.PLAY_BUTTON),e.classList.remove(t.PAUSE_BUTTON),e.title="Play Video",this._paused=!0},this.element=document.createElement(u.L2),this._video=null,this._paused=!0,this._controlBar=null}init(e,t){var s;const i=this.element,n=null==(s=e.projection)?void 0:s.getTexture(),o=t.className,r=o.UNAVAILABLE;if(!n||!n.isVideo())return void i.classList.add(r);i.classList.add(o.CONTROLS_BUTTON),i.classList.remove(r);const a=n.isPaused();this._video=n,this._paused=a,this._controlBar=t,a?this._onPause():this._onPlay(),i.addEventListener(u.FP.CLICK,this._onClick),n.source.addEventListener(u.FP.VIDEO_PLAY,this._onPlay),n.source.addEventListener(u.FP.VIDEO_PAUSE,this._onPause)}destroy(){const e=this._video,t=this.element;e&&(t.className="",t.removeEventListener(u.FP.CLICK,this._onClick),e.source.removeEventListener(u.FP.VIDEO_PLAY,this._onPlay),e.source.removeEventListener(u.FP.VIDEO_PAUSE,this._onPause),this._video=null,this._paused=!0,this._controlBar=null)}}const T=v;class b extends i.Z{get element(){return this._rootEl}constructor(e){let{position:t=r.MAIN_RIGHT,order:s=9999}=void 0===e?{}:e;super({position:t,order:s}),this._onResize=()=>{this._rangeControl.resize(),this._updateDisplay()},this._onClick=()=>{const e=this._video;e&&!this._rootEl.disabled&&(e.source.muted=!e.source.muted)},this._onVolumeChange=()=>{const e=this._buttonEl,t=this._video,s=this._controlBar;if(!t||!s)return;const i=s.className;t.source.muted||0===t.source.volume?(e.classList.add(i.MUTED_BUTTON),e.classList.remove(i.UNMUTED_BUTTON)):(e.classList.add(i.UNMUTED_BUTTON),e.classList.remove(i.MUTED_BUTTON)),this._updateDisplay()},this._onHold=e=>{const t=this._video,s=this._controlBar;if(!t||!s)return;const i=s.className;t.source.volume=e,this._rootEl.classList.add(i.FIXED),s.containerEl.classList.add(i.FIXED),this._updateDisplay()},this._onChange=e=>{const t=this._video;t&&(t.source.volume=e,t.source.muted=!(e>0),this._updateDisplay())},this._onRelease=()=>{const e=this._controlBar;if(!e)return;const t=e.className;this._rootEl.classList.remove(t.FIXED),e.containerEl.classList.remove(t.FIXED)},this._updateDisplay=()=>{const e=this._video,t=this._rootEl;if(!e)return;if(!e.hasAudio())return void(t.disabled=!0);t.disabled=!1;const s=e.source.muted?0:e.source.volume;this._rangeControl.updateStyle(s)},this._controlBar=null,this._rangeControl=new m,this._createElements(),this._video=null}init(e,t){var s;const i=null==(s=e.projection)?void 0:s.getTexture(),n=this._rootEl,o=this._buttonEl,r=this._rangeControl,a=t.className,l=a.UNAVAILABLE;i&&i.isVideo()?(n.classList.remove(l),n.classList.add(a.CONTROLS_BUTTON),n.classList.add(a.VOLUME_ROOT),o.classList.add(a.CONTROLS_BUTTON),i.source.muted?o.classList.add(a.MUTED_BUTTON):o.classList.add(a.UNMUTED_BUTTON),e.on(p.FP.RESIZE,this._onResize),n.addEventListener(u.FP.TRANSITION_END,this._onResize),o.addEventListener(u.FP.CLICK,this._onClick),i.source.addEventListener(u.FP.VIDEO_VOLUME_CHANGE,this._onVolumeChange),i.source.addEventListener(u.FP.VIDEO_LOADED_DATA,this._updateDisplay),i.source.addEventListener(u.FP.VIDEO_CAN_PLAYTHROUGH,this._updateDisplay),r.init(a),r.on(c.QA.INPUT_START,this._onHold),r.on(c.QA.CHANGE,this._onChange),r.on(c.QA.INPUT_END,this._onRelease),this._controlBar=t,this._video=i,this._updateDisplay()):n.classList.add(l)}destroy(e){const t=this._video,s=this._buttonEl,i=this._rootEl;i.className="",s.className="",e.off(p.FP.RESIZE,this._onResize),i.removeEventListener(u.FP.TRANSITION_END,this._onResize),s.removeEventListener(u.FP.CLICK,this._onClick),t&&(t.source.removeEventListener(u.FP.VIDEO_VOLUME_CHANGE,this._onVolumeChange),t.source.removeEventListener(u.FP.VIDEO_LOADED_DATA,this._updateDisplay),t.source.removeEventListener(u.FP.VIDEO_CAN_PLAYTHROUGH,this._updateDisplay)),this._controlBar=null,this._rangeControl.destroy(),this._video=null}_createElements(){const e=document.createElement(u.L2),t=document.createElement(u.yy);e.appendChild(this._rangeControl.rootEl),e.appendChild(t),e.title="Toggle Mute",this._rootEl=e,this._buttonEl=t}}const f=b;class w extends i.Z{constructor(e){let{position:t=r.MAIN_RIGHT,order:s=9999}=void 0===e?{}:e;super({position:t,order:s}),this._onClick=()=>{const e=this._targetEl;e&&((0,_.rm)()?this._exitFullscreen():this._requestFullscreen(e))},this._onFullscreenChange=()=>{const e=this.element,t=this._controlBar;if(!t)return;const s=t.className;(0,_.rm)()?(e.classList.add(s.FULLSCREEN_EXIT_BUTTON),e.classList.remove(s.FULLSCREEN_BUTTON)):(e.classList.add(s.FULLSCREEN_BUTTON),e.classList.remove(s.FULLSCREEN_EXIT_BUTTON))},this.element=document.createElement(u.L2),this.element.title="Toggle Fullscreen",this._controlBar=null,this._targetEl=null}init(e,t){const s=this.element,i=t.className;this._fullscreenAvailable()?(s.classList.add(i.CONTROLS_BUTTON),s.classList.remove(i.UNAVAILABLE),s.addEventListener(u.FP.CLICK,this._onClick),this._addFullscreenHandlers(),(0,_.rm)()?s.classList.add(i.FULLSCREEN_EXIT_BUTTON):s.classList.add(i.FULLSCREEN_BUTTON),this._controlBar=t,this._targetEl=e.rootEl):s.classList.add(i.UNAVAILABLE)}destroy(){const e=this.element;e.className="",e.removeEventListener(u.FP.CLICK,this._onClick),this._removeFullscreenHandlers(),this._controlBar=null,this._targetEl=null}_fullscreenAvailable(){return u.ml.some((e=>!!document[e]))}_requestFullscreen(e){for(const t of u.ml){const s=e[t];if(s)return void s.call(e)}}_exitFullscreen(){for(const e of u.H3){const t=document[e];if(t)return void t.call(document)}}_addFullscreenHandlers(){u.GS.forEach((e=>{document.addEventListener(e,this._onFullscreenChange)}))}_removeFullscreenHandlers(){u.GS.forEach((e=>{document.removeEventListener(e,this._onFullscreenChange)}))}}const C=w;class O extends i.Z{constructor(e){let{position:t=r.MAIN_LEFT,order:s=9999}=void 0===e?{}:e;super({position:t,order:s}),this._onTimeUpdate=()=>{const e=this._video;e&&(this._currentTime=e.source.currentTime,this._updateDisplay())},this._onDurationChange=()=>{const e=this._video;e&&(this._duration=e.source.duration,this._updateDisplay())},this._onCustomTimeChange=e=>{this._currentTime=e.detail.time,this._updateDisplay()},this.element=document.createElement(u.yy),this._video=null,this._currentTime=0,this._duration=0}init(e,t){var s;const i=null==(s=e.projection)?void 0:s.getTexture(),n=this.element,o=t.className;i&&i.isVideo()?(n.classList.add(o.VIDEO_TIME_DISPLAY),n.classList.remove(o.UNAVAILABLE),i.source.addEventListener(u.FP.VIDEO_TIME_UPDATE,this._onTimeUpdate),i.source.addEventListener(u.FP.VIDEO_DURATION_CHANGE,this._onDurationChange),i.source.addEventListener(c.r6,this._onCustomTimeChange),this._video=i,this._currentTime=i.source.currentTime,this._duration=i.source.duration,this._updateDisplay()):n.classList.add(o.UNAVAILABLE)}destroy(){const e=this._video;e&&(this.element.className="",e.source.removeEventListener(u.FP.VIDEO_TIME_UPDATE,this._onTimeUpdate),e.source.removeEventListener(u.FP.VIDEO_DURATION_CHANGE,this._onDurationChange),e.source.removeEventListener(c.r6,this._onCustomTimeChange),this._video=null)}_updateDisplay(){const e=this._currentTime,t=Math.floor(e/60),s=Math.floor(e-60*t),i=s<10?"0"+s:s,n=this._duration,o=Math.floor(n/60),r=Math.floor(n-60*o),a=r<10?"0"+r:r;this.element.innerText=t+":"+i+" / "+o+":"+a}}const A=O;class R extends i.Z{constructor(e){let{resetCamera:t=!0,position:s=r.TOP_RIGHT,order:i=9999}=void 0===e?{}:e;super({position:s,order:i}),this._onClick=()=>{const e=this._viewer,t=this.resetCamera;if(!e||!t)return;const{yaw:s=e.initialYaw,pitch:i=e.initialPitch,zoom:n=e.initialZoom,duration:o=500}=(0,_.PO)(t);e.camera.animateTo({yaw:s,pitch:i,zoom:n,duration:o})},this._updatePie=e=>{let{target:t}=e;const s=this._piePathEl,i=this._rangeCircleEl,n=t.camera,o=n.getHorizontalFov(),r=n.getYawRange(n.zoom),a=.5*o,l=24*Math.PI,h=l*o/360,c=l*(n.yaw+a+90)/360;if(s.setAttribute("stroke-dasharray",h+" "+(l-h)),s.setAttribute("stroke-dashoffset",""+c),isFinite(r.min)&&isFinite(r.max)){const e=45*Math.PI,t=((0,_.zc)(r.min,-180,180)-a)/360,s=((0,_.zc)(r.max,-180,180)+a)/360,n=e*Math.abs(s-t),o=-e*(t-.25);i.setAttribute("stroke-dasharray",n+" "+(e-n)),i.setAttribute("stroke-dashoffset",""+o)}else i.setAttribute("stroke-dasharray",""),i.setAttribute("stroke-dashoffset","")},this.element=document.createElement(u.yy),this.element.title="Reset view",this.resetCamera=t,this._createPieElements(),this._viewer=null}init(e,t){const s=this.element;e.initialized?this._updatePie({target:e}):e.once(p.FP.READY,this._updatePie);const i=t.className.PIEVIEW_ROOT;s.classList.add(i),this.resetCamera&&s.addEventListener(u.FP.CLICK,this._onClick),e.on(p.FP.VIEW_CHANGE,this._updatePie),this._viewer=e}destroy(e){const t=this.element;t.removeEventListener(u.FP.CLICK,this._onClick),t.className="",e.off(p.FP.READY,this._updatePie),e.off(p.FP.VIEW_CHANGE,this._updatePie),this._viewer=null}_createPieElements(){const e=this.element,t=document.createElementNS(c.YB,"svg");t.setAttribute("viewBox","0 0 48 48"),t.setAttribute("width","100%"),t.setAttribute("height","100%");const s=document.createElementNS(c.YB,"circle");s.setAttribute("stroke","currentColor"),s.setAttribute("fill","transparent"),s.setAttribute("cx","24"),s.setAttribute("cy","24"),s.setAttribute("r","12"),s.setAttribute("stroke-width","24"),t.appendChild(s);const i=document.createElementNS(c.YB,"circle");i.setAttribute("stroke","currentColor"),i.setAttribute("fill","transparent"),i.setAttribute("cx","24"),i.setAttribute("cy","24"),i.setAttribute("r","22.5"),i.setAttribute("stroke-width","3"),t.appendChild(i),e.appendChild(t),this._piePathEl=s,this._rangeCircleEl=i}}const P=R;class N extends i.Z{constructor(e){let{position:t=r.MAIN_RIGHT,order:s=9999}=void 0===e?{}:e;super({position:t,order:s}),this._onClick=()=>{const e=this._viewer;e&&e.vr.enter()},this.element=document.createElement(u.L2),this.element.title="Enter VR",this._viewer=null}init(e,t){const s=this.element,i=t.className;s.classList.add(i.UNAVAILABLE),s.classList.add(i.VR_BUTTON),s.classList.add(i.CONTROLS_BUTTON),e.vr.isAvailable().then((e=>{e&&s.classList.remove(i.UNAVAILABLE)})),s.addEventListener(u.FP.CLICK,this._onClick),this._viewer=e}destroy(){const e=this.element;e.className="",e.removeEventListener(u.FP.CLICK,this._onClick),this._viewer=null}}const I=N;var y=s(5821);class L extends i.Z{constructor(e){let{position:t=r.MAIN_RIGHT,order:s=9999}=void 0===e?{}:e;super({position:t,order:s}),this._onClick=()=>{const e=this._viewer,t=this._controlBar;if(!e||!t)return;const s=e.control.gyro;s.enabled?s.disable():y.Z.requestSensorPermission().then((e=>{e?s.enable():this.element.classList.add(t.className.UNAVAILABLE)}))},this._updateStyle=()=>{const e=this.element,t=this._viewer,s=this._controlBar;if(!t||!s)return;const i=t.control.gyro,n=s.className;i.enabled?(e.classList.add(n.GYRO_ENABLED),e.classList.remove(n.GYRO_DISABLED)):(e.classList.add(n.GYRO_DISABLED),e.classList.remove(n.GYRO_ENABLED))},this.element=document.createElement(u.yy),this.element.title="Toggle gyroscope control"}init(e,t){const s=this.element,i=t.className;s.addEventListener(u.FP.CLICK,this._onClick),s.classList.add(i.CONTROLS_BUTTON),s.classList.add(i.UNAVAILABLE);const n=()=>{s.classList.remove(i.UNAVAILABLE),e.control.gyro.on(c.QA.ENABLE,this._updateStyle),e.control.gyro.on(c.QA.DISABLE,this._updateStyle)};(0,_.yj)()?n():y.Z.isAvailable().then((e=>{e&&n()})),this._controlBar=t,this._viewer=e,this._updateStyle()}destroy(e){const t=this.element;e.control.gyro.off(c.QA.ENABLE,this._updateStyle),e.control.gyro.off(c.QA.DISABLE,this._updateStyle),t.removeEventListener(u.FP.CLICK,this._onClick),t.className="",this._controlBar=null,this._viewer=null}}const x=L;const S=class{get enabled(){return!!this._targetEl}get hidden(){return this._controlBar.containerEl.classList.contains(this._hiddenClass)}get _hiddenClass(){return this._controlBar.className.HIDDEN}get _fixedClass(){return this._controlBar.className.FIXED}constructor(e,t){let{initialDelay:s=3e3,delay:i=0,idleDelay:n=3e3}=t;this._onMouseEnter=()=>{this._isCursorInside=!0,this.show()},this._onMouseLeave=()=>{this._isCursorInside=!1,this._hideAfterDelay()},this._onMouseMove=()=>{this._isFullscreen&&this.showTemporaliy()},this._onHold=e=>{this._isGrabbing=!0,"mouse"===e.pointerType&&(this._isCursorInside=!0),window.addEventListener(u.FP.MOUSE_UP,this._onRelease),this.show()},this._onRelease=()=>{this._isGrabbing=!1,window.removeEventListener(u.FP.MOUSE_UP,this._onRelease),this._hideAfterDelay()},this._onVideoPlay=()=>{this._targetEl&&this._controlBar.containerEl.classList.remove(this._fixedClass)},this._onVideoPause=()=>{this._targetEl&&this._controlBar.containerEl.classList.add(this._fixedClass)},this._onFullscreenChange=()=>{this._isFullscreen=(0,_.rm)(),this._isFullscreen&&this._hideAfterDelay()},this._controlBar=e,this._initialDelay=s,this._delay=i,this._idleDelay=n,this._timer=-1,this._isCursorInside=!1,this._isGrabbing=!1,this._isFullscreen=!1,this._video=null,this._targetEl=null}enable(e){var t;this._targetEl&&this.disable(e);const s=this._initialDelay,i=e.rootEl;this._targetEl=e.rootEl,this._timer=window.setTimeout((()=>{this.hide()}),s),i.addEventListener(u.FP.MOUSE_DOWN,this._onHold),i.addEventListener(u.FP.MOUSE_ENTER,this._onMouseEnter),i.addEventListener(u.FP.MOUSE_MOVE,this._onMouseMove),i.addEventListener(u.FP.MOUSE_LEAVE,this._onMouseLeave),this._addFullscreenHandlers();const n=null==(t=e.projection)?void 0:t.getTexture();n&&n.isVideo()&&(n.isPaused()&&this._controlBar.containerEl.classList.add(this._fixedClass),n.source.addEventListener(u.FP.VIDEO_PLAY,this._onVideoPlay),n.source.addEventListener(u.FP.VIDEO_PAUSE,this._onVideoPause),this._video=n)}disable(e){if(!this._targetEl)return;const t=this._controlBar,s=e.rootEl,i=this._video;s.removeEventListener(u.FP.MOUSE_DOWN,this._onHold),window.removeEventListener(u.FP.MOUSE_UP,this._onRelease),s.removeEventListener(u.FP.MOUSE_ENTER,this._onMouseEnter),s.removeEventListener(u.FP.MOUSE_MOVE,this._onMouseMove),s.removeEventListener(u.FP.MOUSE_LEAVE,this._onMouseLeave),this._removeFullscreenHandlers(),window.clearTimeout(this._timer),t.containerEl.classList.remove(this._fixedClass),i&&(i.source.removeEventListener(u.FP.VIDEO_PLAY,this._onVideoPlay),i.source.removeEventListener(u.FP.VIDEO_PAUSE,this._onVideoPause)),this._isCursorInside=!1,this._isGrabbing=!1,this._video=null,this._targetEl=null}show(){this._clearHideTimer(),this._controlBar.containerEl.classList.remove(this._hiddenClass)}showTemporaliy(){this.show(),this._hideAfterDelay(this._idleDelay)}hide(){this._clearHideTimer(),this._controlBar.containerEl.classList.add(this._hiddenClass)}_clearHideTimer(){this._timer&&(window.clearTimeout(this._timer),this._timer=-1)}_hideAfterDelay(e){void 0===e&&(e=this._delay),this._isGrabbing||!this._isFullscreen&&this._isCursorInside||(this._clearHideTimer(),e<=0?this.hide():this._timer=window.setTimeout((()=>{this.hide()}),e))}_addFullscreenHandlers(){u.GS.forEach((e=>{document.addEventListener(e,this._onFullscreenChange)}))}_removeFullscreenHandlers(){u.GS.forEach((e=>{document.removeEventListener(e,this._onFullscreenChange)}))}};const D=class{constructor(){this._onKeyDown=e=>{const t=this._video;if(!t)return;e.preventDefault(),e.stopPropagation();const s=t.source,i=null!=e.keyCode?u.Dx[e.keyCode]:u.$[e.key];switch(i){case"LEFT":case"RIGHT":return this._changeVideoTime(s,"RIGHT"===i);case"UP":case"DOWN":return this._changeVideoVolume(s,"UP"===i)}(e.keyCode===u.jN||e.key===u.kq)&&this._toggleVideo(t)}}enable(e,t){this._video=t,e.addEventListener(u.FP.KEY_DOWN,this._onKeyDown,!0)}disable(e){this._video=null,e.removeEventListener(u.FP.KEY_DOWN,this._onKeyDown,!0)}_changeVideoTime(e,t){const s=t?5:-5;e.currentTime+=s,e.dispatchEvent(new CustomEvent(c.r6,{detail:{time:e.currentTime}}))}_changeVideoVolume(e,t){const s=t?.1:-.1;e.muted?e.volume=(0,_.uZ)(s,0,1):e.volume=(0,_.uZ)(e.volume+s,0,1),e.volume>0?e.muted=!1:e.muted=!0}_toggleVideo(e){e.isPaused()?e.source.play():e.source.pause()}};class U{get rootEl(){return this._rootEl}get containerEl(){return this._containerEl}get backgroundEl(){return this._bgEl}get items(){return this._items}get customItems(){return this._customItems}constructor(e){var t;let{autoHide:s,showBackground:i,clickToPlay:n=!0,keyboardControls:o=!0,progressBar:r=!0,playButton:a=!0,volumeButton:l=!0,fullscreenButton:h=!0,videoTime:c=!0,pieView:u=!0,vrButton:d=!0,gyroButton:m=!0,className:p={},customItems:E=[]}=void 0===e?{}:e;this._onStaticClick=e=>{let{target:t,isTouch:s}=e;const i=this._autoHider;if(s){if(!i.enabled)return;i.hidden?i.showTemporaliy():i.hide()}else{var n;if(!this.clickToPlay)return;const e=null==(n=t.projection)?void 0:n.getTexture();if(!e||!e.isVideo())return;e.isPaused()?e.source.play():e.source.pause()}},this._onNewSrcLoad=e=>{let{target:t}=e;const s=this._items;this._updateBackground(t),this._updateAutoHide(t),this._updateKeyboardHandler(t),Object.keys(s).forEach((e=>{s[e].forEach((e=>{e.destroy(t,this),e.init(t,this)}))}))},this.autoHide=s,this.showBackground=i,this.clickToPlay=n,this.keyboardControls=o,this.progressBar=r,this.playButton=a,this.volumeButton=l,this.fullscreenButton=h,this.videoTime=c,this.pieView=u,this.vrButton=d,this.gyroButton=m,this.className={...U.DEFAULT_CLASS,...p};const g=null!=(t=p.CONTROLS_ROOT)?t:U.DEFAULT_CLASS.CONTROLS_ROOT;this._rootEl=(0,_.az)(g),this._createPositionWrappers(),this._items=Object.keys(U.POSITION).reduce(((e,t)=>(e[U.POSITION[t]]=[],e)),{}),this._customItems=E,this._autoHider=new S(this,(0,_.PO)(s)),this._videoControl=new D,E.forEach((e=>{this._items[e.position].push(e)}))}init(e){const t=e.rootEl,s=this._rootEl,i=this._createDefaultItems();this._updateBackground(e),this._updateAutoHide(e),this._updateKeyboardHandler(e),t.appendChild(s),this._addItem(e,i),this._addItem(e,this._customItems),e.on(p.FP.PROJECTION_CHANGE,this._onNewSrcLoad),e.on(p.FP.STATIC_CLICK,this._onStaticClick)}destroy(e){const t=e.rootEl,s=this._rootEl,i=this._items;s.parentElement===t&&t.removeChild(s),Object.keys(i).forEach((t=>{i[t].forEach((t=>{t.destroy(e,this)})),i[t]=[]})),this._clearItemElements(),this._autoHider.disable(e),this._videoControl.disable(t),e.off(p.FP.PROJECTION_CHANGE,this._onNewSrcLoad),e.off(p.FP.STATIC_CLICK,this._onStaticClick)}_addItem(e,t){for(const s of t){const t=this._items[s.position],i=this._wrapperEl[s.position],n=(0,_.cx)(t,(e=>e.order>s.order));if(n>=0){const e=t[n].element;t.splice(n,0,s),i.insertBefore(s.element,e)}else t.push(s),i.appendChild(s.element);s.init(e,this)}}_createPositionWrappers(){const e={...U.DEFAULT_CLASS,...this.className},t=this._rootEl,s=(0,_.az)(e.CONTROLS_BG),i=(0,_.az)(e.CONTROLS_FLOAT_LEFT),n=(0,_.az)(e.CONTROLS_FLOAT_RIGHT);t.appendChild(i),t.appendChild(n);const o=(0,_.az)(e.CONTROLS_MAIN),r=(0,_.az)(e.CONTROLS_TOP),a=(0,_.az)(e.CONTROLS_BOTTOM),l=(0,_.az)(e.CONTROLS_MID),h=(0,_.az)(e.CONTROLS_LEFT),c=(0,_.az)(e.CONTROLS_RIGHT);l.appendChild(h),l.appendChild(c),o.appendChild(s),o.appendChild(r),o.appendChild(l),o.appendChild(a),t.appendChild(o),this._bgEl=s,this._containerEl=o,this._wrapperEl={[U.POSITION.MAIN_TOP]:r,[U.POSITION.MAIN_LEFT]:h,[U.POSITION.MAIN_RIGHT]:c,[U.POSITION.MAIN_BOTTOM]:a,[U.POSITION.TOP_LEFT]:i,[U.POSITION.TOP_RIGHT]:n}}_clearItemElements(){Object.keys(U.POSITION).map((e=>U.POSITION[e])).map((e=>this._wrapperEl[e])).forEach((e=>{for(;e.firstChild;)e.removeChild(e.firstChild)}))}_updateAutoHide(e){const t=this.autoHide,s=this._autoHider;if(null!=t)t?s.enable(e):s.disable(e);else{var i;const t=null==(i=e.projection)?void 0:i.getTexture();t&&t.isVideo()?s.enable(e):s.disable(e)}}_updateBackground(e){var t;const s=this._bgEl,i=this.showBackground,n=null!=(t=this.className.HIDDEN)?t:U.DEFAULT_CLASS.HIDDEN;if(null!=i)i?s.classList.remove(n):s.classList.add(n);else{var o;const t=null==(o=e.projection)?void 0:o.getTexture();t&&t.isVideo()?s.classList.remove(n):s.classList.add(n)}}_updateKeyboardHandler(e){var t;const s=e.rootEl,i=this._videoControl,n=null==(t=e.projection)?void 0:t.getTexture();this.keyboardControls&&n&&n.isVideo()?i.enable(s,n):i.disable(s)}_createDefaultItems(){const e=[];return this.progressBar&&e.push(new g((0,_.PO)(this.progressBar))),this.playButton&&e.push(new T((0,_.PO)(this.playButton))),this.volumeButton&&e.push(new f((0,_.PO)(this.volumeButton))),this.gyroButton&&e.push(new x((0,_.PO)(this.gyroButton))),this.vrButton&&e.push(new I((0,_.PO)(this.vrButton))),this.fullscreenButton&&e.push(new C((0,_.PO)(this.fullscreenButton))),this.videoTime&&e.push(new A((0,_.PO)(this.videoTime))),this.pieView&&e.push(new P((0,_.PO)(this.pieView))),e}}U.DEFAULT_CLASS=o,U.POSITION=r;const M=U},6577:(e,t,s)=>{s.d(t,{Z:()=>i});const i=class{constructor(e){this.position=e.position,this.order=e.order}}},9580:(e,t,s)=>{s.d(t,{Z:()=>p});var i=s(4098),n=s(8388),o=s(8602);class r extends o.Z{constructor(e,t,s){super(),this.texture=t,this._webglTexture=e.createWebGLCubeTexture(t,t.width),this._cubemapOrder=s}destroy(e){this.texture.destroy(),e.deleteTexture(this._webglTexture)}update(e,t,s){const i=this.texture;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.uniform1i(t,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_CUBE_MAP,this._webglTexture);(0,n.rM)(i.sources,this._cubemapOrder).forEach(((t,i)=>{s?e.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,0,0,e.RGBA,e.UNSIGNED_BYTE,t):e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t)})),i.isVideo()||(this.needsUpdate=!1)}}const a=r;const l=class{get size(){return this._size}constructor(e,t){this.texture=e,this._renderingOrder=(0,n.rM)((0,n.w6)(6),t);const s=document.createElement("canvas");this._calcRenderingSize(),s.width=this._size,s.height=this._size,this._canvas=s,this._ctx=s.getContext("2d")}destroy(){const e=this._canvas;e.width=1,e.height=1,this._canvas=null}draw(e,t){const s=this._size,i=this.texture;let n=0;for(let o=0;o<this._row;o++)for(let r=0;r<this._column;r++){const a=s*r,l=s*o,h=this._renderingOrder[n];this._ctx.drawImage(i.source,a,l,s,s,0,0,s,s),t?e.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,0,0,e.RGBA,e.UNSIGNED_BYTE,this._canvas):e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._canvas),n++}}_calcRenderingSize(){const{width:e,height:t}=this.texture,s=e/t;s===1/6?(this._size=e,this._row=6,this._column=1):6===s?(this._size=t,this._row=1,this._column=6):s===2/3?(this._size=.5*e,this._row=3,this._column=2):(this._size=e/3,this._row=2,this._column=3)}};class h extends o.Z{get texture(){return this._painter.texture}constructor(e,t,s){super(),this._painter=new l(t,s),this._webglTexture=e.createWebGLCubeTexture(t,this._painter.size)}destroy(e){e.deleteTexture(this._webglTexture),this._painter.destroy()}update(e,t,s){const i=this.texture;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.uniform1i(t,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_CUBE_MAP,this._webglTexture),this._painter.draw(e,s),i.isVideo()||(this.needsUpdate=!1)}}const c=h;var _=s(1815),u=s(9290),d=s(7337);class m extends i.Z{constructor(e){super(e);const{cubemapOrder:t="RLUDFB",cubemapFlipX:s=!1}=e;this._cubemapOrder=t,this._cubemapFlipX=s}applyTexture(e,t){const s=this._cubemapOrder,i=this._cubemapFlipX,n={uTexture:t.isCube()?new a(e,t,s):new c(e,t,s)},o=new d.Z({order:s}),r=new u.Z(e,"#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvarying highp vec3 vPos;\n\nvoid main() {\n  vPos = position;\n  gl_Position = uPMatrix * uMVMatrix * vec4(position, 1.0);\n}\n","#define GLSLIFY 1\nuniform samplerCube uTexture;\n\nvarying highp vec3 vPos;\n\nvoid main() {\n  // As textureCube uses (+Z as front), we flip that\n  gl_FragColor = textureCube(uTexture, vec3(vPos.x, vPos.y, -vPos.z));\n}\n",n),l=e.createVAO(o,r),h=new _.Z(l,r);i&&(h.scale[0]=-1),h.updateMatrix(),this._mesh=h}}const p=m},6563:(e,t,s)=>{s.d(t,{Z:()=>_});var i=s(4098),n=s(2278),o=s(9290),r=s(8155),a=s(1815),l=s(5846),h=s(459);class c extends i.Z{constructor(e){super(e)}applyTexture(e,t){const s={uTexture:new n.Z(e,t)},i=new r.Z,c=new o.Z(e,l.Z,h.Z,s),_=e.createVAO(i,c),u=new a.Z(_,c);this._mesh=u}}const _=c},4098:(e,t,s)=>{s.d(t,{Z:()=>i});const i=class{constructor(e){let{src:t,video:s=!1}=e;this.src=t,this.video=s,this._mesh=null}releaseAllResources(e){var t;null==(t=this._mesh)||t.destroy(e)}updateCamera(e){e.resetRange()}updateControl(e){e.ignoreZoomScale=!1}update(e){}getTexture(){return this._mesh?this._mesh.program.uniforms.uTexture.texture:null}getMesh(){return this._mesh}}},8602:(e,t,s)=>{s.d(t,{Z:()=>i});const i=class{constructor(){this.needsUpdate=!0}destroy(e){}}},2278:(e,t,s)=>{s.d(t,{Z:()=>o});var i=s(8602);class n extends i.Z{constructor(e,t){super(),this.texture=t,this._webglTexture=e.createWebGLTexture(t)}destroy(e){this.texture.destroy(),e.deleteTexture(this._webglTexture)}update(e,t,s){const i=this.texture,n=i.isVideo();e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.uniform1i(t,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._webglTexture),!n&&s?e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,i.source):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i.source),n||(this.needsUpdate=!1)}}const o=n},8388:(e,t,s)=>{s.d(t,{HD:()=>h,Jx:()=>b,PO:()=>T,S3:()=>_,az:()=>c,b6:()=>R,cx:()=>v,gE:()=>d,h4:()=>O,nk:()=>A,rM:()=>f,rm:()=>w,sb:()=>u,t7:()=>E,uZ:()=>p,w6:()=>m,yj:()=>C,zc:()=>g});var i=s(7191),n=s(7962),o=s(9658),r=s(4949),a=s(1028),l=s(9952);const h=e=>"string"==typeof e,c=function(e,t){void 0===t&&(t=a.yy);const s=document.createElement(t);return s.classList.add(e),s},_=(e,t)=>{let s=null;if(h(e)){const i=(t||document).querySelector(e);if(!i)return null;s=i}else(i=e)&&i.nodeType===Node.ELEMENT_NODE&&(s=e);var i;return s},u=(e,t)=>{const s=_(e,t);if(!s)throw h(e)?new o.Z(r.ZP.MESSAGES.ELEMENT_NOT_FOUND(e),r.ZP.CODES.ELEMENT_NOT_FOUND):new o.Z(r.ZP.MESSAGES.WRONG_TYPE(e,["HTMLElement","string"]),r.ZP.CODES.WRONG_TYPE);return s},d=(e,t)=>{const s=e.querySelector(t);if(!s)throw new o.Z(r.ZP.MESSAGES.CANVAS_NOT_FOUND,r.ZP.CODES.CANVAS_NOT_FOUND);return s},m=e=>!e||e<=0?[]:Array.apply(0,Array(e)).map(((e,t)=>t)),p=(e,t,s)=>Math.max(Math.min(e,s),t),E=(e,t,s)=>e*(1-s)+t*s,g=(e,t,s)=>{const i=Math.abs(s-t);if(e<t){e=s-(t-e)%i}else if(e>s){e=t+(e-s)%i}return e},v=(e,t)=>{for(let s=0;s<e.length;s++)if(t(e[s]))return s;return-1},T=e=>"object"==typeof e?e:{},b=(e,t)=>2*Math.atan(Math.tan(.5*e)/t),f=function(e,t,s){return void 0===s&&(s="RLUDFB"),s.split("").map((e=>t.indexOf(e))).map((t=>e[t]))},w=()=>{if(!document)return!1;for(const e of a.bQ)if(document[e])return!0;return!1},C=()=>!!DeviceMotionEvent&&"requestPermission"in DeviceMotionEvent&&window.isSecureContext,O=(e,t)=>Math.tan(l.ZX*e*.5)/Math.tan(l.ZX*t*.5),A=(e,t,s,n)=>{i.yR(e);const o=p(s,-89.99,89.99);return i.uD(e,e,t*l.ZX),i.lM(e,e,o*l.ZX),i.jI(e,e,n*l.ZX),e},R=e=>{const t=e[0],s=e[1],i=e[2],o=e[3],r=t*t+s*s+i*i+o*o,a=t*o-s*i;let h,c;if(a>.499995*r)h=Math.PI/2,c=2*Math.atan2(s,t);else if(a<-.499995*r)h=-Math.PI/2,c=-2*Math.atan2(s,t);else{const t=n.al(0,0,1),s=n.al(0,1,0);n.VC(t,t,e),n.VC(s,s,e);const i=Math.sqrt(t[0]*t[0]+t[2]*t[2]);h=Math.atan2(-t[1],i),c=Math.atan2(t[0],t[2])}return{pitch:p(h*l.jl,-90,90),yaw:g(c*l.jl,0,360)}}},2445:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>h,toc:()=>_});var i=s(7462),n=(s(7294),s(3905)),o=s(241),r=s(4801);const a={},l=void 0,h={unversionedId:"options/control/disableContextMenu",id:"options/control/disableContextMenu",title:"disableContextMenu",description:"\ub9c8\uc6b0\uc2a4 \uc6b0\ud074\ub9ad\uc2dc \ud45c\uc2dc\ub418\ub294 \ucee8\ud14d\uc2a4\ud2b8 \uba54\ub274\ub97c \ube44\ud65c\uc131\ud654\ud569\ub2c8\ub2e4.",source:"@site/i18n/ko/docusaurus-plugin-content-docs/current/options/control/disableContextMenu.mdx",sourceDirName:"options/control",slug:"/options/control/disableContextMenu",permalink:"/egjs-view360/ko/docs/options/control/disableContextMenu",draft:!1,editUrl:"https://github.com/naver/egjs-view360/edit/master/demo/docs/options/control/disableContextMenu.mdx",tags:[],version:"current",frontMatter:{},sidebar:"options",previous:{title:"ignoreRoll",permalink:"/egjs-view360/ko/docs/options/control/gyro/ignoreRoll"},next:{title:"scrollable",permalink:"/egjs-view360/ko/docs/options/control/scrollable"}},c={},_=[{value:"\uc608\uc2dc",id:"\uc608\uc2dc",level:2}],u={toc:_};function d(e){let{components:t,...s}=e;return(0,n.kt)("wrapper",(0,i.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,n.kt)(r.Z,{type:"boolean",defaultVal:"false",added:"4.0.0",mdxType:"OptionDescriptor"}),(0,n.kt)("p",null,"\ub9c8\uc6b0\uc2a4 \uc6b0\ud074\ub9ad\uc2dc \ud45c\uc2dc\ub418\ub294 \ucee8\ud14d\uc2a4\ud2b8 \uba54\ub274\ub97c \ube44\ud65c\uc131\ud654\ud569\ub2c8\ub2e4."),(0,n.kt)("h2",{id:"\uc608\uc2dc"},"\uc608\uc2dc"),(0,n.kt)("p",null,"\uc544\ub798\ub294 ",(0,n.kt)("inlineCode",{parentName:"p"},"disableContextMenu: false"),"\uc778 \uacbd\uc6b0\ub85c, \ub9c8\uc6b0\uc2a4 \uc6b0\ud074\ub9ad\ud588\uc744 \ub54c \ucee8\ud14d\uc2a4\ud2b8 \uba54\ub274\uac00 \ud45c\uc2dc\ub429\ub2c8\ub2e4."),(0,n.kt)(o.ZP,{projectionOptions:{src:"/pano/equirect/veste.jpg"},disableContextMenu:!1,license:"veste",showExampleCode:!0,mdxType:"View360"}),(0,n.kt)("p",null,"\uc544\ub798\ub294 ",(0,n.kt)("inlineCode",{parentName:"p"},"disableContextMenu: true"),"\uc778 \uacbd\uc6b0\ub85c, \ub9c8\uc6b0\uc2a4 \uc6b0\ud074\ub9ad\ud558\ub354\ub77c\ub3c4 \ucee8\ud14d\uc2a4\ud2b8 \uba54\ub274\uac00 \ud45c\uc2dc\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),(0,n.kt)(o.ZP,{projectionOptions:{src:"/pano/equirect/veste.jpg"},disableContextMenu:!0,license:"veste",showExampleCode:!0,mdxType:"View360"}))}d.isMDXComponent=!0},459:(e,t,s)=>{s.d(t,{Z:()=>i});const i="#define GLSLIFY 1\nuniform sampler2D uTexture;\n\nvarying highp vec2 vUV;\n\nvoid main() {\n  gl_FragColor = texture2D(uTexture, vUV.st);\n}\n"},5846:(e,t,s)=>{s.d(t,{Z:()=>i});const i="#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvarying highp vec2 vUV;\n\nvoid main() {\n  vUV = uv;\n  gl_Position = uPMatrix * uMVMatrix * vec4(position, 1.0);\n}\n"}}]);