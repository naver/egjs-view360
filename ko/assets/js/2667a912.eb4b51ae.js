"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5312],{3905:(t,e,s)=>{s.d(e,{Zo:()=>c,kt:()=>d});var i=s(7294);function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function r(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function a(t,e){if(null==t)return{};var s,i,n=function(t,e){if(null==t)return{};var s,i,n={},o=Object.keys(t);for(i=0;i<o.length;i++)s=o[i],e.indexOf(s)>=0||(n[s]=t[s]);return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)s=o[i],e.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}var l=i.createContext({}),h=function(t){var e=i.useContext(l),s=e;return t&&(s="function"==typeof t?t(e):r(r({},e),t)),s},c=function(t){var e=h(t.components);return i.createElement(l.Provider,{value:e},t.children)},_={inlineCode:"code",wrapper:function(t){var e=t.children;return i.createElement(i.Fragment,{},e)}},u=i.forwardRef((function(t,e){var s=t.components,n=t.mdxType,o=t.originalType,l=t.parentName,c=a(t,["components","mdxType","originalType","parentName"]),u=h(s),d=n,m=u["".concat(l,".").concat(d)]||u[d]||_[d]||o;return s?i.createElement(m,r(r({ref:e},c),{},{components:s})):i.createElement(m,r({ref:e},c))}));function d(t,e){var s=arguments,n=e&&e.mdxType;if("string"==typeof t||n){var o=s.length,r=new Array(o);r[0]=u;var a={};for(var l in e)hasOwnProperty.call(e,l)&&(a[l]=e[l]);a.originalType=t,a.mdxType="string"==typeof t?t:n,r[1]=a;for(var h=2;h<o;h++)r[h]=s[h];return i.createElement.apply(null,r)}return i.createElement.apply(null,s)}u.displayName="MDXCreateElement"},241:(t,e,s)=>{s.d(e,{ZP:()=>At});var i=s(6010),n=s(7294),o=s(4996),r=s(826),a=s(6260),l=s(8388);class h{constructor(t){let{className:e={}}=void 0===t?{}:t;this._startLoading=t=>{let{target:e}=t;e.rootEl.appendChild(this._container),e.initialized?e.once(a.FP.LOAD,this._detachElements):e.once(a.FP.READY,this._detachElements)},this._detachElements=t=>{let{target:e}=t;const s=this._container;s&&s.parentElement===e.rootEl&&e.rootEl.removeChild(s)},this.className=e,this._container=this._createElements()}init(t){t.on(a.FP.LOAD_START,this._startLoading)}destroy(t){t.off(a.FP.LOAD_START,this._startLoading),this._detachElements({target:t})}_createElements(){const t={...this.className,...h.DEFAULT_CLASS},e=(0,l.az)(t.CONTAINER),s=(0,l.az)(t.RING);return e.appendChild(s),e}}h.DEFAULT_CLASS={CONTAINER:"view360-spinner",RING:"view360-spinner-ring"};const c=h;var _=s(8824),u=s(6563),d=s(9580),m=s(4098),p=s(1815),E=s(9290),g=s(2278),v=s(7337),T=s(5846),b=s(459);class w extends m.Z{constructor(t){super(t);const{cubemapOrder:e="RLUDFB",cubemapFlipX:s=!1}=t;this._cubemapOrder=e,this._cubemapFlipX=s}applyTexture(t,e){const s=this._cubemapOrder,i=this._cubemapFlipX,n={uTexture:new g.Z(t,e)},o=new v.Z({order:s}),r=new E.Z(t,T.Z,b.Z,n),a=t.createVAO(o,r),l=new p.Z(a,r);i&&(l.scale[0]=-1),l.updateMatrix(),this._mesh=l}}const f=w;var O=s(9952);class A extends m.Z{applyTexture(t,e){const s={uTexture:new g.Z(t,e)},i=new v.Z({order:"LFRDBU",rotateUV:[O.lD.ZERO,O.lD.ZERO,O.lD.ZERO,O.lD.CW_90,O.lD.CCW_90,O.lD.CW_90]}),n=new E.Z(t,T.Z,"#define PI 3.14159265359\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\n\nvarying highp vec2 vUV;\n\nconst vec2 OPERATE_COORDS_RANGE = vec2(-1.0, 1.0);\nconst vec2 TEXTURE_COORDS_RANGE = vec2(0.0, 1.0);\nconst float ONE_THIRD = 1.0 / 3.0;\nconst float EAC_CONST = 2.0 / PI;\n\nfloat scale(vec2 domainRange, vec2 targetRange, float val) {\n  float unit = 1.0 / (domainRange[1] - domainRange[0]);\n  return targetRange[0] + (targetRange[1] - targetRange[0]) * (val - domainRange[0]) * unit;\n}\n\nvoid main(void) {\n  float transformedCoordX;\n  float transformedCoordY;\n\n  float texRangeXStart = floor(vUV.s * 3.) * ONE_THIRD;\n  float texRangeYStart = floor(vUV.t * 2.) * 0.5;\n\n  vec2 orgTextureRangeX = vec2(texRangeXStart, texRangeXStart + ONE_THIRD);\n  vec2 orgTextureRangeY = vec2(texRangeYStart, texRangeYStart + 0.5);\n\n  // scaling coords by the coordinates following the range from -1.0 to 1.0.\n  float px = scale(orgTextureRangeX, OPERATE_COORDS_RANGE, vUV.s);\n  float py = scale(orgTextureRangeY, OPERATE_COORDS_RANGE, vUV.t);\n\n  float qu = EAC_CONST * atan(px) + 0.5;\n  float qv = EAC_CONST * atan(py) + 0.5;\n\n  // re-scaling coords by original coordinates ranges\n  transformedCoordX = scale(TEXTURE_COORDS_RANGE, orgTextureRangeX, qu);\n  transformedCoordY = scale(TEXTURE_COORDS_RANGE, orgTextureRangeY, qv);\n\n  gl_FragColor = texture2D(uTexture, vec2(transformedCoordX, transformedCoordY));\n}\n",s),o=t.createVAO(i,n),r=new p.Z(o,n);this._mesh=r}}const C=A;var R=s(3181),P=s(4074);class y extends P.Z{constructor(t){const e=[],s=[],i=[],n=[-.5,.5],o=1/60,r=t*o;for(let a=0;a<2;a++){const l=n[a];for(let n=0;n<=60;n++){const h=n*r+Math.PI-.5*t,c=Math.cos(h),_=Math.sin(h),u=n*o,d=a;if(i.push(u,d),e.push(c,l,_),0===a&&n<60){const t=n,e=t+60+1;s.push(t,e,t+1,e,e+1,t+1)}}}super(e,s,i)}}const N=y;class I extends m.Z{constructor(t){super(t);const{partial:e=!1}=t;this._partial=e}applyTexture(t,e){const s=this._partial,{width:i,height:n}=e,o=i/n,r=180/o,a=s?1:2*Math.tan(r*O.ZX),l=s?o:2*Math.PI,h=new N(l),c=new E.Z(t,T.Z,b.Z,{uTexture:new g.Z(t,e)}),_=t.createVAO(h,c),u=new p.Z(_,c);u.scale[1]=a,R.yR(u.rotation),R.uD(u.rotation,u.rotation,-Math.PI/2),u.updateMatrix(),this._mesh=u}updateCamera(t){super.updateCamera(t);const e=this._mesh;if(!e)return;const s=e.program.uniforms.uTexture.texture,{width:i,height:n}=s,o=i/n,r=.5*e.scale[1];if(this._partial){const e=.5*o*O.jl;t.restrictYawRange(-e,e)}const a=Math.atan2(r,1)*O.jl,l=Math.tan(t.fov*O.ZX*.5)/(r*t.aspect);t.restrictPitchRange(-a,a),t.restrictZoomRange(l,1/0),t.restrictRenderHeight(2*r)}}const L=I;var x=s(8155),S=s(8602);class D extends S.Z{constructor(t){super(),this.val=t}update(t,e){t.uniform4fv(e,this.val.reduce(((t,e)=>[...t,...e]),[])),this.needsUpdate=!1}}const U=D;class M extends S.Z{constructor(t){super(),this.val=t}update(t,e){t.uniform1f(e,this.val),this.needsUpdate=!1}}const F=M;class B extends m.Z{constructor(t){super(t),this._mode=t.mode}applyTexture(t,e){let s,i;if(this._mode===B.MODE.LEFT_RIGHT)s=[.5,1,0,0],i=[.5,1,.5,0];else s=[1,.5,0,0],i=[1,.5,0,.5];const n={uTexture:new g.Z(t,e),uEye:new F(0),uTexScaleOffset:new U([s,i])},o=new x.Z,r=new E.Z(t,"#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform vec4 uTexScaleOffset[2];\nuniform float uEye;\n\nvarying highp vec2 vUV;\n\nvoid main() {\n  vec4 scaleOffset = uTexScaleOffset[int(uEye)];\n  vUV = uv.xy * scaleOffset.xy + scaleOffset.zw;\n  gl_Position = uPMatrix * uMVMatrix * vec4(position, 1.0);\n}\n",b.Z,n),a=t.createVAO(o,r),l=new p.Z(a,r);this._mesh=l}}B.MODE={LEFT_RIGHT:"left_right",TOP_BOTTOM:"top_bottom"};const V=B;class k extends P.Z{constructor(t,e,s){void 0===t&&(t=2),void 0===e&&(e=2),void 0===s&&(s=-1);const i=.5*t,n=.5*e;super([-i,-n,s,i,-n,s,-i,n,s,i,n,s],[0,1,2,2,1,3],[0,0,1,0,0,1,1,1])}}const Z=k;class z extends m.Z{constructor(t){super(t)}applyTexture(t,e){e.wrapS=WebGLRenderingContext.REPEAT,e.wrapT=WebGLRenderingContext.REPEAT;const s={uTexture:new g.Z(t,e),uYaw:new F(0),uPitch:new F(.5),uZoom:new F(1)},i=new Z,n=new E.Z(t,"#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvarying highp vec2 vUV;\n\nvoid main() {\n  vUV = uv;\n  gl_Position = vec4(position, 1.0);\n}\n","precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\nuniform float uYaw;\nuniform float uPitch;\nuniform float uZoom;\n\nvarying highp vec2 vUV;\n\nconst float PI = 3.1415926536;\nconst float PI_2 = PI * 0.5;\n\n// https://mathworld.wolfram.com/StereographicProjection.html\nvec2 toStereographicUV(in vec2 uv, in vec2 center) {\n  float R = 1. * uZoom;\n\n  // lat & lon from texture UV (x: -PI~PI, y: -PI/2 ~ PI/2)\n  vec2 texLatLon = (uv * 2. - 1.) * vec2(PI, PI_2);\n  // Central point (x: 0 ~ 2*PI, y: -PI/2 ~ PI/2)\n  vec2 central = (center * 2. - 1.) * vec2(PI, PI_2) + vec2(PI, 0);\n\n  float x = texLatLon.x;\n  float y = texLatLon.y;\n\n  float rou = sqrt(x * x + y * y);\n  float c = 2.0 * atan(rou, R * 0.5);\n\tfloat sin_c = sin(c);\n  float cos_c = cos(c);\n  // center\n  float sin_cy = sin(central.y);\n  float cos_cy = cos(central.y);\n\n  float lat = asin(cos_c * sin_cy + (y * sin_c * cos_cy) / rou);\n\tfloat lon = central.x + atan(x * sin_c, rou * cos_cy * cos_c - y * sin_cy * sin_c);\n\n  float u = (lon / PI + 1.0) * 0.5;\n\tfloat v = (lat / PI_2 + 1.0) * 0.5;\n\n  return vec2(u, v);\n}\n\nvoid main() {\n  vec2 central = vec2(uYaw, uPitch);\n  vec2 uv = toStereographicUV(vUV, central);\n\n  gl_FragColor = texture2D(uTexture, uv);\n}\n",s),o=t.createVAO(i,n),r=new p.Z(o,n);this._mesh=r}updateControl(t){t.ignoreZoomScale=!0}update(t){const e=this._mesh;if(!e)return;const s=e.program.uniforms;s.uYaw.val=t.yaw/360,s.uPitch.val=t.pitch/180+.5,s.uZoom.val=t.zoom,s.uYaw.needsUpdate=!0,s.uPitch.needsUpdate=!0,s.uZoom.needsUpdate=!0}}const G=z,H="wrapper_RNhm";class j extends n.Component{constructor(t){super(t),this.state={done:!1}}render(){return this.state.done?n.createElement(n.Fragment,null):n.createElement("div",{className:H},n.createElement("button",{className:"button button--lg button--primary",onClick:()=>{this.props.onClick(),this.setState({done:!0})}},"LOAD"))}}const Y=j;var X=s(5488),W=s(5162),Q=s(814);const K=t=>{let{options:e,serializer:s}=t;const{projection:i}=e.projection,o="import View360, { "+i+' } from "@egjs/view360";';return n.createElement(Q.Z,{className:"language-jsx"},o+'\n\nconst viewer = new View360("#ID_OF_YOUR_CONTAINER", '+s.serialize(e,4)+");")},q=t=>{let{options:e,serializer:s}=t;const{projection:i,projectionOptions:o}=e.projection,r=['import React, { useMemo } from "react";',"import View360, { "+i+' } from "@egjs/react-view360";'].join("\n");return n.createElement(Q.Z,{className:"language-jsx"},r+"\n\nexport default () => {\n  const projection = useMemo(() => new "+i+"("+s.serialize(o,2,1)+"), []);\n\n  return <View360 "+s.serializeJSX(e,2,1)+" />\n}")},J=t=>{let{options:e,serializer:s}=t;const{projection:i}=e.projection,o=['import { Component } from "@angular/core";',"import { View360Options, "+i+' } from "@egjs/ngx-view360";'].join("\n");return n.createElement(n.Fragment,null,n.createElement(Q.Z,{className:"language-ts",title:"app.module.ts"},'import { NgModule } from "@angular/core";\nimport { BrowserModule } from "@angular/platform-browser";\nimport { AppComponent } from "./app.component";\nimport { NgxView360Module } from "@egjs/ngx-view360";\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    NgxView360Module\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n'),n.createElement(Q.Z,{className:"language-ts",title:"demo.component.ts"},o+'\n\n@Component({\n  selector: "some-demo-component",\n  template: `\n    <ngx-view360 [options]="options" />\n  `\n})\nexport class View360Demo {\n  options: Partial<View360Options> = '+s.serialize(e,2,1)+"\n}"))},$=t=>{let{options:e,serializer:s}=t;const{projection:i,projectionOptions:o}=e.projection,r="import { View360, "+i+' } from "@egjs/vue-view360";';return n.createElement(Q.Z,{className:"language-html"},"<template>\n  <View360 "+s.serializeVue(e,2,1)+" />\n</template>\n<script>\n"+r+"\n\nexport default {\n  created() {\n    this.projection = new "+i+"("+s.serialize(o,2,2)+");\n  },\n  components: {\n    View360\n  }\n}\n<\/script>")},tt=t=>{let{options:e,serializer:s}=t;const{projection:i,projectionOptions:o}=e.projection,r="import { View360, "+i+' } from "@egjs/vue3-view360";';return n.createElement(Q.Z,{className:"language-html"},"<template>\n  <View360 "+s.serializeVue(e,2,1)+' />\n</template>\n<script>\nimport { defineComponent } from "vue";\n'+r+"\n\nexport default {\n  setup() {\n    const projection = new "+i+"("+s.serialize(o,2,2)+");\n\n    return {\n      projection\n    }\n  },\n  components: {\n    View360\n  }\n}\n<\/script>")},et=t=>{let{options:e,serializer:s}=t;const{projection:i,projectionOptions:o}=e.projection,r=["import View360, { "+i+' } from "@egjs/svelte-view360";'].join("\n");return n.createElement(Q.Z,{className:"language-html"},"<script>\n"+r+"\n\nconst projection = new "+i+"("+s.serialize(o,2)+");\n<\/script>\n<View360 "+s.serializeJSX(e,2)+" />")};const st=class{constructor(t,e){this.projection=t,this.projectionOptions=e}};const it=class{serialize(t,e,s){void 0===s&&(s=0);const i=Object.keys(t),n=[],o=" ".repeat(e*s);return n.push("{"),i.forEach(((o,r)=>{n.push(this._toText(o,t[o],e,s+1,r===i.length-1))})),n.push(o+"}"),n.join("\n")}serializeJSX(t,e,s){void 0===s&&(s=0);const i=" ".repeat(e*(s+1));return Object.keys(t).map((s=>s+"="+("string"==typeof t[s]?'"'+t[s]+'"':t[s]instanceof st?"{projection}":"{"+JSON.stringify(t[s],void 0,e)+"}").replace(/\n/g,"\n"+i))).join("\n"+i)}serializeVue(t,e,s){void 0===s&&(s=0);const i=" ".repeat(e*(s+1));return Object.keys(t).map((e=>"string"==typeof t[e]?e+'="'+t[e]+'"':t[e]instanceof st?':projection="projection"':":"+e+'="'+JSON.stringify(t[e]).replace(/\"/g,"'")+'"')).join("\n"+i)}_toText(t,e,s,i,n){const o=" ".repeat(s*i);if(e instanceof st){const r=e.projectionOptions;let a=Object.keys(r).map(((t,e)=>this._toText(t,r[t],s,i+1,e===r.length-1))).join("\n");return a&&(a="\n"+a+"\n"+o),""+o+t+": new "+e.projection+"({"+a+"})"+(n?"":",")}if(Array.isArray(e)||"object"!=typeof e){return""+o+t+": "+JSON.stringify(e,void 0,4).replace(/"([^"]+)":/g,"$1:").replace(/\n/g,"\n"+o)+(n?"":",")}{const r=Object.keys(e);let a=r.map(((t,n)=>this._toText(t,e[t],s,i+1,n===r.length-1))).join("\n");return a&&(a="\n"+a+"\n"+o),""+o+t+": {"+a+"}"+(n?"":",")}}},nt={EQUIRECTANGULAR:"equirect",CUBEMAP:"cubemap",CUBESTRIP:"cubestrip",EAC:"eac",CYLINDRICAL:"cylindrical",STEREOSCOPIC_EQUI:"stereoequi",LITTLE_PLANET:"littleplanet"},ot={[nt.EQUIRECTANGULAR]:"EquirectProjection",[nt.CUBEMAP]:"CubemapProjection",[nt.CUBESTRIP]:"CubestripProjection",[nt.EAC]:"EquiangularProjection",[nt.CYLINDRICAL]:"CylindricalProjection",[nt.STEREOSCOPIC_EQUI]:"StereoEquiProjection",[nt.LITTLE_PLANET]:"LittlePlanetProjection"};var rt=s(3991);const at=t=>{let{options:e={},projectionType:s,projectionOptions:i}=t;e.projection=new st(ot[s],i);const o=new it;return n.createElement("div",null,n.createElement(X.Z,{groupId:"options",defaultValue:"json",lazy:!0,values:[{label:n.createElement("div",{className:"framework-wrapper"},n.createElement(rt.U3t,{width:"18",height:"18"})," JSON"),value:"json"},{label:n.createElement("div",{className:"framework-wrapper"},n.createElement(rt.PF2,{width:"18",height:"18"})," Javascript"),value:"js",attributes:{"data-framework":"js"}},{label:n.createElement("div",{className:"framework-wrapper"},n.createElement(rt.err,{width:"18",height:"18"})," React"),value:"react",attributes:{"data-framework":"react"}},{label:n.createElement("div",{className:"framework-wrapper"},n.createElement(rt.j3E,{width:"18",height:"18"})," Angular"),value:"ng",attributes:{"data-framework":"ng"}},{label:n.createElement("div",{className:"framework-wrapper"},n.createElement(rt.IAF,{width:"18",height:"18"})," Vue@2"),value:"vue2",attributes:{"data-framework":"vue"}},{label:n.createElement("div",{className:"framework-wrapper"},n.createElement(rt.IAF,{width:"18",height:"18"})," Vue@3"),value:"vue3",attributes:{"data-framework":"vue"}},{label:n.createElement("div",{className:"framework-wrapper"},n.createElement(rt.qn2,{width:"18",height:"18"})," Svelte"),value:"svelte",attributes:{"data-framework":"svelte"}}]},n.createElement(W.Z,{value:"json"},n.createElement(Q.Z,{className:"language-json"},o.serialize(e,4))),n.createElement(W.Z,{value:"js"},n.createElement(K,{options:e,serializer:o})),n.createElement(W.Z,{value:"react"},n.createElement(q,{options:e,serializer:o})),n.createElement(W.Z,{value:"ng"},n.createElement(J,{options:e,serializer:o})),n.createElement(W.Z,{value:"vue2"},n.createElement($,{options:e,serializer:o})),n.createElement(W.Z,{value:"vue3"},n.createElement(tt,{options:e,serializer:o})),n.createElement(W.Z,{value:"svelte"},n.createElement(et,{options:e,serializer:o}))))};var lt=s(7462),ht=s(9960);const ct="wrapper_mU0X",_t={veste:{name:"Veste Oberhaus",link:"https://commons.wikimedia.org/wiki/File:Veste_Oberhaus_(Passau,_full_spherical_panoramic_image,_equirectangular_projection).jpg",author:"J\xfcrgen Matern / Wikimedia Commons",authorLink:"https://juergen-matern.de/",license:"CC BY-SA 4.0"},fisherman:{name:"Fisherman's Bastion",link:"https://www.humus.name/index.php?page=Textures&ID=117",author:"Humus",authorLink:"https://www.humus.name/",license:"CC BY 3.0"},burano:{name:"Burano",link:"https://www.behance.net/gallery/59305251/Burano-360-painting-animation-in-VR",author:"Maja Wro\u0144ska",authorLink:"https://www.behance.net/takmaj",license:"CC BY-NC 3.0"},bathroom:{name:"The Bathroom",link:"https://www.youtube.com/watch?v=r7hv9K-u3U8",author:"jan Ke Tami",authorLink:"https://www.youtube.com/user/IamSamys",license:"CC BY 3.0"},snow_mountain:{name:"Snow Mountains Panorama",link:"https://pixabay.com/photos/snow-mountains-panorama-panoramic-1868299/",author:"Pexels",authorLink:"https://pixabay.com/users/pexels-2286921/",license:"Pixabay License"},san_francisco:{name:"San Francisco Panorama",link:"https://pixabay.com/images/id-2131951/",author:"pixexid",authorLink:"https://pixabay.com/ko/users/pixexid-4729217/",license:"Pixabay License"},witness:{name:"The Witness",link:"http://the-witness.net/",author:"Thekla, Inc.",authorLink:"http://the-witness.net/",ansel:!0},battlefieldV:{name:"Battlefield V",link:"https://www.ea.com/games/battlefield/battlefield-5",author:"DICE",authorLink:"https://www.dice.se/",ansel:!0},qube2:{name:"Q.U.B.E. 2",link:"https://www.toxicgames.co.uk/qube2",author:"Toxic Games",authorLink:"https://www.toxicgames.co.uk/",ansel:!0},drg:{name:"Deep Rock Galactic",link:"https://www.deeprockgalactic.com/",author:"Ghost Ship Games",authorLink:"https://ghostship.dk/",ansel:!0},for_honor:{name:"For Honor",link:"https://www.ubisoft.com/en-us/game/for-honor",author:"Ubisoft",authorLink:"https://www.ubisoft.com/",ansel:!0},dq11:{name:"Dragon Quest XI S: Echoes of an Elusive Age",link:"https://dragonquest.square-enix-games.com/xi",author:"Square Enix",authorLink:"https://www.square-enix.com/",ansel:!0},ff15:{name:"FINAL FANTASY XV",link:"https://finalfantasyxv.square-enix-games.com/",author:"Square Enix",authorLink:"https://www.square-enix.com/",ansel:!0}},ut={CC0:"https://creativecommons.org/publicdomain/zero/1.0/","CC BY 4.0":"https://creativecommons.org/licenses/by/4.0/","CC BY-SA 4.0":"https://creativecommons.org/licenses/by-sa/4.0/","CC BY-NC 3.0":"https://creativecommons.org/licenses/by-nc/3.0/","CC BY-NC-SA 4.0":"http://creativecommons.org/licenses/by-nc-sa/4.0/","CC BY 3.0":"https://creativecommons.org/licenses/by/3.0/","Pixabay License":"https://pixabay.com/service/terms/"};class dt extends n.Component{constructor(t){super(t),this._modalRef=n.createRef(),this.state={license:t.item?_t[t.item]:null,visible:!1}}componentDidUpdate(t){this.props.item!==t.item&&this.setState({license:_t[this.props.item]})}render(){const t=this._modalRef,{item:e,...s}=this.props,o=this.state.license;return o?n.createElement(n.Fragment,null,n.createElement("div",(0,lt.Z)({className:(0,i.Z)("license-container",ct)},s,{title:"Show Attribution",onClick:t=>{t.stopPropagation(),this.setState({visible:!0})}})),n.createElement("div",{ref:t,key:e,className:(0,i.Z)({visible:this.state.visible,"demo-viewer-modal":!0}),onClick:()=>{this.setState({visible:!1})}},this.state.visible&&n.createElement("div",{className:"content"},o.ansel&&n.createElement(n.Fragment,null,n.createElement("span",null,"Screenshot from ")),n.createElement(ht.Z,{href:o.link,target:"_blank",rel:"noopener noreferrer",onClick:t=>t.stopPropagation()},o.name),n.createElement("span",null," by "),n.createElement(ht.Z,{href:o.authorLink,target:"_blank",rel:"noopener noreferrer",onClick:t=>t.stopPropagation()},o.author),o.license&&n.createElement(n.Fragment,null,n.createElement("span",null," licensed under "),n.createElement(ht.Z,{href:ut[o.license],target:"_blank",rel:"noopener noreferrer",onClick:t=>t.stopPropagation()},o.license)),o.ansel&&n.createElement(n.Fragment,null,n.createElement("span",null," taken with "),n.createElement(ht.Z,{href:"https://www.nvidia.com/en-us/geforce/geforce-experience/ansel/",target:"_blank",rel:"noopener noreferrer",onClick:t=>t.stopPropagation()},"NVidia Ansel"))))):n.createElement(n.Fragment,null)}}dt.defaultProps={item:null};const mt=dt;var pt=s(6577);class Et extends pt.Z{constructor(t){let{position:e=r.Z.POSITION.MAIN_RIGHT,order:s=0}=void 0===t?{}:t;super({position:e,order:s}),this._toggleModal=()=>{const t=this._viewer,e=this._modalEl;if(e.classList.toggle("visible"),!t||!t.projection)return;if(!e.classList.contains("visible"))return this._clearModal();const s=t.projection.src,i=Array.isArray(s)?s:[s],n=!!t.projection.video;i.forEach((t=>{const s=n?document.createElement("video"):document.createElement("img");s.classList.add("content"),s.src=t,n&&(s.addEventListener("click",(t=>{t.stopPropagation()})),s.controls=!0),e.appendChild(s)}))},this._clearModal=()=>{const t=this._modalEl;for(;t.firstChild;){if(t.firstChild instanceof HTMLVideoElement){const e=t.firstChild;e.pause(),e.removeAttribute("src"),e.load()}t.removeChild(t.firstChild)}},this.element=document.createElement("button"),this.element.classList.add("demo-controls-orig-image"),this.element.title="Show original image/video",this._modalEl=document.createElement("div"),this._modalEl.classList.add("demo-viewer-modal"),this._modalEl.addEventListener("click",this._toggleModal),this._viewer=null}init(t,e){const s=this.element,i=e.className.CONTROLS_BUTTON;s.classList.add(i),s.addEventListener("click",this._toggleModal),this._attachModal(t.rootEl),this._viewer=t}destroy(t,e){const s=this.element,i=e.className.CONTROLS_BUTTON;s.classList.remove(i),s.removeEventListener("click",this._toggleModal),this._detachModal(t.rootEl),this._clearModal(),this._viewer=null}_attachModal(t){t.appendChild(this._modalEl)}_detachModal(t){this._modalEl.parentElement===t&&t.removeChild(this._modalEl)}}const gt=Et,vt={header:"header_PUyx",footer:"footer_Qblj",separator:"separator_Hyh3",btn:"btn_iUkw"},Tt={[a.FP.INPUT_START]:"#4b5bab",[a.FP.INPUT_END]:"#3ca370",[a.FP.STATIC_CLICK]:"#8c3f5d",[a.FP.BEFORE_RENDER]:"#ba6156",[a.FP.RENDER]:"#f2a65e",[a.FP.RESIZE]:"#5e315b",[a.FP.LOAD_START]:"#bd4882",[a.FP.LOAD]:"#80366b",[a.FP.PROJECTION_CHANGE]:"#eb564b",[a.FP.READY]:"#7e7e8f",[a.FP.VIEW_CHANGE]:"#323e4f",[a.FP.VR_START]:"#b0305c",[a.FP.VR_END]:"#73275c"};class bt extends n.Component{constructor(t){super(t),this._onEvent=t=>{const e=this.state.events,s=e[e.length-1];s&&t.type===s.name?s.count+=1:(e.push({name:t.type,count:1,evt:t}),e.length>20&&e.splice(0,e.length-20)),this.setState({events:e})},this.state={events:[]}}componentDidMount(){setTimeout((()=>{const{viewer:t,events:e}=this.props;Object.values(e).forEach((e=>{t.on(e,this._onEvent)}))}))}render(){const t=this.state.events;return n.createElement("div",null,n.createElement("h4",null,"Events Triggered"),t.map(((t,e)=>{var s;let{name:o,count:r,evt:a}=t;return n.createElement("div",{key:e,className:(0,i.Z)(vt.btn,"button button--active button--info"),style:{backgroundColor:null!=(s=Tt[o])?s:""}},n.createElement("span",null,o),n.createElement("span",{className:vt.separator},"x"),n.createElement("span",{className:vt.count},r))})))}}bt.defaultProps={events:[]};const wt=bt,ft=n.forwardRef(((t,e)=>{let{license:s=null,showControlBar:a=!0,showSpinner:h=!0,clickToLoad:u=!1,showExampleCode:d=!1,showEvents:m=[],ratio:p="16by9",projectionType:E=nt.EQUIRECTANGULAR,projectionOptions:g={},...v}=t;const[T,b]=(0,n.useState)(),w=(0,n.useRef)(),{withBaseUrl:f}=(0,o.C)();(0,n.useEffect)((()=>{T&&T.load(Ot(E,g,f))}),[E,g]),(0,n.useEffect)((()=>{const{children:t,plugins:e=[],...s}=v;if(a){const t=new gt;e.push(new r.Z({...(0,l.PO)(a),customItems:[t]}))}h&&e.push(new c((0,l.PO)(h))),u&&(s.autoInit=!1);const i={...s,plugins:e,projection:g.src?Ot(E,g,f):null},n=new _.ZP(w.current,i);return b(n),()=>{n.destroy()}}),[]),(0,n.useImperativeHandle)(e,(()=>({load:(t,e)=>{T&&T.load(Ot(t,e,f))},refreshHotspots:()=>{T&&T.hotspot.refresh()},viewer:()=>T})),[T]);const{children:O,className:A,style:C,on:R,...P}=v,y=Array.isArray(d)?d:[],N=Object.keys(P).filter((t=>t in _.ZP.prototype||y.includes(t))).reduce(((t,e)=>({...t,[e]:P[e]})),{}),I=["view360-container"];return p&&I.push("is-"+p),n.createElement(n.Fragment,null,n.createElement("div",{ref:w,className:(0,i.Z)(...I,A),style:C},n.createElement("canvas",{className:"view360-canvas"}),s&&n.createElement(mt,{item:s}),u&&n.createElement(Y,{onClick:()=>{T.init()}}),O),d&&n.createElement(at,{options:N,projectionType:E,projectionOptions:g}),m.length>0&&n.createElement(wt,{viewer:T,events:m}))})),Ot=(t,e,s)=>{switch(e.src&&("string"==typeof e.src||Array.isArray(e.src))&&(e.src=Array.isArray(e.src)?e.src.map((t=>s(t))):s(e.src)),t){case nt.EQUIRECTANGULAR:return new u.Z(e);case nt.CUBEMAP:return new d.Z(e);case nt.CUBESTRIP:return new f(e);case nt.EAC:return new C(e);case nt.CYLINDRICAL:return new L(e);case nt.STEREOSCOPIC_EQUI:return new V(e);case nt.LITTLE_PLANET:return new G(e);default:throw new Error("Wrong projection, given: "+t)}},At=ft},1028:(t,e,s)=>{s.d(e,{$:()=>_,Dx:()=>h,FP:()=>i,GS:()=>E,H3:()=>p,L2:()=>o,T:()=>r,WV:()=>a,bQ:()=>m,gf:()=>l,jN:()=>c,kq:()=>u,ml:()=>d,yy:()=>n});const i={MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",WHEEL:"wheel",RESIZE:"resize",CONTEXT_MENU:"contextmenu",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_UP:"pointerup",POINTER_CANCEL:"pointercancel",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",KEY_DOWN:"keydown",KEY_UP:"keyup",LOAD:"load",ERROR:"error",CLICK:"click",DOUBLE_CLICK:"dblclick",CONTEXT_CREATE_ERROR:"webglcontextcreationerror",CONTEXT_LOST:"webglcontextlost",CONTEXT_RESTORED:"webglcontextrestored",DEVICE_ORIENTATION:"deviceorientation",DEVICE_MOTION:"devicemotion",ORIENTATION_CHANGE:"orientationchange",VIDEO_PLAY:"play",VIDEO_PAUSE:"pause",VIDEO_LOADED_DATA:"loadeddata",VIDEO_VOLUME_CHANGE:"volumechange",VIDEO_TIME_UPDATE:"timeupdate",VIDEO_DURATION_CHANGE:"durationchange",VIDEO_CAN_PLAYTHROUGH:"canplaythrough",TRANSITION_END:"transitionend",XR_END:"end"},n="div",o="button";let r;!function(t){t[t.LEFT=0]="LEFT",t[t.MIDDLE=1]="MIDDLE",t[t.RIGHT=2]="RIGHT"}(r||(r={}));const a={GRAB:"grab",GRABBING:"grabbing",NONE:""},l=["LEFT","UP","RIGHT","DOWN"];let h;!function(t){t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN"}(h||(h={}));const c=32,_={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"},u=" ",d=["requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","webkitCancelFullScreen","mozRequestFullScreen","msRequestFullscreen"],m=["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"],p=["exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"],E=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"]},4949:(t,e,s)=>{s.d(e,{ZP:()=>i});const i={CODES:{WRONG_TYPE:0,WRONG_OPTION:1,ELEMENT_NOT_FOUND:2,CANVAS_NOT_FOUND:3,WEBGL_NOT_SUPPORTED:4,FAILED_CREATE_CONTEXT_2D:5,PROVIDE_PROJECTION_FIRST:6,FAILED_LINKING_PROGRAM:7,INSUFFICIENT_ARGS:8},MESSAGES:{WRONG_TYPE:(t,e)=>typeof t+" is not a "+e.map((t=>'"'+t+'"')).join(" or ")+".",WRONG_OPTION:(t,e)=>'Bad option: given "'+t+'" for option "'+e+'".',ELEMENT_NOT_FOUND:t=>'Element with selector "'+t+'" not found.',CANVAS_NOT_FOUND:"The canvas element was not found inside the given root element.",WEBGL_NOT_SUPPORTED:"WebGL is not supported on this browser.",FAILED_CREATE_CONTEXT_2D:"Failed to create canvas 2D context",PROVIDE_PROJECTION_FIRST:'"projection" should be provided before initialization.',FAILED_LINKING_PROGRAM:(t,e)=>'Failed linking WebGL program - "'+t+"\nShader compile Log: "+e,INSUFFICIENT_ARGS:(t,e)=>'Insufficient arguments: given "'+t+'" for "'+e+'".'}}},6260:(t,e,s)=>{s.d(e,{FP:()=>n,Qz:()=>i,Xt:()=>o});const i={CONTAINER:"view360-container",CANVAS:"view360-canvas",CTX_LOST:"view360-ctx-lost",IN_VR:"view360-vr-presenting",HOTSPOT_CONTAINER:"view360-hotspots",HOTSPOT:"view360-hotspot",HOTSPOT_VISIBLE:"view360-hotspot-visible",HOTSPOT_FLIP_X:"view360-hotspot-flip-x",HOTSPOT_FLIP_Y:"view360-hotspot-flip-y"},n={READY:"ready",LOAD_START:"loadStart",LOAD:"load",PROJECTION_CHANGE:"projectionChange",RESIZE:"resize",BEFORE_RENDER:"beforeRender",RENDER:"render",INPUT_START:"inputStart",INPUT_END:"inputEnd",VIEW_CHANGE:"viewChange",STATIC_CLICK:"staticClick",VR_START:"vrStart",VR_END:"vrEnd"},o={LINEAR:t=>t,SINE_WAVE:t=>Math.sin(t*Math.PI*2),EASE_OUT_CUBIC:t=>1-Math.pow(1-t,3),EASE_OUT_BOUNCE:t=>{const e=7.5625,s=2.75;return t<1/s?e*t*t:t<2/s?e*(t-=1.5/s)*t+.75:t<2.5/s?e*(t-=2.25/s)*t+.9375:e*(t-=2.625/s)*t+.984375}}},9952:(t,e,s)=>{s.d(e,{AG:()=>g,De:()=>u,Ib:()=>T,K$:()=>h,QA:()=>r,YB:()=>E,ZX:()=>a,_F:()=>c,gI:()=>v,jl:()=>l,ju:()=>d,lD:()=>m,oK:()=>_,r6:()=>p,u1:()=>o});var i,n=s(6260);const o={CHANGE:"change",ANIMATION_END:"animationEnd"},r={INPUT_START:"inputStart",CHANGE:"change",INPUT_END:"inputEnd",ENABLE:"enable",DISABLE:"disable",STATIC_CLICK:"staticClick"},a=Math.PI/180,l=180/Math.PI,h=n.Xt.EASE_OUT_CUBIC,c=300,_={min:-1/0,max:1/0},u={min:-90,max:90},d={min:.6,max:10};let m;!function(t){t[t.ZERO=0]="ZERO",t[t.CW_90=1]="CW_90",t[t.CCW_90=2]="CCW_90",t[t.CW_180=3]="CW_180"}(m||(m={}));const p="view360videotimechange",E="http://www.w3.org/2000/svg",g="immersive-vr",v="local",T=null!=(i=Number.EPSILON)?i:2220446049250313e-31},5821:(t,e,s)=>{s.d(e,{Z:()=>d});var i=s(2665),n=s(3181),o=s(8200),r=s(1028),a=s(9952),l=s(8388);const h={PITCH_DELTA:1,YAW_DELTA_BY_ROLL:2,YAW_DELTA_BY_YAW:3};h[h.PITCH_DELTA]={targetAxis:[0,1,0],meshPoint:[0,0,1]},h[h.YAW_DELTA_BY_ROLL]={targetAxis:[0,1,0],meshPoint:[1,0,0]},h[h.YAW_DELTA_BY_YAW]={targetAxis:[1,0,0],meshPoint:[0,0,1]};class c extends i.Z{get enabled(){return this._enabled}get orientationUpdated(){return this._orientationUpdated}get ignoreRoll(){return this._ignoreRoll}set ignoreRoll(t){this._ignoreRoll=t}constructor(){super(),this._onDeviceOrientation=t=>{const e=this._orientation,{alpha:s,beta:i,gamma:n}=t;null!=s&&null!=i&&null!=n&&(e.alpha=s,e.beta=i,e.gamma=n,this._orientationUpdated=!0,this._needsCalibrate&&(this._needsCalibrate=!1,this._calibrateSensor()))},this._updateScreenOrientation=()=>{window.screen&&window.screen.orientation&&void 0!==window.screen.orientation.angle?this._screenOrientation=screen.orientation.angle:void 0!==window.orientation?this._screenOrientation=window.orientation>=0?window.orientation:360+window.orientation:this._screenOrientation=0},this.quaternion=n.Ue(),this._orientation={alpha:0,beta:90,gamma:0},this._yawOrigin=0,this._yawOffset=0,this._orientationUpdated=!1,this._screenOrientation=0,this._needsCalibrate=!0,this._enabled=!1}enable(){this._enabled||(window.addEventListener(r.FP.DEVICE_ORIENTATION,this._onDeviceOrientation),window.addEventListener(r.FP.ORIENTATION_CHANGE,this._updateScreenOrientation),this._updateScreenOrientation(),this._orientationUpdated=!1,this._needsCalibrate=!0,this._enabled=!0)}disable(){this._enabled&&(window.removeEventListener(r.FP.DEVICE_ORIENTATION,this._onDeviceOrientation),window.removeEventListener(r.FP.ORIENTATION_CHANGE,this._updateScreenOrientation),this._enabled=!1)}update(){this._updateRotation(),this._orientationUpdated=!1}collectDelta(){if(!this._orientationUpdated)return{pitch:0,yaw:0};const t=n.d9(this.quaternion);return this._updateRotation(),this._orientationUpdated=!1,this._toEulerDelta(t,this.quaternion)}setInitialRotation(t){this._yawOrigin=t}_calibrateSensor(){const t=this._yawOrigin,e=this.quaternion;this._yawOffset=0,this._updateRotation();const{yaw:s}=(0,l.b6)(e);this._yawOffset=s-t,this._updateRotation(),this._needsCalibrate=!1}_updateRotation(){const t=this.quaternion,{alpha:e,beta:s,gamma:i}=this._orientation;n.yR(t),n.uD(t,t,(e-this._yawOffset)*a.ZX),n.lM(t,t,s*a.ZX),n.jI(t,t,-i*a.ZX);const o=n.Ue(),r=.5*-this._screenOrientation*a.ZX,l=n.al(-Math.sqrt(.5),0,0,Math.sqrt(.5));n.t8(o,0,Math.sin(r),0,Math.cos(r)),n.Jp(t,t,o),n.Jp(t,t,l),n.Fv(t,t)}_toEulerDelta(t,e){return{yaw:this._getDeltaYaw(t,e),pitch:this._getDeltaPitch(t,e)}}_getDeltaYaw(t,e){const s=this._getRotationDelta(t,e,h.YAW_DELTA_BY_YAW);return this._getRotationDelta(t,e,h.YAW_DELTA_BY_ROLL)*Math.sin(this._extractPitchFromQuat(e))+s}_getDeltaPitch(t,e){return this._getRotationDelta(t,e,h.PITCH_DELTA)}_getRotationDelta(t,e,s){const i=o.al(h[s].targetAxis[0],h[s].targetAxis[1],h[s].targetAxis[2]),r=h[s].meshPoint,l=n.d9(t),c=n.d9(e);n.Fv(l,l),n.Fv(c,c);let _=o.al(0,0,1),u=o.al(0,0,1);o.VC(_,_,l),o.VC(u,u,c),o.VC(i,i,c);const d=o.AK(i,o.kC(o.Ue(),_,u))>0?1:-1,m=o.al(r[0],r[1],r[2]);let p;p=s!==h.YAW_DELTA_BY_YAW?o.al(0,d,0):o.al(d,0,0),o.VC(m,m,c),o.VC(p,p,c);const E=m,g=p,v=o.Ue();o.kC(v,E,g),o.Fv(v,v);const T=v[0],b=v[1],w=v[2];u=o.al(r[0],r[1],r[2]),o.VC(u,u,c),_=o.al(r[0],r[1],r[2]),o.VC(_,_,l);let f=Math.abs(_[0]*T+_[1]*b+_[2]*w);const O=o.Ue();o.$X(O,_,o.bA(o.Ue(),v,f));let A=(O[0]*u[0]+O[1]*u[1]+O[2]*u[2])/(o.kE(O)*o.kE(u));A>1&&(A=1);const C=Math.acos(A),R=o.kC(o.Ue(),u,O);let P;f=T*R[0]+b*R[1]+w*R[2],P=s!==h.YAW_DELTA_BY_YAW?f>0?1:-1:f<0?1:-1;return C*P*d*a.jl}_extractPitchFromQuat(t){const e=o.al(0,0,1);return o.VC(e,e,t),-1*Math.atan2(e[1],Math.sqrt(Math.pow(e[0],2)+Math.pow(e[2],2)))}}const _=c;class u extends i.Z{get enabled(){return this._input.enabled}get enableBlocked(){return this._enableBlocked}get animating(){return this._input.enabled&&this._input.orientationUpdated}get ignoreRoll(){return this._ignoreRoll}set ignoreRoll(t){this._ignoreRoll=t}static async isAvailable(){if(!DeviceMotionEvent)return!1;let t;return Promise.race([new Promise((e=>{t=t=>{e(t.rotationRate&&null!=t.rotationRate.alpha)},window.addEventListener(r.FP.DEVICE_MOTION,t)})),new Promise((t=>{setTimeout((()=>t(!1)),1e3)}))]).then((e=>(window.removeEventListener(r.FP.DEVICE_MOTION,t),e)))}static async requestSensorPermission(){return!(0,l.yj)()||DeviceMotionEvent.requestPermission().then((t=>"granted"===t)).catch((()=>!1))}constructor(t,e){let{ignoreRoll:s=!0}=void 0===e?{}:e;super(),this._enableBlocked=t,this._ignoreRoll=s,this._input=new _}destroy(){this.disable(),this._input.off(),this.off()}update(t,e,s,i){this._ignoreRoll?this._updateYawPitch(t,e,s,i):this._updateQuaternion(t,i)}enable(){this._input.enabled||(this._input.enable(),this._enableBlocked=!1,this.trigger(a.QA.ENABLE,{control:this,updateCursor:!1}))}disable(){this._input.enabled&&(this._input.disable(),this.trigger(a.QA.DISABLE,{updateCursor:!1}))}sync(){}_updateYawPitch(t,e,s,i){const n=this._input;if(!n.enabled)return;const{yaw:o,pitch:r}=n.collectDelta();e.add(o),s.add(r),t.lookAt({yaw:e.val,pitch:s.val,zoom:i})}_updateQuaternion(t,e){const s=this._input;s.enabled&&(s.update(),t.rotate(s.quaternion,e))}}const d=u},8861:(t,e,s)=>{s.d(e,{Z:()=>a});var i=s(2665),n=s(1028),o=s(9952);class r extends i.Z{constructor(){super(),this._onMouseDown=t=>{const e=this._el;e&&t.button===n.T.LEFT&&(t.preventDefault(),e.focus?e.focus():window.focus(),this._prevPos[0]=t.clientX,this._prevPos[1]=t.clientY,window.addEventListener(n.FP.MOUSE_MOVE,this._onMouseMove,!1),window.addEventListener(n.FP.MOUSE_UP,this._onMouseUp,!1),this.trigger(o.QA.INPUT_START,{srcEvent:t,isTouch:!1,isKeyboard:!1}))},this._onMouseMove=t=>{t.preventDefault();const e=t.clientX,s=t.clientY,i=this._prevPos,n=e-i[0],r=s-i[1];this.trigger(o.QA.CHANGE,{delta:{x:n,y:r},isTouch:!1,isKeyboard:!1}),i[0]=e,i[1]=s},this._onMouseUp=()=>{this._prevPos[0]=0,this._prevPos[1]=0,window.removeEventListener(n.FP.MOUSE_MOVE,this._onMouseMove,!1),window.removeEventListener(n.FP.MOUSE_UP,this._onMouseUp,!1),this.trigger(o.QA.INPUT_END,{isTouch:!1,isKeyboard:!1,scrolling:!1})},this._el=null,this._prevPos=[0,0]}enable(t){this._el||(t.addEventListener(n.FP.MOUSE_DOWN,this._onMouseDown),this._el=t)}disable(){const t=this._el;t&&(t.removeEventListener(n.FP.MOUSE_DOWN,this._onMouseDown),window.removeEventListener(n.FP.MOUSE_MOVE,this._onMouseMove,!1),window.removeEventListener(n.FP.MOUSE_UP,this._onMouseUp,!1),this._el=null)}}const a=r},2197:(t,e,s)=>{s.d(e,{Z:()=>l});var i=s(2665),n=s(1028),o=s(9952),r=s(8388);class a extends i.Z{get scrollable(){return this._scrollable}set scrollable(t){this._scrollable=t}constructor(){super(),this._onTouchStart=t=>{if(t.touches.length>1||this._scrolling)return;const e=t.touches[0];this._isFirstTouch=!0,this._prevPos[0]=e.clientX,this._prevPos[1]=e.clientY,this.trigger(o.QA.INPUT_START,{srcEvent:t,isTouch:!0,isKeyboard:!1})},this._onTouchMove=t=>{if(t.touches.length>1||this._scrolling)return;const e=t.touches[0],s=this._scrollable,i=this._prevPos,n=e.clientX,a=e.clientY,l=n-i[0],h=a-i[1];if(this._isFirstTouch){if(s&&!(0,r.rm)()&&Math.abs(h)>Math.abs(l))return void(this._scrolling=!0);this._isFirstTouch=!1}!1!==t.cancelable&&t.preventDefault(),this.trigger(o.QA.CHANGE,{delta:{x:l,y:h},isTouch:!0,isKeyboard:!1}),i[0]=n,i[1]=a},this._onTouchEnd=t=>{if(0!==t.touches.length)return;const e=t.touches[0],s=this._prevPos;e?(s[0]=e.clientX,s[1]=e.clientY):(s[0]=0,s[1]=0,this.trigger(o.QA.INPUT_END,{isTouch:!0,isKeyboard:!1,scrolling:this._scrolling})),!1!==t.cancelable&&t.preventDefault(),this._scrolling=!1},this._el=null,this._prevPos=[0,0],this._isFirstTouch=!1,this._scrolling=!1,this._scrollable=!1}enable(t){this._el||(t.addEventListener(n.FP.TOUCH_START,this._onTouchStart,{passive:!1}),t.addEventListener(n.FP.TOUCH_MOVE,this._onTouchMove,{passive:!1}),t.addEventListener(n.FP.TOUCH_END,this._onTouchEnd),this._el=t)}disable(){const t=this._el;t&&(t.removeEventListener(n.FP.TOUCH_START,this._onTouchStart),t.removeEventListener(n.FP.TOUCH_MOVE,this._onTouchMove),t.removeEventListener(n.FP.TOUCH_END,this._onTouchEnd),this._el=null)}}const l=a},7035:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(8388),n=s(9952);const o=class{get val(){return this._val}get start(){return this._start}get end(){return this._end}get progress(){return this._progress}get activated(){return this._activated}get duration(){return this._duration}set duration(t){this._duration=t}get loop(){return this._loop}set loop(t){this._loop=t}get range(){return this._range}get easing(){return this._easing}set easing(t){this._easing=t}constructor(t){let{duration:e=n._F,loop:s=!1,range:i={min:0,max:1},easing:o=n.K$}=void 0===t?{}:t;this._duration=e,this._loop=s,this._range=i,this._easing=o,this._activated=!1,this.reset(0)}update(t){if(!this._activated)return this._val=this._end,0;const e=this._start,s=this._end,n=this._duration,o=this._val,r=this._loop,a=this._progress+t/n;this._progress=r?(0,i.zc)(a,0,1):(0,i.uZ)(a,0,1);const l=this._easing(this._progress);return this._val=(0,i.t7)(e,s,l),!r&&this._progress>=1&&(this._activated=!1),this._val-o}reset(t){const e=this._range,s=(0,i.uZ)(t,e.min,e.max);this._start=s,this._end=s,this._val=s,this._progress=0,this._activated=!1}add(t){const e=this._range;this._start=(0,i.uZ)(this._start+t,e.min,e.max),this._end=(0,i.uZ)(this._end+t,e.min,e.max),this._val=(0,i.uZ)(this._val+t,e.min,e.max)}setNewEndByDelta(t){const e=this._range;this._start=this._val,this._end=(0,i.uZ)(this._end+t,e.min,e.max),this._progress=0,this._activated=!0}setRange(t,e){this._start=(0,i.uZ)(this._start,t,e),this._end=(0,i.uZ)(this._end,t,e),this._range={min:t,max:e}}}},9290:(t,e,s)=>{s.d(e,{Z:()=>i});const i=class{constructor(t,e,s,i){this.program=t.createProgram(e,s),this.uniforms=i,this.uniformLocations=t.getUniformLocations(this.program,i)}}},1815:(t,e,s)=>{s.d(e,{Z:()=>a});var i=s(211),n=s(3181),o=s(8200);const r=class{constructor(){this.matrix=i.Ue(),this.rotation=n.Ue(),this.position=o.al(0,0,0),this.scale=o.al(1,1,1)}updateMatrix(){i.Iw(this.matrix,this.rotation,this.position,this.scale)}};const a=class extends r{constructor(t,e){super(),this.vao=t,this.program=e}destroy(t){t.releaseVAO(this.vao),t.releaseShaderResources(this.program)}}},9658:(t,e,s)=>{s.d(e,{Z:()=>n});class i extends Error{constructor(t,e){super(t),Object.setPrototypeOf(this,i.prototype),this.name="View360Error",this.code=e}}const n=i},7337:(t,e,s)=>{s.d(e,{Z:()=>a});var i=s(4074),n=s(9952),o=s(8388);class r extends i.Z{constructor(t){let{order:e,rotateUV:s}=t;const i=1/3,r=[];for(let n=1;n>=0;n--)for(let t=0;t<3;t++){const e=[t*i,.5*n,(t+1)*i,.5*n,(t+1)*i,.5*(n+1),t*i,.5*(n+1)];r.push(e)}s&&s.forEach(((t,e)=>{if(t===n.lD.ZERO)return;const s=r[e];let i;i=t===n.lD.CW_90?[1,2,3,0]:t===n.lD.CCW_90?[3,0,1,2]:[2,3,0,1];const o=Array(s.length);for(let n=0;n<s.length/2;n++)o[2*n+0]=s[2*i[n]+0],o[2*n+1]=s[2*i[n]+1];r[e]=o}));super([1,-1,1,-1,-1,1,-1,1,1,1,1,1,-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,1,-1,1,1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,-1,-1,-1,-1,-1,1,-1,-1,1,-1,1,1,1,1,1,1,-1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1],[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],(0,o.rM)(r,e,"BFUDRL").reduce(((t,e)=>t.concat(e)),[]))}}const a=r},4074:(t,e,s)=>{s.d(e,{Z:()=>n});const i=class{constructor(t,e){this.data=t,this.itemSize=e,this.count=t.length/e}};const n=class{constructor(t,e,s){this.vertices=new i(new Float32Array(t),3),this.indicies=new i(new Uint16Array(e),1),this.uvs=new i(new Float32Array(s),2)}}},8155:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4074);class n extends i.Z{constructor(){const t=60,e=-.5*Math.PI,s=[],i=[],n=[];let o,r;for(o=0;o<=60;o++){const a=(o/60-.5)*Math.PI,l=Math.sin(a),h=Math.cos(a);for(r=0;r<=t;r++){const a=2*(r/t-.5)*Math.PI+e,c=Math.sin(a),_=Math.cos(a)*h,u=l,d=c*h,m=r/t,p=o/60;if(s.push(m,p),i.push(_,u,d),r!==t&&60!==o){const e=61*o+r,s=e+t+1;n.push(e,e+1,s,s,e+1,s+1)}}}super(i,n,s)}}const o=n},8824:(t,e,s)=>{s.d(e,{ZP:()=>Q});var i=s(2665),n=s(8200),o=s(3181),r=s(211),a=s(7035),l=s(9952),h=s(8388);const c=class{get duration(){return this._motion.duration}set duration(t){this._motion.duration=t}get easing(){return this._motion.easing}set easing(t){this._motion.easing=t}constructor(t,e,s,i){let{duration:n=l._F,easing:o=l.K$}=void 0===i?{}:i;this._camera=t,this._motion=new a.Z({duration:n,easing:o,range:{min:0,max:1}}),this._from=e,this._to=s,this._finishPromise=new Promise((t=>{this._finish=t})),this._motion.setNewEndByDelta(1)}getFinishPromise(){return this._finishPromise}update(t){const e=this._camera,s=this._from,i=this._to,n=this._motion;n.update(t);const r=n.val,a=o.Ue(),l=(0,h.t7)(s.zoom,i.zoom,r);o.ZA(a,s.rotation,i.rotation,r),e.rotate(a,l),r>=1&&this._finish()}};class _ extends i.Z{get aspect(){return this._aspect}get changed(){return this._changed}get yawRange(){return this._initialYawRange}set yawRange(t){this._initialYawRange=t}get pitchRange(){return this._initialPitchRange}set pitchRange(t){this._initialPitchRange=t}get zoomRange(){return this._initialZoomRange}set zoomRange(t){this._initialZoomRange=t}constructor(t){let{initialYaw:e,initialPitch:s,initialZoom:i,yawRange:a,pitchRange:l,zoomRange:h,fov:c}=t;super(),this.yaw=e,this.pitch=s,this.zoom=i,this.rollOffset=0,this.initialYaw=e,this.initialPitch=s,this.initialZoom=i,this.position=n.Ue(),this.animation=null,this._up=n.al(0,1,0),this._aspect=1,this._initialYawRange=a,this._initialPitchRange=l,this._initialZoomRange=h,this._yawRange=a,this._pitchRange=l,this._zoomRange=h,this.quaternion=o.Ue(),this._updateQuaternion(),this.viewMatrix=r.Ue(),this.projectionMatrix=r.Ue(),this.fov=c,this._maxRenderHeight=-1}destroy(){this.off()}resize(t,e){const s=this._aspect;this._aspect=t/e,this._aspect!==s&&this.updateMatrix()}lookAt(t){let{yaw:e=this.yaw,pitch:s=this.pitch,zoom:i=this.zoom}=t;const n=o.d9(this.quaternion),r=this.zoom;this.yaw=(0,h.zc)(e,0,360),this.pitch=(0,h.uZ)(s,-90,90),this.zoom=i,this._updateQuaternion();const a=Math.abs(i-r);(!o.fS(this.quaternion,n)||a>=10*l.Ib)&&this.updateMatrix()}rotate(t,e){void 0===e&&(e=this.zoom);const s=o.Fv(o.Ue(),t),i=o.fS(this.quaternion,s);o.JG(this.quaternion,s);const n=this.zoom,{yaw:r,pitch:a}=(0,h.b6)(s);this.yaw=r,this.pitch=a,this.zoom=e;const c=Math.abs(e-n);(!i||c>=10*l.Ib)&&this.updateMatrix()}async animateTo(t){let{yaw:e=this.yaw,pitch:s=this.pitch,zoom:i=this.zoom,duration:n=0,easing:r=l.K$}=void 0===t?{}:t;if(this.yaw===e&&this.pitch===s&&this.zoom===i)return;const a={rotation:o.d9(this.quaternion),zoom:this.zoom},_={rotation:(0,h.nk)(o.Ue(),e,s,this.rollOffset),zoom:i},u=new c(this,a,_,{duration:n,easing:r}),d=u.getFinishPromise();return this.animation=u,d.then((()=>{this.animation=null,this.trigger(l.u1.ANIMATION_END,{animation:u})})),d}restrictYawRange(t,e){this._yawRange={min:t,max:e}}restrictPitchRange(t,e){this._pitchRange={min:t,max:e}}restrictZoomRange(t,e){this._zoomRange={min:t,max:e}}restrictRenderHeight(t){this._maxRenderHeight=t}resetRange(){this._yawRange=this._initialYawRange,this._pitchRange=this._initialPitchRange,this._zoomRange=this._initialZoomRange,this._maxRenderHeight=-1}getYawRange(t){const e=this._yawRange,s=this._maxRenderHeight;if(!e)return l.oK;const i=.5*this.getHorizontalFov(t);let n=e.min,o=e.max;if(s>0){const t=(0,h.Jx)(i*l.ZX,this._aspect),r=.5*s,a=Math.tan(t),c=Math.sqrt((1+r*r)/(1+a*a)),_=Math.atan(Math.tan(i*l.ZX)*c)*l.jl;n=e.min+_,o=e.max-_}return n>o&&(n=0,o=0),{min:n,max:o}}getPitchRange(t){const e=this._pitchRange,s=this._maxRenderHeight;if(!e)return l.De;let i=e.min,n=e.max;if(s>0){const s=.5*this.getVerticalFov(t);i=e.min+s,n=e.max-s}return i>n&&(i=0,n=0),{min:Math.max(i,-90),max:Math.min(n,90)}}getZoomRange(){var t;const e=null!=(t=this._zoomRange)?t:l.ju,s=this.getHorizontalFov(e.max),i=this.getHorizontalFov(e.min),n=this.getHorizontalFov(this.zoom);return{min:Math.max(s,1),max:Math.min(i,180),current:n}}getHorizontalFov(t){return void 0===t&&(t=this.zoom),this._getZoomedHorizontalFov(t)*l.jl}getVerticalFov(t){void 0===t&&(t=this.zoom);const e=this._aspect,s=this._getZoomedHorizontalFov(t);return(0,h.Jx)(s,e)*l.jl}fovToZoom(t){const e=this.fov;return Math.tan(l.ZX*e*.5)/Math.tan(l.ZX*t*.5)}updateMatrix(){const t=this._up,e=this._aspect,s=this.viewMatrix,i=this.projectionMatrix,o=this.position,a=this.quaternion,l=n.Ue(),c=n.al(0,0,-1);n.VC(c,c,a),n.VC(l,t,a);const _=this._getZoomedHorizontalFov(),u=(0,h.Jx)(_,e);r.zB(s,o,c,l),r.G3(i,u,e,.1,100),this._changed=!0}onFrameRender(){this._changed=!1}_updateQuaternion(){(0,h.nk)(this.quaternion,this.yaw,this.pitch,this.rollOffset)}_getZoomedHorizontalFov(t){return void 0===t&&(t=this.zoom),2*Math.atan(Math.tan(l.ZX*this.fov*.5)/t)}}const u=_;var d=s(8861),m=s(2197),p=s(1028);class E extends i.Z{get active(){const t=this._pressed;return t.LEFT||t.UP||t.RIGHT||t.DOWN}constructor(){super(),this._onKeyDown=t=>{if(t.location!==KeyboardEvent.DOM_KEY_LOCATION_STANDARD)return;this._updateKeyPress(t,!0);const e=this._getPressedKeyCount();e<=0||(t.preventDefault(),1!==e||t.repeat||this.trigger(l.QA.INPUT_START,{srcEvent:t,isTouch:!1,isKeyboard:!0}))},this._onKeyUp=t=>{if(t.location!==KeyboardEvent.DOM_KEY_LOCATION_STANDARD)return;this._updateKeyPress(t,!1);this._getPressedKeyCount()>0||this.trigger(l.QA.INPUT_END,{isTouch:!1,isKeyboard:!0,scrolling:!1})},this._el=null,this._clearPressedKeys()}enable(t){this._el||(t.addEventListener(p.FP.KEY_DOWN,this._onKeyDown),t.addEventListener(p.FP.KEY_UP,this._onKeyUp),this._el=t,this._clearPressedKeys())}disable(){const t=this._el;t&&(t.removeEventListener(p.FP.KEY_DOWN,this._onKeyDown),t.removeEventListener(p.FP.KEY_UP,this._onKeyUp),this._el=null,this._clearPressedKeys())}update(){const t=this._getDeltaByPressedKeys();0===t.x&&0===t.y||this.trigger(l.QA.CHANGE,{delta:t,isTouch:!1,isKeyboard:!0})}_clearPressedKeys(){this._pressed=p.gf.reduce(((t,e)=>({...t,[e]:!1})),{})}_updateKeyPress(t,e){const s=this._pressed,i=null!=t.keyCode?p.Dx[t.keyCode]:p.$[t.key];i&&(s[i]=e)}_getPressedKeyCount(){return p.gf.filter((t=>this._pressed[t])).length}_getDeltaByPressedKeys(){const t=this._pressed;let e=0,s=0;return t.LEFT&&(e+=1),t.RIGHT&&(e-=1),t.UP&&(s+=1),t.DOWN&&(s-=1),{x:e,y:s}}}const g=E;class v extends i.Z{get enabled(){return this._enabled}get enableBlocked(){return this._enableBlocked}get animating(){return this._keyboardInput.active||this._xMotion.activated||this._yMotion.activated}get yaw(){return this._xMotion}get pitch(){return this._yMotion}get scrollable(){return this._touchInput.scrollable}set scrollable(t){this._touchInput.scrollable=t}get pointerScale(){return this._pointerScale}set pointerScale(t){this._pointerScale=t}get keyboardScale(){return this._keyboardScale}set keyboardScale(t){this._keyboardScale=t}get duration(){return this._duration}set duration(t){this._duration=t,this._xMotion.duration=t,this._yMotion.duration=t}get easing(){return this._easing}set easing(t){this._easing=t,this._xMotion.easing=t,this._yMotion.easing=t}get disablePitch(){return this._disablePitch}set disablePitch(t){this._disablePitch=t}get disableYaw(){return this._disableYaw}set disableYaw(t){this._disableYaw=t}get disableKeyboard(){return this._disableKeyboard}set disableKeyboard(t){this._disableKeyboard=t}constructor(t,e,s){let{duration:i=l._F,easing:n=l.K$,pointerScale:o=[1,1],keyboardScale:r=[1,1],disablePitch:h=!1,disableYaw:c=!1,disableKeyboard:_=!1}=void 0===s?{}:s;super(),this._onInputStart=t=>{this._changedWhileDragging=!1,this.trigger(l.QA.INPUT_START,{...t,inputType:"rotate"})},this._onChange=t=>{const e=t.delta,s=1/this._zoomScale,i=this._screenScale,n=this._keyboardScale,o=this._pointerScale;let r;r=t.isKeyboard?[n[0]*s,n[1]*s]:[o[0]*i[0]*s,o[1]*i[1]*s];const a=e.x*r[0],l=e.y*r[1];this._xMotion.setNewEndByDelta(a),this._yMotion.setNewEndByDelta(l),this._changedWhileDragging=!0},this._onInputEnd=t=>{this.trigger(l.QA.INPUT_END,{...t,inputType:"rotate"}),this._changedWhileDragging||t.isKeyboard||t.scrolling||this.trigger(l.QA.STATIC_CLICK,{isTouch:t.isTouch}),this._changedWhileDragging=!1},this._controlEl=t,this._pointerScale=o,this._keyboardScale=r,this._duration=i,this._easing=n,this._disablePitch=h,this._disableYaw=c,this._disableKeyboard=_,this._enableBlocked=e,this._mouseInput=new d.Z,this._touchInput=new m.Z,this._keyboardInput=new g,this._xMotion=new a.Z({duration:i,range:l.oK,easing:n}),this._yMotion=new a.Z({duration:i,range:l.De,easing:n}),this._screenScale=[1,1],this._zoomScale=1,this._enabled=!1,this._changedWhileDragging=!1,this._bindInputs()}destroy(){this.disable(),this._mouseInput.off(),this._touchInput.off(),this._keyboardInput.off(),this.off(),this._changedWhileDragging=!1}update(t){if(!this._enabled)return;const e=this._xMotion,s=this._yMotion,i=this._keyboardInput;this._disableKeyboard||i.update(),this._disablePitch||s.update(t),this._disableYaw||e.update(t)}updateRange(t,e){const s=t.getYawRange(e),i=t.getPitchRange(e);this._xMotion.setRange(s.min,s.max),this._yMotion.setRange(i.min,i.max)}setZoomScale(t){this._zoomScale=t}resize(t,e,s,i){const n=(0,h.Jx)(t*l.ZX,e)*l.jl;this._screenScale[0]=t/s,this._screenScale[1]=n/i}enable(){if(this._enabled)return;const t=this._controlEl;this._mouseInput.enable(t),this._touchInput.enable(t),this._keyboardInput.enable(t),this._enabled=!0,this._enableBlocked=!1,this.trigger(l.QA.ENABLE,{control:this,updateCursor:!0})}disable(){this._enabled&&(this._mouseInput.disable(),this._touchInput.disable(),this._keyboardInput.disable(),this._enabled=!1,this.trigger(l.QA.DISABLE,{updateCursor:!0}))}sync(t){this.updateRange(t,t.zoom),this._xMotion.reset(t.yaw),this._yMotion.reset(t.pitch)}_bindInputs(){const t=this._mouseInput,e=this._touchInput,s=this._keyboardInput;t.on(l.QA.INPUT_START,this._onInputStart),t.on(l.QA.CHANGE,this._onChange),t.on(l.QA.INPUT_END,this._onInputEnd),e.on(l.QA.INPUT_START,this._onInputStart),e.on(l.QA.CHANGE,this._onChange),e.on(l.QA.INPUT_END,this._onInputEnd),s.on(l.QA.INPUT_START,this._onInputStart),s.on(l.QA.CHANGE,this._onChange),s.on(l.QA.INPUT_END,this._onInputEnd)}}const T=v;class b extends i.Z{get scrollable(){return this._scrollable}set scrollable(t){this._scrollable=t}constructor(){super(),this._onWheel=t=>{const e=this._scrollable;if(0===t.deltaY||e)return;t.preventDefault(),t.stopPropagation(),this._inputTimer<0?this.trigger(l.QA.INPUT_START,{srcEvent:t,isTouch:!1,isKeyboard:!1}):this._clearTimer();const s=this._baseScale*t.deltaY;this.trigger(l.QA.CHANGE,{delta:s,isTouch:!1,isKeyboard:!1}),this._inputTimer=window.setTimeout((()=>{this.trigger(l.QA.INPUT_END,{isTouch:!1,isKeyboard:!1,scrolling:!1}),this._inputTimer=-1}),l._F)},this._el=null,this._baseScale=.04,this._scrollable=!1,this._inputTimer=-1}enable(t){this._el||(t.addEventListener(p.FP.WHEEL,this._onWheel,{passive:!1,capture:!1}),this._el=t,this._clearTimer())}disable(){const t=this._el;t&&(t.removeEventListener(p.FP.WHEEL,this._onWheel,!1),this._el=null,this._clearTimer())}_clearTimer(){window.clearTimeout(this._inputTimer),this._inputTimer=-1}}const w=b;class f extends i.Z{constructor(){super(),this._onTouchMove=t=>{const e=t.touches;if(2!==e.length)return;if(!t.cancelable)return;t.preventDefault(),t.stopPropagation();const s=this._prevDistance,i=[e[0].pageX-e[1].pageX,e[0].pageY-e[1].pageY],n=Math.sqrt(i[0]*i[0]+i[1]*i[1])*this._baseScale,o=this._isFirstTouch?0:n-s;this._isFirstTouch&&this.trigger(l.QA.INPUT_START,{srcEvent:t,isTouch:!0,isKeyboard:!1}),this._prevDistance=n,this._isFirstTouch=!1,this.trigger(l.QA.CHANGE,{delta:o,isTouch:!0,isKeyboard:!1})},this._onTouchEnd=t=>{0===t.touches.length&&(this._isFirstTouch||this.trigger(l.QA.INPUT_END,{isTouch:!0,isKeyboard:!1,scrolling:!1}),this._prevDistance=-1,this._isFirstTouch=!0)},this._el=null,this._baseScale=-.2,this._prevDistance=-1,this._isFirstTouch=!0}enable(t){this._el||(t.addEventListener(p.FP.TOUCH_MOVE,this._onTouchMove,{passive:!1,capture:!1}),t.addEventListener(p.FP.TOUCH_END,this._onTouchEnd),this._el=t,this._prevDistance=-1,this._isFirstTouch=!0)}disable(){const t=this._el;t&&(t.removeEventListener(p.FP.TOUCH_MOVE,this._onTouchMove,!1),t.removeEventListener(p.FP.TOUCH_END,this._onTouchEnd),this._el=null)}}const O=f;class A extends i.Z{get enabled(){return this._enabled}get enableBlocked(){return this._enableBlocked}get animating(){return this._motion.activated}get zoom(){return this._motion.val}get scrollable(){return this._wheelInput.scrollable}set scrollable(t){this._wheelInput.scrollable=t}get range(){return this._motion.range}get scale(){return this._scale}set scale(t){this._scale=t}get duration(){return this._motion.duration}get easing(){return this._motion.easing}constructor(t,e,s){let{scale:i=1,duration:n=l._F,easing:o=l.K$}=void 0===s?{}:s;super(),this._onInputStart=t=>{this.trigger(l.QA.INPUT_START,{...t,inputType:"zoom"})},this._onChange=t=>{let{delta:e}=t;const s=e*this._scale;this._motion.setNewEndByDelta(s)},this._onInputEnd=t=>{this.trigger(l.QA.INPUT_END,{...t,inputType:"zoom"})},this._scale=i,this._controlEl=t,this._enableBlocked=e,this._wheelInput=new w,this._pinchInput=new O,this._motion=new a.Z({duration:n,easing:o,range:l.oK}),this._enabled=!1,this._bindInputs()}destroy(){this.disable(),this._wheelInput.off(),this._pinchInput.off(),this.off()}update(t){if(!this._enabled)return;this._motion.update(t)}enable(){if(this._enabled)return;const t=this._controlEl;this._wheelInput.enable(t),this._pinchInput.enable(t),this._enabled=!0,this._enableBlocked=!1,this.trigger(l.QA.ENABLE,{control:this,updateCursor:!1})}disable(){this._enabled&&(this._wheelInput.disable(),this._pinchInput.disable(),this._enabled=!1,this.trigger(l.QA.DISABLE,{updateCursor:!1}))}sync(t){const e=this._motion,s=t.getZoomRange();e.setRange(s.min,s.max),e.reset(s.current)}_bindInputs(){const t=this._wheelInput,e=this._pinchInput;t.on(l.QA.INPUT_START,this._onInputStart),t.on(l.QA.CHANGE,this._onChange),t.on(l.QA.INPUT_END,this._onInputEnd),e.on(l.QA.INPUT_START,this._onInputStart),e.on(l.QA.CHANGE,this._onChange),e.on(l.QA.INPUT_END,this._onInputEnd)}}const C=A;var R=s(5821);const P=class{get useGrabCursor(){return this._useGrabCursor}set useGrabCursor(t){t!==this._useGrabCursor&&(this._useGrabCursor=t,t&&this._enabled?this._setCursor(p.WV.GRAB):t||this._setCursor(p.WV.NONE))}get disableContextMenu(){return this._disableContextMenu}set disableContextMenu(t){t!==this._disableContextMenu&&(this._disableContextMenu=t,t&&this._enabled?this._blockContextMenu():t||this._restoreContextMenu())}get scrollable(){return this._rotateControl.scrollable}set scrollable(t){this._rotateControl.scrollable=t}get wheelScrollable(){return this._zoomControl.scrollable}set wheelScrollable(t){this._zoomControl.scrollable=t}get ignoreZoomScale(){return this._ignoreZoomScale}set ignoreZoomScale(t){this._ignoreZoomScale=t}get enabled(){return this._enabled}get rotate(){return this._rotateControl}get zoom(){return this._zoomControl}get gyro(){return this._gyroControl}get animating(){return this._rotateControl.animating||this._zoomControl.animating||this._gyroControl.animating}constructor(t,e,s){let{useGrabCursor:i,scrollable:n,wheelScrollable:o,disableContextMenu:r,rotate:a,zoom:l,gyro:c}=s;this._preventContextMenu=t=>{t.preventDefault()},this._onInputStart=t=>{this._useGrabCursor&&!t.isKeyboard&&this._setCursor(p.WV.GRABBING)},this._onInputEnd=t=>{this._useGrabCursor&&!t.isKeyboard&&this._setCursor(p.WV.GRAB)},this._onEnable=t=>{let{control:e,updateCursor:s}=t;s&&this._useGrabCursor&&this._setCursor(p.WV.GRAB),e.sync(this._camera)},this._onDisable=t=>{let{updateCursor:e}=t;e&&this._setCursor(p.WV.NONE)},this._onCameraAnimationEnd=t=>{let{animation:e}=t;e.getFinishPromise().then((()=>{this.sync()}))},this._useGrabCursor=i,this._disableContextMenu=r,this._camera=e,this._controlEl=t,this._ignoreZoomScale=!1,this._enabled=!1,this._rotateControl=new T(t,!a,(0,h.PO)(a)),this._zoomControl=new C(t,!l,(0,h.PO)(l)),this._gyroControl=new R.Z(!c,(0,h.PO)(c)),this._rotateControl.scrollable=n,this._zoomControl.scrollable=o,this._bindEvents()}destroy(){this.disable(),this._rotateControl.destroy(),this._zoomControl.destroy(),this._setCursor(p.WV.NONE)}resize(t,e){const s=this._camera;this._rotateControl.resize(s.fov,s.aspect,t,e)}async enable(){this._enabled||(this._rotateControl.enableBlocked||this._rotateControl.enable(),this._zoomControl.enableBlocked||this._zoomControl.enable(),this._gyroControl.enableBlocked||await R.Z.isAvailable()&&this._gyroControl.enable(),this.sync(),this._disableContextMenu&&this._blockContextMenu(),this._enabled=!0)}disable(){this._enabled&&(this._rotateControl.disable(),this._zoomControl.disable(),this._gyroControl.disable(),this._restoreContextMenu(),this._enabled=!1)}update(t){const e=this._camera,s=this._rotateControl,i=this._zoomControl,n=this._gyroControl;i.update(t);const o=(0,h.h4)(e.fov,i.zoom),r=this._ignoreZoomScale?1:Math.max(o,1);s.setZoomScale(r),s.updateRange(e,o),s.update(t);const a=s.yaw,l=s.pitch;n.enabled?n.update(e,a,l,o):e.lookAt({yaw:a.val,pitch:l.val,zoom:o})}sync(){const t=this._camera;this._zoomControl.sync(t),this._rotateControl.sync(t)}_blockContextMenu(){this._controlEl.addEventListener(p.FP.CONTEXT_MENU,this._preventContextMenu)}_restoreContextMenu(){this._controlEl.removeEventListener(p.FP.CONTEXT_MENU,this._preventContextMenu)}_setCursor(t){if(!this._useGrabCursor&&t!==p.WV.NONE)return;this._controlEl.style.cursor=t}_bindEvents(){const t=this._rotateControl,e=this._zoomControl;t.on(l.QA.INPUT_START,this._onInputStart),t.on(l.QA.INPUT_END,this._onInputEnd),t.on(l.QA.ENABLE,this._onEnable),t.on(l.QA.DISABLE,this._onDisable),e.on(l.QA.ENABLE,this._onEnable),e.on(l.QA.DISABLE,this._onDisable),this._camera.on(l.u1.ANIMATION_END,this._onCameraAnimationEnd)}};var y=s(518);const N=class{constructor(t){let{width:e,height:s,flipY:i}=t;this.width=e,this.height=s,this.flipY=i,this.wrapS=WebGLRenderingContext.CLAMP_TO_EDGE,this.wrapT=WebGLRenderingContext.CLAMP_TO_EDGE}destroy(){}isVideo(){return!1}isCube(){return!1}};const I=class extends N{constructor(t){let{source:e,width:s,height:i,flipY:n}=t;super({width:s,height:i,flipY:n}),this.source=e}};const L=class extends I{destroy(){const t=this.source;t.pause(),t.removeAttribute("src"),t.load()}isVideo(){return!0}isPaused(){const t=this.source;return t.paused||t.ended||t.readyState<=2}hasAudio(){const t=this.source;return t.audioTracks?t.audioTracks.length>0:null!=t.webkitAudioDecodedByteCount?t.webkitAudioDecodedByteCount>0:null==t.mozHasAudio||t.mozHasAudio}};const x=class extends N{constructor(t){let{sources:e,width:s,height:i,flipY:n}=t;super({width:s,height:i,flipY:n}),this.sources=e}isCube(){return!0}};const S=class{constructor(){this._loadChecker=new y.ZP}async load(t,e){if(e)return this.loadVideo(t,(0,h.PO)(e));if(Array.isArray(t)&&t.length>1)return this.loadCubeImage(t);{const e=Array.isArray(t)?t[0]:t;return this.loadImage(e)}}async loadImage(t){const e=this._toImageArray(t);return this._load(e,(t=>{const s=e[0];t(new I({source:s,width:s.naturalWidth,height:s.naturalHeight,flipY:!0}))}))}async loadCubeImage(t){const e=this._toImageArray(t);return this._load(e,(t=>{t(new x({sources:e,width:e[0].naturalWidth,height:e[0].naturalHeight,flipY:!1}))}))}async loadVideo(t,e){const s={autoplay:!0,muted:!0,loop:!1,volume:1,...e},i=this._toVideoElement(t,s);return this._load([i],(t=>{const{autoplay:e,muted:n}=s;i.currentTime=0,e&&n&&i.play().catch((()=>{})),t(new L({source:i,width:i.videoWidth,height:i.videoHeight,flipY:!0}))}))}_load(t,e){const s=this._loadChecker;return new Promise(((i,n)=>{s.once("ready",(t=>{t.errorCount>0||e(i)})),s.once("error",n),s.check(t)}))}_toImageArray(t){return(Array.isArray(t)?t:[t]).map((t=>{if((0,h.HD)(t)){const e=new Image;return e.crossOrigin="anonymous",e.src=t,e}return t}))}_toVideoElement(t,e){let{muted:s,loop:i,volume:n}=e;if(t instanceof HTMLVideoElement)return t;const o=document.createElement("video");o.crossOrigin="anonymous",o.playsInline=!0,o.setAttribute("webkit-playsinline",""),o.muted=s,o.volume=n,o.loop=i,Array.isArray(t)?t.forEach((t=>this._appendSourceElement(o,t))):this._appendSourceElement(o,t);return o.querySelectorAll("source").length>0&&o.readyState<1&&o.load(),o}_appendSourceElement(t,e){if(e instanceof HTMLSourceElement)return e;const s=document.createElement("source");s.src=e,t.appendChild(s)}};const D=class{constructor(t,e){void 0===e&&(e=window),this.maxDeltaTime=t,this._context=e,this._rafId=-1,this._rafTimer=-1,this._lastUpdateTime=-1}start(t){const e=this._context;if(!e||!t)return;if(this._rafId>=0||this._rafTimer>=0)return;const s=(i,n)=>{const o=Date.now(),r=Math.min(o-this._lastUpdateTime,1e3*this.maxDeltaTime);t(r,n),this._lastUpdateTime=o,this._rafId=e.requestAnimationFrame(s)};this._lastUpdateTime=Date.now(),this._rafId=e.requestAnimationFrame(s)}stop(){this._rafId>=0&&this._context.cancelAnimationFrame(this._rafId),this._rafTimer>=0&&clearTimeout(this._rafTimer),this._rafId=-1,this._rafTimer=-1}changeContext(t){this.stop(),this._context=t}};const U=class{get useResizeObserver(){return this._useResizeObserver}get enabled(){return this._enabled}constructor(t,e){this._skipFirstResize=(()=>{let t=!0;return()=>{t?t=!1:this._onResize()}})(),this._useResizeObserver=t,this._enabled=!1,this._resizeObserver=null,this._onResize=e}enable(t){if(this._enabled&&this.disable(),this._useResizeObserver&&window.ResizeObserver){const e=t.getBoundingClientRect(),s=0!==e.width||0!==e.height,i=new ResizeObserver(s?this._skipFirstResize:this._onResize);i.observe(t),this._resizeObserver=i}else window.addEventListener(p.FP.RESIZE,this._onResize);return this._enabled=!0,this}disable(){if(!this._enabled)return this;const t=this._resizeObserver;return t?(t.disconnect(),this._resizeObserver=null):window.removeEventListener(p.FP.RESIZE,this._onResize),this._enabled=!1,this}};const M=class{get enabled(){return this._enabled}get enableBlocked(){return this._enableBlocked}get playing(){return this._enabled&&!this._interrupted}get delay(){return this._delay}set delay(t){this._delay=t}get delayOnMouseLeave(){return this._delayOnMouseLeave}set delayOnMouseLeave(t){this._delayOnMouseLeave=t}get speed(){return this._speed}set speed(t){this._speed=t}get pauseOnHover(){return this._pauseOnHover}set pauseOnHover(t){this._pauseOnHover=t}get canInterrupt(){return this._canInterrupt}set canInterrupt(t){this._canInterrupt=t}get disableOnInterrupt(){return this._disableOnInterrupt}set disableOnInterrupt(t){this._disableOnInterrupt=t}constructor(t,e,s){this._onInputStart=()=>{this._canInterrupt&&(this._interrupted=!0,this._clearTimeout())},this._onInputEnd=()=>{this._setUninterruptedAfterDelay(this._delay)},this._onGyroEnable=()=>{this.disable()},this._onMouseEnter=()=>{this._pauseOnHover&&(this._interrupted=!0,this._hovering=!0)},this._onMouseLeave=()=>{this._pauseOnHover&&(this._hovering=!1,this._setUninterruptedAfterDelay(this._delayOnMouseLeave))},this._camera=t.camera,this._control=t.control,this._element=e,this._enabled=!1,this._interrupted=!1,this._interruptionTimer=-1,this._hovering=!1;const{delay:i=2e3,delayOnMouseLeave:n=0,speed:o=1,pauseOnHover:r=!1,canInterrupt:a=!0,disableOnInterrupt:l=!1}=(0,h.PO)(s);this._enableBlocked=!s,this._delay=i,this._delayOnMouseLeave=n,this._speed=o,this._pauseOnHover=r,this._canInterrupt=a,this._disableOnInterrupt=l}destroy(){this.disable()}update(t){if(!this._enabled)return;if(this._interrupted)return void(this._disableOnInterrupt&&this.disable());const e=this._camera,s=-this._speed*t/100;e.yaw=(0,h.zc)(e.yaw+s,0,360)}enable(){const t=this._control,e=this._element;this._enabled||t.gyro.enabled||(t.rotate.on(l.QA.INPUT_START,this._onInputStart),t.rotate.on(l.QA.INPUT_END,this._onInputEnd),t.zoom.on(l.QA.INPUT_START,this._onInputStart),t.zoom.on(l.QA.INPUT_END,this._onInputEnd),t.gyro.on(l.QA.ENABLE,this._onGyroEnable),e.addEventListener(p.FP.MOUSE_ENTER,this._onMouseEnter,!1),e.addEventListener(p.FP.MOUSE_LEAVE,this._onMouseLeave,!1),this._enabled=!0,this._enableBlocked=!1)}enableAfterDelay(){this.enable(),this._interrupted=!0,this._setUninterruptedAfterDelay(this._delay)}disable(){if(!this._enabled)return;const t=this._control,e=this._element;t.rotate.off(l.QA.INPUT_START,this._onInputStart),t.rotate.off(l.QA.INPUT_END,this._onInputEnd),t.zoom.off(l.QA.INPUT_START,this._onInputStart),t.zoom.off(l.QA.INPUT_END,this._onInputEnd),t.gyro.off(l.QA.ENABLE,this._onGyroEnable),e.removeEventListener(p.FP.MOUSE_ENTER,this._onMouseEnter,!1),e.removeEventListener(p.FP.MOUSE_LEAVE,this._onMouseLeave,!1),this._enabled=!1,this._interrupted=!1,this._hovering=!1,this._clearTimeout()}_setUninterruptedAfterDelay(t){this._hovering||(this._clearTimeout(),t>0?this._interruptionTimer=window.setTimeout((()=>{this._interrupted=!1,this._interruptionTimer=-1}),t):(this._interrupted=!1,this._interruptionTimer=-1))}_clearTimeout(){this._interruptionTimer>=0&&(window.clearTimeout(this._interruptionTimer),this._interruptionTimer=-1)}};var F=s(6260);class B extends i.Z{constructor(t,e){void 0===e&&(e={}),super(),this.destroy=()=>{this.exit(),this.off()},this._onSessionEnd=()=>{this.exit(),this.trigger(F.FP.VR_END)},this._xrSession=null,this._xrRefSpace=null,this._ctx=t,this._options=e}async isAvailable(){const t=window.navigator.xr;return!!t&&t.isSessionSupported(l.AG).then((t=>t)).catch((()=>!1))}async enter(){const t=this._ctx,e=window.navigator.xr;if(!e)return;await R.Z.requestSensorPermission();const s={requiredFeatures:[l.gI],...this._options};await t.makeXRCompatible();const i=await e.requestSession(l.AG,s);t.bindXRLayer(i);const n=await i.requestReferenceSpace(l.gI);this._setSession(i,n),this.trigger(F.FP.VR_START,{session:i})}exit(){const t=this._xrSession;t&&t.end().catch((()=>{})),this._xrSession=null,this._xrRefSpace=null}canRender(t){const e=this._xrRefSpace;if(!e)return!1;return!!t.getViewerPose(e)}getEyeParams(t){const e=t.session,s=t.getViewerPose(this._xrRefSpace);if(!s)return null;const i=e.renderState.baseLayer;return i?s.views.map((t=>({viewport:i.getViewport(t),vMatrix:t.transform.inverse.matrix,pMatrix:t.projectionMatrix}))):null}_setSession(t,e){this._xrSession=t,this._xrRefSpace=e,t.addEventListener(p.FP.XR_END,this._onSessionEnd)}}const V=B;var k=s(9658),Z=s(4096);const z=class{constructor(t,e){this.element=t,this.position=e}};var G=s(4949);const H=class{constructor(t,e,s){let{zoom:i=!1}=s;this._containerEl=(0,h.S3)("."+F.Qz.HOTSPOT_CONTAINER,t),this._renderer=e,this._hotspots=[],this._zoom=i}refresh(){const t=this._containerEl;if(!t)return;const e=[].slice.apply(t.querySelectorAll("."+F.Qz.HOTSPOT));this._hotspots=e.map((t=>this._parseHotspot(t)))}render(t){const e=this._hotspots,s=.5*this._renderer.width,i=.5*this._renderer.height,o=t.zoom,r="translate(-50%, -50%)",a=this._zoom?"scale("+o+")":"";e.forEach((e=>{const o=e.position,l=n.Ue();if(n.JG(l,o),n.fF(l,l,t.viewMatrix),n.fF(l,l,t.projectionMatrix),l[2]>1||l[2]<0)return void e.element.classList.remove(F.Qz.HOTSPOT_VISIBLE);const h=Z.al(l[0]*s+s,-l[1]*i+i);e.element.classList.add(F.Qz.HOTSPOT_VISIBLE),e.element.style.transform=[r,"translate("+h[0]+"px, "+h[1]+"px)",a].join(" ")}))}_parseHotspot(t){const e=t.dataset.yaw,s=t.dataset.pitch,i=t.dataset.position;if(e||s){const i=e?parseFloat(e):0,n=s?parseFloat(s):0,o=this._yawPitchToVec3(i,n);return new z(t,o)}if(i){const e=i.split(" ").map((t=>parseFloat(t)));if(e.length<3)throw new k.Z(G.ZP.MESSAGES.INSUFFICIENT_ARGS(i,'hotspot attribute "data-position"'),G.ZP.CODES.INSUFFICIENT_ARGS);return new z(t,n.al(e[0],e[1],e[2]))}{const e=n.al(0,0,-1);return new z(t,e)}}_yawPitchToVec3(t,e){const s=t*l.ZX,i=e*l.ZX,o=n.Ue();return o[1]=Math.sin(i),o[2]=Math.cos(i),o[0]=o[2]*Math.sin(-s),o[2]=-o[2]*Math.cos(-s),o}};const j=class{get count(){return this.geometry.indicies.count}constructor(t,e,s){this.obj=t,this.geometry=e,this.buffers=s}};const Y=class{get canvas(){return this._canvas}get maxTextureSize(){return this._maxTextureSize}get isWebGL2(){return this._isWebGL2}get supportVAO(){return this._isWebGL2||!!this._extensions.vao}get lost(){return this._contextLost}get debug(){return this._debug}constructor(t,e){this._onContextLost=()=>{this._canvas.classList.add(F.Qz.CTX_LOST),this._contextLost=!0},this._onContextRestore=()=>{this._canvas.classList.remove(F.Qz.CTX_LOST),this._contextLost=!1},this._canvas=t,this._contextLost=!1,this._debug=e,this._extensions={vao:null,loseContext:null}}init(){const t=this._canvas,{gl:e,isWebGL2:s}=this._getContext(t);this._gl=e,this._maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this._isWebGL2=s,this._isWebGL2||(this._extensions.vao=e.getExtension("OES_vertex_array_object")),this._extensions.loseContext=e.getExtension("WEBGL_lose_context"),t.addEventListener(p.FP.CONTEXT_LOST,this._onContextLost),t.addEventListener(p.FP.CONTEXT_RESTORED,this._onContextRestore)}destroy(){const t=this._gl,e=this._canvas;t&&(t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),e.removeEventListener(p.FP.CONTEXT_LOST,this._onContextLost),e.removeEventListener(p.FP.CONTEXT_RESTORED,this._onContextRestore)}forceLoseContext(){const t=this._extensions.loseContext;t&&t.loseContext()}forceRestoreContext(){const t=this._extensions.loseContext;t&&t.restoreContext()}clear(){const t=this._gl;t.clear(t.COLOR_BUFFER_BIT)}resize(){const t=this._gl;t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}viewport(t,e,s,i){this._gl.viewport(t,e,s,i)}createVAO(t,e){const s=this._createNativeVAO(),i=new j(s,t,{indicies:this._createBuffer(),position:this._createBuffer(),uv:this._createBuffer()});return s&&(this._bindNativeVAO(s),this._supplyGeometryData(i,e),this._bindNativeVAO(null),this._unbindBuffers()),i}draw(t,e){const s=this._gl;t.obj?this._bindNativeVAO(t.obj):this._supplyGeometryData(t,e),s.drawElements(s.TRIANGLES,t.count,s.UNSIGNED_SHORT,0),t.obj?this._bindNativeVAO(null):this._unbindBuffers()}releaseVAO(t){t.obj&&this._deleteNativeVAO(t.obj),this._deleteBuffer(t.buffers.indicies),this._deleteBuffer(t.buffers.position),this._deleteBuffer(t.buffers.uv)}getUniformLocations(t,e){const s=this._gl,i=Object.keys(e).reduce(((e,i)=>(e[i]=s.getUniformLocation(t,i),e)),{});return{...this._getCommonUniformLocations(t),...i}}updateCommonUniforms(t,e,s){const i=this._gl,n=s.uniformLocations,o=t.matrix,a=r.Ue();r.Jp(a,e.viewMatrix,o),i.uniformMatrix4fv(n.uMVMatrix,!1,a),i.uniformMatrix4fv(n.uPMatrix,!1,e.projectionMatrix)}updateVRUniforms(t,e,s,i){const n=this._gl,o=t.uniformLocations;n.uniformMatrix4fv(o.uMVMatrix,!1,e),n.uniformMatrix4fv(o.uPMatrix,!1,s),o.uEye&&n.uniform1f(o.uEye,i)}updateUniforms(t){const e=this._gl,s=t.uniforms,i=t.uniformLocations;for(const n in s){const t=s[n],o=i[n];t&&(t.needsUpdate&&t.update(e,o,this._isWebGL2))}}releaseShaderResources(t){const e=this._gl,s=t.uniforms;for(const i in s){const t=s[i];t&&(t.needsUpdate&&t.destroy(e))}e.deleteProgram(t.program)}useProgram(t){this._gl.useProgram(t.program)}createProgram(t,e){const s=this._gl,i=s.createProgram(),n=this._compileShader(s.VERTEX_SHADER,t),o=this._compileShader(s.FRAGMENT_SHADER,e);if(s.attachShader(i,n),s.attachShader(i,o),s.bindAttribLocation(i,0,"position"),s.bindAttribLocation(i,1,"uv"),s.linkProgram(i),this._debug&&!s.getProgramParameter(i,s.LINK_STATUS)){let t=null;throw s.getShaderParameter(n,s.COMPILE_STATUS)?s.getShaderParameter(o,s.COMPILE_STATUS)||(t=s.getShaderInfoLog(o)):t=s.getShaderInfoLog(n),new k.Z(G.ZP.MESSAGES.FAILED_LINKING_PROGRAM(s.getProgramInfoLog(i),t),G.ZP.CODES.FAILED_LINKING_PROGRAM)}return s.deleteShader(n),s.deleteShader(o),i}createWebGLTexture(t){const e=this._gl,s=e.createTexture();if(e.bindTexture(e.TEXTURE_2D,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapS),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapT),!t.isVideo()&&this._isWebGL2){const s=e;s.texStorage2D(s.TEXTURE_2D,1,s.RGBA8,t.width,t.height)}return s}createWebGLCubeTexture(t,e){const s=this._gl,i=s.createTexture();if(s.bindTexture(s.TEXTURE_CUBE_MAP,i),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_S,t.wrapS),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_T,t.wrapT),this._isWebGL2){const t=s;t.texStorage2D(t.TEXTURE_CUBE_MAP,1,t.RGBA8,e,e)}return i}async makeXRCompatible(){const t=this._gl,e=t.getContextAttributes();e&&!0!==e.xrCompatible&&await t.makeXRCompatible()}bindXRLayer(t){const e=this._gl,s=new XRWebGLLayer(t,e);t.updateRenderState({baseLayer:s})}bindXRFrame(t){const e=this._gl,s=t.session.renderState.baseLayer;e.bindFramebuffer(e.FRAMEBUFFER,s.framebuffer)}useDefaultFrameBuffer(){const t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,null)}_createBuffer(){return this._gl.createBuffer()}_deleteBuffer(t){return this._gl.deleteBuffer(t)}_createNativeVAO(){const t=this._gl;if(this._isWebGL2)return t.createVertexArray();{const t=this._extensions.vao;return(null==t?void 0:t.createVertexArrayOES())||null}}_bindNativeVAO(t){const e=this._gl;if(this._isWebGL2)e.bindVertexArray(t);else{const e=this._extensions.vao;null==e||e.bindVertexArrayOES(t)}}_deleteNativeVAO(t){const e=this._gl;if(this._isWebGL2)e.deleteVertexArray(t);else{const e=this._extensions.vao;null==e||e.deleteVertexArrayOES(t)}}_supplyGeometryData(t,e){const s=t.geometry;this._supplyIndiciesData(s.indicies,t.buffers.indicies),this._supplyAttributeData(s.vertices,e.program,"position",t.buffers.position),this._supplyAttributeData(s.uvs,e.program,"uv",t.buffers.uv)}_unbindBuffers(){const t=this._gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindBuffer(t.ARRAY_BUFFER,null)}_supplyIndiciesData(t,e){const s=this._gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,e),s.bufferData(s.ELEMENT_ARRAY_BUFFER,t.data,s.STATIC_DRAW)}_supplyAttributeData(t,e,s,i){const n=this._gl,o=n.getAttribLocation(e,s);o<0||(n.bindBuffer(n.ARRAY_BUFFER,i),n.bufferData(n.ARRAY_BUFFER,t.data,n.STATIC_DRAW),n.vertexAttribPointer(o,t.itemSize,n.FLOAT,!1,0,0),n.enableVertexAttribArray(o))}_compileShader(t,e){const s=this._gl,i=s.createShader(t);return s.shaderSource(i,e),s.compileShader(i),i}_getCommonUniformLocations(t){const e=this._gl;return{uMVMatrix:e.getUniformLocation(t,"uMVMatrix"),uPMatrix:e.getUniformLocation(t,"uPMatrix")}}_getContext(t){const e=["webgl2","webgl","experimental-webgl","webkit-3d","moz-webgl"];let s=null,i=!1;const n={preserveDrawingBuffer:!1,antialias:!1},o=t=>t.statusMessage;t.addEventListener(p.FP.CONTEXT_CREATE_ERROR,o);for(const a of e){try{s=t.getContext(a,n),i="webgl2"===a}catch(r){}if(s)break}if(t.removeEventListener(p.FP.CONTEXT_CREATE_ERROR,o),!s)throw new k.Z(G.ZP.MESSAGES.WEBGL_NOT_SUPPORTED,G.ZP.CODES.WEBGL_NOT_SUPPORTED);return{gl:s,isWebGL2:i}}};const X=class{get canvas(){return this._canvas}get width(){return this._elementSize.x}get height(){return this._elementSize.y}get pixelRatio(){return this._pixelRatio}get aspect(){return this._elementSize.x/this._elementSize.y}constructor(t,e){this._canvas=t,this._elementSize={x:0,y:0},this._pixelRatio=1,this.ctx=new Y(t,e)}destroy(){const t=this._canvas;this.ctx.destroy(),t.width=1,t.height=1}resize(){const t=this._canvas,e=this._elementSize,s=window.devicePixelRatio;e.x=t.clientWidth,e.y=t.clientHeight,t.width=e.x*s,t.height=e.y*s,this._pixelRatio=s,this.ctx.resize()}render(t,e){const s=this.ctx,i=t.getMesh();!s.lost&&i&&(s.clear(),s.useProgram(i.program),s.updateCommonUniforms(i,e,i.program),t.update(e),s.updateUniforms(i.program),s.draw(i.vao,i.program))}renderVR(t,e,s){const i=this.ctx,n=t.getMesh(),o=e.getEyeParams(s);o&&n&&(i.bindXRFrame(s),i.useProgram(n.program),i.updateUniforms(n.program),o.forEach(((t,e)=>{const s=t.viewport,o=r.Jp(r.Ue(),t.vMatrix,n.matrix);i.viewport(s.x,s.y,s.width,s.height),i.updateVRUniforms(n.program,o,t.pMatrix,e),i.draw(n.vao,n.program)})))}};class W extends i.Z{get rootEl(){return this._rootEl}get renderer(){return this._renderer}get camera(){return this._camera}get control(){return this._control}get vr(){return this._vr}get hotspot(){return this._hotspot}get plugins(){return this._plugins}get projection(){return this._projection}set projection(t){this._initialized&&t?this.load(t):this._projection=t}get initialized(){return this._initialized}get autoplay(){return this._autoplay}get autoInit(){return this._autoInit}get autoResize(){return this._autoResize}get canvasSelector(){return this._canvasSelector}get useResizeObserver(){return this._useResizeObserver}get tabIndex(){return this._tabIndex}set tabIndex(t){const e=this._renderer.canvas;this._tabIndex=t,null!=t?e.tabIndex=t:e.removeAttribute("tabindex")}get maxDeltaTime(){return this._animator.maxDeltaTime}set maxDeltaTime(t){this._animator.maxDeltaTime=t}get debug(){return this._debug}set debug(t){this._debug=t}get initialYaw(){return this._camera.initialYaw}set initialYaw(t){this._camera.initialYaw=t}get initialPitch(){return this._camera.initialPitch}set initialPitch(t){this._camera.initialPitch=t}get initialZoom(){return this._camera.initialZoom}set initialZoom(t){this._camera.initialZoom=t}get yawRange(){return this._camera.yawRange}set yawRange(t){this._camera.yawRange=t,this._projection&&this._projection.updateCamera(this._camera)}get pitchRange(){return this._camera.pitchRange}set pitchRange(t){this._camera.pitchRange=t,this._projection&&this._projection.updateCamera(this._camera)}get zoomRange(){return this._camera.zoomRange}set zoomRange(t){this._camera.zoomRange=t,this._projection&&this._projection.updateCamera(this._camera)}get fov(){return this._camera.fov}set fov(t){const e=this._camera,s=this._control;e.fov=t,e.updateMatrix(),s.sync()}get rotate(){return this._control.rotate}get zoom(){return this._control.zoom}get gyro(){return this._control.gyro}get useGrabCursor(){return this._control.useGrabCursor}set useGrabCursor(t){this._control.useGrabCursor=t}get disableContextMenu(){return this._control.disableContextMenu}set disableContextMenu(t){this._control.disableContextMenu=t}get scrollable(){return this._control.scrollable}set scrollable(t){this._control.scrollable=t}get wheelScrollable(){return this._control.wheelScrollable}set wheelScrollable(t){this._control.wheelScrollable=t}constructor(t,e){let{projection:s=null,initialYaw:i=0,initialPitch:n=0,initialZoom:o=1,yawRange:r=null,pitchRange:a=null,zoomRange:l=null,fov:c=90,useGrabCursor:_=!0,disableContextMenu:d=!1,rotate:m=!0,zoom:p=!0,gyro:E=!1,scrollable:g=!0,wheelScrollable:v=!1,autoplay:T=!1,hotspot:b={},autoInit:w=!0,autoResize:f=!0,canvasSelector:O="canvas",useResizeObserver:A=!0,on:C={},plugins:R=[],maxDeltaTime:y=1/30,tabIndex:N=0,debug:I=!1}=void 0===e?{}:e;super(),this.renderFrame=t=>{const e=this._camera,s=this._renderer,i=this._control,n=this._hotspot,o=this._autoplay,r=this._projection;r&&(this._emit(F.FP.BEFORE_RENDER),o.playing&&(o.update(t),i.sync()),e.animation?e.animation.update(t):i.update(t),s.render(r,e),n.render(e),e.changed&&this._emit(F.FP.VIEW_CHANGE,{yaw:e.yaw,pitch:e.pitch,zoom:e.zoom,quaternion:[e.quaternion[0],e.quaternion[1],e.quaternion[2],e.quaternion[3]]}),e.onFrameRender(),this._emit(F.FP.RENDER))},this._renderFrameOnDemand=t=>{var e;const s=this._camera,i=this._control,n=this._autoplay,o=null==(e=this._projection)?void 0:e.getTexture();this._initialized&&o&&(s.animation||i.animating||n.playing||o.isVideo())&&this.renderFrame(t)},this._renderVRFrame=(t,e)=>{const s=this._vr,i=this._projection,n=this._renderer;i&&(this._emit(F.FP.BEFORE_RENDER),n.renderVR(i,s,e),this._emit(F.FP.RENDER))},this._rootEl=(0,h.sb)(t),this._plugins=R,this._initialized=!1,this._autoInit=w,this._autoResize=f,this._canvasSelector=O,this._useResizeObserver=A,this._tabIndex=N,this._debug=I;const L=(0,h.gE)(this._rootEl,O);this._renderer=new X(L,I),this._camera=new u({initialYaw:i,initialPitch:n,initialZoom:o,fov:c,yawRange:r,pitchRange:a,zoomRange:l}),this._control=new P(L,this._camera,{useGrabCursor:_,scrollable:g,wheelScrollable:v,disableContextMenu:d,rotate:m,zoom:p,gyro:E}),this._animator=new D(y),this._autoplay=new M(this,L,T),this._projection=s,this._autoResizer=new U(A,(()=>this.resize())),this._vr=new V(this._renderer.ctx),this._hotspot=new H(this._rootEl,this._renderer,b),this._addEventHandlers(C),s&&w&&this.init()}destroy(){this._camera.destroy(),this._animator.stop(),this._renderer.destroy(),this._control.destroy(),this._autoResizer.disable(),this._projection&&(this._projection.releaseAllResources(this._renderer.ctx),this._projection=null),this._plugins.forEach((t=>t.destroy(this))),this._initialized=!1}async init(){if(!this._projection)throw new k.Z(G.ZP.MESSAGES.PROVIDE_PROJECTION_FIRST,G.ZP.CODES.PROVIDE_PROJECTION_FIRST);const t=this._renderer,e=this._camera,s=this._control,i=this._animator,n=this._hotspot,o=this._projection,r=t.canvas;this._bindComponentEvents(),t.ctx.init(),this._resizeComponents(),e.updateMatrix(),this._autoResize&&this._autoResizer.enable(r),this._autoplay.enableBlocked||this._autoplay.enable(),this._plugins.forEach((t=>{t.init(this)}));const a=await this._loadTexture(o);this._applyProjection(o,a,null),n.refresh(),i.start(this._renderFrameOnDemand),await s.enable(),null==this._tabIndex||r.hasAttribute("tabIndex")||(r.tabIndex=this._tabIndex),this._initialized=!0,this.renderFrame(0),this._emit(F.FP.READY)}async load(t){if(!t)return!1;if(this._initialized){const e=await this._loadTexture(t);this._applyProjection(t,e,this._projection),this.renderFrame(0)}else this._projection=t,this.init();return!0}resize(){if(!this._initialized)return;this._resizeComponents(),this.renderFrame(0);const{width:t,height:e}=this._renderer;this._emit(F.FP.RESIZE,{width:t,height:e})}addPlugins(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];this._initialized&&e.forEach((t=>{t.init(this)})),this._plugins.push(...e)}removePlugins(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];e.forEach((t=>{const e=this._plugins.indexOf(t);e<0||(t.destroy(this),this._plugins.splice(e,1))}))}_emit(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];const n=s?s[0]:{};this.trigger(t,{type:t,target:this,...n})}_applyProjection(t,e,s){const i=this._camera,n=this._control,o=this._renderer;s&&s.releaseAllResources(this._renderer.ctx),t.applyTexture(o.ctx,e),t.updateCamera(i),t.updateControl(n),this._projection=t,this._emit(F.FP.PROJECTION_CHANGE,{projection:t})}async _loadTexture(t){const e=new S,{src:s,video:i}=t;this._emit(F.FP.LOAD_START,{src:s,video:i});const n=await e.load(s,i);return this._emit(F.FP.LOAD,{src:s,video:i}),n}_resizeComponents(){const t=this._renderer,e=this._camera,s=this._control;t.resize(),e.resize(t.width,t.height),s.resize(t.width,t.height)}_addEventHandlers(t){Object.keys(t).forEach((e=>{this.on(e,t[e])}))}_bindComponentEvents(){const t=this._rootEl,e=this._control,s=this._animator,i=this._renderer,n=this._vr;[l.QA.STATIC_CLICK,l.QA.INPUT_START,l.QA.INPUT_END].forEach((t=>{e.rotate.on(t,(e=>{this._emit(t,e)})),e.zoom.on(t,(e=>{this._emit(t,e)}))})),n.on(F.FP.VR_START,(e=>{t.classList.add(F.Qz.IN_VR),s.changeContext(e.session),s.start(this._renderVRFrame),this._emit(F.FP.VR_START)})),n.on(F.FP.VR_END,(()=>{t.classList.remove(F.Qz.IN_VR),i.ctx.useDefaultFrameBuffer(),s.changeContext(window),s.start(this._renderFrameOnDemand),this.resize(),this._emit(F.FP.VR_END)}))}}W.VERSION="#__VERSION__#";const Q=W},826:(t,e,s)=>{s.d(e,{Z:()=>M});var i=s(6577),n=s(2665);const o={CONTROLS_ROOT:"view360-controls",CONTROLS_BG:"view360-controls-background",CONTROLS_MAIN:"view360-controls-main",CONTROLS_TOP:"view360-controls-top",CONTROLS_BOTTOM:"view360-controls-bottom",CONTROLS_MID:"view360-controls-mid",CONTROLS_LEFT:"view360-controls-left",CONTROLS_RIGHT:"view360-controls-right",CONTROLS_FLOAT_LEFT:"view360-controls-float-left",CONTROLS_FLOAT_RIGHT:"view360-controls-float-right",CONTROLS_BUTTON:"view360-controls-button",PROGRESS_ROOT:"view360-controls-progress",VOLUME_ROOT:"view360-controls-volume",RANGE_ROOT:"view360-range",RANGE_TRACK:"view360-range-track",RANGE_THUMB:"view360-range-thumb",RANGE_FILLER:"view360-range-filler",PLAY_BUTTON:"view360-controls-play",PAUSE_BUTTON:"view360-controls-pause",UNMUTED_BUTTON:"view360-controls-unmuted",MUTED_BUTTON:"view360-controls-muted",FULLSCREEN_BUTTON:"view360-controls-fullscreen",FULLSCREEN_EXIT_BUTTON:"view360-controls-fullscreen-exit",VR_BUTTON:"view360-controls-vr",GYRO_ENABLED:"view360-controls-gyro-enabled",GYRO_DISABLED:"view360-controls-gyro-disabled",VIDEO_TIME_DISPLAY:"view360-controls-time",PIEVIEW_ROOT:"view360-controls-pie",FIXED:"view360-controls-fixed",UNAVAILABLE:"view360-controls-unavailable",HIDDEN:"view360-controls-hidden"},r={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",MAIN_TOP:"main-top",MAIN_BOTTOM:"main-bottom",MAIN_LEFT:"main-left",MAIN_RIGHT:"main-right"};var a=s(7035),l=s(8861),h=s(2197),c=s(9952),_=s(8388),u=s(1028);class d extends n.Z{constructor(){super(),this._onHold=t=>{var e;let{srcEvent:s,isTouch:i}=t;const n=this._bbox;if(!n)return;const o=i?s.touches[0].pageX:s.pageX,r=n.x+(null!=(e=window.scrollX)?e:window.pageXOffset),a=(0,_.uZ)(o,r,r+n.width),l=(a-r)/n.width;this._motion.reset(a),this.thumbEl.classList.add(this._fixedClass),this.trigger(c.QA.INPUT_START,l)},this._onChange=t=>{var e;let{delta:s}=t;const i=this._motion,n=this._bbox;if(!n)return;i.setNewEndByDelta(s.x),i.update(1);const o=n.x+(null!=(e=window.scrollX)?e:window.pageXOffset),r=((0,_.uZ)(i.val,o,o+n.width)-o)/n.width;this.trigger(c.QA.CHANGE,r)},this._onRelease=()=>{this._bbox&&(this.thumbEl.classList.remove(this._fixedClass),this.trigger(c.QA.INPUT_END))};const t=document.createElement(u.yy),e=document.createElement(u.yy),s=document.createElement(u.yy),i=document.createElement(u.yy);t.draggable=!1,e.appendChild(i),e.appendChild(s),t.appendChild(e),this.rootEl=t,this.trackEl=e,this.thumbEl=s,this.fillerEl=i,this._mouseInput=new l.Z,this._touchInput=new h.Z,this._motion=new a.Z({duration:1,range:c.oK,easing:t=>t}),this._bbox={x:0,y:0,width:0,height:0,left:0,right:0,bottom:0,top:0},this._fixedClass=o.FIXED}init(t){const e=this._mouseInput,s=this._touchInput;this.rootEl.classList.add(t.RANGE_ROOT),this.trackEl.classList.add(t.RANGE_TRACK),this.thumbEl.classList.add(t.RANGE_THUMB),this.fillerEl.classList.add(t.RANGE_FILLER),this._fixedClass=t.FIXED,e.on(c.QA.INPUT_START,this._onHold),s.on(c.QA.INPUT_START,this._onHold),e.on(c.QA.INPUT_END,this._onRelease),s.on(c.QA.INPUT_END,this._onRelease),e.on(c.QA.CHANGE,this._onChange),s.on(c.QA.CHANGE,this._onChange),e.enable(this.rootEl),s.enable(this.rootEl),this.resize()}destroy(){const t=this._mouseInput,e=this._touchInput;this.rootEl.className="",this.trackEl.className="",this.thumbEl.className="",this.fillerEl.className="",t.off(),e.off(),t.disable(),e.disable()}resize(){this._bbox=this.trackEl.getBoundingClientRect()}updateStyle(t){const e=this._bbox.width,s=(0,_.uZ)(t,0,1);this.fillerEl.style.width=100*s+"%",this.thumbEl.style.transform="translateX("+s*e+"px)"}}const m=d;var p=s(6260);class E extends i.Z{get element(){return this._rangeControl.rootEl}constructor(t){let{position:e=r.MAIN_TOP,order:s=9999}=void 0===t?{}:t;super({position:e,order:s}),this._onResize=()=>{this._rangeControl.resize()},this._onTimeUpdate=()=>{const t=this._video;t&&(this._currentTime=t.source.currentTime,this._rangeControl.updateStyle(this._currentTime/this._duration))},this._onDurationChange=()=>{const t=this._video;t&&(this._duration=t.source.duration,this._rangeControl.updateStyle(this._currentTime/this._duration))},this._onHold=t=>{const e=this._video,s=this._controlBar;if(!e||!s)return;const i=e.isPaused();e.source.pause();const n=e.source.duration*t;e.source.currentTime=n,e.source.dispatchEvent(new CustomEvent(c.r6,{detail:{time:n}})),s.rootEl.classList.add(s.className.FIXED),this._wasPaused=!this._playPromise&&i},this._onControl=t=>{const e=this._video;if(!e)return;const s=e.source.duration*t;e.source.currentTime=s,e.source.dispatchEvent(new CustomEvent(c.r6,{detail:{time:s}}))},this._onRelease=()=>{const t=this._video,e=this._controlBar;t&&e&&(this._wasPaused||this._playPromise||(this._playPromise=t.source.play().catch((()=>{})),this._playPromise.then((()=>{this._playPromise=null})),e.rootEl.classList.remove(e.className.FIXED))),this._wasPaused=!1},this.position=e,this.order=s,this._controlBar=null,this._rangeControl=new m,this._video=null,this._wasPaused=!1,this._currentTime=0,this._duration=0,this._playPromise=null}init(t,e){var s;const i=null==(s=t.projection)?void 0:s.getTexture(),n=this.element,o=this._rangeControl,r=e.className.UNAVAILABLE;i&&i.isVideo()?(n.classList.remove(r),n.classList.add(e.className.PROGRESS_ROOT),t.on(p.FP.RESIZE,this._onResize),i.source.addEventListener(u.FP.VIDEO_TIME_UPDATE,this._onTimeUpdate),i.source.addEventListener(u.FP.VIDEO_DURATION_CHANGE,this._onDurationChange),i.source.addEventListener(c.r6,this._onTimeUpdate),o.init(e.className),o.on(c.QA.INPUT_START,this._onHold),o.on(c.QA.CHANGE,this._onControl),o.on(c.QA.INPUT_END,this._onRelease),this._video=i,this._currentTime=i.source.currentTime,this._duration=i.source.duration,this._controlBar=e,o.updateStyle(this._currentTime/this._duration)):n.classList.add(r)}destroy(t){const e=this._video;t.off(p.FP.RESIZE,this._onResize),e&&(e.source.removeEventListener(u.FP.VIDEO_TIME_UPDATE,this._onTimeUpdate),e.source.removeEventListener(u.FP.VIDEO_DURATION_CHANGE,this._onDurationChange),e.source.removeEventListener(c.r6,this._onTimeUpdate)),this._rangeControl.destroy(),this._video=null,this._playPromise=null}}const g=E;class v extends i.Z{constructor(t){let{position:e=r.MAIN_LEFT,order:s=9999}=void 0===t?{}:t;super({position:e,order:s}),this._onClick=()=>{const t=this._video;t&&(this._paused?t.source.play():t.source.pause())},this._onPlay=()=>{if(!this._controlBar)return;const t=this.element,e=this._controlBar.className;t.classList.add(e.PAUSE_BUTTON),t.classList.remove(e.PLAY_BUTTON),t.title="Pause Video",this._paused=!1},this._onPause=()=>{if(!this._controlBar)return;const t=this.element,e=this._controlBar.className;t.classList.add(e.PLAY_BUTTON),t.classList.remove(e.PAUSE_BUTTON),t.title="Play Video",this._paused=!0},this.element=document.createElement(u.L2),this._video=null,this._paused=!0,this._controlBar=null}init(t,e){var s;const i=this.element,n=null==(s=t.projection)?void 0:s.getTexture(),o=e.className,r=o.UNAVAILABLE;if(!n||!n.isVideo())return void i.classList.add(r);i.classList.add(o.CONTROLS_BUTTON),i.classList.remove(r);const a=n.isPaused();this._video=n,this._paused=a,this._controlBar=e,a?this._onPause():this._onPlay(),i.addEventListener(u.FP.CLICK,this._onClick),n.source.addEventListener(u.FP.VIDEO_PLAY,this._onPlay),n.source.addEventListener(u.FP.VIDEO_PAUSE,this._onPause)}destroy(){const t=this._video,e=this.element;t&&(e.className="",e.removeEventListener(u.FP.CLICK,this._onClick),t.source.removeEventListener(u.FP.VIDEO_PLAY,this._onPlay),t.source.removeEventListener(u.FP.VIDEO_PAUSE,this._onPause),this._video=null,this._paused=!0,this._controlBar=null)}}const T=v;class b extends i.Z{get element(){return this._rootEl}constructor(t){let{position:e=r.MAIN_RIGHT,order:s=9999}=void 0===t?{}:t;super({position:e,order:s}),this._onResize=()=>{this._rangeControl.resize(),this._updateDisplay()},this._onClick=()=>{const t=this._video;t&&!this._rootEl.disabled&&(t.source.muted=!t.source.muted)},this._onVolumeChange=()=>{const t=this._buttonEl,e=this._video,s=this._controlBar;if(!e||!s)return;const i=s.className;e.source.muted||0===e.source.volume?(t.classList.add(i.MUTED_BUTTON),t.classList.remove(i.UNMUTED_BUTTON)):(t.classList.add(i.UNMUTED_BUTTON),t.classList.remove(i.MUTED_BUTTON)),this._updateDisplay()},this._onHold=t=>{const e=this._video,s=this._controlBar;if(!e||!s)return;const i=s.className;e.source.volume=t,this._rootEl.classList.add(i.FIXED),s.containerEl.classList.add(i.FIXED),this._updateDisplay()},this._onChange=t=>{const e=this._video;e&&(e.source.volume=t,e.source.muted=!(t>0),this._updateDisplay())},this._onRelease=()=>{const t=this._controlBar;if(!t)return;const e=t.className;this._rootEl.classList.remove(e.FIXED),t.containerEl.classList.remove(e.FIXED)},this._updateDisplay=()=>{const t=this._video,e=this._rootEl;if(!t)return;if(!t.hasAudio())return void(e.disabled=!0);e.disabled=!1;const s=t.source.muted?0:t.source.volume;this._rangeControl.updateStyle(s)},this._controlBar=null,this._rangeControl=new m,this._createElements(),this._video=null}init(t,e){var s;const i=null==(s=t.projection)?void 0:s.getTexture(),n=this._rootEl,o=this._buttonEl,r=this._rangeControl,a=e.className,l=a.UNAVAILABLE;i&&i.isVideo()?(n.classList.remove(l),n.classList.add(a.CONTROLS_BUTTON),n.classList.add(a.VOLUME_ROOT),o.classList.add(a.CONTROLS_BUTTON),i.source.muted?o.classList.add(a.MUTED_BUTTON):o.classList.add(a.UNMUTED_BUTTON),t.on(p.FP.RESIZE,this._onResize),n.addEventListener(u.FP.TRANSITION_END,this._onResize),o.addEventListener(u.FP.CLICK,this._onClick),i.source.addEventListener(u.FP.VIDEO_VOLUME_CHANGE,this._onVolumeChange),i.source.addEventListener(u.FP.VIDEO_LOADED_DATA,this._updateDisplay),i.source.addEventListener(u.FP.VIDEO_CAN_PLAYTHROUGH,this._updateDisplay),r.init(a),r.on(c.QA.INPUT_START,this._onHold),r.on(c.QA.CHANGE,this._onChange),r.on(c.QA.INPUT_END,this._onRelease),this._controlBar=e,this._video=i,this._updateDisplay()):n.classList.add(l)}destroy(t){const e=this._video,s=this._buttonEl,i=this._rootEl;i.className="",s.className="",t.off(p.FP.RESIZE,this._onResize),i.removeEventListener(u.FP.TRANSITION_END,this._onResize),s.removeEventListener(u.FP.CLICK,this._onClick),e&&(e.source.removeEventListener(u.FP.VIDEO_VOLUME_CHANGE,this._onVolumeChange),e.source.removeEventListener(u.FP.VIDEO_LOADED_DATA,this._updateDisplay),e.source.removeEventListener(u.FP.VIDEO_CAN_PLAYTHROUGH,this._updateDisplay)),this._controlBar=null,this._rangeControl.destroy(),this._video=null}_createElements(){const t=document.createElement(u.L2),e=document.createElement(u.yy);t.appendChild(this._rangeControl.rootEl),t.appendChild(e),t.title="Toggle Mute",this._rootEl=t,this._buttonEl=e}}const w=b;class f extends i.Z{constructor(t){let{position:e=r.MAIN_RIGHT,order:s=9999}=void 0===t?{}:t;super({position:e,order:s}),this._onClick=()=>{const t=this._targetEl;t&&((0,_.rm)()?this._exitFullscreen():this._requestFullscreen(t))},this._onFullscreenChange=()=>{const t=this.element,e=this._controlBar;if(!e)return;const s=e.className;(0,_.rm)()?(t.classList.add(s.FULLSCREEN_EXIT_BUTTON),t.classList.remove(s.FULLSCREEN_BUTTON)):(t.classList.add(s.FULLSCREEN_BUTTON),t.classList.remove(s.FULLSCREEN_EXIT_BUTTON))},this.element=document.createElement(u.L2),this.element.title="Toggle Fullscreen",this._controlBar=null,this._targetEl=null}init(t,e){const s=this.element,i=e.className;this._fullscreenAvailable()?(s.classList.add(i.CONTROLS_BUTTON),s.classList.remove(i.UNAVAILABLE),s.addEventListener(u.FP.CLICK,this._onClick),this._addFullscreenHandlers(),(0,_.rm)()?s.classList.add(i.FULLSCREEN_EXIT_BUTTON):s.classList.add(i.FULLSCREEN_BUTTON),this._controlBar=e,this._targetEl=t.rootEl):s.classList.add(i.UNAVAILABLE)}destroy(){const t=this.element;t.className="",t.removeEventListener(u.FP.CLICK,this._onClick),this._removeFullscreenHandlers(),this._controlBar=null,this._targetEl=null}_fullscreenAvailable(){return u.ml.some((t=>!!document[t]))}_requestFullscreen(t){for(const e of u.ml){const s=t[e];if(s)return void s.call(t)}}_exitFullscreen(){for(const t of u.H3){const e=document[t];if(e)return void e.call(document)}}_addFullscreenHandlers(){u.GS.forEach((t=>{document.addEventListener(t,this._onFullscreenChange)}))}_removeFullscreenHandlers(){u.GS.forEach((t=>{document.removeEventListener(t,this._onFullscreenChange)}))}}const O=f;class A extends i.Z{constructor(t){let{position:e=r.MAIN_LEFT,order:s=9999}=void 0===t?{}:t;super({position:e,order:s}),this._onTimeUpdate=()=>{const t=this._video;t&&(this._currentTime=t.source.currentTime,this._updateDisplay())},this._onDurationChange=()=>{const t=this._video;t&&(this._duration=t.source.duration,this._updateDisplay())},this._onCustomTimeChange=t=>{this._currentTime=t.detail.time,this._updateDisplay()},this.element=document.createElement(u.yy),this._video=null,this._currentTime=0,this._duration=0}init(t,e){var s;const i=null==(s=t.projection)?void 0:s.getTexture(),n=this.element,o=e.className;i&&i.isVideo()?(n.classList.add(o.VIDEO_TIME_DISPLAY),n.classList.remove(o.UNAVAILABLE),i.source.addEventListener(u.FP.VIDEO_TIME_UPDATE,this._onTimeUpdate),i.source.addEventListener(u.FP.VIDEO_DURATION_CHANGE,this._onDurationChange),i.source.addEventListener(c.r6,this._onCustomTimeChange),this._video=i,this._currentTime=i.source.currentTime,this._duration=i.source.duration,this._updateDisplay()):n.classList.add(o.UNAVAILABLE)}destroy(){const t=this._video;t&&(this.element.className="",t.source.removeEventListener(u.FP.VIDEO_TIME_UPDATE,this._onTimeUpdate),t.source.removeEventListener(u.FP.VIDEO_DURATION_CHANGE,this._onDurationChange),t.source.removeEventListener(c.r6,this._onCustomTimeChange),this._video=null)}_updateDisplay(){const t=this._currentTime,e=Math.floor(t/60),s=Math.floor(t-60*e),i=s<10?"0"+s:s,n=this._duration,o=Math.floor(n/60),r=Math.floor(n-60*o),a=r<10?"0"+r:r;this.element.innerText=e+":"+i+" / "+o+":"+a}}const C=A;class R extends i.Z{constructor(t){let{resetCamera:e=!0,position:s=r.TOP_RIGHT,order:i=9999}=void 0===t?{}:t;super({position:s,order:i}),this._onClick=()=>{const t=this._viewer,e=this.resetCamera;if(!t||!e)return;const{yaw:s=t.initialYaw,pitch:i=t.initialPitch,zoom:n=t.initialZoom,duration:o=500}=(0,_.PO)(e);t.camera.animateTo({yaw:s,pitch:i,zoom:n,duration:o})},this._updatePie=t=>{let{target:e}=t;const s=this._piePathEl,i=this._rangeCircleEl,n=e.camera,o=n.getHorizontalFov(),r=n.getYawRange(n.zoom),a=.5*o,l=24*Math.PI,h=l*o/360,c=l*(n.yaw+a+90)/360;if(s.setAttribute("stroke-dasharray",h+" "+(l-h)),s.setAttribute("stroke-dashoffset",""+c),isFinite(r.min)&&isFinite(r.max)){const t=45*Math.PI,e=((0,_.zc)(r.min,-180,180)-a)/360,s=((0,_.zc)(r.max,-180,180)+a)/360,n=t*Math.abs(s-e),o=-t*(e-.25);i.setAttribute("stroke-dasharray",n+" "+(t-n)),i.setAttribute("stroke-dashoffset",""+o)}else i.setAttribute("stroke-dasharray",""),i.setAttribute("stroke-dashoffset","")},this.element=document.createElement(u.yy),this.element.title="Reset view",this.resetCamera=e,this._createPieElements(),this._viewer=null}init(t,e){const s=this.element;t.initialized?this._updatePie({target:t}):t.once(p.FP.READY,this._updatePie);const i=e.className.PIEVIEW_ROOT;s.classList.add(i),this.resetCamera&&s.addEventListener(u.FP.CLICK,this._onClick),t.on(p.FP.VIEW_CHANGE,this._updatePie),this._viewer=t}destroy(t){const e=this.element;e.removeEventListener(u.FP.CLICK,this._onClick),e.className="",t.off(p.FP.READY,this._updatePie),t.off(p.FP.VIEW_CHANGE,this._updatePie),this._viewer=null}_createPieElements(){const t=this.element,e=document.createElementNS(c.YB,"svg");e.setAttribute("viewBox","0 0 48 48"),e.setAttribute("width","100%"),e.setAttribute("height","100%");const s=document.createElementNS(c.YB,"circle");s.setAttribute("stroke","currentColor"),s.setAttribute("fill","transparent"),s.setAttribute("cx","24"),s.setAttribute("cy","24"),s.setAttribute("r","12"),s.setAttribute("stroke-width","24"),e.appendChild(s);const i=document.createElementNS(c.YB,"circle");i.setAttribute("stroke","currentColor"),i.setAttribute("fill","transparent"),i.setAttribute("cx","24"),i.setAttribute("cy","24"),i.setAttribute("r","22.5"),i.setAttribute("stroke-width","3"),e.appendChild(i),t.appendChild(e),this._piePathEl=s,this._rangeCircleEl=i}}const P=R;class y extends i.Z{constructor(t){let{position:e=r.MAIN_RIGHT,order:s=9999}=void 0===t?{}:t;super({position:e,order:s}),this._onClick=()=>{const t=this._viewer;t&&t.vr.enter()},this.element=document.createElement(u.L2),this.element.title="Enter VR",this._viewer=null}init(t,e){const s=this.element,i=e.className;s.classList.add(i.UNAVAILABLE),s.classList.add(i.VR_BUTTON),s.classList.add(i.CONTROLS_BUTTON),t.vr.isAvailable().then((t=>{t&&s.classList.remove(i.UNAVAILABLE)})),s.addEventListener(u.FP.CLICK,this._onClick),this._viewer=t}destroy(){const t=this.element;t.className="",t.removeEventListener(u.FP.CLICK,this._onClick),this._viewer=null}}const N=y;var I=s(5821);class L extends i.Z{constructor(t){let{position:e=r.MAIN_RIGHT,order:s=9999}=void 0===t?{}:t;super({position:e,order:s}),this._onClick=()=>{const t=this._viewer,e=this._controlBar;if(!t||!e)return;const s=t.control.gyro;s.enabled?s.disable():I.Z.requestSensorPermission().then((t=>{t?s.enable():this.element.classList.add(e.className.UNAVAILABLE)}))},this._updateStyle=()=>{const t=this.element,e=this._viewer,s=this._controlBar;if(!e||!s)return;const i=e.control.gyro,n=s.className;i.enabled?(t.classList.add(n.GYRO_ENABLED),t.classList.remove(n.GYRO_DISABLED)):(t.classList.add(n.GYRO_DISABLED),t.classList.remove(n.GYRO_ENABLED))},this.element=document.createElement(u.yy),this.element.title="Toggle gyroscope control"}init(t,e){const s=this.element,i=e.className;s.addEventListener(u.FP.CLICK,this._onClick),s.classList.add(i.CONTROLS_BUTTON),s.classList.add(i.UNAVAILABLE);const n=()=>{s.classList.remove(i.UNAVAILABLE),t.control.gyro.on(c.QA.ENABLE,this._updateStyle),t.control.gyro.on(c.QA.DISABLE,this._updateStyle)};(0,_.yj)()?n():I.Z.isAvailable().then((t=>{t&&n()})),this._controlBar=e,this._viewer=t,this._updateStyle()}destroy(t){const e=this.element;t.control.gyro.off(c.QA.ENABLE,this._updateStyle),t.control.gyro.off(c.QA.DISABLE,this._updateStyle),e.removeEventListener(u.FP.CLICK,this._onClick),e.className="",this._controlBar=null,this._viewer=null}}const x=L;const S=class{get enabled(){return!!this._targetEl}get hidden(){return this._controlBar.containerEl.classList.contains(this._hiddenClass)}get _hiddenClass(){return this._controlBar.className.HIDDEN}get _fixedClass(){return this._controlBar.className.FIXED}constructor(t,e){let{initialDelay:s=3e3,delay:i=0,idleDelay:n=3e3}=e;this._onMouseEnter=()=>{this._isCursorInside=!0,this.show()},this._onMouseLeave=()=>{this._isCursorInside=!1,this._hideAfterDelay()},this._onMouseMove=()=>{this._isFullscreen&&this.showTemporaliy()},this._onHold=t=>{this._isGrabbing=!0,"mouse"===t.pointerType&&(this._isCursorInside=!0),window.addEventListener(u.FP.MOUSE_UP,this._onRelease),this.show()},this._onRelease=()=>{this._isGrabbing=!1,window.removeEventListener(u.FP.MOUSE_UP,this._onRelease),this._hideAfterDelay()},this._onVideoPlay=()=>{this._targetEl&&this._controlBar.containerEl.classList.remove(this._fixedClass)},this._onVideoPause=()=>{this._targetEl&&this._controlBar.containerEl.classList.add(this._fixedClass)},this._onFullscreenChange=()=>{this._isFullscreen=(0,_.rm)(),this._isFullscreen&&this._hideAfterDelay()},this._controlBar=t,this._initialDelay=s,this._delay=i,this._idleDelay=n,this._timer=-1,this._isCursorInside=!1,this._isGrabbing=!1,this._isFullscreen=!1,this._video=null,this._targetEl=null}enable(t){var e;this._targetEl&&this.disable(t);const s=this._initialDelay,i=t.rootEl;this._targetEl=t.rootEl,this._timer=window.setTimeout((()=>{this.hide()}),s),i.addEventListener(u.FP.MOUSE_DOWN,this._onHold),i.addEventListener(u.FP.MOUSE_ENTER,this._onMouseEnter),i.addEventListener(u.FP.MOUSE_MOVE,this._onMouseMove),i.addEventListener(u.FP.MOUSE_LEAVE,this._onMouseLeave),this._addFullscreenHandlers();const n=null==(e=t.projection)?void 0:e.getTexture();n&&n.isVideo()&&(n.isPaused()&&this._controlBar.containerEl.classList.add(this._fixedClass),n.source.addEventListener(u.FP.VIDEO_PLAY,this._onVideoPlay),n.source.addEventListener(u.FP.VIDEO_PAUSE,this._onVideoPause),this._video=n)}disable(t){if(!this._targetEl)return;const e=this._controlBar,s=t.rootEl,i=this._video;s.removeEventListener(u.FP.MOUSE_DOWN,this._onHold),window.removeEventListener(u.FP.MOUSE_UP,this._onRelease),s.removeEventListener(u.FP.MOUSE_ENTER,this._onMouseEnter),s.removeEventListener(u.FP.MOUSE_MOVE,this._onMouseMove),s.removeEventListener(u.FP.MOUSE_LEAVE,this._onMouseLeave),this._removeFullscreenHandlers(),window.clearTimeout(this._timer),e.containerEl.classList.remove(this._fixedClass),i&&(i.source.removeEventListener(u.FP.VIDEO_PLAY,this._onVideoPlay),i.source.removeEventListener(u.FP.VIDEO_PAUSE,this._onVideoPause)),this._isCursorInside=!1,this._isGrabbing=!1,this._video=null,this._targetEl=null}show(){this._clearHideTimer(),this._controlBar.containerEl.classList.remove(this._hiddenClass)}showTemporaliy(){this.show(),this._hideAfterDelay(this._idleDelay)}hide(){this._clearHideTimer(),this._controlBar.containerEl.classList.add(this._hiddenClass)}_clearHideTimer(){this._timer&&(window.clearTimeout(this._timer),this._timer=-1)}_hideAfterDelay(t){void 0===t&&(t=this._delay),this._isGrabbing||!this._isFullscreen&&this._isCursorInside||(this._clearHideTimer(),t<=0?this.hide():this._timer=window.setTimeout((()=>{this.hide()}),t))}_addFullscreenHandlers(){u.GS.forEach((t=>{document.addEventListener(t,this._onFullscreenChange)}))}_removeFullscreenHandlers(){u.GS.forEach((t=>{document.removeEventListener(t,this._onFullscreenChange)}))}};const D=class{constructor(){this._onKeyDown=t=>{const e=this._video;if(!e)return;t.preventDefault(),t.stopPropagation();const s=e.source,i=null!=t.keyCode?u.Dx[t.keyCode]:u.$[t.key];switch(i){case"LEFT":case"RIGHT":return this._changeVideoTime(s,"RIGHT"===i);case"UP":case"DOWN":return this._changeVideoVolume(s,"UP"===i)}(t.keyCode===u.jN||t.key===u.kq)&&this._toggleVideo(e)}}enable(t,e){this._video=e,t.addEventListener(u.FP.KEY_DOWN,this._onKeyDown,!0)}disable(t){this._video=null,t.removeEventListener(u.FP.KEY_DOWN,this._onKeyDown,!0)}_changeVideoTime(t,e){const s=e?5:-5;t.currentTime+=s,t.dispatchEvent(new CustomEvent(c.r6,{detail:{time:t.currentTime}}))}_changeVideoVolume(t,e){const s=e?.1:-.1;t.muted?t.volume=(0,_.uZ)(s,0,1):t.volume=(0,_.uZ)(t.volume+s,0,1),t.volume>0?t.muted=!1:t.muted=!0}_toggleVideo(t){t.isPaused()?t.source.play():t.source.pause()}};class U{get rootEl(){return this._rootEl}get containerEl(){return this._containerEl}get backgroundEl(){return this._bgEl}get items(){return this._items}get customItems(){return this._customItems}constructor(t){var e;let{autoHide:s,showBackground:i,clickToPlay:n=!0,keyboardControls:o=!0,progressBar:r=!0,playButton:a=!0,volumeButton:l=!0,fullscreenButton:h=!0,videoTime:c=!0,pieView:u=!0,vrButton:d=!0,gyroButton:m=!0,className:p={},customItems:E=[]}=void 0===t?{}:t;this._onStaticClick=t=>{let{target:e,isTouch:s}=t;const i=this._autoHider;if(s){if(!i.enabled)return;i.hidden?i.showTemporaliy():i.hide()}else{var n;if(!this.clickToPlay)return;const t=null==(n=e.projection)?void 0:n.getTexture();if(!t||!t.isVideo())return;t.isPaused()?t.source.play():t.source.pause()}},this._onNewSrcLoad=t=>{let{target:e}=t;const s=this._items;this._updateBackground(e),this._updateAutoHide(e),this._updateKeyboardHandler(e),Object.keys(s).forEach((t=>{s[t].forEach((t=>{t.destroy(e,this),t.init(e,this)}))}))},this.autoHide=s,this.showBackground=i,this.clickToPlay=n,this.keyboardControls=o,this.progressBar=r,this.playButton=a,this.volumeButton=l,this.fullscreenButton=h,this.videoTime=c,this.pieView=u,this.vrButton=d,this.gyroButton=m,this.className={...U.DEFAULT_CLASS,...p};const g=null!=(e=p.CONTROLS_ROOT)?e:U.DEFAULT_CLASS.CONTROLS_ROOT;this._rootEl=(0,_.az)(g),this._createPositionWrappers(),this._items=Object.keys(U.POSITION).reduce(((t,e)=>(t[U.POSITION[e]]=[],t)),{}),this._customItems=E,this._autoHider=new S(this,(0,_.PO)(s)),this._videoControl=new D,E.forEach((t=>{this._items[t.position].push(t)}))}init(t){const e=t.rootEl,s=this._rootEl,i=this._createDefaultItems();this._updateBackground(t),this._updateAutoHide(t),this._updateKeyboardHandler(t),e.appendChild(s),this._addItem(t,i),this._addItem(t,this._customItems),t.on(p.FP.PROJECTION_CHANGE,this._onNewSrcLoad),t.on(p.FP.STATIC_CLICK,this._onStaticClick)}destroy(t){const e=t.rootEl,s=this._rootEl,i=this._items;s.parentElement===e&&e.removeChild(s),Object.keys(i).forEach((e=>{i[e].forEach((e=>{e.destroy(t,this)})),i[e]=[]})),this._clearItemElements(),this._autoHider.disable(t),this._videoControl.disable(e),t.off(p.FP.PROJECTION_CHANGE,this._onNewSrcLoad),t.off(p.FP.STATIC_CLICK,this._onStaticClick)}_addItem(t,e){for(const s of e){const e=this._items[s.position],i=this._wrapperEl[s.position],n=(0,_.cx)(e,(t=>t.order>s.order));if(n>=0){const t=e[n].element;e.splice(n,0,s),i.insertBefore(s.element,t)}else e.push(s),i.appendChild(s.element);s.init(t,this)}}_createPositionWrappers(){const t={...U.DEFAULT_CLASS,...this.className},e=this._rootEl,s=(0,_.az)(t.CONTROLS_BG),i=(0,_.az)(t.CONTROLS_FLOAT_LEFT),n=(0,_.az)(t.CONTROLS_FLOAT_RIGHT);e.appendChild(i),e.appendChild(n);const o=(0,_.az)(t.CONTROLS_MAIN),r=(0,_.az)(t.CONTROLS_TOP),a=(0,_.az)(t.CONTROLS_BOTTOM),l=(0,_.az)(t.CONTROLS_MID),h=(0,_.az)(t.CONTROLS_LEFT),c=(0,_.az)(t.CONTROLS_RIGHT);l.appendChild(h),l.appendChild(c),o.appendChild(s),o.appendChild(r),o.appendChild(l),o.appendChild(a),e.appendChild(o),this._bgEl=s,this._containerEl=o,this._wrapperEl={[U.POSITION.MAIN_TOP]:r,[U.POSITION.MAIN_LEFT]:h,[U.POSITION.MAIN_RIGHT]:c,[U.POSITION.MAIN_BOTTOM]:a,[U.POSITION.TOP_LEFT]:i,[U.POSITION.TOP_RIGHT]:n}}_clearItemElements(){Object.keys(U.POSITION).map((t=>U.POSITION[t])).forEach((t=>{for(;t.firstChild;)t.removeChild(t.firstChild)}))}_updateAutoHide(t){const e=this.autoHide,s=this._autoHider;if(null!=e)e?s.enable(t):s.disable(t);else{var i;const e=null==(i=t.projection)?void 0:i.getTexture();e&&e.isVideo()?s.enable(t):s.disable(t)}}_updateBackground(t){var e;const s=this._bgEl,i=this.showBackground,n=null!=(e=this.className.HIDDEN)?e:U.DEFAULT_CLASS.HIDDEN;if(null!=i)i?s.classList.remove(n):s.classList.add(n);else{var o;const e=null==(o=t.projection)?void 0:o.getTexture();e&&e.isVideo()?s.classList.remove(n):s.classList.add(n)}}_updateKeyboardHandler(t){var e;const s=t.rootEl,i=this._videoControl,n=null==(e=t.projection)?void 0:e.getTexture();this.keyboardControls&&n&&n.isVideo()?i.enable(s,n):i.disable(s)}_createDefaultItems(){const t=[];return this.progressBar&&t.push(new g((0,_.PO)(this.progressBar))),this.playButton&&t.push(new T((0,_.PO)(this.playButton))),this.volumeButton&&t.push(new w((0,_.PO)(this.volumeButton))),this.gyroButton&&t.push(new x((0,_.PO)(this.gyroButton))),this.vrButton&&t.push(new N((0,_.PO)(this.vrButton))),this.fullscreenButton&&t.push(new O((0,_.PO)(this.fullscreenButton))),this.videoTime&&t.push(new C((0,_.PO)(this.videoTime))),this.pieView&&t.push(new P((0,_.PO)(this.pieView))),t}}U.DEFAULT_CLASS=o,U.POSITION=r;const M=U},6577:(t,e,s)=>{s.d(e,{Z:()=>i});const i=class{constructor(t){this.position=t.position,this.order=t.order}}},9580:(t,e,s)=>{s.d(e,{Z:()=>p});var i=s(4098),n=s(8388),o=s(8602);class r extends o.Z{constructor(t,e,s){super(),this.texture=e,this._webglTexture=t.createWebGLCubeTexture(e,e.width),this._cubemapOrder=s}destroy(t){this.texture.destroy(),t.deleteTexture(this._webglTexture)}update(t,e,s){const i=this.texture;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.uniform1i(e,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_CUBE_MAP,this._webglTexture);(0,n.rM)(i.sources,this._cubemapOrder).forEach(((e,i)=>{s?t.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e):t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)})),i.isVideo()||(this.needsUpdate=!1)}}const a=r;const l=class{get size(){return this._size}constructor(t,e){this.texture=t,this._renderingOrder=(0,n.rM)((0,n.w6)(6),e);const s=document.createElement("canvas");this._calcRenderingSize(),s.width=this._size,s.height=this._size,this._canvas=s,this._ctx=s.getContext("2d")}destroy(){const t=this._canvas;t.width=1,t.height=1,this._canvas=null}draw(t,e){const s=this._size,i=this.texture;let n=0;for(let o=0;o<this._row;o++)for(let r=0;r<this._column;r++){const a=s*r,l=s*o,h=this._renderingOrder[n];this._ctx.drawImage(i.source,a,l,s,s,0,0,s,s),e?t.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this._canvas):t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._canvas),n++}}_calcRenderingSize(){const{width:t,height:e}=this.texture,s=t/e;s===1/6?(this._size=t,this._row=6,this._column=1):6===s?(this._size=e,this._row=1,this._column=6):s===2/3?(this._size=.5*t,this._row=3,this._column=2):(this._size=t/3,this._row=2,this._column=3)}};class h extends o.Z{get texture(){return this._painter.texture}constructor(t,e,s){super(),this._painter=new l(e,s),this._webglTexture=t.createWebGLCubeTexture(e,this._painter.size)}destroy(t){t.deleteTexture(this._webglTexture),this._painter.destroy()}update(t,e,s){const i=this.texture;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.uniform1i(e,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_CUBE_MAP,this._webglTexture),this._painter.draw(t,s),i.isVideo()||(this.needsUpdate=!1)}}const c=h;var _=s(1815),u=s(9290),d=s(7337);class m extends i.Z{constructor(t){super(t);const{cubemapOrder:e="RLUDFB",cubemapFlipX:s=!1}=t;this._cubemapOrder=e,this._cubemapFlipX=s}applyTexture(t,e){const s=this._cubemapOrder,i=this._cubemapFlipX,n={uTexture:e.isCube()?new a(t,e,s):new c(t,e,s)},o=new d.Z({order:s}),r=new u.Z(t,"#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvarying highp vec3 vPos;\n\nvoid main() {\n  vPos = position;\n  gl_Position = uPMatrix * uMVMatrix * vec4(position, 1.0);\n}\n","#define GLSLIFY 1\nuniform samplerCube uTexture;\n\nvarying highp vec3 vPos;\n\nvoid main() {\n  // As textureCube uses (+Z as front), we flip that\n  gl_FragColor = textureCube(uTexture, vec3(vPos.x, vPos.y, -vPos.z));\n}\n",n),l=t.createVAO(o,r),h=new _.Z(l,r);i&&(h.scale[0]=-1),h.updateMatrix(),this._mesh=h}}const p=m},6563:(t,e,s)=>{s.d(e,{Z:()=>_});var i=s(4098),n=s(2278),o=s(9290),r=s(8155),a=s(1815),l=s(5846),h=s(459);class c extends i.Z{constructor(t){super(t)}applyTexture(t,e){const s={uTexture:new n.Z(t,e)},i=new r.Z,c=new o.Z(t,l.Z,h.Z,s),_=t.createVAO(i,c),u=new a.Z(_,c);this._mesh=u}}const _=c},4098:(t,e,s)=>{s.d(e,{Z:()=>i});const i=class{constructor(t){let{src:e,video:s=!1}=t;this.src=e,this.video=s,this._mesh=null}releaseAllResources(t){var e;null==(e=this._mesh)||e.destroy(t)}updateCamera(t){t.resetRange()}updateControl(t){t.ignoreZoomScale=!1}update(t){}getTexture(){return this._mesh?this._mesh.program.uniforms.uTexture.texture:null}getMesh(){return this._mesh}}},8602:(t,e,s)=>{s.d(e,{Z:()=>i});const i=class{constructor(){this.needsUpdate=!0}destroy(t){}}},2278:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(8602);class n extends i.Z{constructor(t,e){super(),this.texture=e,this._webglTexture=t.createWebGLTexture(e)}destroy(t){this.texture.destroy(),t.deleteTexture(this._webglTexture)}update(t,e,s){const i=this.texture,n=i.isVideo();t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.uniform1i(e,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._webglTexture),!n&&s?t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,i.source):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i.source),n||(this.needsUpdate=!1)}}const o=n},8388:(t,e,s)=>{s.d(e,{HD:()=>h,Jx:()=>b,PO:()=>T,S3:()=>_,az:()=>c,b6:()=>R,cx:()=>v,gE:()=>d,h4:()=>A,nk:()=>C,rM:()=>w,rm:()=>f,sb:()=>u,t7:()=>E,uZ:()=>p,w6:()=>m,yj:()=>O,zc:()=>g});var i=s(3181),n=s(8200),o=s(9658),r=s(4949),a=s(1028),l=s(9952);const h=t=>"string"==typeof t,c=function(t,e){void 0===e&&(e=a.yy);const s=document.createElement(e);return s.classList.add(t),s},_=(t,e)=>{let s=null;if(h(t)){const i=(e||document).querySelector(t);if(!i)return null;s=i}else(i=t)&&i.nodeType===Node.ELEMENT_NODE&&(s=t);var i;return s},u=(t,e)=>{const s=_(t,e);if(!s)throw h(t)?new o.Z(r.ZP.MESSAGES.ELEMENT_NOT_FOUND(t),r.ZP.CODES.ELEMENT_NOT_FOUND):new o.Z(r.ZP.MESSAGES.WRONG_TYPE(t,["HTMLElement","string"]),r.ZP.CODES.WRONG_TYPE);return s},d=(t,e)=>{const s=t.querySelector(e);if(!s)throw new o.Z(r.ZP.MESSAGES.CANVAS_NOT_FOUND,r.ZP.CODES.CANVAS_NOT_FOUND);return s},m=t=>!t||t<=0?[]:Array.apply(0,Array(t)).map(((t,e)=>e)),p=(t,e,s)=>Math.max(Math.min(t,s),e),E=(t,e,s)=>t*(1-s)+e*s,g=(t,e,s)=>{const i=Math.abs(s-e);if(t<e){t=s-(e-t)%i}else if(t>s){t=e+(t-s)%i}return t},v=(t,e)=>{for(let s=0;s<t.length;s++)if(e(t[s]))return s;return-1},T=t=>"object"==typeof t?t:{},b=(t,e)=>2*Math.atan(Math.tan(.5*t)/e),w=function(t,e,s){return void 0===s&&(s="RLUDFB"),s.split("").map((t=>e.indexOf(t))).map((e=>t[e]))},f=()=>{if(!document)return!1;for(const t of a.bQ)if(document[t])return!0;return!1},O=()=>!!DeviceMotionEvent&&"requestPermission"in DeviceMotionEvent&&window.isSecureContext,A=(t,e)=>Math.tan(l.ZX*t*.5)/Math.tan(l.ZX*e*.5),C=(t,e,s,n)=>{i.yR(t);const o=p(s,-89.99,89.99);return i.uD(t,t,e*l.ZX),i.lM(t,t,o*l.ZX),i.jI(t,t,n*l.ZX),t},R=t=>{const e=t[0],s=t[1],i=t[2],o=t[3],r=e*e+s*s+i*i+o*o,a=e*o-s*i;let h,c;if(a>.499995*r)h=Math.PI/2,c=2*Math.atan2(s,e);else if(a<-.499995*r)h=-Math.PI/2,c=-2*Math.atan2(s,e);else{const e=n.al(0,0,1),s=n.al(0,1,0);n.VC(e,e,t),n.VC(s,s,t);const i=Math.sqrt(e[0]*e[0]+e[2]*e[2]);h=Math.atan2(-e[1],i),c=Math.atan2(e[0],e[2])}return{pitch:p(h*l.jl,-90,90),yaw:g(c*l.jl,0,360)}}},1230:(t,e,s)=>{s.r(e),s.d(e,{assets:()=>h,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var i=s(7462),n=(s(7294),s(3905)),o=s(241);const r={title:"\ud56b\uc2a4\ud31f(\uc5b4\ub178\ud14c\uc774\uc158) \ud45c\uc2dc\ud558\uae30",slug:"/hotspot",sidebar_position:6},a=void 0,l={unversionedId:"tutorials/Hotspots",id:"tutorials/Hotspots",title:"\ud56b\uc2a4\ud31f(\uc5b4\ub178\ud14c\uc774\uc158) \ud45c\uc2dc\ud558\uae30",description:"View360 \uc601\uc5ed \ub0b4\uc5d0 \ud2b9\uc815\ud55c \ud074\ub798\uc2a4 \uc774\ub984\uc744 \uac16\ub294 \ub9c8\ud06c\uc5c5\uc744 \ucd94\uac00\ud558\uba74, View360\uc740 \uc774\ub97c \uc790\ub3d9\uc73c\ub85c \uc218\uc9d1\ud574\uc11c \ud56b\uc2a4\ud31f\uc73c\ub85c \uc778\uc2dd\ud569\ub2c8\ub2e4.",source:"@site/i18n/ko/docusaurus-plugin-content-docs/current/tutorials/Hotspots.mdx",sourceDirName:"tutorials",slug:"/hotspot",permalink:"/egjs-view360/ko/docs/hotspot",draft:!1,editUrl:"https://github.com/naver/egjs-view360/edit/master/demo/docs/tutorials/Hotspots.mdx",tags:[],version:"current",sidebarPosition:6,frontMatter:{title:"\ud56b\uc2a4\ud31f(\uc5b4\ub178\ud14c\uc774\uc158) \ud45c\uc2dc\ud558\uae30",slug:"/hotspot",sidebar_position:6},sidebar:"docs",previous:{title:"\ud504\ub85c\ud37c\ud2f0\uc640 \uba54\uc18c\ub4dc",permalink:"/egjs-view360/ko/docs/properties-and-methods"},next:{title:"VR",permalink:"/egjs-view360/ko/docs/vr"}},h={},c=[],_={toc:c};function u(t){let{components:e,...s}=t;return(0,n.kt)("wrapper",(0,i.Z)({},_,s,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"View360 \uc601\uc5ed \ub0b4\uc5d0 \ud2b9\uc815\ud55c \ud074\ub798\uc2a4 \uc774\ub984\uc744 \uac16\ub294 \ub9c8\ud06c\uc5c5\uc744 \ucd94\uac00\ud558\uba74, View360\uc740 \uc774\ub97c \uc790\ub3d9\uc73c\ub85c \uc218\uc9d1\ud574\uc11c \ud56b\uc2a4\ud31f\uc73c\ub85c \uc778\uc2dd\ud569\ub2c8\ub2e4."),(0,n.kt)("p",null,"\uae30\ubcf8\uc801\uc778 \uad6c\uc870\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-html"},'<div class="view360-container is-16by9">\n  <canvas class="view360-canvas">\n  \x3c!-- \ud56b\uc2a4\ud31f \ucee8\ud14c\uc774\ub108 --\x3e\n  <div class="view360-hotspots">\n    \x3c!-- \ud56b\uc2a4\ud31f\ub4e4 --\x3e\n    <div class="view360-hotspot" data-yaw="0" data-pitch="0">1</div>\n    \x3c!-- \ud56b\uc2a4\ud31f \uc704\uce58\ub97c \uc9c0\uc815\ud558\uae30 \uc704\ud574 Yaw(Y\ucd95 \ud68c\uc804), Pitch(X\ucd95 \ud68c\uc804)\uc744 \uc0ac\uc6a9\ud558\uac70\ub098 --\x3e\n    <div class="view360-hotspot" data-yaw="-90" data-pitch="0">2</div>\n    \x3c!-- \uc9c1\uc811 3\ucc28\uc6d0 \uc88c\ud45c\ub97c \uc0ac\uc6a9\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4 --\x3e\n    <div class="view360-hotspot" data-position="0 1 0">3</div>\n    \x3c!-- View360\uc740 \ud56b\uc2a4\ud31f\uc744 \uc801\uc808\ud55c \uc704\uce58\uc5d0 \ubc30\uce58\ub9cc \ud574\uc90d\ub2c8\ub2e4. --\x3e\n    \x3c!-- \ud56b\uc2a4\ud31f\uc744 \uafb8\ubbf8\ub294\uac74 \uc6d0\ud558\ub294\ub300\ub85c \ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4! --\x3e\n    <div class="view360-hotspot" data-yaw="-90" data-pitch="-90">\n      <div>\ud56b\uc2a4\ud31f \ub0b4\ubd80\uc5d0 \uc5b4\ub5a4 \ub0b4\uc6a9\uc744 \ub123\ub358, \uc5b4\ub5a4 \ud06c\uae30\ub97c \uac16\ub358 \uc0c1\uad00 \uc5c6\uc2b5\ub2c8\ub2e4</div>\n      <img src="SOME_IMG_URL" alt="\ubb3c\ub860 \uc774\ubbf8\uc9c0\ub3c4 \ud45c\uc2dc \uac00\ub2a5\ud558\uad6c\uc694" />\n    </div>\n  </div>\n</div>\n')),(0,n.kt)("p",null,"\ud504\ub808\uc784\uc6cc\ud06c\ub97c \uc0ac\uc6a9\uc911\uc774\uc2e0 \uacbd\uc6b0\ub77c\uba74, ",(0,n.kt)("inlineCode",{parentName:"p"},"<View360>")," \ub0b4\ubd80\uc5d0 ",(0,n.kt)("inlineCode",{parentName:"p"},".view360-hotspots")," \uc5d8\ub9ac\uba3c\ud2b8\ub97c \ucd94\uac00\ud574\uc11c \ub3d9\uc77c\ud558\uac8c \uc0ac\uc6a9\ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-html"},'<View360 class="is-16by9">\n  \x3c!-- Hotspot container --\x3e\n  <div class="view360-hotspots">\n    \x3c!-- Hotspots --\x3e\n    <div class="view360-hotspot" data-yaw="0" data-pitch="0">1</div>\n    \x3c!-- You can use either Yaw(Y-axis rotation), Pitch(X-axis rotation) for hotspot position --\x3e\n    <div class="view360-hotspot" data-yaw="-90" data-pitch="0">2</div>\n    \x3c!-- You can also use direct 3D coordinates. --\x3e\n    <div class="view360-hotspot" data-position="0 1 0">3</div>\n    \x3c!-- View 360 only places the hotspot in the appropriate location. --\x3e\n    \x3c!-- You can decorate your hotspots however you want! --\x3e\n    <div class="view360-hotspot" data-yaw="-90" data-pitch="-90">\n      <div>It doesn\'t matter what content you put inside the hotspot or what size you have.</div>\n      <img src="SOME_IMG_URL" alt="Of course, you can display images." />\n    </div>\n  </div>\n</View360>\n')),(0,n.kt)(o.ZP,{projectionOptions:{src:["/pano/cube/FishermansBastion/posx.jpg","/pano/cube/FishermansBastion/negx.jpg","/pano/cube/FishermansBastion/posy.jpg","/pano/cube/FishermansBastion/negy.jpg","/pano/cube/FishermansBastion/posz.jpg","/pano/cube/FishermansBastion/negz.jpg"]},projectionType:"cubemap",hotspot:{zoom:!0},showExampleCode:!0,showControlBar:!0,license:"fisherman",mdxType:"View360"},(0,n.kt)("div",{className:"view360-hotspots"},(0,n.kt)("div",{className:"view360-hotspot demo-hotspot","data-yaw":"0","data-pitch":"0"},(0,n.kt)("span",null,"1"),(0,n.kt)("iframe",{className:"demo-hotspot-bubble",width:"250",height:"250",src:"https://www.youtube.com/embed/dQw4w9WgXcQ",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})),(0,n.kt)("div",{className:"view360-hotspot demo-hotspot","data-yaw":"-90","data-pitch":"0"},"2"),(0,n.kt)("div",{className:"view360-hotspot demo-hotspot","data-yaw":"-90","data-pitch":"90"},"3"),(0,n.kt)("div",{className:"view360-hotspot demo-hotspot","data-yaw":"-90","data-pitch":"-90"},"4"))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\uc704 \ub370\ubaa8\ub294 ",(0,n.kt)("inlineCode",{parentName:"p"},"demo-hotspot")," \ud074\ub798\uc2a4\ub97c \ucd94\uac00\ud574\uc11c \ud770\uc0c9 \uc6d0\uc744 \ud45c\uc2dc\ud558\ub3c4\ub85d \uc2a4\ud0c0\uc77c\uc744 \ucd94\uac00\ud588\uc2b5\ub2c8\ub2e4.",(0,n.kt)("br",{parentName:"p"}),"\n","\uc2a4\ud0c0\uc77c\uc774\ub098 \uc778\ud130\ub799\uc158\uc740 \uc9c1\uc811 \ucd94\uac00\ud558\uc154\uc11c \uc6d0\ud558\ub294\ub300\ub85c \uafb8\ubbf8\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")),(0,n.kt)("p",null,"\ud56b\uc2a4\ud31f\uc758 \ub3d9\uc791\ub3c4 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5 \uac00\ub2a5\ud569\ub2c8\ub2e4.",(0,n.kt)("br",{parentName:"p"}),"\n",(0,n.kt)("a",{parentName:"p",href:"/docs/options/hotspot"},"\ud56b\uc2a4\ud31f \uc635\uc158"),"\uc744 \ud655\uc778\ud574\ubcf4\uc138\uc694"))}u.isMDXComponent=!0},459:(t,e,s)=>{s.d(e,{Z:()=>i});const i="#define GLSLIFY 1\nuniform sampler2D uTexture;\n\nvarying highp vec2 vUV;\n\nvoid main() {\n  gl_FragColor = texture2D(uTexture, vUV.st);\n}\n"},5846:(t,e,s)=>{s.d(e,{Z:()=>i});const i="#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvarying highp vec2 vUV;\n\nvoid main() {\n  vUV = uv;\n  gl_Position = uPMatrix * uMVMatrix * vec4(position, 1.0);\n}\n"}}]);