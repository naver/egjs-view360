{"version":3,"file":"view360.js","sources":["../src/core/View360Error.ts","../src/const/error.ts","../src/const/browser.ts","../src/const/external.ts","../src/const/internal.ts","../src/utils.ts","../src/core/Motion.ts","../src/core/CameraAnimation.ts","../src/core/Camera.ts","../src/control/input/MouseInput.ts","../src/control/input/TouchInput.ts","../src/control/input/KeyboardInput.ts","../src/control/RotateControl.ts","../src/control/input/WheelInput.ts","../src/control/input/PinchInput.ts","../src/control/ZoomControl.ts","../src/control/input/GyroInput.ts","../src/control/GyroControl.ts","../src/control/PanoControl.ts","../src/texture/Texture.ts","../src/texture/Texture2D.ts","../src/texture/TextureVideo.ts","../src/texture/TextureCube.ts","../src/core/TextureLoader.ts","../src/core/FrameAnimator.ts","../src/core/AutoResizer.ts","../src/core/Autoplay.ts","../src/core/XRManager.ts","../src/hotspot/Hotspot.ts","../src/hotspot/HotspotRenderer.ts","../src/core/VertexArrayObject.ts","../src/core/WebGLContext.ts","../src/core/WebGLRenderer.ts","../src/View360.ts","../src/core/Object3D.ts","../src/plugin/LoadingSpinner/LoadingSpinner.ts","../src/plugin/ControlBar/ControlBarItem.ts","../src/plugin/ControlBar/const.ts","../src/plugin/ControlBar/RangeControl.ts","../src/plugin/ControlBar/ProgressBar.ts","../src/plugin/ControlBar/PlayButton.ts","../src/plugin/ControlBar/VolumeControl.ts","../src/plugin/ControlBar/FullscreenButton.ts","../src/plugin/ControlBar/VideoTime.ts","../src/plugin/ControlBar/PieView.ts","../src/plugin/ControlBar/VRButton.ts","../src/plugin/ControlBar/GyroButton.ts","../src/plugin/ControlBar/AutoHide.ts","../src/plugin/ControlBar/VideoControl.ts","../src/plugin/ControlBar/ControlBar.ts","../src/projection/Projection.ts","../src/uniform/Uniform.ts","../src/uniform/UniformTextureCube.ts","../src/core/CubeTexturePainter.ts","../src/uniform/UniformCanvasCube.ts","../src/core/TriangleMesh.ts","../src/core/ShaderProgram.ts","../src/core/VertexData.ts","../src/geometry/Geometry.ts","../src/geometry/CubeGeometry.ts","../src/projection/CubemapProjection.ts","../src/uniform/UniformTexture2D.ts","../src/projection/CubestripProjection.ts","../src/geometry/CylinderGeometry.ts","../src/projection/CylindricalProjection.ts","../src/projection/EquiangularProjection.ts","../src/geometry/SphereGeometry.ts","../src/projection/EquirectProjection.ts","../src/uniform/UniformFloat.ts","../src/geometry/PlaneGeometry.ts","../src/projection/LittlePlanetProjection.ts","../src/uniform/UniformVector4Array.ts","../src/projection/StereoEquiProjection.ts","../src/cfc/withMethods.ts","../src/cfc/utils.ts","../src/cfc/const.ts","../src/index.ts","../src/index.umd.ts"],"sourcesContent":["/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\n\n/**\n * Error thrown by {@link View360}\n * @ko {@link View360}이 발생시킨 에러\n * @since 4.0.0\n */\nclass View360Error extends Error {\n  /**\n   * Error code\n   * @ko 에러 코드\n   * @see ERROR_CODES\n   */\n  public code: number;\n\n  /**\n   * Create new instance of View360Error\n   * @ko View360Error의 인스턴스를 생성합니다.\n   * @param message - Error message {@ko 에러 메시지}\n   * @param code - Error code {@ko 에러 코드}\n   */\n  public constructor(message: string, code: number) {\n    super(message);\n\n    Object.setPrototypeOf(this, View360Error.prototype);\n\n    this.name = \"View360Error\";\n    this.code = code;\n  }\n}\n\nexport default View360Error;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\n\n/**\n * Error codes of {@link View360Error}\n * @ko {@link View360Error}가 가질 수 있는 에러 코드 값들\n * @since 4.0.0\n */\nexport const ERROR_CODES = {\n  /**\n   * The given value's type is not expected\n   * @ko 주어진 값의 타입이 잘못되었을 경우\n   * @since 4.0.0\n   */\n  WRONG_TYPE: 0,\n  /**\n   * The given value is not a supported option\n   * @ko 잘못된 옵션을 받았을 경우\n   * @since 4.0.0\n   */\n  WRONG_OPTION: 1,\n  /**\n   * The element with given CSS selector does not exist\n   * @ko 주어진 CSS 셀렉터로 엘리먼트를 찾지 못했을 경우\n   * @since 4.0.0\n   */\n  ELEMENT_NOT_FOUND: 2,\n  /**\n   * Couldn't find canvas element inside the given container element.\n   * @ko 컨테이너 엘리먼트 내부에서 캔버스 엘리먼트를 찾지 못했을 경우\n   * @since 4.0.0\n   */\n  CANVAS_NOT_FOUND: 3,\n  /**\n   * The browser does not support WebGL\n   * @ko 브라우저가 WebGL을 지원하지 않는 경우\n   * @since 4.0.0\n   */\n  WEBGL_NOT_SUPPORTED: 4,\n  /**\n   * Failed creating canvas 2D context\n   * @ko 캔버스 2D 컨텍스트를 생성하지 못한 경우\n   * @since 4.0.0\n   */\n  FAILED_CREATE_CONTEXT_2D: 5,\n  /**\n   * `init()` is called before setting {@link View360Options#projection}\n   * @ko {@link View360Options#projection}을 설정하기 전에 `init()`이 호출된 경우\n   * @since 4.0.0\n   */\n  PROVIDE_PROJECTION_FIRST: 6,\n  /**\n   * Failed linking WebGL program. Only can be thrown when {@link View360Options#debug} is `true`.\n   * @ko WebGL 프로그램 링크에 실패한 경우. {@link View360Options#debug}를 `true`로 설정한 경우에만 발생할 수 있습니다.\n   * @since 4.0.0\n   */\n  FAILED_LINKING_PROGRAM: 7,\n  /**\n   * Arguments are not sufficient for the given property.\n   * @ko 프로퍼티에 값이 충분히 주어지지 않았을 때\n   * @since 4.0.0\n   */\n  INSUFFICIENT_ARGS: 8\n} as const;\n\nexport const MESSAGES = {\n  WRONG_TYPE: (val: any, types: string[]) => `${typeof val} is not a ${types.map(type => `\"${type}\"`).join(\" or \")}.`,\n  WRONG_OPTION: (val: any, optionName: string) => `Bad option: given \"${val}\" for option \"${optionName}\".`,\n  ELEMENT_NOT_FOUND: (query: string) => `Element with selector \"${query}\" not found.`,\n  CANVAS_NOT_FOUND: \"The canvas element was not found inside the given root element.\",\n  WEBGL_NOT_SUPPORTED: \"WebGL is not supported on this browser.\",\n  FAILED_CREATE_CONTEXT_2D: \"Failed to create canvas 2D context\",\n  PROVIDE_PROJECTION_FIRST: \"\\\"projection\\\" should be provided before initialization.\",\n  FAILED_LINKING_PROGRAM: (msg: string | null, shaderLog: string | null) => `Failed linking WebGL program - \"${msg}\\nShader compile Log: ${shaderLog}`,\n  INSUFFICIENT_ARGS: (val: any, name: string) => `Insufficient arguments: given \"${val}\" for \"${name}\".`\n};\n\nexport default {\n  CODES: ERROR_CODES,\n  MESSAGES\n};\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nexport const EVENTS = {\n  MOUSE_DOWN: \"mousedown\",\n  MOUSE_MOVE: \"mousemove\",\n  MOUSE_UP: \"mouseup\",\n  TOUCH_START: \"touchstart\",\n  TOUCH_MOVE: \"touchmove\",\n  TOUCH_END: \"touchend\",\n  WHEEL: \"wheel\",\n  RESIZE: \"resize\",\n  CONTEXT_MENU: \"contextmenu\",\n  MOUSE_ENTER: \"mouseenter\",\n  MOUSE_LEAVE: \"mouseleave\",\n  POINTER_DOWN: \"pointerdown\",\n  POINTER_MOVE: \"pointermove\",\n  POINTER_UP: \"pointerup\",\n  POINTER_CANCEL: \"pointercancel\",\n  POINTER_ENTER: \"pointerenter\",\n  POINTER_LEAVE: \"pointerleave\",\n  KEY_DOWN: \"keydown\",\n  KEY_UP: \"keyup\",\n  LOAD: \"load\",\n  ERROR: \"error\",\n  CLICK: \"click\",\n  DOUBLE_CLICK: \"dblclick\",\n  CONTEXT_CREATE_ERROR: \"webglcontextcreationerror\",\n  CONTEXT_LOST: \"webglcontextlost\",\n  CONTEXT_RESTORED: \"webglcontextrestored\",\n  DEVICE_ORIENTATION: \"deviceorientation\",\n  DEVICE_MOTION: \"devicemotion\",\n  ORIENTATION_CHANGE: \"orientationchange\",\n  VIDEO_PLAY: \"play\",\n  VIDEO_PAUSE: \"pause\",\n  VIDEO_LOADED_DATA: \"loadeddata\",\n  VIDEO_VOLUME_CHANGE: \"volumechange\",\n  VIDEO_TIME_UPDATE: \"timeupdate\",\n  VIDEO_DURATION_CHANGE: \"durationchange\",\n  VIDEO_CAN_PLAYTHROUGH: \"canplaythrough\",\n  TRANSITION_END: \"transitionend\",\n  XR_END: \"end\"\n} as const;\n\nexport const EL_DIV = \"div\";\nexport const EL_BUTTON = \"button\";\n\n// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\nexport enum MOUSE_BUTTON {\n  LEFT,\n  MIDDLE,\n  RIGHT\n}\n\nexport const CURSOR = {\n  GRAB: \"grab\",\n  GRABBING: \"grabbing\",\n  NONE: \"\"\n} as const;\n\nexport const KEY_DIRECTION = [\"LEFT\", \"UP\", \"RIGHT\", \"DOWN\"] as const;\nexport enum DIRECTION_KEY_CODE {\n  LEFT = 37,\n  UP = 38,\n  RIGHT = 39,\n  DOWN = 40\n}\nexport const SPACE_KEY_CODE = 32;\n\nexport const DIRECTION_KEY_NAME = {\n  LEFT: \"ArrowLeft\",\n  UP: \"ArrowUp\",\n  RIGHT: \"ArrowRight\",\n  DOWN: \"ArrowDown\"\n} as const;\nexport const SPACE_KEY_NAME = \" \";\n\nexport const FULLSCREEN_REQUEST = [\n  \"requestFullscreen\",\n  \"webkitRequestFullscreen\",\n  \"webkitRequestFullScreen\",\n  \"webkitCancelFullScreen\",\n  \"mozRequestFullScreen\",\n  \"msRequestFullscreen\"\n];\n\nexport const FULLSCREEN_ELEMENT = [\n  \"fullscreenElement\",\n  \"webkitFullscreenElement\",\n  \"webkitCurrentFullScreenElement\",\n  \"mozFullScreenElement\",\n  \"msFullscreenElement\"\n];\n\nexport const FULLSCREEN_EXIT = [\n  \"exitFullscreen\",\n  \"webkitExitFullscreen\",\n  \"webkitCancelFullScreen\",\n  \"mozCancelFullScreen\",\n  \"msExitFullscreen\"\n];\n\nexport const FULLSCREEN_CHANGE = [\n  \"fullscreenchange\",\n  \"webkitfullscreenchange\",\n  \"mozfullscreenchange\",\n  \"MSFullscreenChange\"\n];\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nexport { ERROR_CODES } from \"./error\";\n\n/**\n * Default class names\n * @ko 기본 클래스 이름들\n * @since 4.0.0\n */\nexport const DEFAULT_CLASS = {\n  CONTAINER: \"view360-container\",\n  CANVAS: \"view360-canvas\",\n  CTX_LOST: \"view360-ctx-lost\",\n  IN_VR: \"view360-vr-presenting\",\n  HOTSPOT_CONTAINER: \"view360-hotspots\",\n  HOTSPOT: \"view360-hotspot\",\n  HOTSPOT_VISIBLE: \"view360-hotspot-visible\",\n  HOTSPOT_FLIP_X: \"view360-hotspot-flip-x\",\n  HOTSPOT_FLIP_Y: \"view360-hotspot-flip-y\",\n} as const;\n\n/**\n * Event names\n * @ko 이벤트 이름들\n * @since 4.0.0\n * @example\n * ```ts\n * import View360, { EVENTS } from \"@egjs/view360\";\n *\n * const viewer = new View360(\"#el_id\");\n *\n * viewer.on(EVENTS.READY, evt => {\n *   console.log(\"View360 is ready!\");\n * });\n * ```\n */\nexport const EVENTS = {\n  READY: \"ready\",\n  LOAD_START: \"loadStart\",\n  LOAD: \"load\",\n  PROJECTION_CHANGE: \"projectionChange\",\n  RESIZE: \"resize\",\n  BEFORE_RENDER: \"beforeRender\",\n  RENDER: \"render\",\n  INPUT_START: \"inputStart\",\n  INPUT_END: \"inputEnd\",\n  VIEW_CHANGE: \"viewChange\",\n  STATIC_CLICK: \"staticClick\",\n  VR_START: \"vrStart\",\n  VR_END: \"vrEnd\"\n} as const;\n\n/**\n * Collection of predefined easing functions\n * @ko 미리 정의된 easing 함수들\n */\nexport const EASING = {\n  LINEAR: (x: number) => x,\n  SINE_WAVE: (x: number) => Math.sin(x * Math.PI * 2),\n  EASE_OUT_CUBIC: (x: number) => 1 - Math.pow(1 - x, 3),\n  EASE_OUT_BOUNCE: (x: number): number => {\n    const n1 = 7.5625;\n    const d1 = 2.75;\n\n    if (x < 1 / d1) {\n      return n1 * x * x;\n    } else if (x < 2 / d1) {\n      return n1 * (x -= 1.5 / d1) * x + 0.75;\n    } else if (x < 2.5 / d1) {\n      return n1 * (x -= 2.25 / d1) * x + 0.9375;\n    } else {\n      return n1 * (x -= 2.625 / d1) * x + 0.984375;\n    }\n  }\n} as const;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport { EASING } from \"./external\";\nimport { Range } from \"../type/utils\";\n\nexport const CAMERA_EVENTS = {\n  CHANGE: \"change\",\n  ANIMATION_END: \"animationEnd\"\n} as const;\n\nexport const CONTROL_EVENTS = {\n  INPUT_START: \"inputStart\",\n  CHANGE: \"change\",\n  INPUT_END: \"inputEnd\",\n  ENABLE: \"enable\",\n  DISABLE: \"disable\",\n  STATIC_CLICK: \"staticClick\"\n} as const;\n\nexport const DEG_TO_RAD = Math.PI / 180;\nexport const RAD_TO_DEG = 180 / Math.PI;\nexport const DEFAULT_EASING = EASING.EASE_OUT_CUBIC;\nexport const DEFAULT_ANIMATION_DURATION = 300;\nexport const INFINITE_RANGE: Readonly<Range> = {\n  min: -Infinity, max: Infinity\n} as const;\nexport const DEFAULT_PITCH_RANGE: Readonly<Range> = {\n  min: -90, max: 90\n} as const;\nexport const DEFAULT_ZOOM_RANGE: Readonly<Range> = {\n  min: 0.6, max: 10\n} as const;\n\nexport enum ROTATE {\n  ZERO,\n  CW_90,\n  CCW_90,\n  CW_180\n}\n\n// Custom event name for video time change\nexport const VIDEO_TIME_CHANGE_EVENT = \"view360videotimechange\";\nexport const SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\nexport const SESSION_VR = \"immersive-vr\";\nexport const XR_REFERENCE_SPACE = \"local\";\n\nexport const EPSILON = Number.EPSILON ?? 2.220446049250313e-16;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport { quat, vec3 } from \"gl-matrix\";\nimport View360Error from \"./core/View360Error\";\nimport ERROR from \"./const/error\";\nimport * as BROWSER from \"./const/browser\";\nimport { DEG_TO_RAD, RAD_TO_DEG } from \"./const/internal\";\nimport { NoBoolean } from \"./type/utils\";\n\nexport const isString = (val: any): val is string => typeof val === \"string\";\nexport const isElement = (val: any): val is Element => !!val && val.nodeType === Node.ELEMENT_NODE;\n\nexport const createElement = (className: string, tag = BROWSER.EL_DIV) => {\n  const el = document.createElement(tag);\n\n  el.classList.add(className);\n\n  return el;\n};\n\nexport const getNullableElement = (el: HTMLElement | string | null, parent?: HTMLElement): HTMLElement | null => {\n  let targetEl: HTMLElement | null = null;\n\n  if (isString(el)) {\n    const parentEl = parent ? parent : document;\n    const queryResult = parentEl.querySelector(el);\n\n    if (!queryResult) {\n      return null;\n    }\n\n    targetEl = queryResult as HTMLElement;\n  } else if (isElement(el)) {\n    targetEl = el;\n  }\n\n  return targetEl;\n};\n\nexport const getElement = (el: HTMLElement | string, parent?: HTMLElement): HTMLElement => {\n  const targetEl = getNullableElement(el, parent);\n\n  if (!targetEl) {\n    if (isString(el)) {\n      throw new View360Error(ERROR.MESSAGES.ELEMENT_NOT_FOUND(el), ERROR.CODES.ELEMENT_NOT_FOUND);\n    } else {\n      throw new View360Error(ERROR.MESSAGES.WRONG_TYPE(el, [\"HTMLElement\", \"string\"]), ERROR.CODES.WRONG_TYPE);\n    }\n  }\n\n  return targetEl;\n};\n\nexport const findCanvas = (root: HTMLElement, selector: string): HTMLCanvasElement => {\n  const canvas = root.querySelector(selector) as HTMLCanvasElement;\n\n  if (!canvas) {\n    throw new View360Error(ERROR.MESSAGES.CANVAS_NOT_FOUND, ERROR.CODES.CANVAS_NOT_FOUND);\n  }\n\n  return canvas;\n};\n\nexport const range = (end: number): number[] => {\n  if (!end || end <= 0) {\n    return [];\n  }\n\n  return Array.apply(0, Array(end)).map((undef, idx) => idx);\n};\n\nexport const clamp = (x: number, min: number, max: number) => Math.max(Math.min(x, max), min);\n\n// Linear interpolation between a and b\nexport const lerp = (a: number, b: number, t: number) => {\n  return a * (1 - t) + b * t;\n};\n\nexport const circulate = (val: number, min: number, max: number) => {\n  const size = Math.abs(max - min);\n\n  if (val < min) {\n    const offset = (min - val) % size;\n    val = max - offset;\n  } else if (val > max) {\n    const offset = (val - max) % size;\n    val = min + offset;\n  }\n\n  return val;\n};\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const merge = (target: object, ...srcs: object[]): object => {\n  srcs.forEach(source => {\n    Object.keys(source).forEach(key => {\n      const value = source[key];\n      if (Array.isArray(target[key]) && Array.isArray(value)) {\n        target[key] = [...target[key], ...value];\n      } else {\n        target[key] = value;\n      }\n    });\n  });\n\n  return target;\n};\n\nexport const findIndex = <T>(array: T[], checker: (val: T) => boolean): number => {\n  for (let idx = 0; idx < array.length; idx++) {\n    if (checker(array[idx])) {\n      return idx;\n    }\n  }\n\n  return -1;\n};\n\nexport const getObjectOption = <T extends boolean | Partial<object>>(val?: T): NoBoolean<T> => typeof val === \"object\" ? val : {} as any;\nexport const toVerticalFov = (fovRadian: number, aspect: number) => {\n  return Math.atan(Math.tan(fovRadian * 0.5) / aspect) * 2;\n};\n\nexport const reorderCube = <T>(arr: T[], order: string, defaultOrder = \"RLUDFB\"): T[] => {\n  return defaultOrder.split(\"\")\n    .map(face => order.indexOf(face))\n    .map(index => arr[index]);\n};\n\nexport const isFullscreen = () => {\n  if (!document) return false;\n\n  for (const key of BROWSER.FULLSCREEN_ELEMENT) {\n    if (document[key]) return true;\n  }\n\n  return false;\n};\n\nexport const sensorCanBeEnabledIOS = () => {\n  return !!DeviceMotionEvent && \"requestPermission\" in DeviceMotionEvent && window.isSecureContext;\n};\n\nexport const hfovToZoom = (baseFov: number, fov: number) => {\n  const renderingWidth = Math.tan(DEG_TO_RAD * baseFov * 0.5);\n  const zoomedWidth = Math.tan(DEG_TO_RAD * fov * 0.5);\n\n  return renderingWidth / zoomedWidth;\n};\n\nexport const eulerToQuat = (out: quat, yaw: number, pitch: number, roll: number): quat => {\n  quat.identity(out);\n\n  const pitchThreshold = 0.01;\n  const pitchClamped = clamp(pitch, -90 + pitchThreshold, 90 - pitchThreshold);\n\n  quat.rotateY(out, out, yaw * DEG_TO_RAD);\n  quat.rotateX(out, out, pitchClamped * DEG_TO_RAD);\n  quat.rotateZ(out, out, roll * DEG_TO_RAD);\n\n  return out;\n};\n\n/**\n * Extract euler angles from the quaternion, except roll(z-axis rotation)\n * @hidden\n */\nexport const quatToEuler = (quaternion: quat) => {\n  const x = quaternion[0];\n  const y = quaternion[1];\n  const z = quaternion[2];\n  const w = quaternion[3];\n  const x2 = x * x;\n  const y2 = y * y;\n  const z2 = z * z;\n  const w2 = w * w;\n\n  const unit = x2 + y2 + z2 + w2;\n  const test = x * w - y * z;\n\n  let pitch: number, yaw: number;\n\n  if (test > 0.499995 * unit) {\n    // singularity at the north pole\n    pitch = Math.PI / 2;\n    yaw = 2 * Math.atan2(y, x);\n  } else if (test < -0.499995 * unit) {\n    // singularity at the south pole\n    pitch = -Math.PI / 2;\n    yaw = -2 * Math.atan2(y, x);\n  } else {\n    const view = vec3.fromValues(0, 0, 1);\n    const up = vec3.fromValues(0, 1, 0);\n\n    vec3.transformQuat(view, view, quaternion);\n    vec3.transformQuat(up, up, quaternion);\n\n    const viewXZ = Math.sqrt(view[0] * view[0] + view[2] * view[2]);\n\n    pitch = Math.atan2(-view[1], viewXZ);\n    yaw = Math.atan2(view[0], view[2]);\n  }\n\n  return {\n    pitch: clamp(pitch * RAD_TO_DEG, -90, 90),\n    yaw: circulate(yaw * RAD_TO_DEG, 0, 360)\n  };\n};\n","/*\n * Copyright (c) 2020 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\n\nimport { clamp, lerp, circulate } from \"../utils\";\nimport { Range } from \"../type/utils\";\nimport { DEFAULT_ANIMATION_DURATION, DEFAULT_EASING } from \"../const/internal\";\n\n/**\n * Interpolator between two values with duration\n * @ko 특정 시간동안 두 값을 보간해주는 보간기\n * @since 4.0.0\n */\nclass Motion {\n  // Options\n  private _duration: number;\n  private _loop: boolean;\n  private _range: Range;\n  private _easing: (x: number) => number;\n\n  // Internal states\n  private _progress: number;\n  private _val: number;\n  private _start: number;\n  private _end: number;\n  private _activated: boolean;\n\n  /**\n   * Current interpolated value\n   * @ko 현재 보간된 값\n   * @since 4.0.0\n   */\n  public get val() { return this._val; }\n  /**\n   * Start(from) value of interpolation\n   * @ko 보간 시작 값\n   * @since 4.0.0\n   */\n  public get start() { return this._start; }\n  /**\n   * End(to) value of interpolation\n   * @ko 보간 끝 값\n   * @since 4.0.0\n   */\n  public get end() { return this._end; }\n  /**\n   * Interpolation progress value (0 ~ 1)\n   * @ko 현재 보간 진행정도 (0 ~ 1)\n   * @since 4.0.0\n   */\n  public get progress() { return this._progress; }\n  /**\n   * Whether the interpolation is in active state.\n   * @ko 보간 진행중인지 여부. `true`일 경우 보간이 진행중입니다.\n   * @since 4.0.0\n   */\n  public get activated() { return this._activated; }\n\n  /**\n   * Duration of the interpolation\n   * @ko 보간할 시간\n   * @since 4.0.0\n   */\n  public get duration() { return this._duration; }\n  public set duration(val: number) { this._duration = val; }\n\n  /**\n   * Whether to loop interpolation on finish\n   * @ko 보간이 끝난 이후에 다시 시작할지 여부\n   * @since 4.0.0\n   */\n  public get loop() { return this._loop; }\n  public set loop(val: boolean) { this._loop = val; }\n\n  /**\n   * Range of the interpolation\n   * @ko 보간 범위\n   * @since 4.0.0\n   */\n  public get range() { return this._range; }\n\n  /**\n   * Easing function of the interpolation\n   * @ko 보간에 사용되는 easing function\n   * @since 4.0.0\n   */\n  public get easing() { return this._easing; }\n  public set easing(val: (x: number) => number) { this._easing = val; }\n\n  /**\n   * Create new instance.\n   * @ko 새로운 인스턴스를 생성합니다.\n   * @param options Options {@ko 옵션들}\n   * @param options.duration Duration of the interpolation {@ko 보간할 시간}\n   * @param options.loop Whether to loop interpolation on finish {@ko 보간이 끝난 이후에 다시 시작할지 여부}\n   * @param options.range Range of the interpolation {@ko 보간 범위}\n   * @param options.loop Easing function of the interpolation {@ko 보간에 사용되는 easing function}\n   */\n  public constructor({\n    duration = DEFAULT_ANIMATION_DURATION,\n    loop = false,\n    range = { min: 0, max: 1 },\n    easing = DEFAULT_EASING\n  } = {}) {\n    this._duration = duration;\n    this._loop = loop;\n    this._range = range;\n    this._easing = easing;\n    this._activated = false;\n    this.reset(0);\n  }\n\n  /**\n   * Update motion and progress it by given deltaTime\n   * @ko 주어진 deltaTime만큼 보간을 진행합니다.\n   * @param deltaTime - number of milisec to update motion {@ko 보간을 진행할 시간, 밀리초 단위}\n   * @returns Difference(delta) of the value from the last update. {@ko 지난 업데이트 이후의 값 변화량}\n   * @since 4.0.0\n   */\n  public update(deltaTime: number): number {\n    if (!this._activated) {\n      this._val = this._end;\n      return 0;\n    }\n\n    const start = this._start;\n    const end = this._end;\n    const duration = this._duration;\n    const prev = this._val;\n    const loop = this._loop;\n\n    const nextProgress = this._progress + deltaTime / duration;\n\n    this._progress = loop\n      ? circulate(nextProgress, 0, 1)\n      : clamp(nextProgress, 0, 1);\n\n    const easedProgress = this._easing(this._progress);\n    this._val = lerp(start, end, easedProgress);\n\n    if (!loop && this._progress >= 1) {\n      this._activated = false;\n    }\n\n    return this._val - prev;\n  }\n\n  /**\n   * Set `start`, `end` to the given value and set `progress` to 0.\n   * @ko 주어진 값으로 시작 지점, 끝 지점을 초기화하고 progress를 0으로 세팅합니다.\n   * @param defaultVal - Value to reset {@ko 초기화할 값}\n   * @since 4.0.0\n   */\n  public reset(defaultVal: number): void {\n    const range = this._range;\n    const val = clamp(defaultVal, range.min, range.max);\n    this._start = val;\n    this._end = val;\n    this._val = val;\n    this._progress = 0;\n    this._activated = false;\n  }\n\n  /**\n   * Add delta to start & end and current value.\n   * @ko 현재 & 끝 및 현재 값에 주어진 값을 더합니다.\n   * @param delta - Delta value to add {@ko 추가할 값}\n   */\n  public add(delta: number) {\n    const range = this._range;\n\n    this._start = clamp(this._start + delta, range.min, range.max);\n    this._end = clamp(this._end + delta, range.min, range.max);\n    this._val = clamp(this._val + delta, range.min, range.max);\n  }\n\n  /**\n   * Set current value to start, and end to current value + delta, then reset progress to 0.\n   * @ko 현재 값을 시작 지점으로, 그에서 delta만큼 추가된 값을 끝점으로 하고 progress를 0으로 갱신합니다.\n   * @param delta - Delta value to add {@ko 추가할 값}\n   */\n  public setNewEndByDelta(delta: number): void {\n    const range = this._range;\n\n    this._start = this._val;\n    this._end = clamp(this._end + delta, range.min, range.max);\n    this._progress = 0;\n    this._activated = true;\n  }\n\n  /**\n   * Set new range of the interpolation.\n   * @ko 보간의 범위를 변경합니다.\n   * @param min - New minimum range {@ko 변경할 범위의 최소값}\n   * @param max - New maximum range {@ko 변경할 범위의 최대값}\n   */\n  public setRange(min: number, max: number) {\n    this._start = clamp(this._start, min, max);\n    this._end = clamp(this._end, min, max);\n    this._range = { min, max };\n  }\n}\n\nexport default Motion;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport { quat } from \"gl-matrix\";\nimport Camera from \"./Camera\";\nimport Motion from \"./Motion\";\nimport { DEFAULT_ANIMATION_DURATION, DEFAULT_EASING } from \"../const/internal\";\nimport { lerp } from \"../utils\";\n\ntype CameraPose = {\n  rotation: quat;\n  zoom: number;\n}\n\n/**\n * Animation of the {@link Camera}\n * @internal\n * @ko {@link Camera}의 애니메이션\n * @since 4.0.0\n */\nclass CameraAnimation {\n  // Options\n  private _camera: Camera;\n  private _from: CameraPose;\n  private _to: CameraPose;\n\n  // Internal values\n  private _motion: Motion;\n  private _finishPromise: Promise<void>;\n  private _finish: () => void;\n\n  /**\n   * Duration of the animation\n   * @ko 애니메이션 재생시간\n   * @since 4.0.0\n   */\n  public get duration() { return this._motion.duration; }\n  public set duration(val: number) { this._motion.duration = val; }\n  /**\n   * Easing function of the animation\n   * @ko 애니메이션의 easing function\n   * @since 4.0.0\n   */\n  public get easing() { return this._motion.easing; }\n  public set easing(val: (x: number) => number) { this._motion.easing = val; }\n\n  /**\n   * Create new instance\n   * @ko 새로운 인스턴스를 생성합니다.\n   * @param camera - Camera to animate {@ko 애니메이션을 적용할 카메라}\n   * @param from - Start pose {@ko 애니메이션이 시작 시점의 카메라의 회전 및 줌}\n   * @param to - End pose {@ko 애니메이션이 끝났을 때 카메라의 회전 및 줌}\n   * @param options - Options {@ko 옵션들}\n   * @param options.duration - Animation duration {@ko 애니메이션 재생 시간}\n   * @param options.easing - Animation easing function {@ko 애니메이션 easing function}\n   */\n  public constructor(camera: Camera, from: CameraPose, to: CameraPose, {\n    duration = DEFAULT_ANIMATION_DURATION,\n    easing = DEFAULT_EASING\n  } = {}) {\n    this._camera = camera;\n    this._motion = new Motion({ duration, easing, range: { min: 0, max: 1 } });\n    this._from = from;\n    this._to = to;\n    this._finishPromise = new Promise(resolve => {\n      this._finish = resolve as () => void;\n    });\n\n    // Enable motion\n    this._motion.setNewEndByDelta(1);\n  }\n\n  /**\n   * Return a promise that resolved on animation end.\n   * @ko 애니메이션 재생이 끝났을 때 resolve되는 Promise를 반환합니다.\n   * @since 4.0.0\n   */\n  public getFinishPromise() {\n    return this._finishPromise;\n  }\n\n  /**\n   * Update animation by given deltaTime.\n   * @ko 주어진 시간만큼 애니메이션을 업데이트합니다.\n   * @param deltaTime Number of milisec to update {@ko 업데이트할 시간, 밀리초 단위}\n   * @since 4.0.0\n   */\n  public update(deltaTime: number): void {\n    const camera = this._camera;\n    const from = this._from;\n    const to = this._to;\n    const motion = this._motion;\n    motion.update(deltaTime);\n\n    // Progress that easing is applied\n    const progress = motion.val;\n    const rotation = quat.create();\n    const zoom = lerp(from.zoom, to.zoom, progress);\n\n    quat.slerp(rotation, from.rotation, to.rotation, progress);\n    camera.rotate(rotation, zoom);\n\n    if (progress >= 1) {\n      this._finish();\n    }\n  }\n}\n\nexport default CameraAnimation;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Component from \"@egjs/component\";\nimport { mat4, quat, vec3 } from \"gl-matrix\";\nimport CameraAnimation from \"./CameraAnimation\";\nimport {\n  CAMERA_EVENTS,\n  DEG_TO_RAD,\n  INFINITE_RANGE,\n  DEFAULT_PITCH_RANGE,\n  RAD_TO_DEG,\n  DEFAULT_ZOOM_RANGE,\n  DEFAULT_EASING,\n  EPSILON\n} from \"../const/internal\";\nimport {\n  circulate,\n  clamp,\n  eulerToQuat,\n  quatToEuler,\n  toVerticalFov\n} from \"../utils\";\nimport { Range } from \"../type/utils\";\n\n/**\n * Events that {@link Camera} can trigger\n * @ko {@link Camera}가 트리거할 수 있는 이벤트들\n * @since 4.0.0\n */\nexport interface CameraEvents {\n  /**\n   * An event that fires when camera's animation stops\n   * @ko 카메라 애니메이션이 멈췄을 때 트리거되는 이벤트\n   * @eventName animationEnd\n   * @eventOf Camera\n   * @version 4.0.0\n   */\n  [CAMERA_EVENTS.ANIMATION_END]: {\n    animation: CameraAnimation\n  };\n}\n\n/**\n * Options for {@link Camera}\n * @ko {@link Camera}용 옵션들\n * @since 4.0.0\n */\nexport interface CameraOptions {\n  /**\n   * @copy View360#initialYaw\n   */\n  initialYaw: number;\n  /**\n   * @copy View360#initialPitch\n   */\n  initialPitch: number;\n  /**\n   * @copy View360#initialZoom\n   */\n  initialZoom: number;\n  /**\n   * @copy View360#yawRange\n   */\n  yawRange: Range | null;\n  /**\n   * @copy View360#pitchRange\n   */\n  pitchRange: Range | null;\n  /**\n   * @copy View360#zoomRange\n   */\n  zoomRange: Range | null;\n  /**\n   * @copy View360#fov\n   */\n  fov: number;\n}\n\n/**\n * Camera for View360\n * @ko View360용 카메라 구현체\n * @version 4.0.0\n */\nclass Camera extends Component<CameraEvents> {\n  /**\n   * Current yaw(y-axis rotation) value\n   * @ko 현재 yaw(y축 회전) 값\n   * @since 4.0.0\n   */\n  public yaw: number;\n  /**\n   * Current pitch(x-axis rotation) value\n   * @ko 현재 pitch(x축 회전) 값\n   * @since 4.0.0\n   */\n  public pitch: number;\n  /**\n   * Current zoom value\n   * @ko 현재 줌 값\n   * @since 4.0.0\n   */\n  public zoom: number;\n\n  /**\n   * @copy View360#initialYaw\n   */\n  public initialYaw: number;\n  /**\n   * @copy View360#initialPitch\n   */\n  public initialPitch: number;\n  /**\n   * @copy View360#initialPitch\n   */\n  public initialZoom: number;\n  /**\n   * @hidden\n   * TODO: Please add comment for this when `rollOffset` is added\n   */\n  public rollOffset: number;\n\n  /**\n   * Current camera quaternion\n   * @ko 현재 회전을 나타내는 quaternion 값\n   * @since 4.0.0\n   * @internal\n   */\n  public quaternion: quat;\n  /**\n   * Current camera position\n   * @ko 현재 카메라 위치 좌표\n   * @since 4.0.0\n   * @internal\n   */\n  public position: vec3;\n  /**\n   * Active camera animation, `null` if there isn't.\n   * @ko 현재 활성화된 카메라 애니메이션, 없을 경우 `null`값을 가집니다.\n   * @since 4.0.0\n   */\n  public animation: CameraAnimation | null;\n  /**\n   * Camera's view matrix\n   * @ko 카메라의 뷰 변환 행렬\n   * @internal\n   * @since 4.0.0\n   */\n  public viewMatrix: mat4;\n  /**\n   * Camera's projection matrix\n   * @ko 카메라의 프로젝션 변환 행렬\n   * @internal\n   * @since 4.0.0\n   */\n  public projectionMatrix: mat4;\n\n  /**\n   * Camera's horizontal FOV(Field of View) value\n   * @ko 카메라의 수평 FOV(Field of View) 값\n   * @internal\n   * @since 4.0.0\n   */\n  public fov: number;\n\n  private _initialYawRange: Range | null;\n  private _initialPitchRange: Range | null;\n  private _initialZoomRange: Range | null;\n\n  private _yawRange: Range | null;\n  private _pitchRange: Range | null;\n  private _zoomRange: Range | null;\n\n  private _up: vec3;\n  private _aspect: number;\n  private _changed: boolean;\n  private _maxRenderHeight: number;\n\n  /**\n   * Camera's width / height ratio\n   * @ko 카메라의 가로 / 세로 비율\n   * @readonly\n   */\n  public get aspect() { return this._aspect; }\n  /**\n   * Whether the camera's rotation changed from the last frame.\n   * @ko 마지막 프레임 이후로 카메라의 회전값이 변경되었는지 나타내는 플래그.\n   * @readonly\n   */\n  public get changed() { return this._changed; }\n  /**\n   * @copy View360#yawRange\n   */\n  public get yawRange() { return this._initialYawRange; }\n  public set yawRange(val: Range | null) {\n    this._initialYawRange = val;\n  }\n  /**\n   * @copy View360#pitchRange\n   */\n  public get pitchRange() { return this._initialPitchRange; }\n  public set pitchRange(val: Range | null) {\n    this._initialPitchRange = val;\n  }\n  /**\n   * @copy View360#zoomRange\n   */\n  public get zoomRange() { return this._initialZoomRange; }\n  public set zoomRange(val: Range | null) {\n    this._initialZoomRange = val;\n  }\n\n  /**\n   * Create new instance of Camera\n   * @param options - Camera options {@ko 카메라 옵션들}\n   */\n  public constructor({\n    initialYaw,\n    initialPitch,\n    initialZoom,\n    yawRange,\n    pitchRange,\n    zoomRange,\n    fov\n  }: CameraOptions) {\n    super();\n\n    this.yaw = initialYaw;\n    this.pitch = initialPitch;\n    this.zoom = initialZoom;\n    this.rollOffset = 0;\n\n    this.initialYaw = initialYaw;\n    this.initialPitch = initialPitch;\n    this.initialZoom = initialZoom;\n\n    this.position = vec3.create();\n    this.animation = null;\n\n    this._up = vec3.fromValues(0, 1, 0);\n    this._aspect = 1;\n\n    this._initialYawRange = yawRange;\n    this._initialPitchRange = pitchRange;\n    this._initialZoomRange = zoomRange;\n\n    this._yawRange = yawRange;\n    this._pitchRange = pitchRange;\n    this._zoomRange = zoomRange;\n\n    this.quaternion = quat.create();\n    this._updateQuaternion();\n\n    this.viewMatrix = mat4.create();\n    this.projectionMatrix = mat4.create();\n    this.fov = fov;\n\n    this._maxRenderHeight = -1;\n  }\n\n  /**\n   * Destroy instance and detach all event listeners\n   * @ko 인스턴스를 삭제하고 모든 이벤트 리스너를 삭제합니다.\n   * @since 4.0.0\n   */\n  public destroy() {\n    this.off();\n  }\n\n  /**\n   * Refresh internal size value.\n   * @ko 내부 크기값을 갱신합니다.\n   * @param width - New width {@ko 변경된 너비값}\n   * @param height - New height {@ko 변경된 높이값}\n   * @since 4.0.0\n   */\n  public resize(width: number, height: number) {\n    const prevAspect = this._aspect;\n\n    this._aspect = width / height;\n\n    if (this._aspect !== prevAspect) {\n      this.updateMatrix();\n    }\n  }\n\n  /**\n   * Change camera's rotation with euler values.\n   * @ko 카메라 회전을 오일러 각 방향으로 변경합니다.\n   * @param rotation - Rotation values {@ko 회전 값}\n   * @param rotation.yaw - yaw(y-axis rotation) to look at {@ko 바라볼 yaw(y축 회전) 값}\n   * @param rotation.pitch - pitch(x-axis rotation) to look at {@ko 바라볼 pitch(x축 회전) 값}\n   * @param rotation.zoom - zoom value to apply {@ko 적용할 카메라 줌 값}\n   * @since 4.0.0\n   */\n  public lookAt({\n    yaw = this.yaw,\n    pitch = this.pitch,\n    zoom = this.zoom\n  }: Partial<{\n    yaw: number;\n    pitch: number;\n    zoom: number;\n  }>) {\n    const prevQuaternion = quat.clone(this.quaternion);\n    const prevZoom = this.zoom;\n\n    this.yaw = circulate(yaw, 0, 360);\n    this.pitch = clamp(pitch, -90, 90);\n    this.zoom = zoom;\n\n    this._updateQuaternion();\n\n    const zoomDiff = Math.abs(zoom - prevZoom);\n\n    if (\n      !quat.equals(this.quaternion, prevQuaternion)\n      || zoomDiff >= EPSILON * 10 // ignore small changes\n    ) {\n      this.updateMatrix();\n    }\n  }\n\n  /**\n   * Change camera's rotation with quaternion.\n   * @ko 카메라 회전을 Quaternion을 이용해서 변경합니다.\n   * @param rotation - Quaternion to apply {@ko 적용할 Quaternion}\n   * @param zoom - zoom value to apply {@ko 적용할 카메라 줌 값}\n   * @since 4.0.0\n   */\n  public rotate(rotation: quat, zoom: number = this.zoom) {\n    const normalized = quat.normalize(quat.create(), rotation);\n    const isSameRotation = quat.equals(this.quaternion, normalized);\n    quat.copy(this.quaternion, normalized);\n\n    const prevZoom = this.zoom;\n    const { yaw, pitch } = quatToEuler(normalized);\n\n    this.yaw = yaw;\n    this.pitch = pitch;\n    this.zoom = zoom;\n\n    const zoomDiff = Math.abs(zoom - prevZoom);\n\n    if (!isSameRotation || zoomDiff >= EPSILON * 10) {\n      this.updateMatrix();\n    }\n  }\n\n  /**\n   * Change camera's rotation to given euler values by the given duration.\n   * @ko 카메라를 주어진 방향으로 주어진 시간동안 서서히 이동시킵니다.\n   * @param options - Animation parameters {@ko 애니메이션 패러미터}\n   * @param options.yaw - yaw(y-axis rotation) to look at {@ko 바라볼 yaw(y축 회전) 값}\n   * @param options.pitch - pitch(x-axis rotation) to look at {@ko 바라볼 pitch(x축 회전) 값}\n   * @param options.zoom - zoom value to apply {@ko 적용할 카메라 줌 값}\n   * @param options.duration - Duration of the animation {@ko 애니메이션 시간}\n   * @param options.easing - Easing function for the animation {@ko 애니메이션에 적용할 easing function}\n   */\n  public async animateTo({\n    yaw = this.yaw,\n    pitch = this.pitch,\n    zoom = this.zoom,\n    duration = 0,\n    easing = DEFAULT_EASING\n  }: Partial<{\n    yaw: number;\n    pitch: number;\n    zoom: number;\n    duration: number;\n    easing: (x: number) => number;\n  }> = {}): Promise<void> {\n    if (\n      this.yaw === yaw\n      && this.pitch === pitch\n      && this.zoom === zoom\n    ) return;\n\n    const from = {\n      rotation: quat.clone(this.quaternion),\n      zoom: this.zoom\n    };\n    const to = {\n      rotation: eulerToQuat(quat.create(), yaw, pitch, this.rollOffset),\n      zoom\n    };\n\n    const animation = new CameraAnimation(this, from, to, {\n      duration,\n      easing\n    });\n    const finishPromise = animation.getFinishPromise();\n\n    this.animation = animation;\n    finishPromise.then(() => {\n      this.animation = null;\n      this.trigger(CAMERA_EVENTS.ANIMATION_END, { animation });\n    });\n\n    return finishPromise;\n  }\n\n  /**\n   * @hidden\n   */\n  public restrictYawRange(min: number, max: number) {\n    this._yawRange = { min, max };\n  }\n\n  /**\n   * @hidden\n   */\n  public restrictPitchRange(min: number, max: number) {\n    this._pitchRange = { min, max };\n  }\n\n  /**\n   * @hidden\n   */\n  public restrictZoomRange(min: number, max: number) {\n    this._zoomRange = { min, max };\n  }\n\n  /**\n   * @hidden\n   */\n  public restrictRenderHeight(height: number) {\n    this._maxRenderHeight = height;\n  }\n\n  /**\n   * @hidden\n   */\n  public resetRange() {\n    this._yawRange = this._initialYawRange;\n    this._pitchRange = this._initialPitchRange;\n    this._zoomRange = this._initialZoomRange;\n    this._maxRenderHeight = -1;\n  }\n\n  /**\n   * Get actual yaw range by the given zoom value.\n   * @ko 주어진 zoom 값에 대한 실제 yaw 범위값을 반환합니다.\n   * @since 4.0.0\n   */\n  public getYawRange(zoom: number) {\n    const yawLimit = this._yawRange;\n    const maxRenderHeight = this._maxRenderHeight;\n    if (!yawLimit) return INFINITE_RANGE;\n\n    const halfHFov = this.getHorizontalFov(zoom) * 0.5;\n    let minYaw = yawLimit.min;\n    let maxYaw = yawLimit.max;\n\n    if (maxRenderHeight > 0) {\n      const halfVFovRad = toVerticalFov(halfHFov * DEG_TO_RAD, this._aspect);\n      const h = maxRenderHeight * 0.5;\n      const t = Math.tan(halfVFovRad);\n      const d = Math.sqrt((1 + h * h) / (1 + t * t));\n      const theta = Math.atan(Math.tan(halfHFov * DEG_TO_RAD) * d) * RAD_TO_DEG;\n\n      minYaw = yawLimit.min + theta;\n      maxYaw = yawLimit.max - theta;\n    }\n\n    if (minYaw > maxYaw) {\n      minYaw = 0;\n      maxYaw = 0;\n    }\n\n    return {\n      min: minYaw,\n      max: maxYaw\n    };\n  }\n\n  /**\n   * Get actual pitch range by the given zoom value.\n   * @ko 주어진 zoom 값에 대한 실제 pitch 범위값을 반환합니다.\n   * @since 4.0.0\n   */\n  public getPitchRange(zoom: number) {\n    const pitchLimit = this._pitchRange;\n    const maxRenderHeight = this._maxRenderHeight;\n\n    if (!pitchLimit) return DEFAULT_PITCH_RANGE;\n\n    let minPitch = pitchLimit.min;\n    let maxPitch = pitchLimit.max;\n\n    if (maxRenderHeight > 0) {\n      const halfVFov = this.getVerticalFov(zoom) * 0.5;\n\n      minPitch = pitchLimit.min + halfVFov;\n      maxPitch = pitchLimit.max - halfVFov;\n    }\n\n    if (minPitch > maxPitch) {\n      minPitch = 0;\n      maxPitch = 0;\n    }\n\n    return {\n      min: Math.max(minPitch, -90),\n      max: Math.min(maxPitch, 90)\n    };\n  }\n\n  /**\n   * Get actual zoom range in fov degrees.\n   * @ko 실제 줌 범위를 fov각의 범위로 반환합니다.\n   * @since 4.0.0\n   */\n  public getZoomRange() {\n    const limit = this._zoomRange ?? DEFAULT_ZOOM_RANGE;\n\n    // max (zoom in) -> minimum fov\n    const minFov = this.getHorizontalFov(limit.max);\n    const maxFov = this.getHorizontalFov(limit.min);\n    const currentFov = this.getHorizontalFov(this.zoom);\n\n    return {\n      min: Math.max(minFov, 1),\n      max: Math.min(maxFov, 180),\n      current: currentFov\n    };\n  }\n\n  /**\n   * Return horizontal fov value when the given zoom is applied. (in degrees, °)\n   * @ko 주어진 zoom 값이 적용되었을 때의 수평 fov값을 반환합니다. (도 단위, °)\n   * @returns Zoomed horizontal FOV {@ko 줌이 적용된 수평 fov값}\n   * @since 4.0.0\n   */\n  public getHorizontalFov(zoom = this.zoom) {\n    return this._getZoomedHorizontalFov(zoom) * RAD_TO_DEG;\n  }\n\n  /**\n   * Return vertical fov value when the given zoom is applied. (in degrees, °)\n   * @ko 주어진 zoom 값이 적용되었을 때의 수직 fov값을 반환합니다. (도 단위, °)\n   * @returns Zoomed vertical FOV {@ko 줌이 적용된 수직 fov값}\n   * @since 4.0.0\n   */\n  public getVerticalFov(zoom = this.zoom) {\n    const aspect = this._aspect;\n    const hFov = this._getZoomedHorizontalFov(zoom); // In radians\n    const vFov = toVerticalFov(hFov, aspect);\n\n    return vFov * RAD_TO_DEG;\n  }\n\n  /**\n   * Calculate zoom value for the given fov.\n   * @ko 주어진 fov값을 zoom값으로 변환합니다.\n   * @param fov horizontal fov (in degrees, °) {@ko 수평 fov 값 (도 단위, °)}\n   * @since 4.0.0\n   */\n  public fovToZoom(fov: number) {\n    const baseFov = this.fov;\n    const renderingWidth = Math.tan(DEG_TO_RAD * baseFov * 0.5);\n    const zoomedWidth = Math.tan(DEG_TO_RAD * fov * 0.5);\n\n    return renderingWidth / zoomedWidth;\n  }\n\n  /**\n   * Update inner matrixes.\n   * @ko 내부 행렬들을 업데이트합니다.\n   * @internal\n   * @since 4.0.0\n   */\n  public updateMatrix() {\n    const up = this._up;\n    const aspect = this._aspect;\n    const viewMatrix = this.viewMatrix;\n    const projMatrix = this.projectionMatrix;\n    const position = this.position;\n    const rotation = this.quaternion;\n\n    const upDir = vec3.create();\n    const viewDir = vec3.fromValues(0, 0, -1);\n    vec3.transformQuat(viewDir, viewDir, rotation);\n    vec3.transformQuat(upDir, up, rotation);\n\n    const hFov = this._getZoomedHorizontalFov(); // In radians\n    const vFov = toVerticalFov(hFov, aspect);\n\n    mat4.lookAt(viewMatrix, position, viewDir, upDir);\n    mat4.perspective(projMatrix, vFov, aspect, 0.1, 100);\n\n    this._changed = true;\n  }\n\n  /**\n   * @hidden\n   */\n  public onFrameRender() {\n    this._changed = false;\n  }\n\n  private _updateQuaternion() {\n    eulerToQuat(this.quaternion, this.yaw, this.pitch, this.rollOffset);\n  }\n\n  /**\n   * @param zoom Current zoom value\n   * @returns horizontal fov including zoom, in radian\n   */\n  private _getZoomedHorizontalFov(zoom = this.zoom) {\n    return 2 * Math.atan(Math.tan(DEG_TO_RAD * this.fov * 0.5) / zoom);\n  }\n}\n\nexport default Camera;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Component from \"@egjs/component\";\nimport * as BROWSER from \"../../const/browser\";\nimport { CONTROL_EVENTS } from \"../../const/internal\";\nimport { InputEvents } from \"../../type/internal\";\n\nclass MouseInput extends Component<InputEvents<{ x: number, y: number }, MouseEvent>> {\n  private _el: HTMLElement | null;\n  private _prevPos: [number, number];\n\n  public constructor() {\n    super();\n\n    this._el = null;\n    this._prevPos = [0, 0];\n  }\n\n  public enable(element: HTMLElement) {\n    if (this._el) return;\n\n    element.addEventListener(BROWSER.EVENTS.MOUSE_DOWN, this._onMouseDown);\n\n    this._el = element;\n  }\n\n  public disable() {\n    const element = this._el;\n    if (!element) return;\n\n    element.removeEventListener(BROWSER.EVENTS.MOUSE_DOWN, this._onMouseDown);\n    window.removeEventListener(BROWSER.EVENTS.MOUSE_MOVE, this._onMouseMove, false);\n    window.removeEventListener(BROWSER.EVENTS.MOUSE_UP, this._onMouseUp, false);\n\n    this._el = null;\n  }\n\n  private _onMouseDown = (evt: MouseEvent) => {\n    const el = this._el;\n    if (!el || evt.button !== BROWSER.MOUSE_BUTTON.LEFT) return;\n\n    evt.preventDefault();\n\n    if (el.focus) {\n      el.focus();\n    } else {\n      window.focus();\n    }\n\n    this._prevPos[0] = evt.clientX;\n    this._prevPos[1] = evt.clientY;\n\n    window.addEventListener(BROWSER.EVENTS.MOUSE_MOVE, this._onMouseMove, false);\n    window.addEventListener(BROWSER.EVENTS.MOUSE_UP, this._onMouseUp, false);\n\n    this.trigger(CONTROL_EVENTS.INPUT_START, {\n      srcEvent: evt,\n      isTouch: false,\n      isKeyboard: false\n    });\n  }\n\n  private _onMouseMove = (evt: MouseEvent) => {\n    evt.preventDefault();\n\n    const x = evt.clientX;\n    const y = evt.clientY;\n    const prevPos = this._prevPos;\n    const deltaX = x - prevPos[0];\n    const deltaY = y - prevPos[1];\n\n    this.trigger(CONTROL_EVENTS.CHANGE, {\n      delta: {\n        x: deltaX,\n        y: deltaY\n      },\n      isTouch: false,\n      isKeyboard: false\n    });\n\n    prevPos[0] = x;\n    prevPos[1] = y;\n  }\n\n  private _onMouseUp = () => {\n    this._prevPos[0] = 0;\n    this._prevPos[1] = 0;\n\n    window.removeEventListener(BROWSER.EVENTS.MOUSE_MOVE, this._onMouseMove, false);\n    window.removeEventListener(BROWSER.EVENTS.MOUSE_UP, this._onMouseUp, false);\n\n    this.trigger(CONTROL_EVENTS.INPUT_END, {\n      isTouch: false,\n      isKeyboard: false,\n      scrolling: false\n    });\n  }\n}\n\nexport default MouseInput;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Component from \"@egjs/component\";\nimport * as BROWSER from \"../../const/browser\";\nimport { CONTROL_EVENTS } from \"../../const/internal\";\nimport { InputEvents } from \"../../type/internal\";\nimport { isFullscreen } from \"../../utils\";\n\nclass TouchInput extends Component<InputEvents<{ x: number, y: number }, TouchEvent>> {\n  private _el: HTMLElement | null;\n  private _prevPos: [number, number];\n  private _isFirstTouch: boolean;\n  private _scrolling: boolean;\n  private _scrollable: boolean;\n\n  public get scrollable() { return this._scrollable; }\n  public set scrollable(val: boolean) { this._scrollable = val; }\n\n  public constructor() {\n    super();\n\n    this._el = null;\n    this._prevPos = [0, 0];\n    this._isFirstTouch = false;\n    this._scrolling = false;\n    this._scrollable = false;\n  }\n\n  public enable(element: HTMLElement) {\n    if (this._el) return;\n\n    element.addEventListener(BROWSER.EVENTS.TOUCH_START, this._onTouchStart, { passive: false });\n    element.addEventListener(BROWSER.EVENTS.TOUCH_MOVE, this._onTouchMove, { passive: false });\n    element.addEventListener(BROWSER.EVENTS.TOUCH_END, this._onTouchEnd);\n\n    this._el = element;\n  }\n\n  public disable() {\n    const element = this._el;\n    if (!element) return;\n\n    element.removeEventListener(BROWSER.EVENTS.TOUCH_START, this._onTouchStart);\n    element.removeEventListener(BROWSER.EVENTS.TOUCH_MOVE, this._onTouchMove);\n    element.removeEventListener(BROWSER.EVENTS.TOUCH_END, this._onTouchEnd);\n\n    this._el = null;\n  }\n\n  private _onTouchStart = (evt: TouchEvent) => {\n    if (evt.touches.length > 1 || this._scrolling) return;\n\n    const touch = evt.touches[0];\n\n    this._isFirstTouch = true;\n    this._prevPos[0] = touch.clientX;\n    this._prevPos[1] = touch.clientY;\n\n    this.trigger(CONTROL_EVENTS.INPUT_START, {\n      srcEvent: evt,\n      isTouch: true,\n      isKeyboard: false\n    });\n  };\n\n  private _onTouchMove = (evt: TouchEvent) => {\n    // Only the one finger motion should be considered\n    if (evt.touches.length > 1 || this._scrolling) return;\n\n    const touch = evt.touches[0];\n    const scrollable = this._scrollable;\n    const prevPos = this._prevPos;\n\n    const x = touch.clientX;\n    const y = touch.clientY;\n    const deltaX = x - prevPos[0];\n    const deltaY = y - prevPos[1];\n\n    if (this._isFirstTouch) {\n      if (scrollable && !isFullscreen()) {\n        if (Math.abs(deltaY) > Math.abs(deltaX)) {\n          // Assume Scrolling\n          this._scrolling = true;\n          return;\n        }\n      }\n\n      this._isFirstTouch = false;\n    }\n\n    if (evt.cancelable !== false) {\n      evt.preventDefault();\n    }\n\n    this.trigger(CONTROL_EVENTS.CHANGE, {\n      delta: {\n        x: deltaX,\n        y: deltaY\n      },\n      isTouch: true,\n      isKeyboard: false\n    });\n\n    prevPos[0] = x;\n    prevPos[1] = y;\n  };\n\n  private _onTouchEnd = (evt: TouchEvent) => {\n    if (evt.touches.length !== 0) return;\n\n    const touch = evt.touches[0];\n    const prevPos = this._prevPos;\n\n    if (touch) {\n      prevPos[0] = touch.clientX;\n      prevPos[1] = touch.clientY;\n    } else {\n      prevPos[0] = 0;\n      prevPos[1] = 0;\n\n      this.trigger(CONTROL_EVENTS.INPUT_END, {\n        isTouch: true,\n        isKeyboard: false,\n        scrolling: this._scrolling\n      });\n    }\n\n    if (evt.cancelable !== false) {\n      evt.preventDefault();\n    }\n\n    this._scrolling = false;\n  };\n}\n\nexport default TouchInput;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Component from \"@egjs/component\";\nimport * as BROWSER from \"../../const/browser\";\nimport { CONTROL_EVENTS } from \"../../const/internal\";\nimport { InputEvents } from \"../../type/internal\";\n\nclass KeyboardInput extends Component<InputEvents<{ x: number, y: number }, KeyboardEvent>> {\n  private _el: HTMLElement | null;\n  private _pressed: {\n    LEFT: boolean;\n    UP: boolean;\n    RIGHT: boolean;\n    DOWN: boolean;\n  };\n\n  public get active() {\n    const pressed = this._pressed;\n    return pressed.LEFT || pressed.UP || pressed.RIGHT || pressed.DOWN;\n  }\n\n  public constructor() {\n    super();\n\n    this._el = null;\n    this._clearPressedKeys();\n  }\n\n  public enable(element: HTMLElement) {\n    if (this._el) return;\n\n    element.addEventListener(BROWSER.EVENTS.KEY_DOWN, this._onKeyDown);\n    element.addEventListener(BROWSER.EVENTS.KEY_UP, this._onKeyUp);\n\n    this._el = element;\n    this._clearPressedKeys();\n  }\n\n  public disable() {\n    const element = this._el;\n    if (!element) return;\n\n    element.removeEventListener(BROWSER.EVENTS.KEY_DOWN, this._onKeyDown);\n    element.removeEventListener(BROWSER.EVENTS.KEY_UP, this._onKeyUp);\n\n    this._el = null;\n    this._clearPressedKeys();\n  }\n\n  public update() {\n    const delta = this._getDeltaByPressedKeys();\n\n    if (delta.x !== 0 || delta.y !== 0) {\n      this.trigger(CONTROL_EVENTS.CHANGE, {\n        delta,\n        isTouch: false,\n        isKeyboard: true\n      });\n    }\n  }\n\n  private _clearPressedKeys() {\n    this._pressed = BROWSER.KEY_DIRECTION.reduce((obj, keyName) => {\n      return {\n        ...obj,\n        [keyName]: false\n      };\n    }, {} as KeyboardInput[\"_pressed\"]);\n  }\n\n  private _updateKeyPress(event: KeyboardEvent, isEnable: boolean): void {\n    const pressed = this._pressed;\n    const keyToUpdate = event.keyCode != null\n      ? BROWSER.DIRECTION_KEY_CODE[event.keyCode]\n      : BROWSER.DIRECTION_KEY_NAME[event.key];\n\n    if (!keyToUpdate) return;\n\n    pressed[keyToUpdate] = isEnable;\n  }\n\n  private _getPressedKeyCount() {\n    return BROWSER.KEY_DIRECTION.filter(key => this._pressed[key]).length;\n  }\n\n  private _getDeltaByPressedKeys() {\n    const pressed = this._pressed;\n    let x = 0;\n    let y = 0;\n\n    if (pressed.LEFT) {\n      x += 1;\n    }\n\n    if (pressed.RIGHT) {\n      x -= 1;\n    }\n\n    if (pressed.UP) {\n      y += 1;\n    }\n\n    if (pressed.DOWN) {\n      y -= 1;\n    }\n\n    return {\n      x, y\n    };\n  }\n\n  private _onKeyDown = (evt: KeyboardEvent) => {\n    // Ignore all other keypress except main arrow keys\n    if (evt.location !== KeyboardEvent.DOM_KEY_LOCATION_STANDARD) return;\n\n    this._updateKeyPress(evt, true);\n\n    const pressedCount = this._getPressedKeyCount();\n    if (pressedCount <= 0) return;\n\n    evt.preventDefault();\n    if (pressedCount === 1 && !evt.repeat) {\n      // On first keydown\n      this.trigger(CONTROL_EVENTS.INPUT_START, {\n        srcEvent: evt,\n        isTouch: false,\n        isKeyboard: true\n      });\n    }\n  };\n\n  private _onKeyUp = (evt: KeyboardEvent) => {\n    // Ignore all other keypress except main arrow keys\n    if (evt.location !== KeyboardEvent.DOM_KEY_LOCATION_STANDARD) return;\n\n    this._updateKeyPress(evt, false);\n\n    const pressedCount = this._getPressedKeyCount();\n    if (pressedCount > 0) return;\n\n    this.trigger(CONTROL_EVENTS.INPUT_END, {\n      isTouch: false,\n      isKeyboard: true,\n      scrolling: false\n    });\n  };\n}\n\nexport default KeyboardInput;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Component from \"@egjs/component\";\nimport CameraControl from \"./CameraControl\";\nimport MouseInput from \"./input/MouseInput\";\nimport TouchInput from \"./input/TouchInput\";\nimport KeyboardInput from \"./input/KeyboardInput\";\nimport Camera from \"../core/Camera\";\nimport Motion from \"../core/Motion\";\nimport { CONTROL_EVENTS, INFINITE_RANGE, DEFAULT_PITCH_RANGE, DEFAULT_ANIMATION_DURATION, DEFAULT_EASING, DEG_TO_RAD, RAD_TO_DEG } from \"../const/internal\";\nimport { toVerticalFov } from \"../utils\";\nimport { ControlEvents, InputEvents } from \"../type/internal\";\n\n/**\n * Options for {@link RotateControl}\n * @ko {@link RotateControl}용 옵션들\n * @since 4.0.0\n */\nexport interface RotateControlOptions {\n  /**\n   * @copy RotateControl#pointerScale\n   */\n  pointerScale: [number, number];\n  /**\n   * @copy RotateControl#keyboardScale\n   */\n  keyboardScale: [number, number];\n  /**\n   * @copy RotateControl#duration\n   */\n  duration: number;\n  /**\n   * @copy RotateControl#easing\n   */\n  easing: (x: number) => number;\n  /**\n   * @copy RotateControl#disablePitch\n   */\n  disablePitch: boolean;\n  /**\n   * @copy RotateControl#disableYaw\n   */\n  disableYaw: boolean;\n  /**\n   * @copy RotateControl#disableKeyboard\n   */\n  disableKeyboard: boolean;\n}\n\ntype RotateDeltaType = { x: number; y: number; };\nexport type RotateControlEvents = ControlEvents<RotateDeltaType>;\n\n/**\n * Camera's rotation control\n * @ko 카메라의 회전을 담당하는 컨트롤\n * @since 4.0.0\n */\nclass RotateControl extends Component<RotateControlEvents> implements CameraControl {\n  // Options\n  private _pointerScale: RotateControlOptions[\"pointerScale\"];\n  private _keyboardScale: RotateControlOptions[\"keyboardScale\"];\n  private _duration: RotateControlOptions[\"duration\"];\n  private _easing: RotateControlOptions[\"easing\"];\n  private _disablePitch: RotateControlOptions[\"disablePitch\"];\n  private _disableYaw: RotateControlOptions[\"disableYaw\"];\n  private _disableKeyboard: RotateControlOptions[\"disableKeyboard\"];\n\n  // Internal values\n  private _controlEl: HTMLElement;\n  private _enableBlocked: boolean;\n  private _mouseInput: MouseInput;\n  private _touchInput: TouchInput;\n  private _keyboardInput: KeyboardInput;\n  private _xMotion: Motion;\n  private _yMotion: Motion;\n  private _screenScale: [number, number];\n  private _zoomScale: number;\n  private _enabled: boolean;\n  private _changedWhileDragging: boolean;\n\n  /**\n   * @copy CameraControl#enabled\n   */\n  public get enabled() { return this._enabled; }\n  /**\n   * @hidden\n   */\n  public get enableBlocked() { return this._enableBlocked; }\n  /**\n   * @copy CameraControl#animating\n   */\n  public get animating() {\n    return this._keyboardInput.active\n      || this._xMotion.activated\n      || this._yMotion.activated;\n  }\n  /**\n   * Current yaw value\n   * @ko 현재 yaw 값\n   * @readonly\n   * @since 4.0.0\n   */\n  public get yaw() { return this._xMotion; }\n  /**\n   * Current pitch value\n   * @ko 현재 pitch 값\n   * @readonly\n   * @since 4.0.0\n   */\n  public get pitch() { return this._yMotion; }\n  /**\n   * @copy View360#scrollable\n   */\n  public get scrollable() { return this._touchInput.scrollable; }\n  public set scrollable(val: boolean) {\n    this._touchInput.scrollable = val;\n  }\n\n  /**\n   * Scale factor for mouse/touch rotation\n   * @ko 마우스/터치를 통한 회전 배율\n   * @default [1, 1]\n   * @since 4.0.0\n   */\n  public get pointerScale() { return this._pointerScale; }\n  public set pointerScale(val: RotateControlOptions[\"pointerScale\"]) {\n    this._pointerScale = val;\n  }\n\n  /**\n   * Scale factor for keyboard rotation\n   * @ko 키보드를 통한 회전 배율\n   * @default [1, 1]\n   * @since 4.0.0\n   */\n  public get keyboardScale() { return this._keyboardScale; }\n  public set keyboardScale(val: RotateControlOptions[\"keyboardScale\"]) {\n    this._keyboardScale = val;\n  }\n\n  /**\n   * Duration of the input animation (ms)\n   * @ko 회전 애니메이션의 시간 (ms)\n   * @default 300\n   */\n  public get duration() { return this._duration; }\n  public set duration(val: RotateControlOptions[\"duration\"]) {\n    this._duration = val;\n    this._xMotion.duration = val;\n    this._yMotion.duration = val;\n  }\n\n  /**\n   * Easing function of the animation\n   * @ko 회전 애니메이션에 적용할 easing 함수\n   * @default EASING.EASE_OUT_CUBIC\n   * @see EASING\n   */\n  public get easing() { return this._easing; }\n  public set easing(val: RotateControlOptions[\"easing\"]) {\n    this._easing = val;\n    this._xMotion.easing = val;\n    this._yMotion.easing = val;\n  }\n\n  /**\n   * Disable X-axis(pitch) rotation.\n   * @ko x축 회전(pitch)을 비활성화합니다.\n   * @default false\n   */\n  public get disablePitch() { return this._disablePitch; }\n  public set disablePitch(val: RotateControlOptions[\"disablePitch\"]) { this._disablePitch = val; }\n\n  /**\n   * Disable Y-axis(yaw) rotation.\n   * @ko y축 회전(yaw)을 비활성화합니다.\n   * @default false\n   */\n  public get disableYaw() { return this._disableYaw; }\n  public set disableYaw(val: RotateControlOptions[\"disableYaw\"]) { this._disableYaw = val; }\n\n  /**\n   * Disable rotation by keyboard.\n   * @ko 키보드를 이용한 회전을 비활성화합니다.\n   * @default false\n   */\n  public get disableKeyboard() { return this._disableKeyboard; }\n  public set disableKeyboard(val: RotateControlOptions[\"disableKeyboard\"]) { this._disableKeyboard = val; }\n\n  /**\n   * Create new RotateControl instance\n   * @ko RotateControl의 인스턴스를 생성합니다.\n   * @param controlEl - Element to attach handlers {@ko 입력을 받을 엘리먼트}\n   * @param enableBlocked - Whether to disable control on init {@ko 초기화 과정에서 컨트롤 활성화 여부}\n   * @param options - Options for control {@ko 컨트롤 옵션들}\n   */\n  public constructor(controlEl: HTMLElement, enableBlocked: boolean, {\n    duration = DEFAULT_ANIMATION_DURATION,\n    easing = DEFAULT_EASING,\n    pointerScale = [1, 1],\n    keyboardScale = [1, 1],\n    disablePitch = false,\n    disableYaw = false,\n    disableKeyboard = false\n  }: Partial<RotateControlOptions> = {}) {\n    super();\n\n    this._controlEl = controlEl;\n    this._pointerScale = pointerScale;\n    this._keyboardScale = keyboardScale;\n    this._duration = duration;\n    this._easing = easing;\n    this._disablePitch = disablePitch;\n    this._disableYaw = disableYaw;\n    this._disableKeyboard = disableKeyboard;\n\n    this._enableBlocked = enableBlocked;\n    this._mouseInput = new MouseInput();\n    this._touchInput = new TouchInput();\n    this._keyboardInput = new KeyboardInput();\n    this._xMotion = new Motion({ duration, range: INFINITE_RANGE, easing });\n    this._yMotion = new Motion({ duration, range: DEFAULT_PITCH_RANGE, easing });\n    this._screenScale = [1, 1];\n    this._zoomScale = 1;\n    this._enabled = false;\n    this._changedWhileDragging = false;\n    this._bindInputs();\n  }\n\n  public destroy(): void {\n    this.disable();\n    this._mouseInput.off();\n    this._touchInput.off();\n    this._keyboardInput.off();\n    this.off();\n    this._changedWhileDragging = false;\n  }\n\n  /**\n   * @hidden\n   */\n  public update(delta: number): void {\n    if (!this._enabled) return;\n\n    const xMotion = this._xMotion;\n    const yMotion = this._yMotion;\n    const keyboardInput = this._keyboardInput;\n\n    if (!this._disableKeyboard) {\n      keyboardInput.update();\n    }\n\n    if (!this._disablePitch) {\n      yMotion.update(delta);\n    }\n\n    if (!this._disableYaw) {\n      xMotion.update(delta);\n    }\n  }\n\n  /**\n   * @hidden\n   */\n  public updateRange(camera: Camera, zoom: number) {\n    const yawRange = camera.getYawRange(zoom);\n    const pitchRange = camera.getPitchRange(zoom);\n\n    this._xMotion.setRange(yawRange.min, yawRange.max);\n    this._yMotion.setRange(pitchRange.min, pitchRange.max);\n  }\n\n  /**\n   * @hidden\n   */\n  public setZoomScale(val: number) {\n    this._zoomScale = val;\n  }\n\n  /**\n   * Resize control to match target size.\n   * @ko 컨트롤의 내부 크기를 갱신합니다.\n   * @param hfov - Camera horizontal fov in degrees {@ko 카메라의 수평방향 fov값 (도 단위)}\n   * @param aspect - Camera aspect {@ko 카메라 가로/세로 비율}\n   * @param width - New width {@ko 갱신된 너비}\n   * @param height - New height {@ko 갱신된 높이}\n   */\n  public resize(hfov: number, aspect: number, width: number, height: number) {\n    const vfov = toVerticalFov(hfov * DEG_TO_RAD, aspect) * RAD_TO_DEG;\n\n    this._screenScale[0] = hfov / width;\n    this._screenScale[1] = vfov / height;\n  }\n\n  public enable(): void {\n    if (this._enabled) return;\n\n    const element = this._controlEl;\n\n    this._mouseInput.enable(element);\n    this._touchInput.enable(element);\n    this._keyboardInput.enable(element);\n\n    this._enabled = true;\n    this._enableBlocked = false;\n\n    this.trigger(CONTROL_EVENTS.ENABLE, { control: this, updateCursor: true });\n  }\n\n  public disable(): void {\n    if (!this._enabled) return;\n\n    this._mouseInput.disable();\n    this._touchInput.disable();\n    this._keyboardInput.disable();\n\n    this._enabled = false;\n\n    this.trigger(CONTROL_EVENTS.DISABLE, { updateCursor: true });\n  }\n\n  public sync(camera: Camera): void {\n    this.updateRange(camera, camera.zoom);\n\n    this._xMotion.reset(camera.yaw);\n    this._yMotion.reset(camera.pitch);\n  }\n\n  private _bindInputs() {\n    const mouseInput = this._mouseInput;\n    const touchInput = this._touchInput;\n    const keyboardInput = this._keyboardInput;\n\n    mouseInput.on(CONTROL_EVENTS.INPUT_START, this._onInputStart);\n    mouseInput.on(CONTROL_EVENTS.CHANGE, this._onChange);\n    mouseInput.on(CONTROL_EVENTS.INPUT_END, this._onInputEnd);\n\n    touchInput.on(CONTROL_EVENTS.INPUT_START, this._onInputStart);\n    touchInput.on(CONTROL_EVENTS.CHANGE, this._onChange);\n    touchInput.on(CONTROL_EVENTS.INPUT_END, this._onInputEnd);\n\n    keyboardInput.on(CONTROL_EVENTS.INPUT_START, this._onInputStart);\n    keyboardInput.on(CONTROL_EVENTS.CHANGE, this._onChange);\n    keyboardInput.on(CONTROL_EVENTS.INPUT_END, this._onInputEnd);\n  }\n\n  private _onInputStart = (evt: InputEvents<RotateDeltaType>[typeof CONTROL_EVENTS.INPUT_START]) => {\n    this._changedWhileDragging = false;\n    this.trigger(CONTROL_EVENTS.INPUT_START, {\n      ...evt,\n      inputType: \"rotate\"\n    });\n  };\n\n  private _onChange = (evt: InputEvents<RotateDeltaType>[typeof CONTROL_EVENTS.CHANGE]) => {\n    const delta = evt.delta;\n    const invZoomScale = 1 / this._zoomScale; // Reduce speed on zoom\n    const screenScale = this._screenScale;\n    const keyboardScale = this._keyboardScale;\n    const pointerScale = this._pointerScale;\n\n    let scale: [number, number];\n\n    if (evt.isKeyboard) {\n      scale = [\n        keyboardScale[0] * invZoomScale,\n        keyboardScale[1] * invZoomScale\n      ];\n    } else {\n      scale = [\n        pointerScale[0] * screenScale[0] * invZoomScale,\n        pointerScale[1] * screenScale[1] * invZoomScale\n      ];\n    }\n\n    const scaledX = delta.x * scale[0];\n    const scaledY = delta.y * scale[1];\n\n    this._xMotion.setNewEndByDelta(scaledX);\n    this._yMotion.setNewEndByDelta(scaledY);\n\n    this._changedWhileDragging = true;\n  }\n\n  private _onInputEnd = (evt: InputEvents<RotateDeltaType>[typeof CONTROL_EVENTS.INPUT_END]) => {\n    this.trigger(CONTROL_EVENTS.INPUT_END, {\n      ...evt,\n      inputType: \"rotate\"\n    });\n\n    if (!this._changedWhileDragging && !evt.isKeyboard && !evt.scrolling) {\n      this.trigger(CONTROL_EVENTS.STATIC_CLICK, {\n        isTouch: evt.isTouch\n      });\n    }\n\n    this._changedWhileDragging = false;\n  };\n}\n\nexport default RotateControl;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Component from \"@egjs/component\";\nimport * as BROWSER from \"../../const/browser\";\nimport { CONTROL_EVENTS, DEFAULT_ANIMATION_DURATION } from \"../../const/internal\";\nimport { InputEvents } from \"../../type/internal\";\n\nclass WheelInput extends Component<InputEvents<number, WheelEvent>> {\n  private _el: HTMLElement | null;\n  private _scrollable: boolean;\n  private _baseScale: number;\n  private _inputTimer: number;\n\n  public get scrollable() { return this._scrollable; }\n  public set scrollable(val: boolean) { this._scrollable = val; }\n\n  public constructor() {\n    super();\n\n    this._el = null;\n    this._baseScale = 0.04;\n    this._scrollable = false;\n    this._inputTimer = -1;\n  }\n\n  public enable(element: HTMLElement) {\n    if (this._el) return;\n\n    element.addEventListener(BROWSER.EVENTS.WHEEL, this._onWheel, { passive: false, capture: false });\n\n    this._el = element;\n    this._clearTimer();\n  }\n\n  public disable() {\n    const element = this._el;\n    if (!element) return;\n\n    element.removeEventListener(BROWSER.EVENTS.WHEEL, this._onWheel, false);\n\n    this._el = null;\n    this._clearTimer();\n  }\n\n  private _onWheel = (evt: WheelEvent) => {\n    const scrollable = this._scrollable;\n\n    if (evt.deltaY === 0 || scrollable) return;\n\n    evt.preventDefault();\n    evt.stopPropagation();\n\n    if (this._inputTimer < 0) {\n      this.trigger(CONTROL_EVENTS.INPUT_START, {\n        srcEvent: evt,\n        isTouch: false,\n        isKeyboard: false\n      });\n    } else {\n      this._clearTimer();\n    }\n\n    const delta = this._baseScale * evt.deltaY;\n\n    this.trigger(CONTROL_EVENTS.CHANGE, {\n      delta,\n      isTouch: false,\n      isKeyboard: false\n    });\n\n    this._inputTimer = window.setTimeout(() => {\n      this.trigger(CONTROL_EVENTS.INPUT_END, {\n        isTouch: false,\n        isKeyboard: false,\n        scrolling: false\n      });\n      this._inputTimer = -1;\n    }, DEFAULT_ANIMATION_DURATION);\n  };\n\n  private _clearTimer() {\n    window.clearTimeout(this._inputTimer);\n    this._inputTimer = -1;\n  }\n}\n\nexport default WheelInput;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Component from \"@egjs/component\";\nimport * as BROWSER from \"../../const/browser\";\nimport { CONTROL_EVENTS } from \"../../const/internal\";\nimport { InputEvents } from \"../../type/internal\";\n\nclass PinchInput extends Component<InputEvents<number, TouchEvent>> {\n  private _el: HTMLElement | null;\n  private _baseScale: number;\n  private _prevDistance: number;\n  private _isFirstTouch: boolean;\n\n  public constructor() {\n    super();\n\n    this._el = null;\n    this._baseScale = -0.2;\n    this._prevDistance = -1;\n    this._isFirstTouch = true;\n  }\n\n  public enable(element: HTMLElement) {\n    if (this._el) return;\n\n    element.addEventListener(BROWSER.EVENTS.TOUCH_MOVE, this._onTouchMove, { passive: false, capture: false });\n    element.addEventListener(BROWSER.EVENTS.TOUCH_END, this._onTouchEnd);\n\n    this._el = element;\n    this._prevDistance = -1;\n    this._isFirstTouch = true;\n  }\n\n  public disable() {\n    const element = this._el;\n    if (!element) return;\n\n    element.removeEventListener(BROWSER.EVENTS.TOUCH_MOVE, this._onTouchMove, false);\n    element.removeEventListener(BROWSER.EVENTS.TOUCH_END, this._onTouchEnd);\n\n    this._el = null;\n  }\n\n  private _onTouchMove = (evt: TouchEvent) => {\n    const touches = evt.touches;\n    if (touches.length !== 2) return;\n\n    if (!evt.cancelable) return;\n\n    evt.preventDefault();\n    evt.stopPropagation();\n\n    const prevDistance = this._prevDistance;\n\n    const diff = [\n      touches[0].pageX - touches[1].pageX,\n      touches[0].pageY - touches[1].pageY\n    ];\n\n    const distance = Math.sqrt(diff[0] * diff[0] + diff[1] * diff[1]) * this._baseScale;\n    const delta = this._isFirstTouch\n      ? 0\n      : distance - prevDistance;\n\n    if (this._isFirstTouch) {\n      this.trigger(CONTROL_EVENTS.INPUT_START, {\n        srcEvent: evt,\n        isTouch: true,\n        isKeyboard: false\n      });\n    }\n\n    this._prevDistance = distance;\n    this._isFirstTouch = false;\n\n    this.trigger(CONTROL_EVENTS.CHANGE, {\n      delta,\n      isTouch: true,\n      isKeyboard: false\n    });\n  };\n\n  private _onTouchEnd = (evt: TouchEvent) => {\n    if (evt.touches.length !== 0) return;\n\n    if (!this._isFirstTouch) {\n      this.trigger(CONTROL_EVENTS.INPUT_END, {\n        isTouch: true,\n        isKeyboard: false,\n        scrolling: false\n      });\n    }\n\n    this._prevDistance = -1;\n    this._isFirstTouch = true;\n  };\n}\n\nexport default PinchInput;\n","/*\n* Copyright (c) 2023-present NAVER Corp.\n* egjs projects are licensed under the MIT license\n*/\nimport Component from \"@egjs/component\";\nimport CameraControl from \"./CameraControl\";\nimport WheelInput from \"./input/WheelInput\";\nimport PinchInput from \"./input/PinchInput\";\nimport Camera from \"../core/Camera\";\nimport Motion from \"../core/Motion\";\nimport {\n  CONTROL_EVENTS,\n  DEFAULT_ANIMATION_DURATION,\n  DEFAULT_EASING,\n  INFINITE_RANGE\n} from \"../const/internal\";\nimport { ControlEvents, InputEvents } from \"../type/internal\";\n\n/**\n * Options for {@link ZoomControl}\n * @ko {@link ZoomControl}용 옵션들\n * @since 4.0.0\n */\nexport interface ZoomControlOptions {\n  /**\n   * @copy ZoomControl#scale\n   */\n  scale: number;\n  /**\n   * @copy ZoomControl#duration\n   */\n  duration: number;\n  /**\n   * @copy ZoomControl#easing\n   */\n  easing: (x: number) => number;\n}\n\ntype ZoomControlEvents = ControlEvents<number>;\n\n/**\n * Camera's zoom control\n * @ko 카메라의 줌 값을 담당하는 컨트롤\n * @since 4.0.0\n */\nclass ZoomControl extends Component<ZoomControlEvents> implements CameraControl {\n  // Options\n  private _scale: ZoomControlOptions[\"scale\"];\n\n  // Internal values\n  private _controlEl: HTMLElement;\n  private _enableBlocked: boolean;\n  private _wheelInput: WheelInput;\n  private _pinchInput: PinchInput;\n  private _motion: Motion;\n  private _enabled: boolean;\n\n  /**\n   * @copy CameraControl#enabled\n   */\n  public get enabled() { return this._enabled; }\n  /**\n   * @hidden\n   */\n  public get enableBlocked() { return this._enableBlocked; }\n  /**\n   * @copy CameraControl#animating\n   */\n  public get animating() { return this._motion.activated; }\n  /**\n   * Current zoom value\n   * @ko 현재 줌 값\n   * @since 4.0.0\n   * @readonly\n   */\n  public get zoom() { return this._motion.val; }\n  /**\n   * @copy View360#wheelScrollable\n   */\n  public get scrollable() { return this._wheelInput.scrollable; }\n  public set scrollable(val: boolean) {\n    this._wheelInput.scrollable = val;\n  }\n  /**\n   * @hidden\n   */\n  public get range() { return this._motion.range; }\n\n  /**\n   * Scale factor of the zoom\n   * @ko 입력에 의한 줌 배율\n   * @default 1\n   * @since 4.0.0\n   */\n  public get scale() { return this._scale; }\n  public set scale(val: ZoomControlOptions[\"scale\"]) { this._scale = val; }\n\n  /**\n   * Duration of the input animation (ms)\n   * @ko 회전 애니메이션의 시간 (ms)\n   * @default 300\n   * @since 4.0.0\n   */\n  public get duration() { return this._motion.duration; }\n\n  /**\n   * Easing function of the animation\n   * @ko 회전 애니메이션에 적용할 easing 함수\n   * @default EASING.EASE_OUT_CUBIC\n   * @see EASING\n   * @since 4.0.0\n   */\n  public get easing() { return this._motion.easing; }\n\n  /**\n   * Create new ZoomControl instance\n   * @ko ZoomControl의 인스턴스를 생성합니다.\n   * @param controlEl - Element to attach handlers {@ko 입력을 받을 엘리먼트}\n   * @param enableBlocked - Whether to disable control on init {@ko 초기화 과정에서 컨트롤 활성화 여부}\n   * @param options - Options for control {@ko 컨트롤 옵션들}\n   */\n  public constructor(controlEl: HTMLElement, enableBlocked: boolean, {\n    scale = 1,\n    duration = DEFAULT_ANIMATION_DURATION,\n    easing = DEFAULT_EASING\n  }: Partial<ZoomControlOptions> = {}) {\n    super();\n\n    this._scale = scale;\n\n    this._controlEl = controlEl;\n    this._enableBlocked = enableBlocked;\n    this._wheelInput = new WheelInput();\n    this._pinchInput = new PinchInput();\n    this._motion = new Motion({\n      duration,\n      easing,\n      range: INFINITE_RANGE\n    });\n    this._enabled = false;\n\n    this._bindInputs();\n  }\n\n  public destroy(): void {\n    this.disable();\n    this._wheelInput.off();\n    this._pinchInput.off();\n    this.off();\n  }\n\n  /**\n   * @hidden\n   */\n  public update(delta: number): void {\n    if (!this._enabled) return;\n\n    const motion = this._motion;\n    motion.update(delta);\n  }\n\n  public enable(): void {\n    if (this._enabled) return;\n\n    const element = this._controlEl;\n    this._wheelInput.enable(element);\n    this._pinchInput.enable(element);\n\n    this._enabled = true;\n    this._enableBlocked = false;\n\n    this.trigger(CONTROL_EVENTS.ENABLE, { control: this, updateCursor: false });\n  }\n\n  public disable(): void {\n    if (!this._enabled) return;\n\n    this._wheelInput.disable();\n    this._pinchInput.disable();\n\n    this._enabled = false;\n\n    this.trigger(CONTROL_EVENTS.DISABLE, { updateCursor: false });\n  }\n\n  public sync(camera: Camera): void {\n    const motion = this._motion;\n    const range = camera.getZoomRange();\n\n    motion.setRange(range.min, range.max);\n    motion.reset(range.current);\n  }\n\n  private _bindInputs() {\n    const wheelInput = this._wheelInput;\n    const pinchInput = this._pinchInput;\n\n    wheelInput.on(CONTROL_EVENTS.INPUT_START, this._onInputStart);\n    wheelInput.on(CONTROL_EVENTS.CHANGE, this._onChange);\n    wheelInput.on(CONTROL_EVENTS.INPUT_END, this._onInputEnd);\n\n    pinchInput.on(CONTROL_EVENTS.INPUT_START, this._onInputStart);\n    pinchInput.on(CONTROL_EVENTS.CHANGE, this._onChange);\n    pinchInput.on(CONTROL_EVENTS.INPUT_END, this._onInputEnd);\n  }\n\n  private _onInputStart = (evt: InputEvents<number>[typeof CONTROL_EVENTS.INPUT_START]) => {\n    this.trigger(CONTROL_EVENTS.INPUT_START, {\n      ...evt,\n      inputType: \"zoom\"\n    });\n  };\n\n  private _onChange = ({ delta }: InputEvents<number>[typeof CONTROL_EVENTS.CHANGE]) => {\n    const scale = this._scale;\n    const scaledDelta = delta * scale;\n\n    this._motion.setNewEndByDelta(scaledDelta);\n  };\n\n  private _onInputEnd = (evt: InputEvents<number>[typeof CONTROL_EVENTS.INPUT_END]) => {\n    this.trigger(CONTROL_EVENTS.INPUT_END, {\n      ...evt,\n      inputType: \"zoom\"\n    });\n  };\n}\n\nexport default ZoomControl;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Component from \"@egjs/component\";\nimport { quat, vec3 } from \"gl-matrix\";\nimport * as BROWSER from \"../../const/browser\";\nimport { DEG_TO_RAD, RAD_TO_DEG } from \"../../const/internal\";\nimport { InputEvents } from \"../../type/internal\";\nimport { quatToEuler } from \"../../utils\";\n\nexport const ROTATE_CONSTANT = {\n  PITCH_DELTA: 1,\n  YAW_DELTA_BY_ROLL: 2,\n  YAW_DELTA_BY_YAW: 3\n} as const;\n\nROTATE_CONSTANT[ROTATE_CONSTANT.PITCH_DELTA] = {\n  targetAxis: [0, 1, 0],\n  meshPoint: [0, 0, 1]\n};\nROTATE_CONSTANT[ROTATE_CONSTANT.YAW_DELTA_BY_ROLL] = {\n  targetAxis: [0, 1, 0],\n  meshPoint: [1, 0, 0]\n};\nROTATE_CONSTANT[ROTATE_CONSTANT.YAW_DELTA_BY_YAW] = {\n  targetAxis: [1, 0, 0],\n  meshPoint: [0, 0, 1]\n};\n\nclass GyroInput extends Component<InputEvents<{ x: number, y: number, z: number }, MouseEvent>> {\n  public quaternion: quat;\n\n  private _ignoreRoll: boolean;\n\n  private _yawOrigin: number;\n  private _yawOffset: number;\n  private _orientation: {\n    alpha: number;\n    beta: number;\n    gamma: number;\n  }\n  private _orientationUpdated: boolean;\n  private _needsCalibrate: boolean;\n  private _screenOrientation: number;\n  private _enabled: boolean;\n\n  public get enabled() { return this._enabled; }\n  public get orientationUpdated() { return this._orientationUpdated; }\n  public get ignoreRoll() { return this._ignoreRoll; }\n  public set ignoreRoll(val: boolean) { this._ignoreRoll = val; }\n\n  public constructor() {\n    super();\n\n    this.quaternion = quat.create();\n\n    this._orientation = {\n      alpha: 0,\n      beta: 90,\n      gamma: 0\n    };\n    this._yawOrigin = 0;\n    this._yawOffset = 0;\n    this._orientationUpdated = false;\n    this._screenOrientation = 0;\n    this._needsCalibrate = true;\n    this._enabled = false;\n  }\n\n  public enable() {\n    if (this._enabled) return;\n\n    window.addEventListener(BROWSER.EVENTS.DEVICE_ORIENTATION, this._onDeviceOrientation);\n    window.addEventListener(BROWSER.EVENTS.ORIENTATION_CHANGE, this._updateScreenOrientation);\n\n    this._updateScreenOrientation();\n    this._orientationUpdated = false;\n    this._needsCalibrate = true;\n    this._enabled = true;\n  }\n\n  public disable() {\n    if (!this._enabled) return;\n\n    window.removeEventListener(BROWSER.EVENTS.DEVICE_ORIENTATION, this._onDeviceOrientation);\n    window.removeEventListener(BROWSER.EVENTS.ORIENTATION_CHANGE, this._updateScreenOrientation);\n\n    this._enabled = false;\n  }\n\n  public update() {\n    this._updateRotation();\n    this._orientationUpdated = false;\n  }\n\n  public collectDelta() {\n    if (!this._orientationUpdated) {\n      return {\n        pitch: 0,\n        yaw: 0\n      };\n    }\n\n    const prevRotation = quat.clone(this.quaternion);\n\n    this._updateRotation();\n    this._orientationUpdated = false;\n\n    return this._toEulerDelta(prevRotation, this.quaternion);\n  }\n\n  public setInitialRotation(yaw: number) {\n    this._yawOrigin = yaw;\n  }\n\n  private _onDeviceOrientation = (evt: DeviceOrientationEvent) => {\n    const prevOrientation = this._orientation;\n    const { alpha, beta, gamma } = evt;\n\n    if (\n      alpha == null\n      || beta == null\n      || gamma == null\n    ) return;\n\n    prevOrientation.alpha = alpha;\n    prevOrientation.beta = beta;\n    prevOrientation.gamma = gamma;\n\n    this._orientationUpdated = true;\n\n    if (this._needsCalibrate) {\n      this._needsCalibrate = false;\n      this._calibrateSensor();\n    }\n  };\n\n  private _calibrateSensor() {\n    const yawOrigin = this._yawOrigin;\n    const rotation = this.quaternion;\n\n    this._yawOffset = 0;\n    this._updateRotation();\n\n    const { yaw: sensorYaw } = quatToEuler(rotation);\n    this._yawOffset = sensorYaw - yawOrigin;\n    this._updateRotation();\n\n    this._needsCalibrate = false;\n  }\n\n  private _updateRotation() {\n    const rotation = this.quaternion;\n    const { alpha, beta, gamma } = this._orientation;\n\n    quat.identity(rotation);\n    quat.rotateY(rotation, rotation, (alpha - this._yawOffset) * DEG_TO_RAD);\n    quat.rotateX(rotation, rotation, beta * DEG_TO_RAD);\n    quat.rotateZ(rotation, rotation, -gamma * DEG_TO_RAD);\n\n    const screen = quat.create();\n    const screenAngle = -this._screenOrientation * 0.5 * DEG_TO_RAD;\n    const world = quat.fromValues(-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5));\n\n    quat.set(screen, 0, Math.sin(screenAngle), 0, Math.cos(screenAngle));\n    quat.multiply(rotation, rotation, screen);\n    quat.multiply(rotation, rotation, world);\n\n    quat.normalize(rotation, rotation);\n  }\n\n  private _updateScreenOrientation = () => {\n    if (window.screen && window.screen.orientation && window.screen.orientation.angle !== undefined) {\n      this._screenOrientation = screen.orientation.angle;\n    } else if (window.orientation !== undefined) {\n      this._screenOrientation = window.orientation >= 0 ?\n        window.orientation : 360 + window.orientation;\n    } else {\n      this._screenOrientation = 0;\n    }\n  }\n\n  private _toEulerDelta(prevQuat: quat, currentQuat: quat) {\n    return {\n      yaw: this._getDeltaYaw(prevQuat, currentQuat),\n      pitch: this._getDeltaPitch(prevQuat, currentQuat),\n    };\n  }\n\n  private _getDeltaYaw(prvQ: quat, curQ: quat): number {\n    const yawDeltaByYaw = this._getRotationDelta(prvQ, curQ, ROTATE_CONSTANT.YAW_DELTA_BY_YAW);\n    const yawDeltaByRoll = this._getRotationDelta(prvQ, curQ, ROTATE_CONSTANT.YAW_DELTA_BY_ROLL)\n      * Math.sin(this._extractPitchFromQuat(curQ));\n\n    return yawDeltaByRoll + yawDeltaByYaw;\n  }\n\n  private _getDeltaPitch(prvQ: quat, curQ: quat): number {\n    return this._getRotationDelta(prvQ, curQ, ROTATE_CONSTANT.PITCH_DELTA);\n  }\n\n  private _getRotationDelta(prevQ: quat, curQ: quat, rotateKind: typeof ROTATE_CONSTANT[keyof typeof ROTATE_CONSTANT]) {\n    const targetAxis = vec3.fromValues(\n      ROTATE_CONSTANT[rotateKind].targetAxis[0],\n      ROTATE_CONSTANT[rotateKind].targetAxis[1],\n      ROTATE_CONSTANT[rotateKind].targetAxis[2]\n    );\n    const meshPoint = ROTATE_CONSTANT[rotateKind].meshPoint;\n\n    const prevQuaternion = quat.clone(prevQ);\n    const curQuaternion = quat.clone(curQ);\n\n    quat.normalize(prevQuaternion, prevQuaternion);\n    quat.normalize(curQuaternion, curQuaternion);\n\n    let prevPoint = vec3.fromValues(0, 0, 1);\n    let curPoint = vec3.fromValues(0, 0, 1);\n\n    vec3.transformQuat(prevPoint, prevPoint, prevQuaternion);\n    vec3.transformQuat(curPoint, curPoint, curQuaternion);\n    vec3.transformQuat(targetAxis, targetAxis, curQuaternion);\n\n    const rotateDistance = vec3.dot(targetAxis, vec3.cross(vec3.create(), prevPoint, curPoint));\n    const rotateDirection = rotateDistance > 0 ? 1 : -1;\n\n    // when counter clock wise, use vec3.fromValues(0,1,0)\n    // when clock wise, use vec3.fromValues(0,-1,0)\n    // const meshPoint1 = vec3.fromValues(0, 0, 0);\n    const meshPoint2 = vec3.fromValues(meshPoint[0], meshPoint[1], meshPoint[2]);\n\n    let meshPoint3;\n\n    if (rotateKind !== ROTATE_CONSTANT.YAW_DELTA_BY_YAW) {\n      meshPoint3 = vec3.fromValues(0, rotateDirection, 0);\n    } else {\n      meshPoint3 = vec3.fromValues(rotateDirection, 0, 0);\n    }\n\n    vec3.transformQuat(meshPoint2, meshPoint2, curQuaternion);\n    vec3.transformQuat(meshPoint3, meshPoint3, curQuaternion);\n\n    const vecU = meshPoint2;\n    const vecV = meshPoint3;\n    const vecN = vec3.create();\n\n    vec3.cross(vecN, vecU, vecV);\n    vec3.normalize(vecN, vecN);\n\n    const coefficientA = vecN[0];\n    const coefficientB = vecN[1];\n    const coefficientC = vecN[2];\n\n    // a point on the plane\n    curPoint = vec3.fromValues(meshPoint[0], meshPoint[1], meshPoint[2]);\n    vec3.transformQuat(curPoint, curPoint, curQuaternion);\n\n    // a point should project on the plane\n    prevPoint = vec3.fromValues(meshPoint[0], meshPoint[1], meshPoint[2]);\n    vec3.transformQuat(prevPoint, prevPoint, prevQuaternion);\n\n    // distance between prevPoint and the plane\n    let distance = Math.abs(\n      prevPoint[0] * coefficientA +\n      prevPoint[1] * coefficientB +\n      prevPoint[2] * coefficientC\n    );\n\n    const projectedPrevPoint = vec3.create();\n\n    vec3.subtract(projectedPrevPoint, prevPoint, vec3.scale(vec3.create(), vecN, distance));\n\n    let trigonometricRatio =\n      (projectedPrevPoint[0] * curPoint[0] +\n      projectedPrevPoint[1] * curPoint[1] +\n      projectedPrevPoint[2] * curPoint[2]) /\n      (vec3.length(projectedPrevPoint) * vec3.length(curPoint));\n\n    // defensive block\n    if (trigonometricRatio > 1) {\n      trigonometricRatio = 1;\n    }\n\n    const theta = Math.acos(trigonometricRatio);\n\n    const crossVec = vec3.cross(vec3.create(), curPoint, projectedPrevPoint);\n\n    distance = coefficientA * crossVec[0]\n      + coefficientB * crossVec[1]\n      + coefficientC * crossVec[2];\n\n    let thetaDirection: number;\n\n    if (rotateKind !== ROTATE_CONSTANT.YAW_DELTA_BY_YAW) {\n      thetaDirection = distance > 0 ? 1 : -1;\n    } else {\n      thetaDirection = distance < 0 ? 1 : -1;\n    }\n\n    const deltaRadian = theta * thetaDirection * rotateDirection;\n\n    return deltaRadian * RAD_TO_DEG;\n  }\n\n  private _extractPitchFromQuat(quaternion: quat) {\n    const baseV = vec3.fromValues(0, 0, 1);\n    vec3.transformQuat(baseV, baseV, quaternion);\n\n    return -1 * Math.atan2(\n      baseV[1],\n      Math.sqrt(Math.pow(baseV[0], 2) + Math.pow(baseV[2], 2)));\n  }\n}\n\nexport default GyroInput;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Component from \"@egjs/component\";\nimport CameraControl from \"./CameraControl\";\nimport GyroInput from \"./input/GyroInput\";\nimport Motion from \"../core/Motion\";\nimport Camera from \"../core/Camera\";\nimport * as BROWSER from \"../const/browser\";\nimport { CONTROL_EVENTS } from \"../const/internal\";\nimport { ControlEvents } from \"../type/internal\";\nimport { sensorCanBeEnabledIOS } from \"../utils\";\n\n/**\n * Options for {@link GyroControl}\n * @ko {@link GyroControl}용 옵션들\n * @since 4.0.0\n */\nexport interface GyroControlOptions {\n  /**\n   * @copy GyroControl#ignoreRoll\n   */\n  ignoreRoll: boolean;\n}\n\nexport type GyroControlEvents = ControlEvents<void>;\n\n/**\n * Camera's rotation control by gyroscope\n * @ko 자이로스코프를 이용한 회전 컨트롤\n * @since 4.0.0\n */\nclass GyroControl extends Component<GyroControlEvents> implements CameraControl {\n  // Options\n  private _ignoreRoll: GyroControlOptions[\"ignoreRoll\"];\n\n  // Internal values\n  private _enableBlocked: boolean;\n  private _input: GyroInput;\n\n  /**\n   * @copy CameraControl#enabled\n   */\n  public get enabled() { return this._input.enabled; }\n  /**\n   * @hidden\n   */\n  public get enableBlocked() { return this._enableBlocked; }\n  /**\n   * @copy CameraControl#animating\n   */\n  public get animating() {\n    return this._input.enabled && this._input.orientationUpdated;\n  }\n\n  /**\n   * When `true`, ignore gyroscope's roll(z-axis rotation) value.\n   * :::caution\n   * Setting `false` will ignore camera's range limit.\n   * Options like {@link View360Options#yawRange}, {@link View360Options#pitchRange} are ignored, and {@link CylinderProjection} also can't force it's camera range limit.\n   * :::\n   * @ko `true`일 경우 자이로스코프 입력의 roll(z축 회전)값을 무시합니다.\n   * :::caution\n   * 이 값을 `false`로 설정할 경우 카메라 범위 제약을 무시합니다.\n   * {@link View360Options#yawRange}, {@link View360Options#pitchRange}와 같은 값은 무시되며, {@link CylinderProjection} 사용시에도 범위를 벗어날 수 있습니다.\n   * :::\n   * @default true\n   * @since 4.0.0\n   */\n  public get ignoreRoll() { return this._ignoreRoll; }\n  public set ignoreRoll(val: GyroControlOptions[\"ignoreRoll\"]) { this._ignoreRoll = val; }\n\n  /**\n   * Return availability of the gyroscope.\n   * :::caution\n   * This will always return false until user permission under environments like iOS which requires user permission when using gyroscope.\n   * :::\n   * @ko 자이로스코프 사용 가능 여부를 반환합니다.\n   * :::caution\n   * iOS와 같이 GyroScope 사용시 사용자 Permission을 요구하는 환경에서는 사용자 Permission을 받기 전까지 항상 `false`입니다.\n   * :::\n   * @example\n   * ```ts\n   * const gyroAvailable = await GyroControl.isAvailable();\n   * ```\n   */\n  public static async isAvailable(): Promise<boolean> {\n    if (!DeviceMotionEvent) {\n      return false;\n    }\n\n    let onDeviceMotionChange: (evt: DeviceMotionEvent) => void;\n\n    const listenDeviceMotion = () => new Promise(res => {\n      onDeviceMotionChange = (evt: DeviceMotionEvent) => {\n        res(evt.rotationRate && evt.rotationRate.alpha != null);\n      };\n\n      window.addEventListener(BROWSER.EVENTS.DEVICE_MOTION, onDeviceMotionChange);\n    });\n\n    const timeout = () => new Promise(res => {\n      setTimeout(() => res(false), 1000);\n    });\n\n    return Promise.race([listenDeviceMotion(), timeout()])\n      .then((available: boolean) => {\n        window.removeEventListener(BROWSER.EVENTS.DEVICE_MOTION, onDeviceMotionChange);\n\n        return available;\n      });\n  }\n\n  /**\n   * Request user permission for gyroscope sensor.\n   * This can be used in environments like iOS which requires user permission when using gyroscope sensors.\n   * @ko 사용자의 sensor permission 취득을 요청합니다.\n   * iOS와 같이 gyroscope 사용시 사용자 Permission을 요구하는 환경에서 사용 가능합니다.\n   * @returns Whether the permission is granted {@ko 사용자 permission 취득 여부}\n   */\n  public static async requestSensorPermission(): Promise<boolean> {\n    // Request sensor permission, on iOS13+\n    if (sensorCanBeEnabledIOS()) {\n      return (DeviceMotionEvent as typeof DeviceMotionEvent & {\n        requestPermission: () => Promise<string>;\n      }).requestPermission().then(permissionState => {\n        return permissionState === \"granted\";\n      }).catch(() => false);\n    }\n\n    return true;\n  }\n\n  /**\n   * Create new GyroControl instance\n   * @ko GyroControl의 인스턴스를 생성합니다.\n   * @param enableBlocked - Whether to disable control on init {@ko 초기화 과정에서 컨트롤 활성화 여부}\n   * @param options - Options for control {@ko 컨트롤 옵션들}\n   */\n  public constructor(enableBlocked: boolean, {\n    ignoreRoll = true\n  }: Partial<GyroControlOptions> = {}) {\n    super();\n\n    this._enableBlocked = enableBlocked;\n    this._ignoreRoll = ignoreRoll;\n    this._input = new GyroInput();\n  }\n\n  /**\n   * @copy CameraControl#destroy\n   */\n  public destroy(): void {\n    this.disable();\n    this._input.off();\n    this.off();\n  }\n\n  /**\n   * @hidden\n   */\n  public update(camera: Camera, yaw: Motion, pitch: Motion, zoom: number) {\n    if (!this._ignoreRoll) {\n      this._updateQuaternion(camera, zoom);\n    } else {\n      this._updateYawPitch(camera, yaw, pitch, zoom);\n    }\n  }\n\n  /**\n   * @copy CameraControl#enable\n   */\n  public enable(): void {\n    if (this._input.enabled) return;\n\n    this._input.enable();\n    this._enableBlocked = false;\n    this.trigger(CONTROL_EVENTS.ENABLE, { control: this, updateCursor: false });\n  }\n\n  /**\n   * @copy CameraControl#disable\n   */\n  public disable(): void {\n    if (!this._input.enabled) return;\n\n    this._input.disable();\n    this.trigger(CONTROL_EVENTS.DISABLE, { updateCursor: false });\n  }\n\n  /**\n   * @copy CameraControl#sync\n   */\n  public sync(): void {} // eslint-disable-line @typescript-eslint/no-empty-function\n\n  private _updateYawPitch(camera: Camera, yaw: Motion, pitch: Motion, zoom: number) {\n    const input = this._input;\n    if (!input.enabled) return;\n\n    const {\n      yaw: yawDelta,\n      pitch: pitchDelta\n    } = input.collectDelta();\n\n    yaw.add(yawDelta);\n    pitch.add(pitchDelta);\n\n    camera.lookAt({\n      yaw: yaw.val,\n      pitch: pitch.val,\n      zoom\n    });\n  }\n\n  private _updateQuaternion(camera: Camera, zoom: number) {\n    const input = this._input;\n    if (!input.enabled) return;\n\n    input.update();\n    camera.rotate(input.quaternion, zoom);\n  }\n}\n\nexport default GyroControl;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport CameraControl from \"./CameraControl\";\nimport RotateControl, { RotateControlEvents, RotateControlOptions } from \"./RotateControl\";\nimport ZoomControl, { ZoomControlOptions } from \"./ZoomControl\";\nimport GyroControl, { GyroControlOptions } from \"./GyroControl\";\nimport Camera from \"../core/Camera\";\nimport CameraAnimation from \"../core/CameraAnimation\";\nimport * as BROWSER from \"../const/browser\";\nimport { CAMERA_EVENTS, CONTROL_EVENTS } from \"../const/internal\";\nimport { ValueOf } from \"../type/utils\";\nimport { getObjectOption, hfovToZoom } from \"../utils\";\n\n/**\n * Options for {@link PanoControl}\n * @ko {@link PanoControl}용 옵션들\n * @since 4.0.0\n */\nexport interface PanoControlOptions {\n  /**\n   * @copy View360#useGrabCursor\n   */\n  useGrabCursor: boolean;\n  /**\n   * @copy View360#scrollable\n   */\n  scrollable: boolean;\n  /**\n   * @copy View360#wheelScrollable\n   */\n  wheelScrollable: boolean;\n  /**\n   * @copy View360#disableContextMenu\n   */\n  disableContextMenu: boolean;\n  /**\n   * Options for {@link RotateControl}.\n   * `false` to disable rotation.\n   * @ko {@link RotateControl}용 옵션들.\n   * `false`일 경우 회전이 비활성화됩니다.\n   * @since 4.0.0\n   */\n  rotate: boolean | Partial<RotateControlOptions>;\n  /**\n   * Options for {@link ZoomControl}.\n   * `false` to disable zoom.\n   * @ko {@link ZoomControl}용 옵션들.\n   * `false`일 경우 줌이 비활성화됩니다.\n   * @since 4.0.0\n   */\n  zoom: boolean | Partial<ZoomControlOptions>;\n  /**\n   * Options for {@link GyroControl}.\n   * `false` to disable gyroscope control.\n   * @ko {@link GyroControl}용 옵션들.\n   * `false`일 경우 자이로스코프를 통한 컨트롤이 비활성화됩니다.\n   * @since 4.0.0\n   */\n  gyro: boolean | Partial<GyroControlOptions>;\n}\n\n/**\n * Panorama control for View360\n * @ko View360용 파노라마 컨트롤\n * @since 4.0.0\n */\nclass PanoControl {\n  // Options\n  private _useGrabCursor: PanoControlOptions[\"useGrabCursor\"];\n  private _disableContextMenu: PanoControlOptions[\"disableContextMenu\"];\n\n  // Internal Values\n  private _camera: Camera;\n  private _controlEl: HTMLElement;\n  private _rotateControl: RotateControl;\n  private _zoomControl: ZoomControl;\n  private _gyroControl: GyroControl;\n  private _ignoreZoomScale: boolean;\n  private _enabled: boolean;\n\n  /**\n   * @copy View360#useGrabCursor\n   */\n  public get useGrabCursor() { return this._useGrabCursor; }\n  public set useGrabCursor(val: PanoControlOptions[\"useGrabCursor\"]) {\n    if (val === this._useGrabCursor) return;\n\n    this._useGrabCursor = val;\n\n    if (val && this._enabled) {\n      this._setCursor(BROWSER.CURSOR.GRAB);\n    } else if (!val) {\n      this._setCursor(BROWSER.CURSOR.NONE);\n    }\n  }\n\n  /**\n   * @copy View360#disableContextMenu\n   */\n  public get disableContextMenu() { return this._disableContextMenu; }\n  public set disableContextMenu(val: PanoControlOptions[\"disableContextMenu\"]) {\n    if (val === this._disableContextMenu) return;\n\n    this._disableContextMenu = val;\n\n    if (val && this._enabled) {\n      this._blockContextMenu();\n    } else if (!val) {\n      this._restoreContextMenu();\n    }\n  }\n\n  /**\n   * @copy View360#disableContextMenu\n   */\n  public get scrollable() { return this._rotateControl.scrollable; }\n  public set scrollable(val: PanoControlOptions[\"scrollable\"]) { this._rotateControl.scrollable = val; }\n  /**\n   * @copy View360#disableContextMenu\n   */\n  public get wheelScrollable() { return this._zoomControl.scrollable; }\n  public set wheelScrollable(val: PanoControlOptions[\"wheelScrollable\"]) { this._zoomControl.scrollable = val; }\n  /**\n   * When `true`, disables rotation slow-down by zoom-value.\n   * @ko `true`일 경우 줌 된 정도에 따라 회전속도를 늦추는 동작을 비활성화합니다.\n   * @since 4.0.0\n   */\n  public get ignoreZoomScale() { return this._ignoreZoomScale; }\n  public set ignoreZoomScale(val: boolean) { this._ignoreZoomScale = val; }\n\n  /**\n   * Whether the control is enabled or not\n   * @ko 컨트롤 활성화 여부를 가리키는 값\n   * @readonly\n   * @since 4.0.0\n   */\n  public get enabled() { return this._enabled; }\n  /**\n   * @copy View360#rotate\n   */\n  public get rotate() { return this._rotateControl; }\n  /**\n   * @copy View360#zoom\n   */\n  public get zoom() { return this._zoomControl; }\n  /**\n   * @copy View360#gyro\n   */\n  public get gyro() { return this._gyroControl; }\n\n  /**\n   * Whether one of the controls is animating at the moment\n   * @ko 현재 컨트롤 중 하나라도 동작중인지 여부를 나타내는 값\n   * @readonly\n   * @since 4.0.0\n   */\n  public get animating() {\n    return this._rotateControl.animating\n      || this._zoomControl.animating\n      || this._gyroControl.animating;\n  }\n\n  /**\n   * Create new instance.\n   * @ko 새 인스턴스를 생성합니다.\n   * @param element - Canvas element {@ko 캔버스 엘리먼트}\n   * @param camera - Camera instance {@ko Camera 인스턴스}\n   * @param options - Options for PanoControl {@ko PanoControl 옵션들}\n   */\n  public constructor(element: HTMLElement, camera: Camera, {\n    useGrabCursor,\n    scrollable,\n    wheelScrollable,\n    disableContextMenu,\n    rotate,\n    zoom,\n    gyro\n  }: PanoControlOptions) {\n    // Bind Options\n    this._useGrabCursor = useGrabCursor;\n    this._disableContextMenu = disableContextMenu;\n\n    // Set internal values\n    this._camera = camera;\n    this._controlEl = element;\n    this._ignoreZoomScale = false;\n    this._enabled = false;\n\n    this._rotateControl = new RotateControl(element, !rotate, getObjectOption(rotate));\n    this._zoomControl = new ZoomControl(element, !zoom, getObjectOption(zoom));\n    this._gyroControl = new GyroControl(!gyro, getObjectOption(gyro));\n\n    this._rotateControl.scrollable = scrollable;\n    this._zoomControl.scrollable = wheelScrollable;\n\n    this._bindEvents();\n  }\n\n  /**\n   * Destroy the instance and remove all event listeners attached.\n   * This also will reset CSS cursor to initial.\n   * @ko 인스턴스를 삭제하고 부착된 모든 이벤트 리스너를 제거합니다.\n   * 또한, 캔버스에 적용된 CSS cursor도 제거합니다.\n   * @since 4.0.0\n   */\n  public destroy(): void {\n    this.disable();\n    this._rotateControl.destroy();\n    this._zoomControl.destroy();\n    this._setCursor(BROWSER.CURSOR.NONE);\n  }\n\n  /**\n   * Resize control to match target size.\n   * @ko 컨트롤이 내부에 캐시하고 있는 크기값을 갱신합니다.\n   * @param width New width {@ko 변경된 너비}\n   * @param height New height {@ko 변경된 높이}\n   * @since 4.0.0\n   */\n  public resize(width: number, height: number): void {\n    const camera = this._camera;\n\n    this._rotateControl.resize(camera.fov, camera.aspect, width, height);\n  }\n\n  /**\n   * Enable this control and add event listeners.\n   * @ko 컨트롤을 활성화하고 이벤트 리스너들을 추가합니다.\n   * @since 4.0.0\n   */\n  public async enable(): Promise<void> {\n    if (this._enabled) return;\n\n    if (!this._rotateControl.enableBlocked) {\n      this._rotateControl.enable();\n    }\n\n    if (!this._zoomControl.enableBlocked) {\n      this._zoomControl.enable();\n    }\n\n    if (!this._gyroControl.enableBlocked) {\n      if (await GyroControl.isAvailable()) {\n        this._gyroControl.enable();\n      }\n    }\n\n    this.sync();\n\n    if (this._disableContextMenu) {\n      this._blockContextMenu();\n    }\n\n    this._enabled = true;\n  }\n\n  /**\n   * Disable this control and remove all event listeners\n   * @ko 컨트롤을 비활성화하고 모든 이벤트 리스너들을 제거합니다.\n   * @since 4.0.0\n   */\n  public disable(): void {\n    if (!this._enabled) return;\n\n    this._rotateControl.disable();\n    this._zoomControl.disable();\n    this._gyroControl.disable();\n\n    this._restoreContextMenu();\n\n    this._enabled = false;\n  }\n\n  /**\n   * Update control by given deltaTime\n   * @ko 컨트롤을 주어진 시간만큼 업데이트합니다.\n   * @param delta Number of milisec to update {@ko 업데이트할 시간, 밀리초 단위}\n   * @since 4.0.0\n   * @internal\n   */\n  public update(delta: number): void {\n    const camera = this._camera;\n    const rotateControl = this._rotateControl;\n    const zoomControl = this._zoomControl;\n    const gyroControl = this._gyroControl;\n\n    zoomControl.update(delta);\n    const zoom = hfovToZoom(camera.fov, zoomControl.zoom);\n\n    // Slow down rotation on zoom-in\n    const zoomScale = this._ignoreZoomScale ? 1 : Math.max(zoom, 1);\n    rotateControl.setZoomScale(zoomScale);\n    rotateControl.updateRange(camera, zoom);\n    rotateControl.update(delta);\n\n    const yaw = rotateControl.yaw;\n    const pitch = rotateControl.pitch;\n\n    if (gyroControl.enabled) {\n      gyroControl.update(camera, yaw, pitch, zoom);\n    } else {\n      camera.lookAt({\n        yaw: yaw.val,\n        pitch: pitch.val,\n        zoom\n      });\n    }\n  }\n\n  /**\n   * Synchronize this control's state to current camera state\n   * @ko 컨트롤을 카메라의 현재 상태와 동기화합니다.\n   * @since 4.0.0\n   */\n  public sync(): void {\n    const camera = this._camera;\n\n    this._zoomControl.sync(camera);\n    this._rotateControl.sync(camera);\n  }\n\n  private _blockContextMenu() {\n    const el = this._controlEl;\n\n    el.addEventListener(BROWSER.EVENTS.CONTEXT_MENU, this._preventContextMenu);\n  }\n\n  private _restoreContextMenu() {\n    const el = this._controlEl;\n\n    el.removeEventListener(BROWSER.EVENTS.CONTEXT_MENU, this._preventContextMenu);\n  }\n\n  private _preventContextMenu = (evt: MouseEvent) => {\n    evt.preventDefault();\n  };\n\n  private _setCursor(newCursor: ValueOf<typeof BROWSER.CURSOR>) {\n    if (!this._useGrabCursor && newCursor !== BROWSER.CURSOR.NONE) return;\n\n    const targetEl = this._controlEl;\n    targetEl.style.cursor = newCursor;\n  }\n\n  private _bindEvents() {\n    const rotateControl = this._rotateControl;\n    const zoomControl = this._zoomControl;\n\n    rotateControl.on(CONTROL_EVENTS.INPUT_START, this._onInputStart);\n    rotateControl.on(CONTROL_EVENTS.INPUT_END, this._onInputEnd);\n    rotateControl.on(CONTROL_EVENTS.ENABLE, this._onEnable);\n    rotateControl.on(CONTROL_EVENTS.DISABLE, this._onDisable);\n    zoomControl.on(CONTROL_EVENTS.ENABLE, this._onEnable);\n    zoomControl.on(CONTROL_EVENTS.DISABLE, this._onDisable);\n    this._camera.on(CAMERA_EVENTS.ANIMATION_END, this._onCameraAnimationEnd);\n  }\n\n  private _onInputStart = (evt: RotateControlEvents[typeof CONTROL_EVENTS.INPUT_START]) => {\n    if (this._useGrabCursor && !evt.isKeyboard) {\n      this._setCursor(BROWSER.CURSOR.GRABBING);\n    }\n  };\n\n  private _onInputEnd = (evt: RotateControlEvents[typeof CONTROL_EVENTS.INPUT_END]) => {\n    if (this._useGrabCursor && !evt.isKeyboard) {\n      this._setCursor(BROWSER.CURSOR.GRAB);\n    }\n  };\n\n  private _onEnable = ({\n    control,\n    updateCursor\n  }: {\n    control: CameraControl;\n    updateCursor: boolean;\n  }) => {\n    if (updateCursor && this._useGrabCursor) {\n      this._setCursor(BROWSER.CURSOR.GRAB);\n    }\n\n    control.sync(this._camera);\n  };\n\n  private _onDisable = ({\n    updateCursor\n  }: {\n    updateCursor: boolean\n  }) => {\n    if (updateCursor) {\n      this._setCursor(BROWSER.CURSOR.NONE);\n    }\n  };\n\n  private _onCameraAnimationEnd = ({ animation }: { animation: CameraAnimation }) => {\n    animation.getFinishPromise().then(() => {\n      this.sync();\n    });\n  };\n}\n\nexport default PanoControl;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport TextureVideo from \"./TextureVideo\";\nimport TextureCube from \"./TextureCube\";\n\n/**\n * @hidden\n */\nabstract class Texture {\n  public width: number;\n  public height: number;\n  public flipY: boolean;\n  public wrapS: number;\n  public wrapT: number;\n\n  public constructor({\n    width,\n    height,\n    flipY\n  }: {\n    width: number;\n    height: number;\n    flipY: boolean;\n  }) {\n    this.width = width;\n    this.height = height;\n    this.flipY = flipY;\n    this.wrapS = WebGLRenderingContext.CLAMP_TO_EDGE;\n    this.wrapT = WebGLRenderingContext.CLAMP_TO_EDGE;\n  }\n\n  public destroy() {\n    // DO_NOTHING\n  }\n\n  public isVideo(): this is TextureVideo {\n    return false;\n  }\n\n  public isCube(): this is TextureCube {\n    return false;\n  }\n}\n\nexport default Texture;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Texture from \"./Texture\";\n\n/**\n * @hidden\n */\nclass Texture2D extends Texture {\n  public source: Exclude<TexImageSource, ImageData>;\n\n  public constructor({\n    source,\n    width,\n    height,\n    flipY\n  }: {\n    source: Exclude<TexImageSource, ImageData>;\n    width: number;\n    height: number;\n    flipY: boolean;\n  }) {\n    super({\n      width,\n      height,\n      flipY\n    });\n\n    this.source = source;\n  }\n}\n\nexport default Texture2D;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Texture2D from \"./Texture2D\";\n\n/**\n * @hidden\n */\nclass TextureVideo extends Texture2D {\n  public source: HTMLVideoElement;\n\n  public destroy() {\n    const video = this.source;\n\n    video.pause();\n    video.removeAttribute(\"src\");\n    video.load();\n  }\n\n  public isVideo(): this is TextureVideo { return true; }\n\n  public isPaused() {\n    const video = this.source;\n\n    return video.paused || video.ended || video.readyState <= 2;\n  }\n\n  public hasAudio() {\n    const video = this.source as any;\n\n    if (video.audioTracks) {\n      return video.audioTracks.length > 0;\n    }\n\n    if (video.webkitAudioDecodedByteCount != null) {\n      return video.webkitAudioDecodedByteCount > 0;\n    }\n\n    if (video.mozHasAudio != null) {\n      return video.mozHasAudio;\n    }\n\n    // We don't know whether the video has audio or not, return true\n    return true;\n  }\n}\n\nexport default TextureVideo;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Texture from \"./Texture\";\n\n/**\n * @hidden\n */\nclass TextureCube extends Texture {\n  public sources: TexImageSource[];\n\n  public constructor({\n    sources,\n    width,\n    height,\n    flipY\n  }: {\n    sources: TexImageSource[];\n    width: number;\n    height: number;\n    flipY: boolean;\n  }) {\n    super({\n      width,\n      height,\n      flipY\n    });\n\n    this.sources = sources;\n  }\n\n  public isCube(): this is TextureCube { return true; }\n}\n\nexport default TextureCube;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport ImReady from \"@egjs/imready\";\nimport Texture from \"../texture/Texture\";\nimport Texture2D from \"../texture/Texture2D\";\nimport TextureVideo from \"../texture/TextureVideo\";\nimport TextureCube from \"../texture/TextureCube\";\nimport { getObjectOption, isString } from \"../utils\";\nimport { VideoConfig } from \"../type/external\";\nimport { ProjectionOptions } from \"../projection/Projection\";\n\n/**\n * @hidden\n */\nclass TextureLoader {\n  private _loadChecker: ImReady;\n\n  constructor() {\n    this._loadChecker = new ImReady();\n  }\n\n  public async load(src: ProjectionOptions[\"src\"], video: ProjectionOptions[\"video\"]): Promise<Texture> {\n    if (video) {\n      return this.loadVideo(src, getObjectOption(video));\n    } else {\n      if (Array.isArray(src) && src.length > 1) {\n        return this.loadCubeImage(src);\n      } else {\n        const imgSrc = Array.isArray(src) ? src[0] : src;\n        return this.loadImage(imgSrc);\n      }\n    }\n  }\n\n  public async loadImage(src: string | HTMLElement): Promise<Texture2D> {\n    const images = this._toImageArray(src);\n\n    return this._load(images, resolve => {\n      const image = images[0];\n\n      resolve(new Texture2D({\n        source: image,\n        width: image.naturalWidth,\n        height: image.naturalHeight,\n        flipY: true\n      }));\n    });\n  }\n\n  public async loadCubeImage(src: Array<string | HTMLElement>): Promise<TextureCube> {\n    const images = this._toImageArray(src);\n\n    return this._load(images, resolve => {\n      resolve(new TextureCube({\n        sources: images,\n        width: images[0].naturalWidth,\n        height: images[0].naturalHeight,\n        flipY: false\n      }));\n    });\n  }\n\n  public async loadVideo(src: ProjectionOptions[\"src\"], videoConfig: Partial<VideoConfig>): Promise<TextureVideo> {\n    const config: VideoConfig = {\n      autoplay: true,\n      muted: true,\n      loop: false,\n      volume: 1,\n      ...videoConfig,\n    };\n    const video = this._toVideoElement(src, config);\n\n    return this._load([video], resolve => {\n      const { autoplay, muted } = config;\n\n      video.currentTime = 0;\n      if (autoplay && muted) {\n        video.play().catch(() => void 0);\n      }\n\n      resolve(new TextureVideo({\n        source: video,\n        width: video.videoWidth,\n        height: video.videoHeight,\n        flipY: true\n      }));\n    });\n  }\n\n  private _load<T>(content: HTMLElement[], onLoad: (resolve: (value: T) => void) => void): Promise<T> {\n    const loader = this._loadChecker;\n\n    return new Promise((resolve, reject) => {\n      loader.once(\"ready\", evt => {\n        if (evt.errorCount > 0) return;\n\n        onLoad(resolve);\n      });\n\n      loader.once(\"error\", reject);\n      loader.check(content);\n    });\n  }\n\n  private _toImageArray(src: ProjectionOptions[\"src\"]): HTMLImageElement[] {\n    const srcs = Array.isArray(src) ? src : [src];\n\n    return srcs.map(source => {\n      if (isString(source)) {\n        const imgEl = new Image();\n\n        imgEl.crossOrigin = \"anonymous\";\n        imgEl.src = source;\n\n        return imgEl;\n      } else {\n        return source as HTMLImageElement;\n      }\n    });\n  }\n\n  private _toVideoElement(src: ProjectionOptions[\"src\"], {\n    muted,\n    loop,\n    volume\n  }: VideoConfig): HTMLVideoElement {\n    if (src instanceof HTMLVideoElement) {\n      return src;\n    }\n\n    const video = document.createElement(\"video\");\n\n    video.crossOrigin = \"anonymous\";\n    video.playsInline = true;\n    video.setAttribute(\"webkit-playsinline\", \"\");\n    video.muted = muted;\n    video.volume = volume;\n    video.loop = loop;\n\n    if (Array.isArray(src)) {\n      src.forEach(source => this._appendSourceElement(video, source));\n    } else {\n      this._appendSourceElement(video, src);\n    }\n\n    const sourceCount = video.querySelectorAll(\"source\").length;\n    if (sourceCount > 0 && video.readyState < 1) {\n      video.load();\n    }\n\n    return video;\n  }\n\n  private _appendSourceElement(video: HTMLMediaElement, src: string | HTMLElement) {\n    if (src instanceof HTMLSourceElement) {\n      return src;\n    }\n\n    const sourceEl = document.createElement(\"source\");\n    sourceEl.src = src as string;\n    video.appendChild(sourceEl);\n  }\n}\n\nexport default TextureLoader;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\n\n/**\n * @internal\n */\nclass FrameAnimator {\n  public maxDeltaTime: number;\n\n  private _context: Window | XRSession;\n  private _rafId: number;\n  private _rafTimer: number;\n  private _lastUpdateTime: number;\n\n  /** */\n  public constructor(maxDeltaTime: number, context: Window | XRSession = window) {\n    this.maxDeltaTime = maxDeltaTime;\n\n    this._context = context;\n    this._rafId = -1;\n    this._rafTimer = -1;\n    this._lastUpdateTime = -1;\n  }\n\n  public start(callback: (delta: number, ...args: any[]) => any) {\n    const context = this._context;\n\n    // No context / callback set\n    if (!context || !callback) return;\n\n    // Animation already started\n    if (this._rafId >= 0 || this._rafTimer >= 0) return;\n\n    const loop = (_time: number, frame?: XRFrame) => {\n      const time = Date.now();\n      const delta = Math.min(time - this._lastUpdateTime, this.maxDeltaTime * 1000);\n\n      callback(delta, frame);\n\n      this._lastUpdateTime = time;\n      this._rafId = context.requestAnimationFrame(loop);\n    };\n\n    this._lastUpdateTime = Date.now();\n    this._rafId = context.requestAnimationFrame(loop);\n  }\n\n  public stop() {\n    if (this._rafId >= 0) {\n      this._context.cancelAnimationFrame(this._rafId);\n    }\n\n    if (this._rafTimer >= 0) {\n      clearTimeout(this._rafTimer);\n    }\n\n    this._rafId = -1;\n    this._rafTimer = -1;\n  }\n\n  public changeContext(context: Window | XRSession) {\n    this.stop();\n    this._context = context;\n  }\n}\n\nexport default FrameAnimator;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport * as BROWSER from \"../const/browser\";\n\n/**\n * Automatic resizer that uses both ResizeObserver and window resize event\n */\nclass AutoResizer {\n  private _enabled: boolean;\n  private _resizeObserver: ResizeObserver | null;\n  private _useResizeObserver: boolean;\n  private _onResize: () => any;\n\n  public get useResizeObserver() { return this._useResizeObserver; }\n\n  /**\n   * Returns whether AutoResizer is enabled\n   */\n  public get enabled() { return this._enabled; }\n\n  /** */\n  public constructor(useResizeObserver: boolean, onResize: () => any) {\n    this._useResizeObserver = useResizeObserver;\n\n    this._enabled = false;\n    this._resizeObserver = null;\n    this._onResize = onResize;\n  }\n\n  /**\n   * Enable resizer\n   */\n  public enable(element: HTMLElement): this {\n    if (this._enabled) {\n      this.disable();\n    }\n\n    if (this._useResizeObserver && !!window.ResizeObserver) {\n      const bbox = element.getBoundingClientRect();\n      const resizeImmediate = bbox.width !== 0 || bbox.height !== 0;\n\n      const resizeObserver = new ResizeObserver(resizeImmediate ? this._skipFirstResize : this._onResize);\n\n      resizeObserver.observe(element);\n\n      this._resizeObserver = resizeObserver;\n    } else {\n      window.addEventListener(BROWSER.EVENTS.RESIZE, this._onResize);\n    }\n\n    this._enabled = true;\n\n    return this;\n  }\n\n  /**\n   * Disable resizer\n   */\n  public disable(): this {\n    if (!this._enabled) return this;\n\n    const resizeObserver = this._resizeObserver;\n    if (resizeObserver) {\n      resizeObserver.disconnect();\n      this._resizeObserver = null;\n    } else {\n      window.removeEventListener(BROWSER.EVENTS.RESIZE, this._onResize);\n    }\n\n    this._enabled = false;\n\n    return this;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/member-ordering\n  private _skipFirstResize = (() => {\n    let isFirstResize = true;\n\n    return (() => {\n      if (isFirstResize) {\n        isFirstResize = false;\n\n        return;\n      }\n      this._onResize();\n    });\n  })();\n}\n\nexport default AutoResizer;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Camera from \"./Camera\";\nimport PanoControl from \"../control/PanoControl\";\nimport View360 from \"../View360\";\nimport * as BROWSER from \"../const/browser\";\nimport { CONTROL_EVENTS } from \"../const/internal\";\nimport { circulate, getObjectOption } from \"../utils\";\n\n/**\n * Options for {@link Autoplay}\n * @ko {@link Autoplay}용 옵션들\n * @since 4.0.0\n */\nexport interface AutoplayOptions {\n  /**\n   * @copy Autoplay#delay\n   */\n  delay: number;\n  /**\n   * @copy Autoplay#delayOnMouseLeave\n   */\n  delayOnMouseLeave: number;\n  /**\n   * @copy Autoplay#speed\n   */\n  speed: number;\n  /**\n   * @copy Autoplay#pauseOnHover\n   */\n  pauseOnHover: boolean;\n  /**\n   * @copy Autoplay#canInterrupt\n   */\n  canInterrupt: boolean;\n  /**\n   * @copy Autoplay#disableOnInterrupt\n   */\n  disableOnInterrupt: boolean;\n}\n\n/**\n * A manager class for autoplay feature.\n * @ko Autoplay 기능의 매니저 클래스.\n * @since 4.0.0\n */\nclass Autoplay {\n  // Options\n  private _delay: number;\n  private _delayOnMouseLeave: number;\n  private _speed: number;\n  private _pauseOnHover: boolean;\n  private _canInterrupt: boolean;\n  private _disableOnInterrupt: boolean;\n\n  // Internal values\n  private _enableBlocked: boolean;\n  private _camera: Camera;\n  private _control: PanoControl;\n  private _element: HTMLElement;\n  private _enabled: boolean;\n  private _interrupted: boolean;\n  private _interruptionTimer: number;\n  private _hovering: boolean;\n\n  /**\n   * Whether autoplay is enabled or not\n   * @ko 자동재생 활성화 여부를 나타내는 값\n   * @readonly\n   * @since 4.0.0\n   */\n  public get enabled() { return this._enabled; }\n  /**\n   * @hidden\n   */\n  public get enableBlocked() { return this._enableBlocked; }\n  /**\n   * Whether autoplay is updating the camera at the moment\n   * @ko 현재 자동재생이 동작중인지 여부를 나타내는 값\n   * @readonly\n   * @since 4.0.0\n   */\n  public get playing() {\n    return this._enabled && !this._interrupted;\n  }\n\n  /**\n   * Reactivation delay after mouse input in milisecond.\n   * @ko 재활성화되기까지의 시간 (밀리초 단위)\n   * @default 2000\n   * @since 4.0.0\n   */\n  public get delay() { return this._delay; }\n  public set delay(val: number) { this._delay = val; }\n\n  /**\n   * Reactivation delay after mouse leave when using {@link AutoplayOptions#pauseOnHover}\n   * @ko {@link AutoplayOptions#pauseOnHover} 사용시 마우스가 캔버스 영역을 떠난 뒤 자동재생이 다시 활성화되기까지의 시간\n   * @default 0\n   * @since 4.0.0\n   */\n  public get delayOnMouseLeave() { return this._delayOnMouseLeave; }\n  public set delayOnMouseLeave(val: number) { this._delayOnMouseLeave = val; }\n\n  /**\n   * Y-axis(yaw) rotation speed\n   * @ko Y-축 회전(yaw)의 속도\n   * @default 1\n   * @since 4.0.0\n   */\n  public get speed() { return this._speed; }\n  public set speed(val: number) { this._speed = val; }\n\n  /**\n   * Whether to pause rotation on mouse hover\n   * @ko 마우스가 캔버스 영역에 들어왔을 때 자동재생을 정지할지 여부\n   * @default false\n   * @since 4.0.0\n   */\n  public get pauseOnHover() { return this._pauseOnHover; }\n  public set pauseOnHover(val: boolean) { this._pauseOnHover = val; }\n\n  /**\n   * Whether user can interrupt the rotation with click/wheel input\n   * @ko 클릭이나 휠같은 사용자 인터랙션시 자동재생을 멈출지 여부\n   * @default true\n   * @since 4.0.0\n   */\n  public get canInterrupt() { return this._canInterrupt; }\n  public set canInterrupt(val: boolean) { this._canInterrupt = val; }\n\n  /**\n   * Whether to disable autoplay on user interrupt\n   * @ko 사용자 동작에 의해 자동재생이 정지할 때, {@link Autoplay#disable}을 호출하여 자동재생을 영구히 정지할지 여부\n   * @default false\n   * @since 4.0.0\n   */\n  public get disableOnInterrupt() { return this._disableOnInterrupt; }\n  public set disableOnInterrupt(val: boolean) { this._disableOnInterrupt = val; }\n\n  /**\n   * Create new AutoPlayer instance\n   * @param camera - Instance of the {@link Camera} {@ko Camera의 인스턴스}\n   * @param element - Canvas element {@ko 캔버스 엘리먼트}\n   * @param options - Autoplay options {@ko 자동재생 옵션들}\n   * @since 4.0.0\n   */\n  public constructor(viewer: View360, element: HTMLElement, options: boolean | Partial<AutoplayOptions>) {\n    this._camera = viewer.camera;\n    this._control = viewer.control;\n    this._element = element;\n\n    this._enabled = false;\n    this._interrupted = false;\n    this._interruptionTimer = -1;\n    this._hovering = false;\n\n    const {\n      delay = 2000,\n      delayOnMouseLeave = 0,\n      speed = 1,\n      pauseOnHover = false,\n      canInterrupt = true,\n      disableOnInterrupt = false\n    } = getObjectOption(options);\n\n    this._enableBlocked = !options;\n    this._delay = delay;\n    this._delayOnMouseLeave = delayOnMouseLeave;\n    this._speed = speed;\n    this._pauseOnHover = pauseOnHover;\n    this._canInterrupt = canInterrupt;\n    this._disableOnInterrupt = disableOnInterrupt;\n  }\n\n  /**\n   * Destroy the instance and remove all event listeners attached\n   * @ko 인스턴스를 제거하고 연결된 모든 이벤트 핸들러를 삭제합니다.\n   * @since 4.0.0\n   */\n  public destroy(): void {\n    this.disable();\n  }\n\n  /**\n   * Rotate camera by given deltaTime\n   * @ko 주어진 deltaTime만큼 카메라를 회전시킵니다.\n   * @param deltaTime - Number of milisec to update {@ko 업데이트할 시간, 밀리초 단위}\n   * @since 4.0.0\n   */\n  public update(deltaTime: number): void {\n    if (!this._enabled) return;\n    if (this._interrupted) {\n      if (this._disableOnInterrupt) {\n        this.disable();\n      }\n\n      return;\n    }\n\n    const camera = this._camera;\n    const delta = -this._speed * deltaTime / 100;\n\n    camera.yaw = circulate(camera.yaw + delta, 0, 360);\n  }\n\n  /**\n   * Enable autoplay and add event listeners.\n   * @ko 자동재생을 활성화하고 이벤트리스너들을 추가합니다.\n   * @since 4.0.0\n   */\n  public enable(): void {\n    const control = this._control;\n    const element = this._element;\n\n    if (this._enabled || control.gyro.enabled) return;\n\n    control.rotate.on(CONTROL_EVENTS.INPUT_START, this._onInputStart);\n    control.rotate.on(CONTROL_EVENTS.INPUT_END, this._onInputEnd);\n\n    control.zoom.on(CONTROL_EVENTS.INPUT_START, this._onInputStart);\n    control.zoom.on(CONTROL_EVENTS.INPUT_END, this._onInputEnd);\n\n    control.gyro.on(CONTROL_EVENTS.ENABLE, this._onGyroEnable);\n\n    element.addEventListener(BROWSER.EVENTS.MOUSE_ENTER, this._onMouseEnter, false);\n    element.addEventListener(BROWSER.EVENTS.MOUSE_LEAVE, this._onMouseLeave, false);\n\n    this._enabled = true;\n    this._enableBlocked = false;\n  }\n\n  /**\n   * Enable autoplay after current `delay` value.\n   * @ko 현재의 `delay`값만큼 시간이 지난 다음에 자동재생을 활성화합니다.\n   * @since 4.0.0\n   */\n  public enableAfterDelay() {\n    this.enable();\n    this._interrupted = true;\n    this._setUninterruptedAfterDelay(this._delay);\n  }\n\n  /**\n   * Disable autoplay and remove all event handlers.\n   * @ko 자동재생을 비활성화하고 모든 이벤트 핸들러를 제거합니다.\n   * @since 4.0.0\n   */\n  public disable(): void {\n    if (!this._enabled) return;\n\n    const control = this._control;\n    const element = this._element;\n\n    control.rotate.off(CONTROL_EVENTS.INPUT_START, this._onInputStart);\n    control.rotate.off(CONTROL_EVENTS.INPUT_END, this._onInputEnd);\n\n    control.zoom.off(CONTROL_EVENTS.INPUT_START, this._onInputStart);\n    control.zoom.off(CONTROL_EVENTS.INPUT_END, this._onInputEnd);\n\n    control.gyro.off(CONTROL_EVENTS.ENABLE, this._onGyroEnable);\n\n    element.removeEventListener(BROWSER.EVENTS.MOUSE_ENTER, this._onMouseEnter, false);\n    element.removeEventListener(BROWSER.EVENTS.MOUSE_LEAVE, this._onMouseLeave, false);\n\n    this._enabled = false;\n    this._interrupted = false;\n    this._hovering = false;\n\n    this._clearTimeout();\n  }\n\n  private _onInputStart = () => {\n    if (!this._canInterrupt) return;\n\n    this._interrupted = true;\n    this._clearTimeout();\n  };\n\n  private _onInputEnd = () => {\n    this._setUninterruptedAfterDelay(this._delay);\n  };\n\n  private _onGyroEnable = () => {\n    this.disable();\n  };\n\n  private _onMouseEnter = () => {\n    if (!this._pauseOnHover) return;\n    this._interrupted = true;\n    this._hovering = true;\n  };\n\n  private _onMouseLeave = () => {\n    if (!this._pauseOnHover) return;\n    this._hovering = false;\n    this._setUninterruptedAfterDelay(this._delayOnMouseLeave);\n  };\n\n  private _setUninterruptedAfterDelay(delay: number): void {\n    if (this._hovering) return;\n\n    this._clearTimeout();\n\n    if (delay > 0) {\n      this._interruptionTimer = window.setTimeout(() => {\n        this._interrupted = false;\n        this._interruptionTimer = -1;\n      }, delay);\n    } else {\n      this._interrupted = false;\n      this._interruptionTimer = -1;\n    }\n  }\n\n  private _clearTimeout(): void {\n    if (this._interruptionTimer >= 0) {\n      window.clearTimeout(this._interruptionTimer);\n      this._interruptionTimer = -1;\n    }\n  }\n}\n\nexport default Autoplay;\n","import { mat4 } from \"gl-matrix\";\nimport Component from \"@egjs/component\";\nimport WebGLContext from \"./WebGLContext\";\nimport GyroControl from \"../control/GyroControl\";\nimport * as BROWSER from \"../const/browser\";\nimport { SESSION_VR, XR_REFERENCE_SPACE } from \"../const/internal\";\nimport { EVENTS } from \"../const/external\";\n\ninterface XRSessionOptions extends XRSessionInit {\n  [key: string]: any;\n}\n\n/**\n * WebXR manager class\n * @ko WebXR 매니저 클래스\n * @since 4.0.0\n */\nclass XRManager extends Component<{\n  /**\n   * An event that fires on entering VR session\n   * @ko VR 세션 진입시에 트리거되는 이벤트\n   * @eventName vrStart\n   * @eventOf XRManager\n   * @version 4.0.0\n   */\n  [EVENTS.VR_START]: {\n    session: XRSession;\n  };\n  /**\n   * An event that fires on exiting VR session\n   * @ko VR 세션에서 나갈 때 트리거되는 이벤트\n   * @eventName vrEnd\n   * @eventOf XRManager\n   * @version 4.0.0\n   */\n  [EVENTS.VR_END]: void;\n}> {\n  private _ctx: WebGLContext;\n  private _xrSession: XRSession | null;\n  private _xrRefSpace: XRReferenceSpace | null;\n  private _options: XRSessionOptions;\n\n  /**\n   * Create new instance.\n   * 새 인스턴스를 생성합니다.\n   * @param ctx - Instance of WebGL context helper {@ko WebGL 콘텍스트 헬퍼의 인스턴스}\n   * @param options - Options {@ko 옵션들}\n   */\n  public constructor(ctx: WebGLContext, options: XRSessionOptions = {}) {\n    super();\n\n    this._xrSession = null;\n    this._xrRefSpace = null;\n    this._ctx = ctx;\n    this._options = options;\n  }\n\n  /**\n   * Destroy instance and end XR session if there was any.\n   * @ko 인스턴스를 제거하고, XR 세션이 존재할 경우 종료합니다.\n   * @since 4.0.0\n   */\n  public destroy = () => {\n    this.exit();\n    this.off();\n  };\n\n  /**\n   * Returns WebXR availability.\n   * @ko WebXR 사용 가능 여부를 반환합니다.\n   * @since 4.0.0\n   */\n  public async isAvailable(): Promise<boolean> {\n    // eslint-disable-next-line compat/compat\n    const xr = window.navigator.xr;\n    if (!xr) return false;\n\n    return xr.isSessionSupported(SESSION_VR)\n      .then(available => {\n        return available;\n      }).catch(() => {\n        return false;\n      });\n  }\n\n  /**\n   * Enter VR session\n   * @ko VR 세션에 진입합니다.\n   * @since 4.0.0\n   */\n  public async enter() {\n    const ctx = this._ctx;\n\n    // eslint-disable-next-line compat/compat\n    const xr = window.navigator.xr;\n    if (!xr) return;\n\n    await GyroControl.requestSensorPermission();\n\n    const options = {\n      ...{\n        requiredFeatures: [XR_REFERENCE_SPACE]\n      },\n      ...this._options\n    };\n\n    await ctx.makeXRCompatible();\n\n    const session = await xr.requestSession(SESSION_VR, options);\n    ctx.bindXRLayer(session);\n\n    const refSpace = await session.requestReferenceSpace(XR_REFERENCE_SPACE);\n\n    this._setSession(session, refSpace);\n\n    this.trigger(EVENTS.VR_START, {\n      session\n    });\n  }\n\n  /**\n   * Exit VR session\n   * @ko VR 세션에서 나갑니다.\n   * @since 4.0.0\n   */\n  public exit() {\n    const xrSession = this._xrSession;\n\n    if (xrSession) {\n      xrSession.end()\n        .catch(() => void 0);\n    }\n\n    this._xrSession = null;\n    this._xrRefSpace = null;\n  }\n\n  /**\n   * @hidden\n   */\n  public canRender(frame: XRFrame) {\n    const refSpace = this._xrRefSpace;\n\n    if (!refSpace) return false;\n\n    const pose = frame.getViewerPose(refSpace);\n\n    return !!pose;\n  }\n\n  /**\n   * @hidden\n   */\n  public getEyeParams(frame: XRFrame): Array<{\n    viewport: XRViewport;\n    vMatrix: mat4;\n    pMatrix: mat4;\n  }> | null {\n    const session = frame.session;\n    const pose = frame.getViewerPose(this._xrRefSpace!);\n\n    if (!pose) return null;\n\n    const glLayer = session.renderState.baseLayer;\n\n    if (!glLayer) return null;\n\n    return pose.views.map(view => {\n      const viewport = glLayer.getViewport(view)!;\n      const vMatrix = view.transform.inverse.matrix;\n\n      return {\n        viewport,\n        vMatrix,\n        pMatrix: view.projectionMatrix\n      };\n    });\n  }\n\n  private _setSession(session: XRSession, refSpace: XRReferenceSpace) {\n    this._xrSession = session;\n    this._xrRefSpace = refSpace;\n\n    session.addEventListener(BROWSER.EVENTS.XR_END, this._onSessionEnd);\n  }\n\n  private _onSessionEnd = () => {\n    this.exit();\n    this.trigger(EVENTS.VR_END);\n  }\n}\n\nexport default XRManager;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport { vec3 } from \"gl-matrix\";\n\n/**\n * Hotspot data\n * @ko 핫스팟 데이터\n * @since 4.0.0\n */\nclass Hotspot {\n  /**\n   * HTMLElement of the hotspot\n   * @ko 핫스팟의 HTMLElement\n   * @since 4.0.0\n   */\n  public readonly element: HTMLElement;\n  /**\n   * Position to render hotspot\n   * @ko 핫스팟을 렌더링할 위치\n   * @since 4.0.0\n   */\n  public readonly position: vec3;\n\n  public constructor(element: HTMLElement, position: vec3) {\n    this.element = element;\n    this.position = position;\n  }\n}\n\nexport default Hotspot;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport { vec2, vec3 } from \"gl-matrix\";\nimport Hotspot from \"./Hotspot\";\nimport Camera from \"../core/Camera\";\nimport WebGLRenderer from \"../core/WebGLRenderer\";\nimport View360Error from \"../core/View360Error\";\nimport { getNullableElement } from \"../utils\";\nimport ERROR from \"../const/error\";\nimport { DEFAULT_CLASS } from \"../const/external\";\nimport { DEG_TO_RAD } from \"../const/internal\";\n\n/**\n * Options for {@link HotspotRenderer}\n * @ko {@link HotspotRenderer}용 옵션들\n * @since 4.0.0\n */\nexport interface HotspotOptions {\n  /**\n   * Apply scale for hotspots, makes their size sync with background panorama image.\n   * @ko 핫스팟에 스케일을 적용해서 배경 파노라마 이미지의 크기 변화와 동일하게 크기를 조절합니다.\n   * @since 4.0.0\n   */\n  zoom: boolean;\n}\n\n/**\n * Hotspot renderer\n * @ko Hotspot 렌더러\n * @since 4.0.0\n */\nclass HotspotRenderer {\n  // Options\n  private _zoom: HotspotOptions[\"zoom\"];\n\n  // Internal properties\n  private _containerEl: HTMLElement | null;\n  private _renderer: WebGLRenderer;\n  private _hotspots: Hotspot[];\n\n  /**\n   * Create new instance\n   * @ko 새 인스턴스를 생성합니다.\n   * @param rootEl - Container element for hotspots {@ko 핫스팟들의 컨테이너 엘리먼트}\n   * @param renderer - instance of WebGLRenderer {@ko WebGLRenderer의 인스턴스}\n   * @param options - Hotspot options {@ko Hotspot 옵션들 }\n   */\n  public constructor(rootEl: HTMLElement, renderer: WebGLRenderer, {\n    zoom = false\n  }: Partial<HotspotOptions>) {\n    this._containerEl = getNullableElement(`.${DEFAULT_CLASS.HOTSPOT_CONTAINER}`, rootEl);\n    this._renderer = renderer;\n    this._hotspots = [];\n\n    this._zoom = zoom;\n  }\n\n  /**\n   * Refresh hotspots by collecting hotspot elements from current hotspot root element\n   * @ko 현재 핫스팟 루트 엘리먼트 내에서 핫스팟 엘리먼트들을 수집하여 갱신합니다.\n   * @throws {ERROR_CODES.INSUFFICIENT_ARGS} if data-position doesn't include all x, y, z values {@ko data-position이 x, y, z좌표를 전부 포함하고 있지 않을 때}\n   */\n  public refresh() {\n    const container = this._containerEl;\n    if (!container) return;\n\n    const hotspotEls = [].slice.apply(container.querySelectorAll(`.${DEFAULT_CLASS.HOTSPOT}`)) as HTMLElement[];\n    this._hotspots = hotspotEls.map(el => this._parseHotspot(el));\n  }\n\n  /**\n   * Render hotspots\n   * @ko 핫스팟들을 렌더링합니다.\n   * @param camera - Instance of Camera {@ko Camera의 인스턴스}\n   */\n  public render(camera: Camera) {\n    const hotspots = this._hotspots;\n    const halfWidth = this._renderer.width * 0.5;\n    const halfHeight = this._renderer.height * 0.5;\n    const zoom = camera.zoom;\n    const centerTransform = \"translate(-50%, -50%)\";\n    const zoomTransform = this._zoom ? `scale(${zoom})` : \"\";\n\n    hotspots.forEach(hotspot => {\n      const position = hotspot.position;\n      const relPos = vec3.create();\n\n      vec3.copy(relPos, position);\n      vec3.transformMat4(relPos, relPos, camera.viewMatrix);\n      vec3.transformMat4(relPos, relPos, camera.projectionMatrix);\n\n      if (relPos[2] > 1 || relPos[2] < 0) {\n        hotspot.element.classList.remove(DEFAULT_CLASS.HOTSPOT_VISIBLE);\n        return;\n      }\n\n      const screenPos = vec2.fromValues(\n        relPos[0] * halfWidth + halfWidth,\n        -relPos[1] * halfHeight + halfHeight\n      );\n\n      hotspot.element.classList.add(DEFAULT_CLASS.HOTSPOT_VISIBLE);\n      hotspot.element.style.transform = [\n        centerTransform,\n        `translate(${screenPos[0]}px, ${screenPos[1]}px)`,\n        zoomTransform\n      ].join(\" \");\n    });\n  }\n\n  private _parseHotspot(element: HTMLElement): Hotspot {\n    const yawStr = element.dataset.yaw;\n    const pitchStr = element.dataset.pitch;\n    const positionStr = element.dataset.position;\n\n    if (yawStr || pitchStr) {\n      const yaw = yawStr ? parseFloat(yawStr) : 0;\n      const pitch = pitchStr ? parseFloat(pitchStr) : 0;\n\n      const position = this._yawPitchToVec3(yaw, pitch);\n\n      return new Hotspot(element, position);\n    } else if (positionStr) {\n      const pos: number[] = positionStr.split(\" \").map(val => parseFloat(val));\n      if (pos.length < 3) {\n        throw new View360Error(ERROR.MESSAGES.INSUFFICIENT_ARGS(positionStr, \"hotspot attribute \\\"data-position\\\"\"), ERROR.CODES.INSUFFICIENT_ARGS);\n      }\n\n      return new Hotspot(element, vec3.fromValues(pos[0], pos[1], pos[2]));\n    } else {\n      // Place hotspot at yaw: 0, pitch: 0\n      const defaultPos = vec3.fromValues(0, 0, -1);\n\n      return new Hotspot(element, defaultPos);\n    }\n  }\n\n  private _yawPitchToVec3(yaw: number, pitch: number) {\n    const yawRad = yaw * DEG_TO_RAD;\n    const pitchRad = pitch * DEG_TO_RAD;\n    const position = vec3.create();\n\n    position[1] = Math.sin(pitchRad);\n    position[2] = Math.cos(pitchRad);\n\n    position[0] = position[2] * Math.sin(-yawRad);\n    position[2] = -position[2] * Math.cos(-yawRad);\n\n    return position;\n  }\n}\n\nexport default HotspotRenderer;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Geometry from \"../geometry/Geometry\";\nimport { VAO } from \"../type/internal\";\n\n/**\n * @hidden\n */\nclass VertexArrayObject {\n  public readonly obj: VAO | null;\n  public readonly geometry: Geometry;\n  public readonly buffers: {\n    indicies: WebGLBuffer;\n    position: WebGLBuffer;\n    uv: WebGLBuffer;\n  }\n\n  public get count() { return this.geometry.indicies.count; }\n\n  constructor(obj: VAO | null, geometry: Geometry, buffers: VertexArrayObject[\"buffers\"]) {\n    this.obj = obj;\n    this.geometry = geometry;\n    this.buffers = buffers;\n  }\n}\n\nexport default VertexArrayObject;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport { mat4 } from \"gl-matrix\";\nimport Uniform from \"../uniform/Uniform\";\nimport Camera from \"./Camera\";\nimport Object3D from \"./Object3D\";\nimport ShaderProgram from \"./ShaderProgram\";\nimport View360Error from \"./View360Error\";\nimport VertexArrayObject from \"./VertexArrayObject\";\nimport VertexData from \"./VertexData\";\nimport Texture from \"../texture/Texture\";\nimport Geometry from \"../geometry/Geometry\";\nimport * as BROWSER from \"../const/browser\";\nimport ERROR from \"../const/error\";\nimport { DEFAULT_CLASS } from \"../const/external\";\nimport { UniformLocations } from \"../type/internal\";\n\n/**\n * @hidden\n */\nclass WebGLContext {\n  private _canvas: HTMLCanvasElement;\n  private _gl: WebGLRenderingContext | WebGL2RenderingContext;\n  private _contextLost: boolean;\n  private _maxTextureSize: number;\n  private _isWebGL2: boolean;\n  private _debug: boolean;\n  private _extensions: {\n    vao: OES_vertex_array_object | null;\n    loseContext: WEBGL_lose_context | null;\n  };\n\n  public get canvas() { return this._canvas; }\n  public get maxTextureSize() { return this._maxTextureSize; }\n  public get isWebGL2() { return this._isWebGL2; }\n  public get supportVAO() { return this._isWebGL2 || !!this._extensions.vao; }\n  public get lost() { return this._contextLost; }\n  public get debug() { return this._debug; }\n\n  public constructor(canvas: HTMLCanvasElement, debug: boolean) {\n    this._canvas = canvas;\n    this._contextLost = false;\n    this._debug = debug;\n    this._extensions = {\n      vao: null,\n      loseContext: null\n    };\n  }\n\n  public init() {\n    const canvas = this._canvas;\n\n    const { gl, isWebGL2 } = this._getContext(canvas);\n\n    this._gl = gl;\n    this._maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n    this._isWebGL2 = isWebGL2;\n\n    if (!this._isWebGL2) {\n      this._extensions.vao = gl.getExtension(\"OES_vertex_array_object\");\n    }\n\n    this._extensions.loseContext = gl.getExtension(\"WEBGL_lose_context\");\n\n    canvas.addEventListener(BROWSER.EVENTS.CONTEXT_LOST, this._onContextLost);\n    canvas.addEventListener(BROWSER.EVENTS.CONTEXT_RESTORED, this._onContextRestore);\n\n    // gl.enable(gl.DEPTH_TEST);\n  }\n\n  public destroy() {\n    const gl = this._gl;\n    const canvas = this._canvas;\n\n    if (gl) {\n      // gl is not defined when destroy is called before init\n      gl.bindBuffer(gl.ARRAY_BUFFER, null);\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    }\n\n    canvas.removeEventListener(BROWSER.EVENTS.CONTEXT_LOST, this._onContextLost);\n    canvas.removeEventListener(BROWSER.EVENTS.CONTEXT_RESTORED, this._onContextRestore);\n  }\n\n  public forceLoseContext() {\n    const extension = this._extensions.loseContext;\n\n    if (!extension) return;\n\n    extension.loseContext();\n  }\n\n  public forceRestoreContext() {\n    const extension = this._extensions.loseContext;\n\n    if (!extension) return;\n\n    extension.restoreContext();\n  }\n\n  public clear() {\n    const gl = this._gl;\n\n    gl.clear(gl.COLOR_BUFFER_BIT);\n  }\n\n  public resize() {\n    const gl = this._gl;\n\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n  }\n\n  public viewport(x: number, y: number, width: number, height: number) {\n    const gl = this._gl;\n\n    gl.viewport(x, y, width, height);\n  }\n\n  public createVAO(geometry: Geometry, shaderProgram: ShaderProgram) {\n    const nativeVAO = this._createNativeVAO();\n\n    const vao = new VertexArrayObject(nativeVAO, geometry, {\n      indicies: this._createBuffer(),\n      position: this._createBuffer(),\n      uv: this._createBuffer()\n    });\n\n    if (nativeVAO) {\n      this._bindNativeVAO(nativeVAO);\n      this._supplyGeometryData(vao, shaderProgram);\n      this._bindNativeVAO(null);\n      this._unbindBuffers();\n    }\n\n    return vao;\n  }\n\n  public draw(vao: VertexArrayObject, shaderProgram: ShaderProgram) {\n    const gl = this._gl;\n\n    if (vao.obj) {\n      this._bindNativeVAO(vao.obj);\n    } else {\n      this._supplyGeometryData(vao, shaderProgram);\n    }\n\n    gl.drawElements(gl.TRIANGLES, vao.count, gl.UNSIGNED_SHORT, 0);\n\n    if (vao.obj) {\n      this._bindNativeVAO(null);\n    } else {\n      this._unbindBuffers();\n    }\n  }\n\n  public releaseVAO(vao: VertexArrayObject) {\n    if (vao.obj) {\n      this._deleteNativeVAO(vao.obj);\n    }\n\n    this._deleteBuffer(vao.buffers.indicies);\n    this._deleteBuffer(vao.buffers.position);\n    this._deleteBuffer(vao.buffers.uv);\n  }\n\n  public getUniformLocations<T extends Record<string, Uniform>>(program: WebGLProgram, uniforms: T): UniformLocations<T> {\n    const gl = this._gl;\n\n    const uniformLocations = Object.keys(uniforms).reduce((locations, key) => {\n      locations[key as keyof T] = gl.getUniformLocation(program, key)!;\n\n      return locations;\n    }, {} as UniformLocations<T>);\n\n    return {\n      ...this._getCommonUniformLocations(program),\n      ...uniformLocations\n    };\n  }\n\n  public updateCommonUniforms(entity: Object3D, camera: Camera, shaderProgram: ShaderProgram) {\n    const gl = this._gl;\n\n    const uniformLocations = shaderProgram.uniformLocations;\n\n    // We're using \"matrix\"(=local matrix) here for efficiency\n    // As projection doesn't require world matrix, as it doesn't have any parent or child\n    const matrix = entity.matrix;\n    const mvMatrix = mat4.create();\n    mat4.multiply(mvMatrix, camera.viewMatrix, matrix);\n\n    gl.uniformMatrix4fv(uniformLocations.uMVMatrix, false, mvMatrix);\n    gl.uniformMatrix4fv(uniformLocations.uPMatrix, false, camera.projectionMatrix);\n  }\n\n  public updateVRUniforms(shaderProgram: ShaderProgram, mvMatrix: mat4, pMatrix: mat4, eyeIndex: number) {\n    const gl = this._gl;\n\n    const uniformLocations = shaderProgram.uniformLocations;\n\n    gl.uniformMatrix4fv(uniformLocations.uMVMatrix, false, mvMatrix);\n    gl.uniformMatrix4fv(uniformLocations.uPMatrix, false, pMatrix);\n\n    if (uniformLocations.uEye) {\n      gl.uniform1f(uniformLocations.uEye, eyeIndex);\n    }\n  }\n\n  public updateUniforms(shaderProgram: ShaderProgram) {\n    const gl = this._gl;\n\n    const uniforms = shaderProgram.uniforms;\n    const uniformLocations = shaderProgram.uniformLocations;\n\n    for (const key in uniforms) {\n      const uniform = uniforms[key];\n      const location = uniformLocations[key];\n\n      if (!uniform) continue;\n\n      if (uniform.needsUpdate) {\n        uniform.update(gl, location, this._isWebGL2);\n      }\n    }\n  }\n\n  public releaseShaderResources(shaderProgram: ShaderProgram) {\n    const gl = this._gl;\n\n    const uniforms = shaderProgram.uniforms;\n\n    for (const key in uniforms) {\n      const uniform = uniforms[key];\n\n      if (!uniform) continue;\n\n      if (uniform.needsUpdate) {\n        uniform.destroy(gl);\n      }\n    }\n\n    gl.deleteProgram(shaderProgram.program);\n  }\n\n  public useProgram(shaderProgram: ShaderProgram) {\n    const gl = this._gl;\n\n    gl.useProgram(shaderProgram.program);\n  }\n\n  public createProgram(vertexShader: string, fragmentShader: string) {\n    const gl = this._gl;\n    const program = gl.createProgram()!;\n\n    const vs = this._compileShader(gl.VERTEX_SHADER, vertexShader);\n    const fs = this._compileShader(gl.FRAGMENT_SHADER, fragmentShader);\n\n    gl.attachShader(program, vs);\n    gl.attachShader(program, fs);\n    gl.bindAttribLocation(program, 0, \"position\");\n    gl.bindAttribLocation(program, 1, \"uv\");\n    gl.linkProgram(program);\n\n    if (this._debug && !gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      let shaderLog: string | null = null;\n\n      if (!gl.getShaderParameter(vs, gl.COMPILE_STATUS)) {\n        shaderLog = gl.getShaderInfoLog(vs);\n      } else if (!gl.getShaderParameter(fs, gl.COMPILE_STATUS)) {\n        shaderLog = gl.getShaderInfoLog(fs);\n      }\n\n      throw new View360Error(ERROR.MESSAGES.FAILED_LINKING_PROGRAM(gl.getProgramInfoLog(program), shaderLog), ERROR.CODES.FAILED_LINKING_PROGRAM);\n    }\n\n    gl.deleteShader(vs);\n    gl.deleteShader(fs);\n\n    return program;\n  }\n\n  public createWebGLTexture(texData: Texture): WebGLTexture {\n    const gl = this._gl;\n    const texture = gl.createTexture()!;\n\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, texData.wrapS);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, texData.wrapT);\n\n    if (!texData.isVideo() && this._isWebGL2) {\n      const gl2 = gl as WebGL2RenderingContext;\n\n      gl2.texStorage2D(gl2.TEXTURE_2D, 1, gl2.RGBA8, texData.width, texData.height);\n    }\n\n    return texture;\n  }\n\n  public createWebGLCubeTexture(texData: Texture, size: number): WebGLTexture {\n    const gl = this._gl;\n    const texture = gl.createTexture()!;\n\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);\n    gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, texData.wrapS);\n    gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, texData.wrapT);\n\n    if (this._isWebGL2) {\n      const gl2 = gl as WebGL2RenderingContext;\n\n      gl2.texStorage2D(gl2.TEXTURE_CUBE_MAP, 1, gl2.RGBA8, size, size);\n    }\n\n    return texture;\n  }\n\n  public async makeXRCompatible() {\n    const gl = this._gl;\n    const attributes = gl.getContextAttributes();\n\n    if (attributes && attributes.xrCompatible !== true) {\n      await gl.makeXRCompatible();\n    }\n  }\n\n  public bindXRLayer(session: XRSession) {\n    const gl = this._gl;\n    const xrLayer = new XRWebGLLayer(session, gl);\n    session.updateRenderState({ baseLayer: xrLayer });\n  }\n\n  public bindXRFrame(frame: XRFrame) {\n    const gl = this._gl;\n    const session = frame.session;\n    const baseLayer = session.renderState.baseLayer!;\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, baseLayer.framebuffer);\n  }\n\n  public useDefaultFrameBuffer() {\n    const gl = this._gl;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n  }\n\n  private _createBuffer(): WebGLBuffer {\n    return this._gl.createBuffer()!;\n  }\n\n  private _deleteBuffer(buffer: WebGLBuffer) {\n    return this._gl.deleteBuffer(buffer);\n  }\n\n  private _createNativeVAO() {\n    const gl = this._gl;\n\n    if (this._isWebGL2) {\n      return (gl as WebGL2RenderingContext).createVertexArray()!;\n    } else {\n      const ext = this._extensions.vao;\n\n      return ext?.createVertexArrayOES() || null;\n    }\n  }\n\n  private _bindNativeVAO(vao: WebGLVertexArrayObject | null) {\n    const gl = this._gl;\n\n    if (this._isWebGL2) {\n      (gl as WebGL2RenderingContext).bindVertexArray(vao);\n    } else {\n      const ext = this._extensions.vao;\n\n      ext?.bindVertexArrayOES(vao);\n    }\n  }\n\n  private _deleteNativeVAO(vao: WebGLVertexArrayObject | null) {\n    const gl = this._gl;\n\n    if (this._isWebGL2) {\n      (gl as WebGL2RenderingContext).deleteVertexArray(vao);\n    } else {\n      const ext = this._extensions.vao;\n\n      ext?.deleteVertexArrayOES(vao);\n    }\n  }\n\n  private _supplyGeometryData(vao: VertexArrayObject, shaderProgram: ShaderProgram) {\n    const geometry = vao.geometry;\n\n    this._supplyIndiciesData(geometry.indicies, vao.buffers.indicies);\n    this._supplyAttributeData(geometry.vertices, shaderProgram.program, \"position\", vao.buffers.position);\n    this._supplyAttributeData(geometry.uvs, shaderProgram.program, \"uv\", vao.buffers.uv);\n  }\n\n  private _unbindBuffers() {\n    const gl = this._gl;\n\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n  }\n\n  private _supplyIndiciesData(indicies: VertexData<Uint16Array>, buffer: WebGLBuffer) {\n    const gl = this._gl;\n\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indicies.data, gl.STATIC_DRAW);\n  }\n\n  private _supplyAttributeData(attribute: VertexData<Float32Array>, program: WebGLProgram, name: string, buffer: WebGLBuffer) {\n    const gl = this._gl;\n    const attribLocation = gl.getAttribLocation(program, name);\n\n    // Attribute not used\n    if (attribLocation < 0) return;\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, attribute.data, gl.STATIC_DRAW);\n    gl.vertexAttribPointer(attribLocation, attribute.itemSize, gl.FLOAT, false, 0, 0);\n    gl.enableVertexAttribArray(attribLocation);\n  }\n\n  private _compileShader(type: number, src: string) {\n    const gl = this._gl;\n    const shader = gl.createShader(type)!;\n\n    gl.shaderSource(shader, src);\n    gl.compileShader(shader);\n\n    return shader;\n  }\n\n  private _getCommonUniformLocations(program: WebGLProgram) {\n    const gl = this._gl;\n\n    return {\n      uMVMatrix: gl.getUniformLocation(program, \"uMVMatrix\")!,\n      uPMatrix: gl.getUniformLocation(program, \"uPMatrix\")!\n    };\n  }\n\n  private _getContext(canvas: HTMLCanvasElement): {\n    gl: WebGLRenderingContext | WebGL2RenderingContext;\n    isWebGL2: boolean;\n  } {\n    const webglIdentifiers = [\"webgl2\", \"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\n    let context: WebGLRenderingContext | null = null;\n    let isWebGL2 = false;\n    const contextAttributes = {\n      preserveDrawingBuffer: false,\n      antialias: false\n    };\n\n    const onWebglContextCreationError = e => e.statusMessage;\n\n    canvas.addEventListener(BROWSER.EVENTS.CONTEXT_CREATE_ERROR, onWebglContextCreationError);\n\n    for (const identifier of webglIdentifiers) {\n      try {\n        context = canvas.getContext(identifier, contextAttributes) as WebGLRenderingContext;\n        isWebGL2 = identifier === \"webgl2\";\n      } catch (t) {} // eslint-disable-line no-empty\n      if (context) {\n        break;\n      }\n    }\n\n    canvas.removeEventListener(BROWSER.EVENTS.CONTEXT_CREATE_ERROR, onWebglContextCreationError);\n\n    if (!context) {\n      throw new View360Error(ERROR.MESSAGES.WEBGL_NOT_SUPPORTED, ERROR.CODES.WEBGL_NOT_SUPPORTED);\n    }\n\n    return {\n      gl: context,\n      isWebGL2\n    };\n  }\n\n  private _onContextLost = () => {\n    const canvas = this._canvas;\n    canvas.classList.add(DEFAULT_CLASS.CTX_LOST);\n    this._contextLost = true;\n  };\n\n  private _onContextRestore = () => {\n    const canvas = this._canvas;\n    canvas.classList.remove(DEFAULT_CLASS.CTX_LOST);\n    this._contextLost = false;\n  };\n}\n\nexport default WebGLContext;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport { mat4 } from \"gl-matrix\";\nimport Camera from \"./Camera\";\nimport Projection from \"../projection/Projection\";\nimport WebGLContext from \"./WebGLContext\";\nimport XRManager from \"./XRManager\";\n\n/**\n * Projection renderer, based on WebGL\n * @ko WebGL 기반의 프로젝션 렌더러\n * @since 4.0.0\n */\nclass WebGLRenderer {\n  private _canvas: HTMLCanvasElement;\n  private _elementSize: { x: number, y: number };\n  private _pixelRatio: number;\n\n  public readonly ctx: WebGLContext;\n\n  /**\n   * Canvas element\n   * @ko 캔버스 엘리먼트\n   * @since 4.0.0\n   */\n  public get canvas() { return this._canvas; }\n  /**\n   * Canvas's width (`devicePixelRatio` is not applied)\n   * @ko 캔버스의 보이는 너비 (`devicePixelRatio`가 적용되지 않은)\n   * @since 4.0.0\n   */\n  public get width() { return this._elementSize.x; }\n  /**\n   * Canvas's height (`devicePixelRatio` is not applied)\n   * @ko 캔버스의 높이 (`devicePixelRatio`가 적용되지 않은)\n   * @since 4.0.0\n   */\n  public get height() { return this._elementSize.y; }\n  /**\n   * Current `devicePixelRatio` value.\n   * @ko 현재 `devicePixelRatio` 값.\n   * @since 4.0.0\n   * @example\n   * ```js\n   * cosnt renderingWidth = view360.renderer.width * view360.renderer.pixelRatio;\n   * ```\n   */\n  public get pixelRatio() { return this._pixelRatio; }\n  /**\n   * Width / height ratio (= width / height)\n   * @ko 너비 / 높이의 비율 (= width / height)\n   * @since 4.0.0\n   * @example\n   * ```js\n   * const aspect = view360.renderer.width / view360.renderer.pixelRatio;\n   * assert(aspect === view360.renderer.aspect);\n   * ```\n   */\n  public get aspect() { return this._elementSize.x / this._elementSize.y; }\n\n  /**\n   * Create new instance\n   * @ko 새 인스턴스를 생성합니다.\n   * @param canvas - Canvas element {@ko 캔버스 엘리먼트}\n   * @param debug - Whether to enable WebGL debugging {@ko WebGL debug 활성화 여부 }\n   */\n  public constructor(canvas: HTMLCanvasElement, debug: boolean) {\n    this._canvas = canvas;\n    this._elementSize = { x: 0, y: 0 };\n    this._pixelRatio = 1;\n    this.ctx = new WebGLContext(canvas, debug);\n  }\n\n  /**\n   * Destroy instance and release all resources.\n   * @ko 인스턴스를 제거하고 사용된 리소스를 전부 해제합니다.\n   * @since 4.0.0\n   */\n  public destroy() {\n    const canvas = this._canvas;\n\n    this.ctx.destroy();\n    canvas.width = 1;\n    canvas.height = 1;\n  }\n\n  /**\n   * Resize canvas and renew inner size cache.\n   * @ko 캔버스의 크기를 재계산해서 내부의 사이즈 캐시값을 갱신합니다.\n   * @since 4.0.0\n   */\n  public resize() {\n    const canvas = this._canvas;\n    const canvasSize = this._elementSize;\n    const devicePixelRatio = window.devicePixelRatio;\n\n    canvasSize.x = canvas.clientWidth;\n    canvasSize.y = canvas.clientHeight;\n\n    canvas.width = canvasSize.x * devicePixelRatio;\n    canvas.height = canvasSize.y * devicePixelRatio;\n\n    this._pixelRatio = devicePixelRatio;\n    this.ctx.resize();\n  }\n\n  /**\n   * Render projection\n   * @ko 프로젝션을 렌더링합니다.\n   * @param projection - Projection to render {@ko 렌더링할 프로젝션}\n   * @param cameraa - Camera instance {@ko 카메라의 인스턴스}\n   * @since 4.0.0\n   */\n  public render(projection: Projection, camera: Camera) {\n    const ctx = this.ctx;\n    const mesh = projection.getMesh();\n    if (ctx.lost || !mesh) return;\n\n    ctx.clear();\n    ctx.useProgram(mesh.program);\n    ctx.updateCommonUniforms(mesh, camera, mesh.program);\n    projection.update(camera);\n    ctx.updateUniforms(mesh.program);\n    ctx.draw(mesh.vao, mesh.program);\n  }\n\n  /**\n   * Render VR frame, only used for rendering frames inside VR sessions.\n   * @ko VR 프레임을 렌더링합니다. VR 세션 진입 도중에만 사용됩니다.\n   * @internal\n   * @param projection - Projection to render {@ko 렌더링할 프로젝션}\n   * @param vr - Instance of XRManager {@ko XRManager의 인스턴스}\n   * @param frame - VR frame {@ko VR 프레임}\n   * @since 4.0.0\n   */\n  public renderVR(projection: Projection, vr: XRManager, frame: XRFrame) {\n    const ctx = this.ctx;\n    const mesh = projection.getMesh();\n    const eyeParams = vr.getEyeParams(frame);\n\n    if (!eyeParams || !mesh) return;\n\n    ctx.bindXRFrame(frame);\n    ctx.useProgram(mesh.program);\n    ctx.updateUniforms(mesh.program);\n\n    eyeParams.forEach((eye, eyeIndex) => {\n      const viewport = eye.viewport;\n      // We're using \"mesh.matrix\"(=local matrix) here for efficiency\n      // As projection doesn't require world matrix, as it doesn't have any parent or child\n      const mvMatrix = mat4.multiply(mat4.create(), eye.vMatrix, mesh.matrix);\n\n      ctx.viewport(viewport.x, viewport.y, viewport.width, viewport.height);\n      ctx.updateVRUniforms(mesh.program, mvMatrix, eye.pMatrix, eyeIndex);\n      ctx.draw(mesh.vao, mesh.program);\n    });\n  }\n}\n\nexport default WebGLRenderer;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Component from \"@egjs/component\";\nimport Camera, { CameraOptions } from \"./core/Camera\";\nimport PanoControl, { PanoControlOptions } from \"./control/PanoControl\";\nimport TextureLoader from \"./core/TextureLoader\";\nimport FrameAnimator from \"./core/FrameAnimator\";\nimport AutoResizer from \"./core/AutoResizer\";\nimport Autoplay, { AutoplayOptions } from \"./core/Autoplay\";\nimport XRManager from \"./core/XRManager\";\nimport View360Error from \"./core/View360Error\";\nimport Projection from \"./projection/Projection\";\nimport HotspotRenderer, { HotspotOptions } from \"./hotspot/HotspotRenderer\";\nimport WebGLRenderer from \"./core/WebGLRenderer\";\nimport Texture from \"./texture/Texture\";\nimport View360Plugin from \"./plugin/View360Plugin\";\nimport ERROR from \"./const/error\";\nimport { CONTROL_EVENTS } from \"./const/internal\";\nimport { DEFAULT_CLASS, EVENTS } from \"./const/external\";\nimport { findCanvas, getElement } from \"./utils\";\nimport * as EVENT_TYPES from \"./type/events\";\nimport { EventParams } from \"./type/utils\";\n\n/**\n * Events that {@link View360} can trigger\n * @ko {@link View360}가 트리거할 수 있는 이벤트들\n * @see [Detailed Example](/docs/events/ready)\n * @since 4.0.0\n */\nexport interface View360Events {\n  [EVENTS.READY]: EVENT_TYPES.ReadyEvent;\n  [EVENTS.LOAD_START]: EVENT_TYPES.LoadStartEvent;\n  [EVENTS.LOAD]: EVENT_TYPES.LoadEvent;\n  [EVENTS.PROJECTION_CHANGE]: EVENT_TYPES.ProjectionChangeEvent;\n  [EVENTS.RESIZE]: EVENT_TYPES.ResizeEvent;\n  [EVENTS.BEFORE_RENDER]: EVENT_TYPES.BeforeRenderEvent;\n  [EVENTS.RENDER]: EVENT_TYPES.RenderEvent;\n  [EVENTS.INPUT_START]: EVENT_TYPES.InputStartEvent;\n  [EVENTS.INPUT_END]: EVENT_TYPES.InputEndEvent;\n  [EVENTS.VIEW_CHANGE]: EVENT_TYPES.ViewChangeEvent;\n  [EVENTS.STATIC_CLICK]: EVENT_TYPES.StaticClickEvent;\n  [EVENTS.VR_START]: EVENT_TYPES.VRStartEvent;\n  [EVENTS.VR_END]: EVENT_TYPES.VREndEvent;\n}\n\n/**\n * Options for {@link View360}\n * @ko {@link View360}용 옵션들\n * @see [Detailed Example](/docs/options)\n * @since 4.0.0\n */\nexport interface View360Options extends CameraOptions, PanoControlOptions {\n  projection: Projection | null;\n  hotspot: Partial<HotspotOptions>;\n  autoplay: boolean | Partial<AutoplayOptions>;\n  autoInit: boolean;\n  autoResize: boolean;\n  canvasSelector: string;\n  useResizeObserver: boolean;\n  tabIndex: number | null;\n  on: Partial<{ [key in keyof View360Events]: (evt: View360Events[key]) => any }>;\n  plugins: View360Plugin[];\n  maxDeltaTime: number;\n  debug: boolean;\n}\n\n/**\n * Panorama 360 image viewer\n * @ko 파노라마 360 이미지 뷰어\n * @since 4.0.0\n * @see View360Options\n * @see View360Events\n */\nclass View360 extends Component<View360Events> {\n  /**\n   * Current version string of the View360\n   * @ko View360의 현재 버젼 문자열\n   * @since 4.0.0\n   * @readonly\n   * @example\n   * ```ts\n   * // If the installed version of the View360 is v4.0.0, View360.VERSION is equal to \"4.0.0\"\n   * console.log(View360.VERSION) // 4.0.0\n   * ```\n   */\n  public static readonly VERSION = \"#__VERSION__#\";\n\n  private _rootEl: HTMLElement;\n  private _renderer: WebGLRenderer;\n  private _camera: Camera;\n  private _control: PanoControl;\n  private _animator: FrameAnimator;\n  private _autoplay: Autoplay;\n  private _hotspot: HotspotRenderer;\n  private _projection: Projection | null;\n  private _autoResizer: AutoResizer;\n  private _vr: XRManager;\n  private _plugins: View360Plugin[];\n  private _initialized: boolean;\n\n  private _autoInit: View360Options[\"autoInit\"];\n  private _autoResize: View360Options[\"autoResize\"];\n  private _canvasSelector: View360Options[\"canvasSelector\"];\n  private _useResizeObserver: View360Options[\"useResizeObserver\"];\n  private _tabIndex: View360Options[\"tabIndex\"];\n  private _debug: View360Options[\"debug\"];\n\n  /**\n   * Root element (`.view360-container`)\n   * @ko 루트 엘리먼트 (`.view360-container`)\n   * @since 4.0.0\n   * @readonly\n   * @example\n   * ```html\n   * <div id=\"viewer\" class=\"view360-container\">\n   *   <canvas class=\"view360-canvas\"></canvas>\n   * </div>\n   * ```\n   * ```ts\n   * import View360 from \"@egjs/view360\";\n   *\n   * const viewer = new View360(\"#viewer\");\n   * console.log(viewer.rootEl); // Element with id \"viewer\"\n   * ```\n   */\n  public get rootEl() { return this._rootEl; }\n  /**\n   * Projection renderer.\n   * @ko 프로젝션 렌더러.\n   * @since 4.0.0\n   * @readonly\n   */\n  public get renderer() { return this._renderer; }\n  /**\n   * Projection camera.\n   * @ko 프로젝션 카메라.\n   * @since 4.0.0\n   * @readonly\n   */\n  public get camera() { return this._camera; }\n  /**\n   * Rotate/Zoom Controller.\n   * @ko 회전/줌 컨트롤러.\n   * @since 4.0.0\n   * @readonly\n   */\n  public get control() { return this._control; }\n  /**\n   * WebXR-based VR manager.\n   * @ko WebXR 기반의 VR 기능 매니저 인스턴스.\n   * @since 4.0.0\n   * @readonly\n   * @example\n   * ```ts\n   * // Example: Enter VR\n   * // This must be called on user interaction, else will be rejected.\n   * viewer.vr.enter();\n   * ```\n   */\n  public get vr() { return this._vr; }\n  /**\n   * Hotspot renderer.\n   * You can also change options of {@link View360Options#hotspot} with this.\n   * @ko 핫스팟 렌더러 인스턴스.\n   * {@link View360Options#hotspot} 옵션 변경도 가능합니다.\n   * @since 4.0.0\n   * @readonly\n   */\n  public get hotspot() { return this._hotspot; }\n  /**\n   * An array of plugins added.\n   * @ko 추가된 플러그인의 배열\n   * @since 4.0.0\n   * @readonly\n   * @example\n   * ```ts\n   * const viewer = new View360(\"#el_id\", {\n   *   plugins: [new ControlBar()]\n   * });\n   *\n   * console.log(viewer.plugins); // [ControlBar]\n   *\n   * viewer.addPlugins(new LoadingSpinner()) // [ControlBar, LoadingSpinner];\n   * ```\n   */\n  public get plugins() { return this._plugins; }\n  /**\n   * A instance of {@link Projection} that currently enabled. `null` if not initialized yet.\n   * You should call {@link View360#load} to change panorama src or projection type.\n   * @ko 현재 사용중인 {@link Projection}의 인스턴스. 프로젝션을 활성화하지 않았을 경우 `null`입니다.\n   * 파노라마 이미지 소스나 프로젝션 타입을 변경하려면 {@link View360#load}를 호출하면 됩니다.\n   * @since 4.0.0\n   * @readonly\n   * @example\n   * ```ts\n   * const viewer = new View360\n   * ```\n   */\n  public get projection() { return this._projection; }\n  public set projection(val: View360Options[\"projection\"]) {\n    if (this._initialized && val) {\n      this.load(val);\n    } else {\n      this._projection = val;\n    }\n  }\n  /**\n   * A boolean value whether {@link View360#init init()} is called before.\n   * @ko {@link View360#init init()}이 호출되었는지 여부를 가리키는 값\n   * @since 4.0.0\n   * @readonly\n   * @example\n   * ```ts\n   * const viewer = new View360(\"#el\", { autoInit: false });\n   *\n   * console.log(viewer.initialized); // false\n   *\n   * await viewer.init();\n   *\n   * console.log(viewer.initialized); // true\n   * ```\n   */\n  public get initialized() { return this._initialized; }\n  /**\n   * Instance of the Autoplay manager.\n   * You can also change {@link View360Options#autoplay} options with this.\n   * @ko Autoplay 기능의 매니저 인스턴스.\n   * 이 인스턴스를 통해 {@link View360Options#autoplay} 옵션을 변경하는 것도 가능합니다.\n   * @since 4.0.0\n   * @readonly\n   * @example\n   * ```ts\n   * // Disable autoplay\n   * viewer.autoplay.disable();\n   * ```\n   */\n  public get autoplay() { return this._autoplay; }\n  /**\n   * When this value is `true` and {@link View360Options#projection} is set, {@link View360#init init()} will be called automatically when instance is created.\n   * @ko 이 값이 `true`이고, {@link View360Options#projection}이 설정되었으면, 인스턴스 생성 시점에 자동으로 {@link View360#init init()}을 호출합니다.\n   * @default true\n   * @since 4.0.0\n   * @example\n   * ```ts\n   * import View360, { EquirectProjection, EVENTS } from \"@egjs/view360\";\n   *\n   * // viewer.init() is called on instance creation\n   * // But as `init` is asynchronous, you should wait for \"ready\" event if you want to do something after initialization.\n   * const viewer = new View360(\"#el_id\", {\n   *   autoInit: true,\n   *   projection: new EquirectProjection({ src: \"SRC_TO_URL\" })\n   * });\n   *\n   * console.log(viewer.initialized); // false, as `init` is asynchronous\n   *\n   * viewer.once(EVENTS.READY, () => {\n   *   console.log(viewer.initialized); // true\n   * });\n   * ```\n   */\n  public get autoInit() { return this._autoInit; }\n  /**\n   * When `true`, {@link View360#resize} is called when the canvas size is changed.\n   * @ko `true`일 경우, 캔버스의 크기가 변경되었을 때 자동으로 {@link View360#resize}를 호출합니다.\n   * @default true\n   * @since 4.0.0\n   * @see View360#useResizeObserver\n   * @example\n   * ```ts\n   * const viewer = new View360(\"#el_id\", {\n   *   autoResize: true\n   * });\n   *\n   * // This can trigger `viewer.resize()` if the canvas size was not 400px\n   * const canvas = viewer.renderer.canvas;\n   * canvas.style.width = \"400px\";\n   * ```\n   */\n  public get autoResize() { return this._autoResize; }\n  /**\n   * CSS selector for canvas element to render panorama image/video.\n   * The canvas element should be placed inside the root element. (Dont' have to be direct child)\n   * @ko 파노라마 이미지/비디오를 렌더링할 canvas 엘리먼트의 CSS 선택자\n   * 캔버스 엘리먼트는 루트 엘리먼트 내부에 있어야합니다. 루트 엘리먼트의 직계 자식 엘리먼트(Direct child element)일 필요는 없습니다.\n   * @default \"canvas\"\n   * @since 4.0.0\n   * @example\n   * ```html\n   * <div class=\"view360-container\">\n   *   <canvas id=\"not_this_one\"></canvas>\n   *   <!-- This will be selected -->\n   *   <canvas id=\"canvas_to_select\"></canvas>\n   * </div>\n   * ```\n   *\n   * ```ts\n   * const viewer = new View360(\"#el_id\", {\n   *   canvasSelector: \"#canvas_to_select\"\n   * });\n   * ```\n   */\n  public get canvasSelector() { return this._canvasSelector; }\n  /**\n   * When `true`, it will use {@link ResizeObserver} API to detect canvas size change when {@link View360Options#autoResize} is enabled.\n   * @ko `true`일 때 {@link View360Options#autoResize}가 활성화되었으면, 사용 가능한 환경에서 {@link ResizeObserver} API를 사용해서 캔버스 크기 변화를 추적합니다.\n   * @default true\n   * @since 4.0.0\n   */\n  public get useResizeObserver() { return this._useResizeObserver; }\n  /**\n   * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex tabindex} attribute for the canvas element.\n   * This is necessary for the keyboard controls.\n   * By default, `0` will be assigned. `null` to disable.\n   * @ko 캔버스 엘리먼트에 적용할 {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex tabindex} 어트리뷰트의 값.\n   * 이 값을 설정해야만 키보드 컨트롤을 사용 가능합니다.\n   * 기본값으로 `0`이 설정됩니다. `null`로 지정하면 `tabindex`를 설정하지 않습니다.\n   * @see RotateControlOptions#disableKeyboard\n   * @default 0\n   * @since 4.0.0\n   * @example\n   * ```ts\n   * const viewer = new View360(\"#el_id\", {\n   *   tabindex: 5\n   * });\n   * ```\n   *\n   * ```html\n   * <!-- After init -->\n   * <div class=\"view360-container\">\n   *   <canvas class=\"view360-canvas\" tabindex=\"5\"></canvas>\n   * </div>\n   * ```\n   */\n  public get tabIndex() { return this._tabIndex; }\n  public set tabIndex(val: View360Options[\"tabIndex\"]) {\n    const canvas = this._renderer.canvas;\n    this._tabIndex = val;\n\n    if (val != null) {\n      canvas.tabIndex = val;\n    } else {\n      canvas.removeAttribute(\"tabindex\");\n    }\n  }\n  /**\n   * A maximum delta time between frames in seconds.\n   * It can prevent camera or control changing too fast when frame being late.\n   * @ko 프레임간 시간 차이의 최대값. (초 단위)\n   * 퍼포먼스 등의 이유로 프레임 렌더링이 늦어졌을 때, 화면이 갑작스럽게 바뀌는 것을 막아줍니다.\n   * @default 1 / 30\n   * @since 4.0.0\n   */\n  public get maxDeltaTime() { return this._animator.maxDeltaTime; }\n  public set maxDeltaTime(val: View360Options[\"maxDeltaTime\"]) { this._animator.maxDeltaTime = val; }\n  /**\n   * Enable WebGL debugging. Setting this to `true` can decrease performance.\n   * This is used internally on developing View360.\n   * @ko WebGL 디버깅을 활성화합니다. 이 값을 `true`로 할 경우 성능이 하락할 수 있습니다.\n   * 이 옵션은 View360을 개발하기 위해 내부적으로 사용됩니다.\n   * @default false\n   */\n  public get debug() { return this._debug; }\n  public set debug(val: View360Options[\"debug\"]) { this._debug = val; }\n\n  // Camera options\n  /**\n   * Initial yaw (y-axis rotation) value for camera. (in degrees, °)\n   * As View360 uses right-handed coordinate system internally, camera will rotate counter-clockwise by this value.\n   * @ko 카메라의 초기 yaw(y축 회전)값 (도 단위, °)\n   * View360은 오른손 좌표계를 사용하기 때문에, 카메라가 해당 값만큼 시계 반대방향으로 회전합니다.\n   * @default 0\n   * @since 4.0.0\n   * @example\n   * ```ts\n   * const viewer = new View360(\"#el_id\", {\n   *   initialYaw: 30\n   * });\n   *\n   * viewer.on(\"ready\", () => {\n   *   console.log(viewer.camera.yaw); // 30\n   * });\n   * ```\n   */\n  public get initialYaw() { return this._camera.initialYaw; }\n  public set initialYaw(val: View360Options[\"initialYaw\"]) { this._camera.initialYaw = val; }\n  /**\n   * Initial pitch (x-axis rotation) value for camera. (in degrees, °)\n   * As View360 uses right-handed coordinate system internally, positive value will make camera to look upside, while negative value will look down.\n   * @ko 카메라의 초기 pitch(x축 회전)값 (도 단위, °)\n   * View360은 오른손 좌표계를 사용하기 때문에, 양(+)의 값은 카메라가 위를 보게 하고, 음(-)의 값은 카메라가 아래를 보게 합니다.\n   * @default 0\n   * @since 4.0.0\n   * @example\n   * ```ts\n   * const viewer = new View360(\"#el_id\", {\n   *   initialPitch: 60\n   * });\n   *\n   * viewer.on(\"ready\", () => {\n   *   console.log(viewer.camera.pitch); // 60\n   * });\n   * ```\n   */\n  public get initialPitch() { return this._camera.initialPitch; }\n  public set initialPitch(val: View360Options[\"initialPitch\"]) { this._camera.initialPitch = val; }\n  /**\n   * Initial zoom value for camera.\n   * Setting this value to `2` will enlarge panorama 200% by width.\n   * @ko 카메라의 초기 줌 값.\n   * 이 값을 `2`로 설정할 경우 파노라마 이미지를 가로 기준 200%만큼 확대합니다.\n   * @default 1\n   * @since 4.0.0\n   * @example\n   * ```ts\n   * const viewer = new View360(\"#el_id\", {\n   *   initialZoom: 2\n   * });\n   *\n   * viewer.on(\"ready\", () => {\n   *   console.log(viewer.camera.zoom); // 2\n   * });\n   * ```\n   */\n  public get initialZoom() { return this._camera.initialZoom; }\n  public set initialZoom(val: View360Options[\"initialZoom\"]) { this._camera.initialZoom = val; }\n  /**\n   * Restrict yaw(y-axis rotation) range. (in degrees, °)\n   * @ko yaw(y축 회전) 범위를 제한합니다. (도 단위, °)\n   * @since 4.0.0\n   * @example\n   * ```ts\n   * const viewer = new View360(\"#el_id\", {\n   *   yawRange: [-30, 30]\n   * });\n   *\n   * viewer.on(\"ready\", () => {\n   *   console.log(viewer.camera.yaw); // 0\n   *   viewer.camera.lookAt({ yaw: 60  });\n   *   console.log(viewer.camera.yaw); // 30\n   * });\n   * ```\n   */\n  public get yawRange() { return this._camera.yawRange; }\n  public set yawRange(val: View360Options[\"yawRange\"]) {\n    this._camera.yawRange = val;\n    if (this._projection) this._projection.updateCamera(this._camera);\n  }\n  /**\n   * Restrict pitch(x-axis rotation) range. (in degrees, °)\n   * @ko pitch(x축 회전) 범위를 제한합니다. (도 단위, °)\n   * @default null\n   * @since 4.0.0\n   * @example\n   * ```ts\n   * const viewer = new View360(\"#el_id\", {\n   *   pitchRange: [-45, 45]\n   * });\n   *\n   * viewer.on(\"ready\", () => {\n   *   console.log(viewer.camera.pitch); // 0\n   *   viewer.camera.lookAt({ pitch: 60  });\n   *   console.log(viewer.camera.pitch); // 45\n   * });\n   * ```\n   */\n  public get pitchRange() { return this._camera.pitchRange; }\n  public set pitchRange(val: View360Options[\"pitchRange\"]) {\n    this._camera.pitchRange = val;\n    if (this._projection) this._projection.updateCamera(this._camera);\n  }\n  /**\n   * Restrict camera zoom range.\n   * If `null`, a default zoom range from `0.6` to `10` will be used.\n   * @ko 카메라 줌 범위를 제한합니다.\n   * `null`일 경우 기본값으로 `0.6`에서 `10`의 범위를 사용합니다.\n   * @default null\n   * @since 4.0.0\n   * @example\n   * ```ts\n   * const viewer = new View360(\"#el_id\", {\n   *   zoomRange: [0.5, 4]\n   * });\n   *\n   * viewer.on(\"ready\", () => {\n   *   console.log(viewer.camera.zoom); // 1\n   *   viewer.camera.lookAt({ zoom: 6  });\n   *   console.log(viewer.camera.zoom); // 4\n   * });\n   * ```\n   */\n  public get zoomRange() { return this._camera.zoomRange; }\n  public set zoomRange(val: View360Options[\"zoomRange\"]) {\n    this._camera.zoomRange = val;\n    if (this._projection) this._projection.updateCamera(this._camera);\n  }\n  /**\n   * Camera's horizontal FOV(Field of View). (in degrees, °)\n   * @ko 카메라의 수평 FOV(Field of View) 값. (도 단위, °)\n   * @default 90\n   * @since 4.0.0\n   * @example\n   * ```ts\n   * // Init with fov: 120\n   * const viewer = new View360(\"#el_id\", { fov: 120 });\n   *\n   * // Back to 90\n   * viewer.fov = 90;\n   * ```\n   */\n  public get fov() { return this._camera.fov; }\n  public set fov(val: View360Options[\"fov\"]) {\n    const camera = this._camera;\n    const control = this._control;\n\n    camera.fov = val;\n    camera.updateMatrix();\n    control.sync();\n  }\n\n  // Control options\n  /**\n   * A control for camera rotation.\n   * You can also change options of {@link View360Options#rotate} with this.\n   * @ko 카메라 회전을 담당하는 컨트롤.\n   * {@link View360Options#rotate} 옵션 변경도 가능합니다.\n   * @since 4.0.0\n   * @readonly\n   */\n  public get rotate() { return this._control.rotate; }\n  /**\n   * A control for camera zoom.\n   * You can also change options of {@link View360Options#zoom} with this.\n   * @ko 카메라 줌을 담당하는 컨트롤.\n   * {@link View360Options#zoom} 옵션 변경도 가능합니다.\n   * @since 4.0.0\n   * @readonly\n   */\n  public get zoom() { return this._control.zoom; }\n  /**\n   * A control for camera rotation with gyroscope input.\n   * You can also change options of {@link View360Options#gyro} with this.\n   * @ko 자이로스코프를 통한 카메라 회전을 담당하는 컨트롤.\n   * {@link View360Options#gyro} 옵션 변경도 가능합니다.\n   * @since 4.0.0\n   * @readonly\n   */\n  public get gyro() { return this._control.gyro; }\n  /**\n   * Apply CSS {@link https://developer.mozilla.org/en-US/docs/Web/CSS/cursor cursor} by current state of input when using mouse.\n   * If `true`, this will add CSS style to canvas element. It'll apply `cursor: \"grab\"` by default and `cursor: \"grabbing\"` when holding the mouse button.\n   * @ko 마우스 사용시 CSS {@link https://developer.mozilla.org/en-US/docs/Web/CSS/cursor cursor}값을 자동으로 변경할지 여부.\n   * `true`일 경우 기본 상태에서 `cursor: \"grab\"`을, 입력 도중에 `cursor: \"grabbing\"`을 캔버스에 적용합니다.\n   * @default true\n   * @since 4.0.0\n   */\n  public get useGrabCursor() { return this._control.useGrabCursor; }\n  public set useGrabCursor(val: View360Options[\"useGrabCursor\"]) { this._control.useGrabCursor = val; }\n  /**\n   * Disable context menu which pops up on mouse right click.\n   * @ko 마우스 우클릭시 표시되는 컨텍스트 메뉴를 비활성화합니다.\n   * @default false\n   * @since 4.0.0\n   */\n  public get disableContextMenu() { return this._control.disableContextMenu; }\n  public set disableContextMenu(val: View360Options[\"disableContextMenu\"]) { this._control.disableContextMenu = val; }\n  /**\n   * If `true`, enables scroll on mobile(touch) devices on canvas.\n   * :::caution\n   * When this option is enabled, users must swipe horizontally first then vertically to change view up or down.\n   * :::\n   * @ko `true`로 설정할 경우, 모바일(터치) 환경의 캔버스 영역 내에서 스크롤을 가능하게 합니다.\n   * :::caution\n   * 이 값을 활성화할 경우, 사용자가 카메라 뷰를 위/아래로 바꾸기 위해서는 먼저 가로로 스와이프한 이후에 세로로 스와이프해야만 합니다.\n   * :::\n   * @since 4.0.0\n   * @default true\n   */\n  public get scrollable() { return this._control.scrollable; }\n  public set scrollable(val: View360Options[\"scrollable\"]) { this._control.scrollable = val; }\n  /**\n   * If `true`, enables scroll by mouse wheel on canvas.\n   * :::caution\n   * When this option is enabled, zoom by mouse wheel will be disabled.\n   * :::\n   * @ko `true`로 설정할 경우, 캔버스 영역 내에서 마우스 휠을 이용한 페이지 스크롤이 가능해집니다.\n   * :::caution\n   * 이 값을 활성화할 경우, 마우스 휠을 통한 줌이 불가능하게 됩니다.\n   * :::\n   * @since 4.0.0\n   * @default false\n   */\n  public get wheelScrollable() { return this._control.wheelScrollable; }\n  public set wheelScrollable(val: View360Options[\"wheelScrollable\"]) { this._control.wheelScrollable = val; }\n\n  /**\n   * Create new instance of View360\n   * @ko View360의 새로운 인스턴스를 생성합니다\n   * @param root - Root element(`.view360-container`) to mount View360\n   * Can be either a CSS selector or HTMLElement.\n   * {@ko View360을 마운트할 루트 엘리먼트, CSS 셀렉터나 HTMLElement를 지정 가능합니다.}\n   * @param options - Options to apply\n   * {@ko 적용할 옵션들}\n   * @example\n   * ```ts\n   * import View360, { EquirectProjection } from \"@egjs/view360\";\n   *\n   * // Create new View360 instance\n   * const viewer = new View360(\"#id-of-a-container\", {\n   *   projection: new EquirectProjection({\n   *     src: \"URL_TO_PANORAMA_IMAGE_OR_VIDEO\",\n   *   })\n   * });\n   * ```\n   */\n  public constructor(root: string | HTMLElement, {\n    projection = null,\n    initialYaw = 0,\n    initialPitch = 0,\n    initialZoom = 1,\n    yawRange = null,\n    pitchRange = null,\n    zoomRange = null,\n    fov = 90,\n    useGrabCursor = true,\n    disableContextMenu = false,\n    rotate = true,\n    zoom = true,\n    gyro = false,\n    scrollable = true,\n    wheelScrollable = false,\n    autoplay = false,\n    hotspot = {},\n    autoInit = true,\n    autoResize = true,\n    canvasSelector = \"canvas\",\n    useResizeObserver = true,\n    on = {},\n    plugins = [],\n    maxDeltaTime = 1 / 30,\n    tabIndex = 0,\n    debug = false\n  }: Partial<View360Options> = {}) {\n    super();\n\n    this._rootEl = getElement(root);\n    this._plugins = plugins;\n    this._initialized = false;\n\n    // Options\n    this._autoInit = autoInit;\n    this._autoResize = autoResize;\n    this._canvasSelector = canvasSelector;\n    this._useResizeObserver = useResizeObserver;\n    this._tabIndex = tabIndex;\n    this._debug = debug;\n\n    // Core components\n    const canvas = findCanvas(this._rootEl, canvasSelector);\n    this._renderer = new WebGLRenderer(canvas, debug);\n    this._camera = new Camera({\n      initialYaw,\n      initialPitch,\n      initialZoom,\n      fov,\n      yawRange,\n      pitchRange,\n      zoomRange\n    });\n    this._control = new PanoControl(canvas, this._camera, {\n      useGrabCursor,\n      scrollable,\n      wheelScrollable,\n      disableContextMenu,\n      rotate,\n      zoom,\n      gyro\n    });\n    this._animator = new FrameAnimator(maxDeltaTime);\n    this._autoplay = new Autoplay(this, canvas, autoplay);\n    this._projection = projection;\n    this._autoResizer = new AutoResizer(useResizeObserver, () => this.resize());\n    this._vr = new XRManager(this._renderer.ctx);\n    this._hotspot = new HotspotRenderer(this._rootEl, this._renderer, hotspot);\n\n    this._addEventHandlers(on);\n\n    if (projection && autoInit) {\n      this.init();\n    }\n  }\n\n  /**\n   * Destroy instance and release all resources.\n   * @ko 인스턴스를 제거하고 모든 리소스를 해제합니다.\n   * @since 4.0.0\n   */\n  public destroy() {\n    this._camera.destroy();\n    this._animator.stop();\n    this._renderer.destroy();\n    this._control.destroy();\n    this._autoResizer.disable();\n\n    if (this._projection) {\n      this._projection.releaseAllResources(this._renderer.ctx);\n      this._projection = null;\n    }\n\n    this._plugins.forEach(plugin => plugin.destroy(this));\n\n    this._initialized = false;\n  }\n\n  /**\n   * Initialize inner components and load projection src.\n   * @ko 내부 컴포넌트들을 초기화하고 프로젝션 소스를 로드합니다.\n   * @since 4.0.0\n   */\n  public async init() {\n    if (!this._projection) {\n      throw new View360Error(ERROR.MESSAGES.PROVIDE_PROJECTION_FIRST, ERROR.CODES.PROVIDE_PROJECTION_FIRST);\n    }\n\n    const renderer = this._renderer;\n    const camera = this._camera;\n    const control = this._control;\n    const animator = this._animator;\n    const hotspot = this._hotspot;\n    const projection = this._projection;\n    const canvas = renderer.canvas;\n\n    this._bindComponentEvents();\n    renderer.ctx.init();\n    this._resizeComponents();\n    camera.updateMatrix();\n\n    if (this._autoResize) {\n      this._autoResizer.enable(canvas);\n    }\n\n    if (!this._autoplay.enableBlocked) {\n      this._autoplay.enable();\n    }\n\n    this._plugins.forEach(plugin => {\n      plugin.init(this);\n    });\n\n    const texture = await this._loadTexture(projection);\n    this._applyProjection(projection, texture, null);\n    hotspot.refresh();\n    animator.start(this._renderFrameOnDemand);\n    await control.enable();\n\n    if (this._tabIndex != null && !canvas.hasAttribute(\"tabIndex\")) {\n      canvas.tabIndex = this._tabIndex;\n    }\n\n    this._initialized = true;\n    this.renderFrame(0);\n\n    this._emit(EVENTS.READY);\n  }\n\n  /**\n   * Load new panorama image/video and display it.\n   * This will {@link View360#init init()} View360 if it's not initialized yet.\n   * @ko 새로운 파노라마 이미지 혹은 비디오를 로드하고 표시합니다.\n   * 만약 View360이 아직 초기화되지 않았다면, {@link View360#init init()}을 호출합니다.\n   * @param projection - Projection & video options for new source. {@ko 새로운 파노라마 이미지/비디오에 적용할 옵션들}\n   * @returns `Promise<true>` if load was successful. {@ko 프로젝션 로드에 성공했을 경우 `Promise<true>`를 반환합니다. }\n   * @since 4.0.0\n   * @example\n   * ```ts\n   * // Change to video\n   * viewer.load({\n   *   src: \"URL_TO_NEW_VIDEO\",\n   *   video: true\n   * });\n   * ```\n   */\n  public async load(projection: Projection): Promise<boolean> {\n    if (!projection) return false;\n\n    if (this._initialized) {\n      const texture = await this._loadTexture(projection);\n      this._applyProjection(projection, texture, this._projection);\n      this.renderFrame(0);\n    } else {\n      // Should update internal options before init\n      this._projection = projection;\n      this.init();\n    }\n\n    return true;\n  }\n\n  /**\n   * Refresh component's size by current\n   * @ko View360이 내부적으로 캐시하고 있는 엘리먼트 크기를 현재 크기로 갱신합니다.\n   * @since 4.0.0\n   */\n  public resize() {\n    if (!this._initialized) return;\n\n    this._resizeComponents();\n\n    // To prevent flickering, render immediately after resizing components\n    this.renderFrame(0);\n\n    const { width, height } = this._renderer;\n\n    this._emit(EVENTS.RESIZE, {\n      width,\n      height\n    });\n  }\n\n  /**\n   * Add new plugins\n   * @ko 새로운 플러그인을 추가합니다.\n   * @param plugins Plugins to add {@ko 추가할 플러그인들}\n   * @see View360Options#plugins\n   * @since 4.0.0\n   * @example\n   * ```ts\n   * // Add a single plugin\n   * viewer.addPlugins(new ControlBar());\n   *\n   * // Add multiple plugins\n   * viewer.addPlugins(new ControlBar(), new LoadingSpinner());\n   * ```\n   */\n  public addPlugins(...plugins: View360Plugin[]) {\n    if (this._initialized) {\n      plugins.forEach(plugin => { plugin.init(this); });\n    }\n\n    this._plugins.push(...plugins);\n  }\n\n  /**\n   * Remove plugins.\n   * @ko 플러그인을 제거합니다.\n   * @param plugins Plugins to remove {@ko 제거할 플러그인들}\n   * @since 4.0.0\n   * @example\n   * ```ts\n   * // Remove a single plugin\n   * viewer.removePlugins(plugin1);\n   *\n   * // Remove multiple plugins\n   * viewer.removePlugins(plugin2, plugin3);\n   * ```\n   */\n  public removePlugins(...plugins: View360Plugin[]) {\n    plugins.forEach(plugin => {\n      const pluginIdx = this._plugins.indexOf(plugin);\n\n      if (pluginIdx < 0) return;\n\n      plugin.destroy(this);\n      this._plugins.splice(pluginIdx, 1);\n    });\n  }\n\n  /**\n   * Render a single panorama image/video frame.\n   * Rendering is performed automatically on demand, so you usually don't have to call this.\n   * Call this when a frame is not renewed after changing options.\n   * @ko 파노라마 이미지/비디오의 한 프레임을 렌더링합니다.\n   * 프레임 갱신은 보통 필요한 때에만 자동적으로 이루어지기 때문에, 보통은 이 메소드를 호출할 필요는 없습니다.\n   * 옵션 변경 이후에도 프레임 갱신이 이루어지지 않는다면, 이 메소드를 호출해주세요.\n   * @param delta Delta time in milisec. {@ko 프레임간 시간 차이, 밀리초 단위}\n   * @since 4.0.0\n   */\n  public renderFrame = (delta: number) => {\n    const camera = this._camera;\n    const renderer = this._renderer;\n    const control = this._control;\n    const hotspot = this._hotspot;\n    const autoPlayer = this._autoplay;\n    const projection = this._projection;\n\n    if (!projection) return;\n\n    this._emit(EVENTS.BEFORE_RENDER);\n\n    if (autoPlayer.playing) {\n      autoPlayer.update(delta);\n      control.sync();\n    }\n\n    if (camera.animation) {\n      camera.animation.update(delta);\n    } else {\n      control.update(delta);\n    }\n\n    renderer.render(projection, camera);\n    hotspot.render(camera);\n\n    if (camera.changed) {\n      this._emit(EVENTS.VIEW_CHANGE, {\n        yaw: camera.yaw,\n        pitch: camera.pitch,\n        zoom: camera.zoom,\n        quaternion: [\n          camera.quaternion[0],\n          camera.quaternion[1],\n          camera.quaternion[2],\n          camera.quaternion[3]\n        ]\n      });\n    }\n    camera.onFrameRender();\n\n    this._emit(EVENTS.RENDER);\n  };\n\n  private _emit<K extends keyof View360Events>(eventName: K, ...params: EventParams<View360Events, K>) {\n    const evtParams = params ? params[0] : {};\n\n    this.trigger(eventName as any, {\n      type: eventName,\n      target: this,\n      ...evtParams\n    });\n  }\n\n  private _renderFrameOnDemand = (delta: number) => {\n    const camera = this._camera;\n    const control = this._control;\n    const autoplay = this._autoplay;\n    const texture = this._projection?.getTexture();\n\n    if (!this._initialized || !texture) return;\n    if (\n      !camera.animation\n      && !control.animating\n      && !autoplay.playing\n      && !texture.isVideo()\n    ) return;\n\n    this.renderFrame(delta);\n  };\n\n  private _renderVRFrame = (_delta: number, frame: XRFrame) => {\n    const vr = this._vr;\n    const projection = this._projection;\n    const renderer = this._renderer;\n\n    if (!projection) return;\n\n    this._emit(EVENTS.BEFORE_RENDER);\n\n    renderer.renderVR(projection, vr, frame);\n\n    this._emit(EVENTS.RENDER);\n  }\n\n  private _applyProjection(projection: Projection, texture: Texture, prevProjection: Projection | null) {\n    const camera = this._camera;\n    const control = this._control;\n    const renderer = this._renderer;\n\n    // Remove previous projection\n    if (prevProjection) {\n      prevProjection.releaseAllResources(this._renderer.ctx);\n    }\n\n    projection.applyTexture(renderer.ctx, texture);\n    projection.updateCamera(camera);\n    projection.updateControl(control);\n\n    this._projection = projection;\n    this._emit(EVENTS.PROJECTION_CHANGE, {\n      projection\n    });\n  }\n\n  private async _loadTexture(projection: Projection): Promise<Texture> {\n    const contentLoader = new TextureLoader();\n    const { src, video } = projection;\n\n    this._emit(EVENTS.LOAD_START, {\n      src,\n      video\n    });\n\n    const texture = await contentLoader.load(src, video);\n\n    this._emit(EVENTS.LOAD, {\n      src,\n      video\n    });\n\n    return texture;\n  }\n\n  private _resizeComponents() {\n    const renderer = this._renderer;\n    const camera = this._camera;\n    const control = this._control;\n\n    renderer.resize();\n    camera.resize(renderer.width, renderer.height);\n    control.resize(renderer.width, renderer.height);\n  }\n\n  private _addEventHandlers(events: View360Options[\"on\"]) {\n    // Bind option \"on\"\n    Object.keys(events).forEach((evtName: keyof typeof EVENT_TYPES) => {\n      this.on(evtName, events[evtName]);\n    });\n  }\n\n  private _bindComponentEvents() {\n    // Bind internal component events\n    const root = this._rootEl;\n    const control = this._control;\n    const animator = this._animator;\n    const renderer = this._renderer;\n    const vr = this._vr;\n\n    const controlEventsToPropagate = [\n      CONTROL_EVENTS.STATIC_CLICK,\n      CONTROL_EVENTS.INPUT_START,\n      CONTROL_EVENTS.INPUT_END\n    ];\n\n    controlEventsToPropagate.forEach(evtName => {\n      control.rotate.on(evtName, evt => {\n        this._emit(evtName, evt);\n      });\n\n      control.zoom.on(evtName, evt => {\n        this._emit(evtName, evt);\n      });\n    });\n\n    vr.on(EVENTS.VR_START, evt => {\n      root.classList.add(DEFAULT_CLASS.IN_VR);\n\n      animator.changeContext(evt.session);\n      animator.start(this._renderVRFrame);\n\n      this._emit(EVENTS.VR_START);\n    });\n\n    vr.on(EVENTS.VR_END, () => {\n      root.classList.remove(DEFAULT_CLASS.IN_VR);\n\n      renderer.ctx.useDefaultFrameBuffer();\n      animator.changeContext(window);\n      animator.start(this._renderFrameOnDemand);\n\n      this.resize();\n\n      this._emit(EVENTS.VR_END);\n    });\n  }\n}\n\nexport default View360;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport { mat4, quat, vec3 } from \"gl-matrix\";\n\n/**\n * Base class for 3D objects\n * @ko 3D 오브젝트의 베이스 클래스\n * @since 4.0.0\n * @internal\n */\nclass Object3D {\n  /**\n   * Local matrix of the object\n   * @ko 오브젝트의 local matrix\n   * @since 4.0.0\n   */\n  public matrix: mat4;\n  /**\n   * Rotation quaternion\n   * @ko 현재 오브젝트의 회전을 나타내는 사원수 값\n   * @since 4.0.0\n   */\n  public rotation: quat;\n  /**\n   * Position of the object\n   * @ko 오브젝트의 위치\n   * @since 4.0.0\n   */\n  public position: vec3;\n  /**\n   * A scale vector of the object\n   * @ko 오브젝트가 각 축으로 확대된 정도를 나타내는 벡터\n   * @since 4.0.0\n   */\n  public scale: vec3;\n\n  /**\n   * Create new instance.\n   * @ko 새로운 인스턴스를 생성합니다.\n   */\n  public constructor() {\n    this.matrix = mat4.create();\n    this.rotation = quat.create();\n    this.position = vec3.fromValues(0, 0, 0);\n    this.scale = vec3.fromValues(1, 1, 1);\n  }\n\n  /**\n   * Update local matrix of the object.\n   * @ko 오브젝트의 local matrix를 갱신합니다.\n   * @since 4.0.0\n   */\n  public updateMatrix() {\n    mat4.fromRotationTranslationScale(this.matrix, this.rotation, this.position, this.scale);\n  }\n}\n\nexport default Object3D;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport View360Plugin from \"../View360Plugin\";\nimport View360 from \"../../View360\";\nimport { EVENTS } from \"../../const/external\";\nimport { createElement } from \"../../utils\";\nimport { LoadStartEvent } from \"../../type/events\";\n\n/**\n * Options for {@link LoadingSpinner}\n * @ko {@link LoadingSpinner}용 옵션들\n * @since 4.0.0\n * @category Plugin\n */\nexport interface LoadingSpinnerOptions {\n  /**\n   * Override default class names.\n   * @ko 디폴트 클래스 이름들을 오버라이드합니다.\n   * @since 4.0.0\n   */\n  className: Partial<{ -readonly [key in keyof typeof LoadingSpinner.DEFAULT_CLASS]: string }>;\n}\n\n/**\n * A plugin that displays loading spinner while loading the projection.\n * @ko 프로젝션 로딩중에 로딩 스피너를 보여주는 플러그인\n * @since 4.0.0\n * @category Plugin\n */\nclass LoadingSpinner implements View360Plugin {\n  /**\n   * Default class names that LoadingSpinner uses\n   * @ko LoadingSpinner가 사용하는 디폴트 클래스 이름\n   * @since 4.0.0\n   */\n  public static readonly DEFAULT_CLASS = {\n    /**\n     * A class name for the container element\n     * @ko 컨테이너 엘리먼트의 클래스 이름\n     * @since 4.0.0\n     */\n    CONTAINER: \"view360-spinner\",\n    /**\n     * A class name for the spinning ring element\n     * @ko 돌아가는 링 엘리먼트의 클래스 이름\n     * @since 4.0.0\n     */\n    RING: \"view360-spinner-ring\"\n  } as const;\n\n  /**\n   * A class names overriding\n   * @ko 현재 오버라이드 중인 클래스 이름\n   * @since 4.0.0\n   */\n  public readonly className: LoadingSpinnerOptions[\"className\"];\n\n  private _container: HTMLElement;\n\n  /**\n   * Create a new instance of LoadingSpinner. {@ko LoadingSpinner의 새 인스턴스를 생성합니다.}\n   * @param options Options {@ko 옵션들}\n   */\n  public constructor({\n    className = {}\n  }: Partial<LoadingSpinnerOptions> = {}) {\n    this.className = className;\n    this._container = this._createElements();\n  }\n\n  public init(viewer: View360) {\n    viewer.on(EVENTS.LOAD_START, this._startLoading);\n  }\n\n  public destroy(viewer: View360): void {\n    viewer.off(EVENTS.LOAD_START, this._startLoading);\n    this._detachElements({ target: viewer });\n  }\n\n  private _startLoading = ({ target: viewer }: LoadStartEvent) => {\n    viewer.rootEl.appendChild(this._container);\n\n    if (viewer.initialized) {\n      viewer.once(EVENTS.LOAD, this._detachElements);\n    } else {\n      viewer.once(EVENTS.READY, this._detachElements);\n    }\n  };\n\n  private _detachElements = ({ target: viewer }: { target: View360 }) => {\n    const container = this._container;\n    if (!container) return;\n\n    if (container.parentElement === viewer.rootEl) {\n      viewer.rootEl.removeChild(container);\n    }\n  };\n\n  private _createElements() {\n    const className = {\n      ...this.className,\n      ...LoadingSpinner.DEFAULT_CLASS\n    };\n\n    const container = createElement(className.CONTAINER);\n    const ring = createElement(className.RING);\n\n    container.appendChild(ring);\n\n    return container;\n  }\n}\n\nexport default LoadingSpinner;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\n/* eslint-disable @typescript-eslint/no-empty-function */\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport ControlBar from \"./ControlBar\";\nimport View360 from \"../../View360\";\n\n/**\n * Common options for {@link ControlBarItem}\n * @ko {@link ControlBarItem}의 공통 옵션들\n * @category Plugin\n * @since 4.0.0\n */\nexport interface ControlBarItemOptions {\n  /**\n   * @copy ControlBarItem#position\n   */\n  position: typeof ControlBar.POSITION[keyof typeof ControlBar.POSITION];\n  /**\n   * @copy ControlBarItem#order\n   */\n  order: number;\n}\n\n/**\n * Interface of the ControlBar items\n * @ko 컨트롤바 아이템의 인터페이스\n * @category Plugin\n * @group ControlBar\n * @since 4.0.0\n */\nabstract class ControlBarItem {\n  /**\n   * Element of the item.\n   * @ko 아이템의 엘리먼트\n   * @since 4.0.0\n   */\n  public abstract element: HTMLElement;\n\n  /**\n   * Position to display item.\n   * @ko 아이템을 표시할 위치.\n   * @since 4.0.0\n   */\n  public position: ControlBarItemOptions[\"position\"];\n  /**\n   * Order within the same position.\n   * The lowest one will be shown first.\n   * @ko 동일한 position 내에서의 순서, 작을수록 먼저 표시됩니다.\n   * @since 4.0.0\n   */\n  public order: ControlBarItemOptions[\"order\"];\n\n  /**\n   * Create new instance of the ControlBarItem\n   * @ko ControlBarItem의 새로운 인스턴스를 생성합니다.\n   * @param options Options {@ko 옵션들}\n   */\n  public constructor(options: ControlBarItemOptions) {\n    this.position = options.position;\n    this.order = options.order;\n  }\n\n  /**\n   * Initialize item.\n   * @ko 아이템을 초기화합니다.\n   * @param viewer - A instance of viewer to attach item {@ko 아이템을 부착할 뷰어의 인스턴스}\n   * @param controlBar - A instance of control bar to attach item {@ko 아이템을 부착할 컨트롤바의 인스턴스}\n   * @since 4.0.0\n   */\n  public abstract init(viewer: View360, controlBar: ControlBar): any;\n  /**\n   * Destroy item and release all resources & event handlers.\n   * @ko 아이템을 제거하고 할당된 모든 리소스 및 이벤트 핸들러를 제거합니다.\n   * @param viewer - A instance of viewer to detach item {@ko 아이템을 떼어 낼 뷰어의 인스턴스}\n   * @param controlBar - A instance of control bar to detach item {@ko 아이템을 떼어 낼 컨트롤바의 인스턴스}\n   * @since 4.0.0\n   */\n  public abstract destroy(viewer: View360, controlBar: ControlBar): any;\n}\n\nexport default ControlBarItem;\n","export const CONTROL_BAR_DEFAULT_CLASS = {\n  CONTROLS_ROOT: \"view360-controls\",\n  CONTROLS_BG: \"view360-controls-background\",\n  CONTROLS_MAIN: \"view360-controls-main\",\n  CONTROLS_TOP: \"view360-controls-top\",\n  CONTROLS_BOTTOM: \"view360-controls-bottom\",\n  CONTROLS_MID: \"view360-controls-mid\",\n  CONTROLS_LEFT: \"view360-controls-left\",\n  CONTROLS_RIGHT: \"view360-controls-right\",\n  CONTROLS_FLOAT_LEFT: \"view360-controls-float-left\",\n  CONTROLS_FLOAT_RIGHT: \"view360-controls-float-right\",\n  CONTROLS_BUTTON: \"view360-controls-button\",\n  PROGRESS_ROOT: \"view360-controls-progress\",\n  VOLUME_ROOT: \"view360-controls-volume\",\n  RANGE_ROOT: \"view360-range\",\n  RANGE_TRACK: \"view360-range-track\",\n  RANGE_THUMB: \"view360-range-thumb\",\n  RANGE_FILLER: \"view360-range-filler\",\n  PLAY_BUTTON: \"view360-controls-play\",\n  PAUSE_BUTTON: \"view360-controls-pause\",\n  UNMUTED_BUTTON: \"view360-controls-unmuted\",\n  MUTED_BUTTON: \"view360-controls-muted\",\n  FULLSCREEN_BUTTON: \"view360-controls-fullscreen\",\n  FULLSCREEN_EXIT_BUTTON: \"view360-controls-fullscreen-exit\",\n  VR_BUTTON: \"view360-controls-vr\",\n  GYRO_ENABLED: \"view360-controls-gyro-enabled\",\n  GYRO_DISABLED: \"view360-controls-gyro-disabled\",\n  VIDEO_TIME_DISPLAY: \"view360-controls-time\",\n  PIEVIEW_ROOT: \"view360-controls-pie\",\n  FIXED: \"view360-controls-fixed\",\n  UNAVAILABLE: \"view360-controls-unavailable\",\n  HIDDEN: \"view360-controls-hidden\"\n} as const;\n\nexport const CONTROL_BAR_ITEM_POSITION = {\n  /**\n   * Place control bar item floating at top-left corner\n   * @ko 아이템을 왼쪽 위 구석에 표시합니다.\n   * @since 4.0.0\n   */\n  TOP_LEFT: \"top-left\",\n  /**\n   * Place control bar item floating at top-right corner\n   * @ko 아이템을 오른쪽 위 구석에 표시합니다.\n   * @since 4.0.0\n   */\n  TOP_RIGHT: \"top-right\",\n  /**\n   * Place control bar item at upper block inside the bottom control bar.\n   * @ko 아이템을 하단에 표시되는 컨트롤바 내에서 위쪽 블럭에 표시합니다.\n   * @since 4.0.0\n   */\n  MAIN_TOP: \"main-top\",\n  /**\n   * Place control bar item at lower block inside the bottom control bar.\n   * @ko 아이템을 하단에 표시되는 컨트롤바 내에서 하단 블럭에 표시합니다.\n   * @since 4.0.0\n   */\n  MAIN_BOTTOM: \"main-bottom\",\n  /**\n   * Place control bar item at center-left block inside the bottom control bar.\n   * @ko 아이템을 하단에 표시되는 컨트롤바 내에서 중간 왼쪽 블럭에 표시합니다.\n   * @since 4.0.0\n   */\n  MAIN_LEFT: \"main-left\",\n  /**\n   * Place control bar item at center-right block inside the bottom control bar.\n   * @ko 아이템을 하단에 표시되는 컨트롤바 내에서 중간 오른쪽 블럭에 표시합니다.\n   * @since 4.0.0\n   */\n  MAIN_RIGHT: \"main-right\"\n} as const;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Component from \"@egjs/component\";\nimport { ControlBarOptions } from \"./ControlBar\";\nimport { CONTROL_BAR_DEFAULT_CLASS } from \"./const\";\nimport Motion from \"../../core/Motion\";\nimport MouseInput from \"../../control/input/MouseInput\";\nimport TouchInput from \"../../control/input/TouchInput\";\nimport { CONTROL_EVENTS, INFINITE_RANGE } from \"../../const/internal\";\nimport { clamp } from \"../../utils\";\nimport { InputEvents } from \"../../type/internal\";\nimport { EL_DIV } from \"../../const/browser\";\n\nclass RangeControl extends Component<{\n  [CONTROL_EVENTS.INPUT_START]: number;\n  [CONTROL_EVENTS.CHANGE]: number;\n  [CONTROL_EVENTS.INPUT_END]: void;\n}> {\n  public readonly rootEl: HTMLElement;\n  public readonly thumbEl: HTMLElement;\n  public readonly trackEl: HTMLElement;\n  public readonly fillerEl: HTMLElement;\n\n  private _motion: Motion;\n  private _mouseInput: MouseInput;\n  private _touchInput: TouchInput;\n  private _fixedClass: string;\n  private _bbox: DOMRect;\n\n  /**\n   *\n   */\n  public constructor() {\n    super();\n\n    const root = document.createElement(EL_DIV);\n    const track = document.createElement(EL_DIV);\n    const thumb = document.createElement(EL_DIV);\n    const filler = document.createElement(EL_DIV);\n\n    root.draggable = false;\n\n    track.appendChild(filler);\n    track.appendChild(thumb);\n    root.appendChild(track);\n\n    this.rootEl = root;\n    this.trackEl = track;\n    this.thumbEl = thumb;\n    this.fillerEl = filler;\n\n    this._mouseInput = new MouseInput();\n    this._touchInput = new TouchInput();\n    this._motion = new Motion({ duration: 1, range: INFINITE_RANGE, easing: x => x });\n    this._bbox = {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      top: 0\n    } as DOMRect;\n    this._fixedClass = CONTROL_BAR_DEFAULT_CLASS.FIXED;\n  }\n\n  public init(className: Required<ControlBarOptions[\"className\"]>) {\n    const mouseInput = this._mouseInput;\n    const touchInput = this._touchInput;\n\n    this.rootEl.classList.add(className.RANGE_ROOT);\n    this.trackEl.classList.add(className.RANGE_TRACK);\n    this.thumbEl.classList.add(className.RANGE_THUMB);\n    this.fillerEl.classList.add(className.RANGE_FILLER);\n    this._fixedClass = className.FIXED;\n\n    mouseInput.on(CONTROL_EVENTS.INPUT_START, this._onHold);\n    touchInput.on(CONTROL_EVENTS.INPUT_START, this._onHold);\n\n    mouseInput.on(CONTROL_EVENTS.INPUT_END, this._onRelease);\n    touchInput.on(CONTROL_EVENTS.INPUT_END, this._onRelease);\n\n    mouseInput.on(CONTROL_EVENTS.CHANGE, this._onChange);\n    touchInput.on(CONTROL_EVENTS.CHANGE, this._onChange);\n\n    mouseInput.enable(this.rootEl);\n    touchInput.enable(this.rootEl);\n\n    this.resize();\n  }\n\n  public destroy() {\n    const mouseInput = this._mouseInput;\n    const touchInput = this._touchInput;\n\n    this.rootEl.className = \"\";\n    this.trackEl.className = \"\";\n    this.thumbEl.className = \"\";\n    this.fillerEl.className = \"\";\n\n    mouseInput.off();\n    touchInput.off();\n    mouseInput.disable();\n    touchInput.disable();\n  }\n\n  public resize() {\n    this._bbox = this.trackEl.getBoundingClientRect();\n  }\n\n  public updateStyle(progress: number) {\n    const width = this._bbox.width;\n    const clampedProgress = clamp(progress, 0, 1);\n\n    this.fillerEl.style.width = `${clampedProgress * 100}%`;\n    this.thumbEl.style.transform = `translateX(${clampedProgress * width}px)`;\n  }\n\n  private _onHold = ({ srcEvent, isTouch }: InputEvents<{ x: number; y: number }>[typeof CONTROL_EVENTS.INPUT_START]) => {\n    const bbox = this._bbox;\n    if (!bbox) return;\n\n    const x = isTouch\n      ? (srcEvent as TouchEvent).touches[0].pageX\n      : (srcEvent as MouseEvent).pageX;\n    const elX = bbox.x + (window.scrollX ?? window.pageXOffset);\n\n    const clamepdX = clamp(x, elX, elX + bbox.width);\n    const progress = (clamepdX - elX) / bbox.width;\n\n    this._motion.reset(clamepdX);\n    this.thumbEl.classList.add(this._fixedClass);\n\n    this.trigger(CONTROL_EVENTS.INPUT_START, progress);\n  };\n\n  private _onChange = ({ delta }: InputEvents<{ x: number; y: number }>[typeof CONTROL_EVENTS.CHANGE]) => {\n    const motion = this._motion;\n    const bbox = this._bbox;\n    if (!bbox) return;\n\n    motion.setNewEndByDelta(delta.x);\n    motion.update(1);\n\n    const elX = bbox.x + (window.scrollX ?? window.pageXOffset);\n    const clampedX = clamp(motion.val, elX, elX + bbox.width);\n    const progress = (clampedX - elX) / bbox.width;\n\n    this.trigger(CONTROL_EVENTS.CHANGE, progress);\n  };\n\n  private _onRelease = () => {\n    const bbox = this._bbox;\n    if (!bbox) return;\n\n    this.thumbEl.classList.remove(this._fixedClass);\n\n    this.trigger(CONTROL_EVENTS.INPUT_END);\n  };\n}\n\nexport default RangeControl;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport ControlBar from \"./ControlBar\";\nimport ControlBarItem, { ControlBarItemOptions } from \"./ControlBarItem\";\nimport RangeControl from \"./RangeControl\";\nimport View360 from \"../../View360\";\nimport TextureVideo from \"../../texture/TextureVideo\";\nimport { CONTROL_EVENTS, VIDEO_TIME_CHANGE_EVENT } from \"../../const/internal\";\nimport { CONTROL_BAR_ITEM_POSITION } from \"./const\";\nimport { EVENTS } from \"../../const/external\";\nimport * as BROWSER from \"../../const/browser\";\n\n/**\n * Show video progress bar.\n * @ko 비디오의 프로그레스 바를 표시합니다.\n * @category Plugin\n * @group ControlBar\n * @since 4.0.0\n */\nclass ProgressBar extends ControlBarItem {\n  public get element() { return this._rangeControl.rootEl; }\n\n  private _controlBar: ControlBar | null;\n  private _video: TextureVideo | null;\n  private _rangeControl: RangeControl;\n\n  private _wasPaused: boolean;\n  private _currentTime: number;\n  private _duration: number;\n  private _playPromise: Promise<void> | null;\n\n  /**\n   * Create a new instance.\n   * @ko 새로운 인스턴스를 생성합니다.\n   * @param options - Options {@ko 옵션들}\n   */\n  public constructor({\n    position = CONTROL_BAR_ITEM_POSITION.MAIN_TOP,\n    order = 9999\n  }: Partial<ControlBarItemOptions> = {}) {\n    super({\n      position,\n      order\n    });\n\n    this.position = position;\n    this.order = order;\n\n    this._controlBar = null;\n    this._rangeControl = new RangeControl();\n\n    this._video = null;\n    this._wasPaused = false;\n    this._currentTime = 0;\n    this._duration = 0;\n    this._playPromise = null;\n  }\n\n  public init(viewer: View360, controlBar: ControlBar) {\n    const video = viewer.projection?.getTexture();\n    const element = this.element;\n    const rangeControl = this._rangeControl;\n    const unavailableClass = controlBar.className.UNAVAILABLE;\n\n    if (!video || !video.isVideo()) {\n      element.classList.add(unavailableClass);\n      return;\n    }\n\n    element.classList.remove(unavailableClass);\n    element.classList.add(controlBar.className.PROGRESS_ROOT);\n    viewer.on(EVENTS.RESIZE, this._onResize);\n    video.source.addEventListener(BROWSER.EVENTS.VIDEO_TIME_UPDATE, this._onTimeUpdate);\n    video.source.addEventListener(BROWSER.EVENTS.VIDEO_DURATION_CHANGE, this._onDurationChange);\n    video.source.addEventListener(VIDEO_TIME_CHANGE_EVENT, this._onTimeUpdate);\n    rangeControl.init(controlBar.className);\n    rangeControl.on(CONTROL_EVENTS.INPUT_START, this._onHold);\n    rangeControl.on(CONTROL_EVENTS.CHANGE, this._onControl);\n    rangeControl.on(CONTROL_EVENTS.INPUT_END, this._onRelease);\n\n    this._video = video;\n    this._currentTime = video.source.currentTime;\n    this._duration = video.source.duration;\n    this._controlBar = controlBar;\n\n    rangeControl.updateStyle(this._currentTime / this._duration);\n  }\n\n  public destroy(viewer: View360) {\n    const video = this._video;\n\n    viewer.off(EVENTS.RESIZE, this._onResize);\n\n    if (video) {\n      video.source.removeEventListener(BROWSER.EVENTS.VIDEO_TIME_UPDATE, this._onTimeUpdate);\n      video.source.removeEventListener(BROWSER.EVENTS.VIDEO_DURATION_CHANGE, this._onDurationChange);\n      video.source.removeEventListener(VIDEO_TIME_CHANGE_EVENT, this._onTimeUpdate);\n    }\n\n    this._rangeControl.destroy();\n    this._video = null;\n    this._playPromise = null;\n  }\n\n  private _onResize = () => {\n    this._rangeControl.resize();\n  }\n\n  private _onTimeUpdate = () => {\n    const video = this._video;\n    if (!video) return;\n\n    this._currentTime = video.source.currentTime;\n    this._rangeControl.updateStyle(this._currentTime / this._duration);\n  };\n\n  private _onDurationChange = () => {\n    const video = this._video;\n    if (!video) return;\n\n    this._duration = video.source.duration;\n    this._rangeControl.updateStyle(this._currentTime / this._duration);\n  };\n\n  private _onHold = (progress: number) => {\n    const video = this._video;\n    const controlBar = this._controlBar;\n    if (!video || !controlBar) return;\n\n    const paused = video.isPaused();\n\n    video.source.pause();\n\n    const time = video.source.duration * progress;\n    video.source.currentTime = time;\n    video.source.dispatchEvent(new CustomEvent(VIDEO_TIME_CHANGE_EVENT, { detail: { time }}));\n\n    controlBar.rootEl.classList.add(controlBar.className.FIXED);\n    this._wasPaused = !this._playPromise && paused;\n  };\n\n  private _onControl = (progress: number) => {\n    const video = this._video;\n    if (!video) return;\n\n    const time = video.source.duration * progress;\n    video.source.currentTime = time;\n    video.source.dispatchEvent(new CustomEvent(VIDEO_TIME_CHANGE_EVENT, { detail: { time }}));\n  };\n\n  private _onRelease = () => {\n    const video = this._video;\n    const controlBar = this._controlBar;\n\n    if (video && controlBar) {\n      if (!this._wasPaused && !this._playPromise) {\n        this._playPromise = video.source.play()\n          .catch(() => void 0);\n\n        // This should not be chained\n        this._playPromise.then(() => {\n          this._playPromise = null;\n        });\n\n        controlBar.rootEl.classList.remove(controlBar.className.FIXED);\n      }\n    }\n\n    this._wasPaused = false;\n  };\n}\n\nexport default ProgressBar;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport ControlBar from \"./ControlBar\";\nimport ControlBarItem, { ControlBarItemOptions } from \"./ControlBarItem\";\nimport { CONTROL_BAR_ITEM_POSITION } from \"./const\";\nimport View360 from \"../../View360\";\nimport TextureVideo from \"../../texture/TextureVideo\";\nimport * as BROWSER from \"../../const/browser\";\n\n/**\n * Show video play / pause button.\n * @ko 비디오 재생 / 일시정지 버튼을 표시합니다.\n * @category Plugin\n * @group ControlBar\n * @since 4.0.0\n */\nclass PlayButton extends ControlBarItem {\n  public readonly element: HTMLElement;\n  private _controlBar: ControlBar | null;\n  private _video: TextureVideo | null;\n  private _paused: boolean;\n\n  /**\n   * Create a new instance.\n   * @ko 새로운 인스턴스를 생성합니다.\n   * @param options - Options {@ko 옵션들}\n   */\n  public constructor({\n    position = CONTROL_BAR_ITEM_POSITION.MAIN_LEFT,\n    order = 9999\n  }: Partial<ControlBarItemOptions> = {}) {\n    super({\n      position,\n      order\n    });\n\n    this.element = document.createElement(BROWSER.EL_BUTTON);\n\n    this._video = null;\n    this._paused = true;\n    this._controlBar = null;\n  }\n\n  public init(viewer: View360, controlBar: ControlBar) {\n    const element = this.element;\n    const video = viewer.projection?.getTexture();\n    const className = controlBar.className;\n    const unavailableClass = className.UNAVAILABLE;\n\n    if (!video || !video.isVideo()) {\n      element.classList.add(unavailableClass);\n      return;\n    }\n\n    element.classList.add(className.CONTROLS_BUTTON);\n    element.classList.remove(unavailableClass);\n\n    const paused = video.isPaused();\n    this._video = video;\n    this._paused = paused;\n    this._controlBar = controlBar;\n\n    if (paused) {\n      this._onPause();\n    } else {\n      this._onPlay();\n    }\n\n    element.addEventListener(BROWSER.EVENTS.CLICK, this._onClick);\n    video.source.addEventListener(BROWSER.EVENTS.VIDEO_PLAY, this._onPlay);\n    video.source.addEventListener(BROWSER.EVENTS.VIDEO_PAUSE, this._onPause);\n  }\n\n  public destroy() {\n    const video = this._video;\n    const element = this.element;\n\n    if (!video) return;\n\n    element.className = \"\";\n    element.removeEventListener(BROWSER.EVENTS.CLICK, this._onClick);\n    video.source.removeEventListener(BROWSER.EVENTS.VIDEO_PLAY, this._onPlay);\n    video.source.removeEventListener(BROWSER.EVENTS.VIDEO_PAUSE, this._onPause);\n\n    this._video = null;\n    this._paused = true;\n    this._controlBar = null;\n  }\n\n  private _onClick = () => {\n    const video = this._video;\n    if (!video) return;\n\n    if (this._paused) {\n      video.source.play();\n    } else {\n      video.source.pause();\n    }\n  };\n\n  private _onPlay = () => {\n    if (!this._controlBar) return;\n\n    const element = this.element;\n    const className = this._controlBar.className;\n\n    element.classList.add(className.PAUSE_BUTTON);\n    element.classList.remove(className.PLAY_BUTTON);\n    element.title = \"Pause Video\";\n\n    this._paused = false;\n  };\n\n  private _onPause = () => {\n    if (!this._controlBar) return;\n\n    const element = this.element;\n    const className = this._controlBar.className;\n\n    element.classList.add(className.PLAY_BUTTON);\n    element.classList.remove(className.PAUSE_BUTTON);\n    element.title = \"Play Video\";\n\n    this._paused = true;\n  };\n}\n\nexport default PlayButton;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport ControlBar from \"./ControlBar\";\nimport ControlBarItem, { ControlBarItemOptions } from \"./ControlBarItem\";\nimport RangeControl from \"./RangeControl\";\nimport { CONTROL_BAR_ITEM_POSITION } from \"./const\";\nimport View360 from \"../../View360\";\nimport TextureVideo from \"../../texture/TextureVideo\";\nimport * as BROWSER from \"../../const/browser\";\nimport { CONTROL_EVENTS } from \"../../const/internal\";\nimport { EVENTS } from \"../../const/external\";\n\n/**\n * Show video volume control.\n * @ko 비디오 볼륨 조절 버튼을 표시합니다.\n * @category Plugin\n * @group ControlBar\n * @since 4.0.0\n */\nclass VolumeControl extends ControlBarItem {\n  public get element() { return this._rootEl; }\n\n  private _controlBar: ControlBar | null;\n  private _rootEl: HTMLButtonElement;\n  private _buttonEl: HTMLElement;\n  private _rangeControl: RangeControl;\n  private _video: TextureVideo | null;\n\n  /**\n   * Create a new instance.\n   * @ko 새로운 인스턴스를 생성합니다.\n   * @param options - Options {@ko 옵션들}\n   */\n  public constructor({\n    position = CONTROL_BAR_ITEM_POSITION.MAIN_RIGHT,\n    order = 9999\n  }: Partial<ControlBarItemOptions> = {}) {\n    super({\n      position,\n      order\n    });\n\n    this._controlBar = null;\n    this._rangeControl = new RangeControl();\n    this._createElements();\n\n    this._video = null;\n  }\n\n  public init(viewer: View360, controlBar: ControlBar) {\n    const video = viewer.projection?.getTexture();\n    const root = this._rootEl;\n    const button = this._buttonEl;\n    const rangeControl = this._rangeControl;\n    const className = controlBar.className;\n    const unavailableClass = className.UNAVAILABLE;\n\n    if (!video || !video.isVideo()) {\n      root.classList.add(unavailableClass);\n      return;\n    }\n\n    root.classList.remove(unavailableClass);\n    root.classList.add(className.CONTROLS_BUTTON);\n    root.classList.add(className.VOLUME_ROOT);\n    button.classList.add(className.CONTROLS_BUTTON);\n\n    if (video.source.muted) {\n      button.classList.add(className.MUTED_BUTTON);\n    } else {\n      button.classList.add(className.UNMUTED_BUTTON);\n    }\n\n    viewer.on(EVENTS.RESIZE, this._onResize);\n    root.addEventListener(BROWSER.EVENTS.TRANSITION_END, this._onResize);\n    button.addEventListener(BROWSER.EVENTS.CLICK, this._onClick);\n\n    video.source.addEventListener(BROWSER.EVENTS.VIDEO_VOLUME_CHANGE, this._onVolumeChange);\n    video.source.addEventListener(BROWSER.EVENTS.VIDEO_LOADED_DATA, this._updateDisplay);\n    video.source.addEventListener(BROWSER.EVENTS.VIDEO_CAN_PLAYTHROUGH, this._updateDisplay);\n\n    rangeControl.init(className);\n    rangeControl.on(CONTROL_EVENTS.INPUT_START, this._onHold);\n    rangeControl.on(CONTROL_EVENTS.CHANGE, this._onChange);\n    rangeControl.on(CONTROL_EVENTS.INPUT_END, this._onRelease);\n\n    this._controlBar = controlBar;\n    this._video = video;\n\n    this._updateDisplay();\n  }\n\n  public destroy(viewer: View360) {\n    const video = this._video;\n    const button = this._buttonEl;\n    const root = this._rootEl;\n\n    root.className = \"\";\n    button.className = \"\";\n\n    viewer.off(EVENTS.RESIZE, this._onResize);\n    root.removeEventListener(BROWSER.EVENTS.TRANSITION_END, this._onResize);\n    button.removeEventListener(BROWSER.EVENTS.CLICK, this._onClick);\n\n    if (video) {\n      video.source.removeEventListener(BROWSER.EVENTS.VIDEO_VOLUME_CHANGE, this._onVolumeChange);\n      video.source.removeEventListener(BROWSER.EVENTS.VIDEO_LOADED_DATA, this._updateDisplay);\n      video.source.removeEventListener(BROWSER.EVENTS.VIDEO_CAN_PLAYTHROUGH, this._updateDisplay);\n    }\n\n    this._controlBar = null;\n    this._rangeControl.destroy();\n    this._video = null;\n  }\n\n  private _onResize = () => {\n    this._rangeControl.resize();\n    this._updateDisplay();\n  }\n\n  private _onClick = () => {\n    const video = this._video;\n    if (!video || this._rootEl.disabled) return;\n\n    video.source.muted = !video.source.muted;\n  };\n\n  private _onVolumeChange = () => {\n    const button = this._buttonEl;\n    const video = this._video;\n    const controlBar = this._controlBar;\n\n    if (!video || !controlBar) return;\n\n    const className = controlBar.className;\n\n    if (video.source.muted || video.source.volume === 0) {\n      button.classList.add(className.MUTED_BUTTON);\n      button.classList.remove(className.UNMUTED_BUTTON);\n    } else {\n      button.classList.add(className.UNMUTED_BUTTON);\n      button.classList.remove(className.MUTED_BUTTON);\n    }\n\n    this._updateDisplay();\n  };\n\n  private _createElements() {\n    const root = document.createElement(BROWSER.EL_BUTTON);\n    const buttonEl = document.createElement(BROWSER.EL_DIV);\n\n    root.appendChild(this._rangeControl.rootEl);\n    root.appendChild(buttonEl);\n    root.title = \"Toggle Mute\";\n\n    this._rootEl = root;\n    this._buttonEl = buttonEl;\n  }\n\n  private _onHold = (progress: number) => {\n    const video = this._video;\n    const controlBar = this._controlBar;\n\n    if (!video || !controlBar) return;\n\n    const className = controlBar.className;\n\n    video.source.volume = progress;\n\n    this._rootEl.classList.add(className.FIXED);\n    controlBar.containerEl.classList.add(className.FIXED);\n\n    this._updateDisplay();\n  };\n\n  private _onChange = (progress: number) => {\n    const video = this._video;\n    if (!video) return;\n\n    video.source.volume = progress;\n    if (progress > 0) {\n      video.source.muted = false;\n    } else {\n      video.source.muted = true;\n    }\n\n    this._updateDisplay();\n  };\n\n  private _onRelease = () => {\n    const controlBar = this._controlBar;\n    if (!controlBar) return;\n\n    const className = controlBar.className;\n\n    this._rootEl.classList.remove(className.FIXED);\n    controlBar.containerEl.classList.remove(className.FIXED);\n  };\n\n  private _updateDisplay = () => {\n    const video = this._video;\n    const root = this._rootEl;\n    if (!video) return;\n\n    if (!video.hasAudio()) {\n      root.disabled = true;\n      return;\n    }\n\n    root.disabled = false;\n\n    const volume = video.source.muted ? 0 : video.source.volume;\n\n    this._rangeControl.updateStyle(volume);\n  };\n}\n\nexport default VolumeControl;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport ControlBar from \"./ControlBar\";\nimport ControlBarItem, { ControlBarItemOptions } from \"./ControlBarItem\";\nimport { CONTROL_BAR_ITEM_POSITION } from \"./const\";\nimport View360 from \"../../View360\";\nimport * as BROWSER from \"../../const/browser\";\nimport { isFullscreen } from \"../../utils\";\n\n/**\n * Show fullscreen enter / exit button.\n * @ko 풀스크린 진입 / 해제 버튼을 표시합니다.\n * @category Plugin\n * @group ControlBar\n * @since 4.0.0\n */\nclass FullscreenButton extends ControlBarItem {\n  public readonly element: HTMLElement;\n  private _controlBar: ControlBar | null;\n  private _targetEl: HTMLElement | null;\n\n  /**\n   * Create a new instance.\n   * @ko 새로운 인스턴스를 생성합니다.\n   * @param options - Options {@ko 옵션들}\n   */\n  public constructor({\n    position = CONTROL_BAR_ITEM_POSITION.MAIN_RIGHT,\n    order = 9999\n  }: Partial<ControlBarItemOptions> = {}) {\n    super({\n      position,\n      order\n    });\n\n    this.element = document.createElement(BROWSER.EL_BUTTON);\n    this.element.title = \"Toggle Fullscreen\";\n    this._controlBar = null;\n    this._targetEl = null;\n  }\n\n  public init(viewer: View360, controlBar: ControlBar) {\n    const element = this.element;\n    const className = controlBar.className;\n\n    if (!this._fullscreenAvailable()) {\n      element.classList.add(className.UNAVAILABLE);\n      return;\n    }\n\n    element.classList.add(className.CONTROLS_BUTTON);\n    element.classList.remove(className.UNAVAILABLE);\n    element.addEventListener(BROWSER.EVENTS.CLICK, this._onClick);\n    this._addFullscreenHandlers();\n\n    if (isFullscreen()) {\n      element.classList.add(className.FULLSCREEN_EXIT_BUTTON);\n    } else {\n      element.classList.add(className.FULLSCREEN_BUTTON);\n    }\n\n    this._controlBar = controlBar;\n    this._targetEl = viewer.rootEl;\n  }\n\n  public destroy() {\n    const element = this.element;\n\n    element.className = \"\";\n    element.removeEventListener(BROWSER.EVENTS.CLICK, this._onClick);\n    this._removeFullscreenHandlers();\n\n    this._controlBar = null;\n    this._targetEl = null;\n  }\n\n  private _onClick = () => {\n    const target = this._targetEl;\n    if (!target) return;\n\n    if (isFullscreen()) {\n      this._exitFullscreen();\n    } else {\n      this._requestFullscreen(target);\n    }\n  };\n\n  private _fullscreenAvailable() {\n    return BROWSER.FULLSCREEN_REQUEST.some(key => !!document[key]);\n  }\n\n  private _requestFullscreen(el: HTMLElement) {\n    for (const key of BROWSER.FULLSCREEN_REQUEST) {\n      const request = el[key];\n      if (request) {\n        request.call(el);\n        return;\n      }\n    }\n  }\n\n  private _exitFullscreen() {\n    for (const key of BROWSER.FULLSCREEN_EXIT) {\n      const exit = document[key];\n\n      if (exit) {\n        exit.call(document);\n        return;\n      }\n    }\n  }\n\n  private _addFullscreenHandlers() {\n    BROWSER.FULLSCREEN_CHANGE.forEach(evtName => {\n      document.addEventListener(evtName, this._onFullscreenChange);\n    });\n  }\n\n  private _removeFullscreenHandlers() {\n    BROWSER.FULLSCREEN_CHANGE.forEach(evtName => {\n      document.removeEventListener(evtName, this._onFullscreenChange);\n    });\n  }\n\n  private _onFullscreenChange = () => {\n    const element = this.element;\n    const controlBar = this._controlBar;\n\n    if (!controlBar) return;\n\n    const className = controlBar.className;\n\n    if (isFullscreen()) {\n      element.classList.add(className.FULLSCREEN_EXIT_BUTTON);\n      element.classList.remove(className.FULLSCREEN_BUTTON);\n    } else {\n      element.classList.add(className.FULLSCREEN_BUTTON);\n      element.classList.remove(className.FULLSCREEN_EXIT_BUTTON);\n    }\n  };\n}\n\nexport default FullscreenButton;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport ControlBar from \"./ControlBar\";\nimport ControlBarItem, { ControlBarItemOptions } from \"./ControlBarItem\";\nimport { CONTROL_BAR_ITEM_POSITION } from \"./const\";\nimport View360 from \"../../View360\";\nimport TextureVideo from \"../../texture/TextureVideo\";\nimport * as BROWSER from \"../../const/browser\";\nimport { VIDEO_TIME_CHANGE_EVENT } from \"../../const/internal\";\n\n/**\n * Show video current / total time.\n * @ko 비디오의 현재 / 총 재생시간을 표시합니다.\n * @category Plugin\n * @group ControlBar\n * @since 4.0.0\n */\nclass VideoTime extends ControlBarItem {\n  public readonly element: HTMLElement;\n  private _video: TextureVideo | null;\n  private _currentTime: number;\n  private _duration: number;\n\n  /**\n   * Create a new instance.\n   * @ko 새로운 인스턴스를 생성합니다.\n   * @param options - Options {@ko 옵션들}\n   */\n  public constructor({\n    position = CONTROL_BAR_ITEM_POSITION.MAIN_LEFT,\n    order = 9999\n  }: Partial<ControlBarItemOptions> = {}) {\n    super({\n      position,\n      order\n    });\n\n    this.element = document.createElement(BROWSER.EL_DIV);\n\n    this._video = null;\n    this._currentTime = 0;\n    this._duration = 0;\n  }\n\n  public init(viewer: View360, controlBar: ControlBar) {\n    const video = viewer.projection?.getTexture();\n    const element = this.element;\n    const className = controlBar.className;\n\n    if (!video || !video.isVideo()) {\n      element.classList.add(className.UNAVAILABLE);\n      return;\n    }\n\n    element.classList.add(className.VIDEO_TIME_DISPLAY);\n    element.classList.remove(className.UNAVAILABLE);\n\n    video.source.addEventListener(BROWSER.EVENTS.VIDEO_TIME_UPDATE, this._onTimeUpdate);\n    video.source.addEventListener(BROWSER.EVENTS.VIDEO_DURATION_CHANGE, this._onDurationChange);\n    video.source.addEventListener(VIDEO_TIME_CHANGE_EVENT, this._onCustomTimeChange);\n\n    this._video = video;\n    this._currentTime = video.source.currentTime;\n    this._duration = video.source.duration;\n\n    this._updateDisplay();\n  }\n\n  public destroy() {\n    const video = this._video;\n\n    if (!video) return;\n\n    this.element.className = \"\";\n    video.source.removeEventListener(BROWSER.EVENTS.VIDEO_TIME_UPDATE, this._onTimeUpdate);\n    video.source.removeEventListener(BROWSER.EVENTS.VIDEO_DURATION_CHANGE, this._onDurationChange);\n    video.source.removeEventListener(VIDEO_TIME_CHANGE_EVENT, this._onCustomTimeChange);\n\n    this._video = null;\n  }\n\n  private _onTimeUpdate = () => {\n    const video = this._video;\n    if (!video) return;\n\n    this._currentTime = video.source.currentTime;\n    this._updateDisplay();\n  };\n\n  private _onDurationChange = () => {\n    const video = this._video;\n    if (!video) return;\n\n    this._duration = video.source.duration;\n    this._updateDisplay();\n  };\n\n  private _onCustomTimeChange = (evt: CustomEvent<{ time: number }>) => {\n    this._currentTime = evt.detail.time;\n    this._updateDisplay();\n  };\n\n  private _updateDisplay() {\n    const time = this._currentTime;\n    const timeMinute = Math.floor(time / 60);\n    const timeSeconds = Math.floor(time - timeMinute * 60);\n    const timeSecondsFormatted = timeSeconds < 10 ? `0${timeSeconds}` : timeSeconds;\n\n    const duration = this._duration;\n    const durationMinute = Math.floor(duration / 60);\n    const durationSeconds = Math.floor(duration - durationMinute * 60);\n    const durationSecondsFormatted = durationSeconds < 10 ? `0${durationSeconds}` : durationSeconds;\n\n    this.element.innerText = `${timeMinute}:${timeSecondsFormatted} / ${durationMinute}:${durationSecondsFormatted}`;\n  }\n}\n\nexport default VideoTime;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport ControlBar from \"./ControlBar\";\nimport ControlBarItem, { ControlBarItemOptions } from \"./ControlBarItem\";\nimport { CONTROL_BAR_ITEM_POSITION } from \"./const\";\nimport View360 from \"../../View360\";\nimport { circulate, getObjectOption } from \"../../utils\";\nimport * as BROWSER from \"../../const/browser\";\nimport { EVENTS } from \"../../const/external\";\nimport { SVG_NAMESPACE } from \"../../const/internal\";\n\n/**\n * Options for {@link PieView}\n * @ko {@link PieView}용 옵션들\n * @category Plugin\n */\nexport interface PieViewOptions extends ControlBarItemOptions {\n  /**\n   * @copy PieView#resetCamera\n   */\n  resetCamera: boolean | Partial<{\n    yaw: number;\n    pitch: number;\n    zoom: number;\n    duration: number;\n    easing: (x: number) => number;\n  }>;\n}\n\n/**\n * Show camera direction/fov indicator.\n * @ko 카메라가 향하는 방향 및 FOV를 표시합니다.\n * @category Plugin\n * @group ControlBar\n * @since 4.0.0\n */\nclass PieView extends ControlBarItem {\n  public readonly element: HTMLElement;\n\n  /**\n   * Set rotation to reset camera to when PieView is clicked.\n   * `false` will disable this value, and `true` will enable with default options.\n   * @ko PieView가 클릭되었을 때 카메라를 리셋할 방향을 지정합니다.\n   * `false`일 경우 이 동작을 비활성화하며, `true`일 경우 기본값을 사용합니다.\n   * @since 4.0.0\n   */\n  public resetCamera: PieViewOptions[\"resetCamera\"];\n\n  private _viewer: View360 | null;\n  private _piePathEl: SVGPathElement;\n  private _rangeCircleEl: SVGCircleElement;\n\n  /**\n   * Create a new instance.\n   * @ko 새로운 인스턴스를 생성합니다.\n   * @param options - Options {@ko 옵션들}\n   */\n  public constructor({\n    resetCamera = true,\n    position = CONTROL_BAR_ITEM_POSITION.TOP_RIGHT,\n    order = 9999\n  }: Partial<PieViewOptions> = {}) {\n    super({\n      position,\n      order\n    });\n\n    this.element = document.createElement(BROWSER.EL_DIV);\n    this.element.title = \"Reset view\";\n    this.resetCamera = resetCamera;\n    this._createPieElements();\n    this._viewer = null;\n  }\n\n  public init(viewer: View360, controlBar: ControlBar) {\n    const element = this.element;\n\n    if (!viewer.initialized) {\n      viewer.once(EVENTS.READY, this._updatePie);\n    } else {\n      this._updatePie({ target: viewer });\n    }\n\n    const rootClass = controlBar.className.PIEVIEW_ROOT;\n    element.classList.add(rootClass);\n\n    if (this.resetCamera) {\n      element.addEventListener(BROWSER.EVENTS.CLICK, this._onClick);\n    }\n\n    viewer.on(EVENTS.VIEW_CHANGE, this._updatePie);\n\n    this._viewer = viewer;\n  }\n\n  public destroy(viewer: View360) {\n    const element = this.element;\n\n    element.removeEventListener(BROWSER.EVENTS.CLICK, this._onClick);\n    element.className = \"\";\n    viewer.off(EVENTS.READY, this._updatePie);\n    viewer.off(EVENTS.VIEW_CHANGE, this._updatePie);\n\n    this._viewer = null;\n  }\n\n  private _onClick = () => {\n    const viewer = this._viewer;\n    const resetCamera = this.resetCamera;\n\n    if (!viewer || !resetCamera) return;\n\n    const {\n      yaw = viewer.initialYaw,\n      pitch = viewer.initialPitch,\n      zoom = viewer.initialZoom,\n      duration = 500\n    } = getObjectOption(resetCamera);\n\n    viewer.camera.animateTo({\n      yaw,\n      pitch,\n      zoom,\n      duration\n    });\n  };\n\n  private _createPieElements() {\n    const root = this.element;\n    const pieSVG = document.createElementNS(SVG_NAMESPACE, \"svg\");\n    pieSVG.setAttribute(\"viewBox\", \"0 0 48 48\");\n    pieSVG.setAttribute(\"width\", \"100%\");\n    pieSVG.setAttribute(\"height\", \"100%\");\n\n    const piePath = document.createElementNS(SVG_NAMESPACE, \"circle\");\n\n    piePath.setAttribute(\"stroke\", \"currentColor\");\n    piePath.setAttribute(\"fill\", \"transparent\");\n    piePath.setAttribute(\"cx\", \"24\");\n    piePath.setAttribute(\"cy\", \"24\");\n    piePath.setAttribute(\"r\", \"12\");\n    piePath.setAttribute(\"stroke-width\", \"24\");\n    pieSVG.appendChild(piePath);\n\n    const rangeCircle = document.createElementNS(SVG_NAMESPACE, \"circle\");\n\n    rangeCircle.setAttribute(\"stroke\", \"currentColor\");\n    rangeCircle.setAttribute(\"fill\", \"transparent\");\n    rangeCircle.setAttribute(\"cx\", \"24\");\n    rangeCircle.setAttribute(\"cy\", \"24\");\n    rangeCircle.setAttribute(\"r\", \"22.5\");\n    rangeCircle.setAttribute(\"stroke-width\", \"3\");\n    pieSVG.appendChild(rangeCircle);\n\n    root.appendChild(pieSVG);\n\n    this._piePathEl = piePath;\n    this._rangeCircleEl = rangeCircle;\n  }\n\n  private _updatePie = ({ target: viewer }: { target: View360 }) => {\n    const piePath = this._piePathEl;\n    const rangeCircle = this._rangeCircleEl;\n    const camera = viewer.camera;\n    const fov = camera.getHorizontalFov();\n    const yawRange = camera.getYawRange(camera.zoom);\n    const halfFov = fov * 0.5;\n\n    const pieRadius = 24 * Math.PI;\n    const pieDeg = pieRadius * fov / 360;\n    const pieOffset = pieRadius * (camera.yaw + halfFov + 90) / 360;\n\n    piePath.setAttribute(\"stroke-dasharray\", `${pieDeg} ${pieRadius - pieDeg}`);\n    piePath.setAttribute(\"stroke-dashoffset\", `${pieOffset}`);\n\n    if (isFinite(yawRange.min) && isFinite(yawRange.max)) {\n      const radius = 45 * Math.PI; // 2 * PI * r\n      const min = (circulate(yawRange.min, -180, 180) - halfFov) / 360;\n      const max = (circulate(yawRange.max, -180, 180) + halfFov) / 360;\n\n      const rangeDiff = radius * Math.abs(max - min);\n      const offset = -radius * (min - 0.25);\n\n      rangeCircle.setAttribute(\"stroke-dasharray\", `${rangeDiff} ${radius - rangeDiff}`);\n      rangeCircle.setAttribute(\"stroke-dashoffset\", `${offset}`);\n    } else {\n      rangeCircle.setAttribute(\"stroke-dasharray\", \"\");\n      rangeCircle.setAttribute(\"stroke-dashoffset\", \"\");\n    }\n  };\n}\n\nexport default PieView;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport ControlBar from \"./ControlBar\";\nimport ControlBarItem, { ControlBarItemOptions } from \"./ControlBarItem\";\nimport { CONTROL_BAR_ITEM_POSITION } from \"./const\";\nimport View360 from \"../../View360\";\nimport * as BROWSER from \"../../const/browser\";\n\n/**\n * Show VR enter button.\n * @ko VR 진입 버튼을 표시합니다.\n * @category Plugin\n * @group ControlBar\n * @since 4.0.0\n */\nclass VRButton extends ControlBarItem {\n  public readonly element: HTMLElement;\n\n  private _viewer: View360 | null;\n\n  /**\n   * Create a new instance.\n   * @ko 새로운 인스턴스를 생성합니다.\n   * @param options - Options {@ko 옵션들}\n   */\n  public constructor({\n    position = CONTROL_BAR_ITEM_POSITION.MAIN_RIGHT,\n    order = 9999\n  }: Partial<ControlBarItemOptions> = {}) {\n    super({\n      position,\n      order\n    });\n\n    this.element = document.createElement(BROWSER.EL_BUTTON);\n    this.element.title = \"Enter VR\";\n    this._viewer = null;\n  }\n\n  public init(viewer: View360, controlBar: ControlBar) {\n    const element = this.element;\n    const className = controlBar.className;\n\n    element.classList.add(className.UNAVAILABLE);\n    element.classList.add(className.VR_BUTTON);\n    element.classList.add(className.CONTROLS_BUTTON);\n\n    viewer.vr.isAvailable()\n      .then(available => {\n        if (available) {\n          element.classList.remove(className.UNAVAILABLE);\n        }\n      });\n\n    element.addEventListener(BROWSER.EVENTS.CLICK, this._onClick);\n    this._viewer = viewer;\n  }\n\n  public destroy() {\n    const element = this.element;\n\n    element.className = \"\";\n    element.removeEventListener(BROWSER.EVENTS.CLICK, this._onClick);\n\n    this._viewer = null;\n  }\n\n  private _onClick = () => {\n    const viewer = this._viewer;\n    if (!viewer) return;\n\n    viewer.vr.enter();\n  };\n}\n\nexport default VRButton;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport ControlBar from \"./ControlBar\";\nimport ControlBarItem, { ControlBarItemOptions } from \"./ControlBarItem\";\nimport { CONTROL_BAR_ITEM_POSITION } from \"./const\";\nimport View360 from \"../../View360\";\nimport * as BROWSER from \"../../const/browser\";\nimport GyroControl from \"../../control/GyroControl\";\nimport { CONTROL_EVENTS } from \"../../const/internal\";\nimport { sensorCanBeEnabledIOS } from \"../../utils\";\n\n/**\n * Show gyroscope control enable / disable button\n * @ko 자이로스코프 컨트롤 활성화 / 비활성화 버튼을 표시합니다.\n * @category Plugin\n * @group ControlBar\n * @since 4.0.0\n */\nclass GyroButton extends ControlBarItem {\n  public readonly element: HTMLElement;\n  private _viewer: View360 | null;\n  private _controlBar: ControlBar | null;\n\n  /**\n   * Create a new instance.\n   * @ko 새로운 인스턴스를 생성합니다.\n   * @param options - Options {@ko 옵션들}\n   */\n  public constructor({\n    position = CONTROL_BAR_ITEM_POSITION.MAIN_RIGHT,\n    order = 9999\n  }: Partial<ControlBarItemOptions> = {}) {\n    super({\n      position,\n      order\n    });\n\n    this.element = document.createElement(BROWSER.EL_DIV);\n    this.element.title = \"Toggle gyroscope control\";\n  }\n\n  public init(viewer: View360, controlBar: ControlBar) {\n    const element = this.element;\n    const className = controlBar.className;\n\n    element.addEventListener(BROWSER.EVENTS.CLICK, this._onClick);\n    element.classList.add(className.CONTROLS_BUTTON);\n    element.classList.add(className.UNAVAILABLE);\n\n    const enableButton = () => {\n      element.classList.remove(className.UNAVAILABLE);\n      viewer.control.gyro.on(CONTROL_EVENTS.ENABLE, this._updateStyle);\n      viewer.control.gyro.on(CONTROL_EVENTS.DISABLE, this._updateStyle);\n    };\n\n    if (sensorCanBeEnabledIOS()) {\n      enableButton();\n    } else {\n      GyroControl.isAvailable().then(available => {\n        if (!available) return;\n        enableButton();\n      });\n    }\n\n    this._controlBar = controlBar;\n    this._viewer = viewer;\n    this._updateStyle();\n  }\n\n  public destroy(viewer: View360) {\n    const element = this.element;\n\n    viewer.control.gyro.off(CONTROL_EVENTS.ENABLE, this._updateStyle);\n    viewer.control.gyro.off(CONTROL_EVENTS.DISABLE, this._updateStyle);\n    element.removeEventListener(BROWSER.EVENTS.CLICK, this._onClick);\n    element.className = \"\";\n\n    this._controlBar = null;\n    this._viewer = null;\n  }\n\n  private _onClick = () => {\n    const viewer = this._viewer;\n    const controlBar = this._controlBar;\n\n    if (!viewer || !controlBar) return;\n\n    const gyroControl = viewer.control.gyro;\n    if (gyroControl.enabled) {\n      gyroControl.disable();\n    } else {\n      GyroControl.requestSensorPermission().then(available => {\n        if (available) {\n          gyroControl.enable();\n        } else {\n          this.element.classList.add(controlBar.className.UNAVAILABLE);\n        }\n      });\n    }\n  };\n\n  private _updateStyle = () => {\n    const element = this.element;\n    const viewer = this._viewer;\n    const controlBar = this._controlBar;\n\n    if (!viewer || !controlBar) return;\n\n    const gyroControl = viewer.control.gyro;\n    const className = controlBar.className;\n\n    if (gyroControl.enabled) {\n      element.classList.add(className.GYRO_ENABLED);\n      element.classList.remove(className.GYRO_DISABLED);\n    } else {\n      element.classList.add(className.GYRO_DISABLED);\n      element.classList.remove(className.GYRO_ENABLED);\n    }\n  };\n}\n\nexport default GyroButton;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport ControlBar from \"./ControlBar\";\nimport View360 from \"../../View360\";\nimport * as BROWSER from \"../../const/browser\";\nimport { FULLSCREEN_CHANGE } from \"../../const/browser\";\nimport TextureVideo from \"../../texture/TextureVideo\";\nimport { isFullscreen } from \"../../utils\";\n\n/**\n * Options for ControlBar's {@link ControlBarOptions#autoHide}\n * @ko ControlBar의 {@link ControlBarOptions#autoHide}용 옵션\n * @category Plugin\n * @since 4.0.0\n */\nexport interface AutoHideOptions {\n  /**\n   * Initial delay before the control bar hides (ms)\n   * @ko 컨트롤바가 처음으로 표시되고 사라지기까지 걸리는 시간 (ms)\n   * @default 3000\n   * @since 4.0.0\n   */\n  initialDelay: number;\n  /**\n   * Delay time before hiding the control bar after mouse leave (ms)\n   * @ko 마우스가 컨트롤바 영역을 떠난 뒤 컨트롤바가 사라지기까지 걸리는 시간 (ms)\n   * @default 0\n   * @since 4.0.0\n   */\n  delay: number;\n  /**\n   * Delay time before hiding the control bar becomes active, like touch on mobile device or mouse move in fullscreen mode (ms)\n   * @ko 모바일이나 풀스크린 환경 등에서 사용자 입력이 없을 때 컨트롤바가 사라지기까지 걸리는 시간 (ms)\n   * @default 3000\n   * @since 4.0.0\n   */\n  idleDelay: number;\n}\n\nclass AutoHide {\n  private _initialDelay: AutoHideOptions[\"initialDelay\"];\n  private _delay: AutoHideOptions[\"delay\"];\n  private _idleDelay: AutoHideOptions[\"idleDelay\"];\n\n  private _controlBar: ControlBar;\n  private _timer: number;\n  private _isGrabbing: boolean;\n  private _isCursorInside: boolean;\n  private _isFullscreen: boolean;\n  private _targetEl: HTMLElement | null;\n  private _video: TextureVideo | null;\n\n  public get enabled() { return !!this._targetEl; }\n  public get hidden() { return this._controlBar.containerEl.classList.contains(this._hiddenClass); }\n\n  private get _hiddenClass() { return this._controlBar.className.HIDDEN; }\n  private get _fixedClass() { return this._controlBar.className.FIXED; }\n\n  public constructor(controlBar: ControlBar, {\n    initialDelay = 3000,\n    delay = 0,\n    idleDelay: activationDelay = 3000\n  }: Partial<AutoHideOptions>) {\n    this._controlBar = controlBar;\n    this._initialDelay = initialDelay;\n    this._delay = delay;\n    this._idleDelay = activationDelay;\n    this._timer = -1;\n    this._isCursorInside = false;\n    this._isGrabbing = false;\n    this._isFullscreen = false;\n    this._video = null;\n    this._targetEl = null;\n  }\n\n  public enable(viewer: View360) {\n    if (this._targetEl) {\n      this.disable(viewer);\n    }\n\n    const initialDelay = this._initialDelay;\n    const root = viewer.rootEl;\n\n    this._targetEl = viewer.rootEl;\n    this._timer = window.setTimeout(() => {\n      this.hide();\n    }, initialDelay);\n\n    root.addEventListener(BROWSER.EVENTS.MOUSE_DOWN, this._onHold);\n    root.addEventListener(BROWSER.EVENTS.MOUSE_ENTER, this._onMouseEnter);\n    root.addEventListener(BROWSER.EVENTS.MOUSE_MOVE, this._onMouseMove);\n    root.addEventListener(BROWSER.EVENTS.MOUSE_LEAVE, this._onMouseLeave);\n    this._addFullscreenHandlers();\n\n    const video = viewer.projection?.getTexture();\n    if (!video || !video.isVideo()) {\n      return;\n    }\n\n    if (video.isPaused()) {\n      this._controlBar.containerEl.classList.add(this._fixedClass);\n    }\n\n    video.source.addEventListener(BROWSER.EVENTS.VIDEO_PLAY, this._onVideoPlay);\n    video.source.addEventListener(BROWSER.EVENTS.VIDEO_PAUSE, this._onVideoPause);\n\n    this._video = video;\n  }\n\n  public disable(viewer: View360) {\n    if (!this._targetEl) return;\n\n    const controlBar = this._controlBar;\n    const root = viewer.rootEl;\n    const video = this._video;\n\n    root.removeEventListener(BROWSER.EVENTS.MOUSE_DOWN, this._onHold);\n    window.removeEventListener(BROWSER.EVENTS.MOUSE_UP, this._onRelease);\n    root.removeEventListener(BROWSER.EVENTS.MOUSE_ENTER, this._onMouseEnter);\n    root.removeEventListener(BROWSER.EVENTS.MOUSE_MOVE, this._onMouseMove);\n    root.removeEventListener(BROWSER.EVENTS.MOUSE_LEAVE, this._onMouseLeave);\n    this._removeFullscreenHandlers();\n\n    window.clearTimeout(this._timer);\n    controlBar.containerEl.classList.remove(this._fixedClass);\n\n    if (video) {\n      video.source.removeEventListener(BROWSER.EVENTS.VIDEO_PLAY, this._onVideoPlay);\n      video.source.removeEventListener(BROWSER.EVENTS.VIDEO_PAUSE, this._onVideoPause);\n    }\n\n    this._isCursorInside = false;\n    this._isGrabbing = false;\n    this._video = null;\n    this._targetEl = null;\n  }\n\n  public show() {\n    this._clearHideTimer();\n    this._controlBar.containerEl.classList.remove(this._hiddenClass);\n  }\n\n  public showTemporaliy() {\n    this.show();\n    this._hideAfterDelay(this._idleDelay);\n  }\n\n  public hide() {\n    this._clearHideTimer();\n    this._controlBar.containerEl.classList.add(this._hiddenClass);\n  }\n\n  private _clearHideTimer() {\n    if (this._timer) {\n      window.clearTimeout(this._timer);\n      this._timer = -1;\n    }\n  }\n\n  private _hideAfterDelay(delay = this._delay) {\n    if (this._isGrabbing || (!this._isFullscreen && this._isCursorInside)) return;\n\n    this._clearHideTimer();\n    if (delay <= 0) {\n      this.hide();\n    } else {\n      this._timer = window.setTimeout(() => {\n        this.hide();\n      }, delay);\n    }\n  }\n\n  private _onMouseEnter = () => {\n    this._isCursorInside = true;\n    this.show();\n  };\n\n  private _onMouseLeave = () => {\n    this._isCursorInside = false;\n    this._hideAfterDelay();\n  };\n\n  private _onMouseMove = () => {\n    if (!this._isFullscreen) return;\n\n    this.showTemporaliy();\n  }\n\n  private _onHold = (evt: PointerEvent) => {\n    this._isGrabbing = true;\n\n    if (evt.pointerType === \"mouse\") {\n      this._isCursorInside = true;\n    }\n\n    window.addEventListener(BROWSER.EVENTS.MOUSE_UP, this._onRelease);\n\n    this.show();\n  };\n\n  private _onRelease = () => {\n    this._isGrabbing = false;\n\n    window.removeEventListener(BROWSER.EVENTS.MOUSE_UP, this._onRelease);\n\n    this._hideAfterDelay();\n  };\n\n  private _onVideoPlay = () => {\n    const root = this._targetEl;\n    if (!root) return;\n\n    this._controlBar.containerEl.classList.remove(this._fixedClass);\n  };\n\n  private _onVideoPause = () => {\n    const root = this._targetEl;\n    if (!root) return;\n\n    this._controlBar.containerEl.classList.add(this._fixedClass);\n  };\n\n  private _addFullscreenHandlers() {\n    FULLSCREEN_CHANGE.forEach(evtName => {\n      document.addEventListener(evtName, this._onFullscreenChange);\n    });\n  }\n\n  private _removeFullscreenHandlers() {\n    FULLSCREEN_CHANGE.forEach(evtName => {\n      document.removeEventListener(evtName, this._onFullscreenChange);\n    });\n  }\n\n  private _onFullscreenChange = () => {\n    this._isFullscreen = isFullscreen();\n\n    if (this._isFullscreen) {\n      this._hideAfterDelay();\n    }\n  };\n}\n\nexport default AutoHide;\n","import TextureVideo from \"../../texture/TextureVideo\";\nimport * as BROWSER from \"../../const/browser\";\nimport { clamp } from \"../../utils\";\nimport { VIDEO_TIME_CHANGE_EVENT } from \"../../const/internal\";\n\nclass VideoControl {\n  private _video: TextureVideo | null;\n\n  public enable(root: HTMLElement, video: TextureVideo) {\n    this._video = video;\n    // capture is needed for resolving conflict with keyboard control\n    root.addEventListener(BROWSER.EVENTS.KEY_DOWN, this._onKeyDown, true);\n  }\n\n  public disable(root: HTMLElement) {\n    this._video = null;\n    root.removeEventListener(BROWSER.EVENTS.KEY_DOWN, this._onKeyDown, true);\n  }\n\n  private _onKeyDown = (event: KeyboardEvent) => {\n    const video = this._video;\n    if (!video) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    const videoEl = video.source;\n    const keyPressed = event.keyCode != null\n      ? BROWSER.DIRECTION_KEY_CODE[event.keyCode]\n      : BROWSER.DIRECTION_KEY_NAME[event.key];\n\n    switch (keyPressed) {\n      case \"LEFT\":\n      case \"RIGHT\":\n        return this._changeVideoTime(videoEl, keyPressed === \"RIGHT\");\n      case \"UP\":\n      case \"DOWN\":\n        return this._changeVideoVolume(videoEl, keyPressed === \"UP\");\n    }\n\n    const spacePressed = event.keyCode === BROWSER.SPACE_KEY_CODE || event.key === BROWSER.SPACE_KEY_NAME;\n    if (spacePressed) {\n      this._toggleVideo(video);\n    }\n  }\n\n  private _changeVideoTime(video: HTMLVideoElement, forward: boolean) {\n    const delta = forward ? 5 : -5;\n\n    video.currentTime += delta;\n    video.dispatchEvent(new CustomEvent(VIDEO_TIME_CHANGE_EVENT, { detail: { time: video.currentTime }}));\n  }\n\n  private _changeVideoVolume(video: HTMLVideoElement, increase: boolean) {\n    const delta = increase ? 0.1 : -0.1;\n\n    if (video.muted) {\n      video.volume = clamp(delta, 0, 1);\n    } else {\n      video.volume = clamp(video.volume + delta, 0, 1);\n    }\n\n    if (video.volume > 0) {\n      video.muted = false;\n    } else {\n      video.muted = true;\n    }\n  }\n\n  private _toggleVideo(video: TextureVideo) {\n    if (video.isPaused()) {\n      video.source.play();\n    } else {\n      video.source.pause();\n    }\n  }\n}\n\nexport default VideoControl;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport ControlBarItem, { ControlBarItemOptions } from \"./ControlBarItem\";\nimport ProgressBar from \"./ProgressBar\";\nimport PlayButton from \"./PlayButton\";\nimport VolumeControl from \"./VolumeControl\";\nimport FullscreenButton from \"./FullscreenButton\";\nimport VideoTime from \"./VideoTime\";\nimport PieView, { PieViewOptions } from \"./PieView\";\nimport VRButton from \"./VRButton\";\nimport GyroButton from \"./GyroButton\";\nimport AutoHide, { AutoHideOptions } from \"./AutoHide\";\nimport VideoControl from \"./VideoControl\";\nimport View360, { View360Events } from \"../../View360\";\nimport View360Plugin from \"../View360Plugin\";\nimport { EVENTS } from \"../../const/external\";\nimport { createElement, findIndex, getObjectOption } from \"../../utils\";\nimport { ValueOf } from \"../../type/utils\";\nimport { StaticClickEvent } from \"../../type/events\";\nimport { CONTROL_BAR_DEFAULT_CLASS, CONTROL_BAR_ITEM_POSITION } from \"./const\";\n\n/**\n * Options for {@link ControlBar}\n * @ko {@link ControlBar}용 옵션들\n * @category Plugin\n * @since 4.0.0\n */\nexport interface ControlBarOptions {\n  /**\n   * @copy ControlBar#autoHide\n   */\n  autoHide: boolean | Partial<AutoHideOptions>;\n  /**\n   * @copy ControlBar#showBackground\n   */\n  showBackground: boolean;\n  /**\n   * @copy ControlBar#clickToPlay\n   */\n  clickToPlay: boolean;\n  /**\n   * @copy ControlBar#keyboardControls\n   */\n  keyboardControls: boolean;\n  /**\n   * @copy ControlBar#progressBar\n   */\n  progressBar: boolean | Partial<ControlBarItemOptions>;\n  /**\n   * @copy ControlBar#playButton\n   */\n  playButton: boolean | Partial<ControlBarItemOptions>;\n  /**\n   * @copy ControlBar#volumeButton\n   */\n  volumeButton: boolean | Partial<ControlBarItemOptions>;\n  /**\n   * @copy ControlBar#fullscreenButton\n   */\n  fullscreenButton: boolean | Partial<ControlBarItemOptions>;\n  /**\n   * @copy ControlBar#videoTime\n   */\n  videoTime: boolean | Partial<ControlBarItemOptions>;\n  /**\n   * @copy ControlBar#pieView\n   */\n  pieView: boolean | Partial<PieViewOptions>;\n  /**\n   * @copy ControlBar#vrButton\n   */\n  vrButton: boolean | Partial<ControlBarItemOptions>;\n  /**\n   * @copy ControlBar#gyroButton\n   */\n  gyroButton: boolean | Partial<ControlBarItemOptions>;\n  /**\n   * @copy ControlBar#className\n   */\n  className: Partial<{ -readonly [key in keyof typeof ControlBar.DEFAULT_CLASS]: string }>;\n  /**\n   * @copy ControlBar#customItems\n   */\n  customItems: ControlBarItem[];\n}\n\n/**\n * A plugin that displays extra buttons & controls that controls {@link View360}.\n * @ko {@link View360}에 부가적인 버튼과 컨트롤을 추가해주는 플러그인.\n * @category Plugin\n * @since 4.0.0\n */\nclass ControlBar implements View360Plugin {\n  /**\n   * Default class names that ControlBar uses\n   * @ko ControlBar가 사용하는 디폴트 클래스 이름들\n   * @since 4.0.0\n   */\n  public static readonly DEFAULT_CLASS = CONTROL_BAR_DEFAULT_CLASS;\n\n  /**\n   * Constants for {@link ControlBarItemOptions#position}\n   * @ko {@link ControlBarItemOptions#position}에 사용 가능한 값들\n   */\n  public static readonly POSITION = CONTROL_BAR_ITEM_POSITION;\n\n  /**\n   * Automatically hide control bar on video plays.\n   * `true` to enable with default values, `false` to disable.\n   * @ko 비디오 재생시 자동으로 컨트롤바를 숨깁니다.\n   * `true`일 경우 기본값을 적용하고, `false`일 경우 비활성화합니다.\n   * @since 4.0.0\n   */\n  public readonly autoHide?: ControlBarOptions[\"autoHide\"];\n  /**\n   * Show background element.\n   * @ko 배경 엘리먼트를 표시합니다.\n   * @since 4.0.0\n   */\n  public readonly showBackground?: ControlBarOptions[\"showBackground\"];\n  /**\n   * Whether to play / pause video on canvas click\n   * @ko 캔버스 클릭시에 비디오를 재생 / 일시정지 토글합니다.\n   * @since 4.0.0\n   */\n  public readonly clickToPlay: ControlBarOptions[\"clickToPlay\"];\n  /**\n   * Enable keyboard controls for video.\n   * Pressing up / down arrow will control video volume, and pressing left / right arrow will control video time.\n   * @ko 비디오 키보드 컨트롤을 활성화합니다.\n   * 위 / 아래 화살표키를 누를 시 비디오 볼륨을, 왼쪽 / 오른쪽 화살표키를 누를 시 비디오 시간을 조정합니다.\n   * @since 4.0.0\n   */\n  public readonly keyboardControls: ControlBarOptions[\"keyboardControls\"];\n  /**\n   * Show video progress bar.\n   * `true` to enable with default values, `false` to disable.\n   * @ko 비디오 프로그레스 바를 표시합니다.\n   * `true`일 경우 기본값을 적용하고, `false`일 경우 비활성화합니다.\n   * @since 4.0.0\n   */\n  public readonly progressBar: ControlBarOptions[\"progressBar\"];\n  /**\n   * Show video play / pause button.\n   * `true` to enable with default values, `false` to disable.\n   * @ko 비디오 재생 / 일시정지 버튼을 표시합니다.\n   * `true`일 경우 기본값을 적용하고, `false`일 경우 비활성화합니다.\n   * @since 4.0.0\n   */\n  public readonly playButton: ControlBarOptions[\"playButton\"];\n  /**\n   * Show video volume control button.\n   * `true` to enable with default values, `false` to disable.\n   * @ko 비디오 볼륨 조절 버튼을 표시합니다.\n   * `true`일 경우 기본값을 적용하고, `false`일 경우 비활성화합니다.\n   * @since 4.0.0\n   */\n  public readonly volumeButton: ControlBarOptions[\"volumeButton\"];\n  /**\n   * Show fullscreen button.\n   * `true` to enable with default values, `false` to disable.\n   * @ko 풀스크린 진입 / 해제 버튼을 표시합니다.\n   * `true`일 경우 기본값을 적용하고, `false`일 경우 비활성화합니다.\n   * @since 4.0.0\n   */\n  public readonly fullscreenButton: ControlBarOptions[\"fullscreenButton\"];\n  /**\n   * Show video current / total time\n   * `true` to enable with default values, `false` to disable.\n   * @ko 비디오의 현재 시간 / 총 시간을 표시합니다.\n   * `true`일 경우 기본값을 적용하고, `false`일 경우 비활성화합니다.\n   * @since 4.0.0\n   */\n  public readonly videoTime: ControlBarOptions[\"videoTime\"];\n  /**\n   * Show camera pie view.\n   * `true` to enable with default values, `false` to disable.\n   * @ko 현재 카메라가 가리키는 방향을 표시하는 파이 뷰를 표시합니다.\n   * `true`일 경우 기본값을 적용하고, `false`일 경우 비활성화합니다.\n   * @since 4.0.0\n   */\n  public readonly pieView: ControlBarOptions[\"pieView\"];\n  /**\n   * Show VR button.\n   * `true` to enable with default values, `false` to disable.\n   * @ko VR 진입버튼을 표시합니다.\n   * `true`일 경우 기본값을 적용하고, `false`일 경우 비활성화합니다.\n   * @since 4.0.0\n   */\n  public readonly vrButton: ControlBarOptions[\"vrButton\"];\n  /**\n   * Show gyroscope control enable / disable button.\n   * `true` to enable with default values, `false` to disable.\n   * @ko 자이로스코프 컨트롤을 활성화 / 비활성화하는 버튼을 표시합니다.\n   * `true`일 경우 기본값을 적용하고, `false`일 경우 비활성화합니다.\n   * @since 4.0.0\n   */\n  public readonly gyroButton: ControlBarOptions[\"gyroButton\"];\n  /**\n   * Override default class names.\n   * @ko 디폴트 클래스 이름들을 오버라이드합니다.\n   * @since 4.0.0\n   */\n  public readonly className: Required<ControlBarOptions[\"className\"]>;\n\n  /**\n   * Root element of the control bar\n   * @ko 컨트롤바의 루트 엘리먼트\n   * @since 4.0.0\n   */\n  public get rootEl() { return this._rootEl; }\n  /**\n   * Container element of the control bar\n   * @ko 컨트롤바의 컨테이너 엘리먼트\n   * @since 4.0.0\n   */\n  public get containerEl() { return this._containerEl; }\n  /**\n   * Background element of the control bar\n   * @ko 컨트롤바의 배경 엘리먼트\n   * @since 4.0.0\n   */\n  public get backgroundEl() { return this._bgEl; }\n  /**\n   * Control bar's default items created by {@link ControlBarOptions}\n   * @ko 주어진 {@link ControlBarOptions}에 의해 생성된 디폴트 아이템들\n   * @since 4.0.0\n   */\n  public get items() { return this._items; }\n  /**\n   * Custom control bar items\n   * @ko 커스텀 컨트롤바 아이템들을 추가합니다.\n   * @since 4.0.0\n   */\n  public get customItems() { return this._customItems; }\n\n  private _rootEl: HTMLElement;\n  private _containerEl: HTMLElement;\n  private _bgEl: HTMLElement;\n  private _wrapperEl: Record<ValueOf<typeof ControlBar.POSITION>, HTMLElement>;\n  private _items: Record<ValueOf<typeof ControlBar.POSITION>, ControlBarItem[]>;\n  private _customItems: ControlBarItem[];\n  private _autoHider: AutoHide;\n  private _videoControl: VideoControl;\n\n  /**\n   * Create new instance of ControlBar.\n   * @ko ControlBar의 새 인스턴스를 생성합니다.\n   * @param options - Options {@ko 옵션들}\n   */\n  public constructor({\n    autoHide,\n    showBackground,\n    clickToPlay = true,\n    keyboardControls = true,\n    progressBar = true,\n    playButton = true,\n    volumeButton = true,\n    fullscreenButton = true,\n    videoTime = true,\n    pieView = true,\n    vrButton = true,\n    gyroButton = true,\n    className = {},\n    customItems = []\n  }: Partial<ControlBarOptions> = {}) {\n    this.autoHide = autoHide;\n    this.showBackground = showBackground;\n    this.clickToPlay = clickToPlay;\n    this.keyboardControls = keyboardControls;\n    this.progressBar = progressBar;\n    this.playButton = playButton;\n    this.volumeButton = volumeButton;\n    this.fullscreenButton = fullscreenButton;\n    this.videoTime = videoTime;\n    this.pieView = pieView;\n    this.vrButton = vrButton;\n    this.gyroButton = gyroButton;\n    this.className = {\n      ...ControlBar.DEFAULT_CLASS,\n      ...className\n    };\n\n    const rootClass = className.CONTROLS_ROOT ?? ControlBar.DEFAULT_CLASS.CONTROLS_ROOT;\n\n    this._rootEl = createElement(rootClass);\n    this._createPositionWrappers();\n    this._items = Object.keys(ControlBar.POSITION).reduce((items, key) => {\n      items[ControlBar.POSITION[key]] = [];\n      return items;\n    }, {}) as Record<ValueOf<typeof ControlBar.POSITION>, ControlBarItem[]>;\n    this._customItems = customItems;\n    this._autoHider = new AutoHide(this, getObjectOption(autoHide));\n    this._videoControl = new VideoControl();\n\n    customItems.forEach(item => {\n      this._items[item.position].push(item);\n    });\n  }\n\n  public init(viewer: View360) {\n    const panoRoot = viewer.rootEl;\n    const controlsRoot = this._rootEl;\n    const defaultItems = this._createDefaultItems();\n\n    this._updateBackground(viewer);\n    this._updateAutoHide(viewer);\n    this._updateKeyboardHandler(viewer);\n\n    panoRoot.appendChild(controlsRoot);\n    this._addItem(viewer, defaultItems);\n    this._addItem(viewer, this._customItems);\n\n    viewer.on(EVENTS.PROJECTION_CHANGE, this._onNewSrcLoad);\n    viewer.on(EVENTS.STATIC_CLICK, this._onStaticClick);\n  }\n\n  public destroy(viewer: View360): void {\n    // Remove controls root from pano root\n    const panoRoot = viewer.rootEl;\n    const controlsRoot = this._rootEl;\n    const items = this._items;\n\n    if (controlsRoot.parentElement === panoRoot) {\n      panoRoot.removeChild(controlsRoot);\n    }\n\n    Object.keys(items).forEach((key: ValueOf<typeof ControlBar.POSITION>) => {\n      const category = items[key];\n\n      category.forEach(item => {\n        item.destroy(viewer, this);\n      });\n\n      items[key] = [];\n    });\n\n    this._clearItemElements();\n    this._autoHider.disable(viewer);\n    this._videoControl.disable(panoRoot);\n\n    viewer.off(EVENTS.PROJECTION_CHANGE, this._onNewSrcLoad);\n    viewer.off(EVENTS.STATIC_CLICK, this._onStaticClick);\n  }\n\n  private _addItem(viewer: View360, items: ControlBarItem[]) {\n    for (const item of items) {\n      const category = this._items[item.position];\n      const wrapper = this._wrapperEl[item.position];\n\n      const nextSiblingIndex = findIndex(category, sibling => sibling.order > item.order);\n\n      if (nextSiblingIndex >= 0) {\n        const nextSibling = category[nextSiblingIndex].element;\n        category.splice(nextSiblingIndex, 0, item);\n        wrapper.insertBefore(item.element, nextSibling);\n      } else {\n        category.push(item);\n        wrapper.appendChild(item.element);\n      }\n\n      item.init(viewer, this);\n    }\n  }\n\n  private _createPositionWrappers() {\n    const className = {\n      ...ControlBar.DEFAULT_CLASS,\n      ...this.className\n    };\n    const rootEl = this._rootEl;\n\n    // BG & FLOATING CONTROLS\n    const backgroundEl = createElement(className.CONTROLS_BG);\n    const floatLeftEl = createElement(className.CONTROLS_FLOAT_LEFT);\n    const floatRightEl = createElement(className.CONTROLS_FLOAT_RIGHT);\n\n    rootEl.appendChild(floatLeftEl);\n    rootEl.appendChild(floatRightEl);\n\n    // BOTTOM CONTROLS\n    const container = createElement(className.CONTROLS_MAIN);\n    const topWrapper = createElement(className.CONTROLS_TOP);\n    const bottomWrapper = createElement(className.CONTROLS_BOTTOM);\n    const midWrapper = createElement(className.CONTROLS_MID);\n    const leftControlsWrapper = createElement(className.CONTROLS_LEFT);\n    const rightControlsWrapper = createElement(className.CONTROLS_RIGHT);\n\n    midWrapper.appendChild(leftControlsWrapper);\n    midWrapper.appendChild(rightControlsWrapper);\n    container.appendChild(backgroundEl);\n    container.appendChild(topWrapper);\n    container.appendChild(midWrapper);\n    container.appendChild(bottomWrapper);\n    rootEl.appendChild(container);\n\n    this._bgEl = backgroundEl;\n    this._containerEl = container;\n    this._wrapperEl = {\n      [ControlBar.POSITION.MAIN_TOP]: topWrapper,\n      [ControlBar.POSITION.MAIN_LEFT]: leftControlsWrapper,\n      [ControlBar.POSITION.MAIN_RIGHT]: rightControlsWrapper,\n      [ControlBar.POSITION.MAIN_BOTTOM]: bottomWrapper,\n      [ControlBar.POSITION.TOP_LEFT]: floatLeftEl,\n      [ControlBar.POSITION.TOP_RIGHT]: floatRightEl\n    };\n  }\n\n  private _clearItemElements() {\n    const wrappers = Object.keys(ControlBar.POSITION).map(key => ControlBar.POSITION[key]);\n\n    // Remove all elements inside wrappers\n    wrappers.forEach(wrapper => {\n      while (wrapper.firstChild) {\n        wrapper.removeChild(wrapper.firstChild);\n      }\n    });\n  }\n\n  private _onStaticClick = ({ target: viewer, isTouch }: StaticClickEvent) => {\n    const autoHider = this._autoHider;\n\n    if (isTouch) {\n      if (!autoHider.enabled) return;\n\n      if (autoHider.hidden) {\n        autoHider.showTemporaliy();\n      } else {\n        autoHider.hide();\n      }\n    } else {\n      if (!this.clickToPlay) return;\n\n      const video = viewer.projection?.getTexture();\n      if (!video || !video.isVideo()) return;\n\n      if (video.isPaused()) {\n        video.source.play();\n      } else {\n        video.source.pause();\n      }\n    }\n  };\n\n  private _onNewSrcLoad = ({ target: viewer }: View360Events[\"projectionChange\"]) => {\n    const items = this._items;\n\n    this._updateBackground(viewer);\n    this._updateAutoHide(viewer);\n    this._updateKeyboardHandler(viewer);\n\n    Object.keys(items).forEach((key: ValueOf<typeof ControlBar.POSITION>) => {\n      const category = items[key];\n\n      category.forEach(item => {\n        item.destroy(viewer, this);\n        item.init(viewer, this);\n      });\n    });\n  };\n\n  private _updateAutoHide(viewer: View360) {\n    const autoHide = this.autoHide;\n    const autoHider = this._autoHider;\n\n    if (autoHide != null) {\n      if (autoHide) {\n        autoHider.enable(viewer);\n      } else {\n        autoHider.disable(viewer);\n      }\n    } else {\n      // Automatically choose whether to show background by content type\n      const texture = viewer.projection?.getTexture();\n\n      if (texture && texture.isVideo()) {\n        // Enable auto hide when content type is video\n        autoHider.enable(viewer);\n      } else {\n        autoHider.disable(viewer);\n      }\n    }\n  }\n\n  private _updateBackground(viewer: View360) {\n    const background = this._bgEl;\n    const showBackground = this.showBackground;\n    const hiddenClass = this.className.HIDDEN ?? ControlBar.DEFAULT_CLASS.HIDDEN;\n\n    if (showBackground != null) {\n      if (showBackground) {\n        background.classList.remove(hiddenClass);\n      } else {\n        background.classList.add(hiddenClass);\n      }\n    } else {\n      // Automatically choose whether to show background by content type\n      const texture = viewer.projection?.getTexture();\n\n      if (texture && texture.isVideo()) {\n        // Show bg when content type is video\n        background.classList.remove(hiddenClass);\n      } else {\n        background.classList.add(hiddenClass);\n      }\n    }\n  }\n\n  private _updateKeyboardHandler(viewer: View360) {\n    const panoRoot = viewer.rootEl;\n    const videoControl = this._videoControl;\n    const texture = viewer.projection?.getTexture();\n\n    if (this.keyboardControls && texture && texture.isVideo()) {\n      videoControl.enable(panoRoot, texture);\n    } else {\n      videoControl.disable(panoRoot);\n    }\n  }\n\n  private _createDefaultItems(): ControlBarItem[] {\n    const items: ControlBarItem[] = [];\n\n    if (this.progressBar) {\n      items.push(new ProgressBar(getObjectOption(this.progressBar)));\n    }\n\n    if (this.playButton) {\n      items.push(new PlayButton(getObjectOption(this.playButton)));\n    }\n\n    if (this.volumeButton) {\n      items.push(new VolumeControl(getObjectOption(this.volumeButton)));\n    }\n\n    if (this.gyroButton) {\n      items.push(new GyroButton(getObjectOption(this.gyroButton)));\n    }\n\n    if (this.vrButton) {\n      items.push(new VRButton(getObjectOption(this.vrButton)));\n    }\n\n    if (this.fullscreenButton) {\n      items.push(new FullscreenButton(getObjectOption(this.fullscreenButton)));\n    }\n\n    if (this.videoTime) {\n      items.push(new VideoTime(getObjectOption(this.videoTime)));\n    }\n\n    if (this.pieView) {\n      items.push(new PieView(getObjectOption(this.pieView)));\n    }\n\n    return items;\n  }\n}\n\nexport default ControlBar;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Camera from \"../core/Camera\";\nimport PanoControl from \"../control/PanoControl\";\nimport TriangleMesh from \"../core/TriangleMesh\";\nimport Texture from \"../texture/Texture\";\nimport WebGLContext from \"../core/WebGLContext\";\nimport { VideoConfig } from \"../type/external\";\nimport UniformCanvasCube from \"../uniform/UniformCanvasCube\";\nimport UniformTexture2D from \"../uniform/UniformTexture2D\";\nimport UniformTextureCube from \"../uniform/UniformTextureCube\";\n\ntype CommonProjectionUniforms = {\n  uTexture: UniformTexture2D | UniformTextureCube | UniformCanvasCube;\n}\n\n/**\n * Common option for {@link Projection}s\n * @ko {@link Projection}을 위한 공통 옵션들\n * @category Projection\n * @since 4.0.0\n */\nexport interface ProjectionOptions {\n  /**\n   * @copy Projection#src\n   */\n  src: string | HTMLElement | Array<string | HTMLElement>;\n  /**\n   * @copy Projection#video\n   */\n  video?: boolean | Partial<VideoConfig>;\n}\n\n/**\n * Base class for projections.\n * @ko 프로젝션 베이스 클래스.\n * @category Projection\n * @since 4.0.0\n */\nabstract class Projection<T extends CommonProjectionUniforms = CommonProjectionUniforms> {\n  /**\n   * Source URL to panorama image/video.\n   * @ko 파노라마 이미지/비디오의 URL\n   * @since 4.0.0\n   */\n  public readonly src: ProjectionOptions[\"src\"];\n  /**\n   * Properties for the video element.\n   * Setting `false` will treat panorama source as an image, `true` will use default properties.\n   * @ko 비디오 엘리먼트에 설정할 프로퍼티를 담는 객체.\n   * @since 4.0.0\n   * @example\n   * Default properties\n   * ```ts\n   * autoplay: true\n   * muted: true\n   * loop: false\n   * volume: 1\n   * ```\n   */\n  public readonly video: ProjectionOptions[\"video\"];\n\n  protected _mesh: TriangleMesh<T> | null;\n\n  /**\n   * Create new instance\n   * @ko 새로운 인스턴스를 생성합니다.\n   * @param options - Options {@ko 옵션들}\n   */\n  public constructor({\n    src,\n    video = false\n  }: ProjectionOptions) {\n    this.src = src;\n    this.video = video;\n    this._mesh = null;\n  }\n\n  /**\n   * Apply texture to current projection.\n   * @ko 주어진 텍스쳐를 현재 프로젝션에 적용합니다.\n   * @param ctx - Instance of the WebGLContext helper {@ko WebGL context 헬퍼의 인스턴스}\n   * @param texture - New texture to apply {@ko 새로 적용할 텍스쳐}\n   * @internal\n   * @since 4.0.0\n   */\n  public abstract applyTexture(ctx: WebGLContext, texture: Texture): void;\n\n  /**\n   * Release all resources projection has.\n   * This is automatically called on projection change & View360's destroy call\n   * @ko 현재 갖고 있는 모든 리소스를 반환합니다.\n   * 이 메소드는 프로젝션 변경 및 View360의 destroy 호출 시 자동으로 호출됩니다.\n   * @param ctx\n   */\n  public releaseAllResources(ctx: WebGLContext) {\n    this._mesh?.destroy(ctx);\n  }\n\n  /**\n   * Update camera to match projection's settings.\n   * @ko 현재 프로젝션의 세팅으로 카메라를 업데이트합니다.\n   * @param camera - Instance of the camera to update {@ko 업데이트할 카메라의 인스턴스}\n   * @since 4.0.0\n   */\n  public updateCamera(camera: Camera) {\n    // Use default mode & no view restriction\n    camera.resetRange();\n  }\n\n  /**\n   * Update control to match projection's settings.\n   * @ko 현재 프로젝션의 세팅으로 컨트롤을 업데이트합니다.\n   * @param control - Instance of the control to update {@ko 업데이트할 컨트롤의 인스턴스}\n   * @since 4.0.0\n   */\n  public updateControl(control: PanoControl) {\n    control.ignoreZoomScale = false;\n  }\n\n  /**\n   * Update projection.\n   * @ko 현재 프로젝션 정보를 갱신합니다.\n   * @param camera - Instance of the camera to reference {@ko 참조할 카메라의 인스턴스}\n   * @since 4.0.0\n   */\n  public update(camera: Camera) {} // eslint-disable-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n\n  /**\n   * Return active texture.\n   * @ko 현재 활성화된 텍스쳐를 반환합니다.\n   * @internal\n   * @since 4.0.0\n   */\n  public getTexture() {\n    if (!this._mesh) return null;\n\n    return this._mesh.program.uniforms.uTexture.texture;\n  }\n\n  /**\n   * A 3D triangle mesh for projection. It's `null` until loading the `src`.\n   * @ko Projection을 표시하기 위한 Mesh, src를 로드하기 전까지는 `null`입니다.\n   * @since 4.0.0\n   */\n  public getMesh(): TriangleMesh<T> | null {\n    return this._mesh;\n  }\n}\n\nexport default Projection;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nabstract class Uniform {\n  public needsUpdate: boolean;\n\n  public constructor() {\n    this.needsUpdate = true;\n  }\n\n  public abstract update(gl: WebGLRenderingContext | WebGL2RenderingContext, location: WebGLUniformLocation, isWebGL2: boolean): void;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public destroy(gl: WebGLRenderingContext | WebGL2RenderingContext) {\n    // DO_NOTHING\n  }\n}\n\nexport default Uniform;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport TextureCube from \"../texture/TextureCube\";\nimport { reorderCube } from \"../utils\";\nimport WebGLContext from \"../core/WebGLContext\";\nimport Uniform from \"./Uniform\";\n\nclass UniformTextureCube extends Uniform {\n  public readonly texture: TextureCube;\n  private _webglTexture: WebGLTexture;\n  private _cubemapOrder: string;\n\n  public constructor(ctx: WebGLContext, texture: TextureCube, cubemapOrder: string) {\n    super();\n\n    this.texture = texture;\n    this._webglTexture = ctx.createWebGLCubeTexture(texture, texture.width);\n    this._cubemapOrder = cubemapOrder;\n  }\n\n  public destroy(gl: WebGLRenderingContext | WebGL2RenderingContext): void {\n    this.texture.destroy();\n    gl.deleteTexture(this._webglTexture);\n  }\n\n  public update(gl: WebGLRenderingContext | WebGL2RenderingContext, location: WebGLUniformLocation, isWebGL2: boolean) {\n    const texture = this.texture;\n\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, texture.flipY);\n    gl.uniform1i(location, 0);\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, this._webglTexture);\n\n    const sources = reorderCube(texture.sources, this._cubemapOrder);\n    sources.forEach((src, idx) => {\n      if (isWebGL2) {\n        gl.texSubImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + idx, 0, 0, 0, gl.RGBA, gl.UNSIGNED_BYTE, src);\n      } else {\n        gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + idx, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, src);\n      }\n    });\n\n    if (!texture.isVideo()) {\n      this.needsUpdate = false;\n    }\n  }\n}\n\nexport default UniformTextureCube;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Texture2D from \"../texture/Texture2D\";\nimport { range, reorderCube } from \"../utils\";\n\n/** @hidden */\nclass CubeTexturePainter {\n  public readonly texture: Texture2D;\n  private _renderingOrder: number[];\n  private _canvas: HTMLCanvasElement;\n  private _ctx: CanvasRenderingContext2D;\n  private _row: number;\n  private _column: number;\n  private _size: number;\n\n  public get size() { return this._size; }\n\n  public constructor(texture: Texture2D, cubemapOrder: string) {\n    this.texture = texture;\n    this._renderingOrder = reorderCube(range(6), cubemapOrder);\n\n    const canvas = document.createElement(\"canvas\");\n\n    this._calcRenderingSize();\n\n    canvas.width = this._size;\n    canvas.height = this._size;\n\n    this._canvas = canvas;\n    this._ctx = canvas.getContext(\"2d\")!;\n  }\n\n  public destroy() {\n    const canvas = this._canvas;\n\n    // release memories\n    canvas.width = 1;\n    canvas.height = 1;\n    this._canvas = null as any;\n  }\n\n  public draw(gl: WebGLRenderingContext | WebGL2RenderingContext, isWebGL2: boolean) {\n    const size = this._size;\n    const texture = this.texture;\n    let surfaceIdx = 0;\n\n    for (let row = 0; row < this._row; row++) {\n      for (let column = 0; column < this._column; column++) {\n        const x = size * column;\n        const y = size * row;\n        const renderingFace = this._renderingOrder[surfaceIdx];\n\n        this._ctx.drawImage(texture.source as CanvasImageSource, x, y, size, size, 0, 0, size, size);\n\n        if (isWebGL2) {\n          gl.texSubImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderingFace, 0, 0, 0, gl.RGBA, gl.UNSIGNED_BYTE, this._canvas);\n        } else {\n          gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderingFace, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this._canvas);\n        }\n\n        surfaceIdx++;\n      }\n    }\n  }\n\n  private _calcRenderingSize() {\n    const {\n      width,\n      height\n    } = this.texture;\n    const aspect = width / height;\n\n    if (aspect === 1 / 6) {\n      this._size = width;\n      this._row = 6;\n      this._column = 1;\n    } else if (aspect === 6) {\n      this._size = height;\n      this._row = 1;\n      this._column = 6;\n    } else if (aspect === 2 / 3) {\n      this._size = width * 0.5;\n      this._row = 3;\n      this._column = 2;\n    } else {\n      this._size = width / 3;\n      this._row = 2;\n      this._column = 3;\n    }\n  }\n}\n\nexport default CubeTexturePainter;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport CubeTexturePainter from \"../core/CubeTexturePainter\";\nimport Texture2D from \"../texture/Texture2D\";\nimport WebGLContext from \"../core/WebGLContext\";\nimport Uniform from \"./Uniform\";\n\nclass UniformCanvasCube extends Uniform {\n  private _webglTexture: WebGLTexture;\n  private _painter: CubeTexturePainter;\n\n  public get texture() { return this._painter.texture; }\n\n  public constructor(ctx: WebGLContext, texture: Texture2D, cubemapOrder: string) {\n    super();\n\n    this._painter = new CubeTexturePainter(texture as Texture2D, cubemapOrder);\n    this._webglTexture = ctx.createWebGLCubeTexture(texture, this._painter.size);\n  }\n\n  public destroy(gl: WebGLRenderingContext | WebGL2RenderingContext) {\n    gl.deleteTexture(this._webglTexture);\n    this._painter.destroy();\n  }\n\n  public update(gl: WebGLRenderingContext | WebGL2RenderingContext, location: WebGLUniformLocation, isWebGL2: boolean) {\n    const texture = this.texture;\n\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.uniform1i(location, 0);\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, this._webglTexture);\n\n    this._painter.draw(gl, isWebGL2);\n\n    if (!texture.isVideo()) {\n      this.needsUpdate = false;\n    }\n  }\n}\n\nexport default UniformCanvasCube;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Object3D from \"./Object3D\";\nimport ShaderProgram from \"./ShaderProgram\";\nimport VertexArrayObject from \"./VertexArrayObject\";\nimport Uniform from \"../uniform/Uniform\";\nimport WebGLContext from \"./WebGLContext\";\n\n/**\n * @hidden\n */\nclass TriangleMesh<T extends Record<string, Uniform> = Record<string, never>> extends Object3D {\n  /**\n   * @internal\n   * Geometry data for projection\n   */\n  public readonly vao: VertexArrayObject;\n  /**\n   * @internal\n   * Material(shader) data for projection\n   */\n  public readonly program: ShaderProgram<T>;\n\n  public constructor(vao: VertexArrayObject, program: ShaderProgram<T>) {\n    super();\n\n    this.vao = vao;\n    this.program = program;\n  }\n\n  public destroy(ctx: WebGLContext) {\n    ctx.releaseVAO(this.vao);\n    ctx.releaseShaderResources(this.program);\n  }\n}\n\nexport default TriangleMesh;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Uniform from \"../uniform/Uniform\";\nimport WebGLContext from \"./WebGLContext\";\nimport { UniformLocations } from \"../type/internal\";\n\nclass ShaderProgram<T extends Record<string, Uniform> = Record<string, Uniform>> {\n  public readonly program: WebGLProgram;\n  public readonly uniforms: T;\n  public readonly uniformLocations: UniformLocations<T>;\n\n  public constructor(ctx: WebGLContext, vertexShader: string, fragmentShader: string, uniforms: T) {\n    this.program = ctx.createProgram(vertexShader, fragmentShader);\n    this.uniforms = uniforms;\n    this.uniformLocations = ctx.getUniformLocations(this.program, uniforms);\n  }\n}\n\nexport default ShaderProgram;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport { TypedArray } from \"../type/utils\";\n\n/**\n * @hidden\n */\nclass VertexData<T extends TypedArray> {\n  public readonly data: T;\n  public itemSize: number;\n  public count: number;\n\n  /** */\n  public constructor(data: T, itemSize: number) {\n    this.data = data;\n    this.itemSize = itemSize;\n    this.count = data.length / itemSize;\n  }\n}\n\nexport default VertexData;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport VertexData from \"../core/VertexData\";\n\n/**\n * @hidden\n */\nabstract class Geometry {\n  public readonly vertices: VertexData<Float32Array>;\n  public readonly indicies: VertexData<Uint16Array>;\n  public readonly uvs: VertexData<Float32Array>;\n\n  /** */\n  public constructor(vertices: number[], indicies: number[], uvs: number[]) {\n    this.vertices = new VertexData(new Float32Array(vertices), 3);\n    this.indicies = new VertexData(new Uint16Array(indicies), 1);\n    this.uvs = new VertexData(new Float32Array(uvs), 2);\n  }\n}\n\nexport default Geometry;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Geometry from \"./Geometry\";\nimport { ROTATE } from \"../const/internal\";\nimport { reorderCube } from \"../utils\";\n\n/**\n * @hidden\n */\nclass CubeGeometry extends Geometry {\n  public constructor({\n    order,\n    rotateUV\n  }: {\n    order: string;\n    rotateUV?: ROTATE[]\n  }) {\n    const vertices = [\n      // back\n      1, -1, 1,\n      -1, -1, 1,\n      -1, 1, 1,\n      1, 1, 1,\n\n      // front\n      -1, -1, -1,\n      1, -1, -1,\n      1, 1, -1,\n      -1, 1, -1,\n\n      // up\n      -1, 1, -1,\n      1, 1, -1,\n      1, 1, 1,\n      -1, 1, 1,\n\n      // down\n      -1, -1, 1,\n      1, -1, 1,\n      1, -1, -1,\n      -1, -1, -1,\n\n      // right\n      1, -1, -1,\n      1, -1, 1,\n      1, 1, 1,\n      1, 1, -1,\n\n      // left\n      -1, -1, 1,\n      -1, -1, -1,\n      -1, 1, -1,\n      -1, 1, 1\n    ];\n\n    const indicies = [\n      0, 1, 2,\n      0, 2, 3,\n      4, 5, 6,\n      4, 6, 7,\n      8, 9, 10,\n      8, 10, 11,\n      12, 13, 14,\n      12, 14, 15,\n      16, 17, 18,\n      16, 18, 19,\n      20, 21, 22,\n      20, 22, 23\n    ];\n\n    const oneThird = 1 / 3;\n    const coords: number[][] = [];\n\n    for (let r = 1; r >= 0; r--) {\n      for (let c = 0; c < 3; c++) {\n        const coord = [\n          c * oneThird, r * 0.5,\n          (c + 1) * oneThird, r * 0.5,\n          (c + 1) * oneThird, (r + 1) * 0.5,\n          c * oneThird, (r + 1) * 0.5\n        ];\n\n        coords.push(coord);\n      }\n    }\n\n    if (rotateUV) {\n      rotateUV.forEach((degree, idx) => {\n        if (degree === ROTATE.ZERO) return;\n\n        const coord = coords[idx];\n        let newOrder: number[];\n\n        if (degree === ROTATE.CW_90) {\n          newOrder = [1, 2, 3, 0];\n        } else if (degree === ROTATE.CCW_90) {\n          newOrder = [3, 0, 1, 2];\n        } else {\n          newOrder = [2, 3, 0, 1];\n        }\n\n        const newCoords = Array<number>(coord.length);\n        for (let uvIdx = 0; uvIdx < coord.length / 2; uvIdx++) {\n          newCoords[uvIdx * 2 + 0] = coord[newOrder[uvIdx] * 2 + 0];\n          newCoords[uvIdx * 2 + 1] = coord[newOrder[uvIdx] * 2 + 1];\n        }\n\n        coords[idx] = newCoords;\n      });\n    }\n\n    const uvs = reorderCube(coords, order, \"BFUDRL\")\n      .reduce((acc, val) => acc.concat(val), []);\n\n    super(vertices, indicies, uvs);\n  }\n}\n\nexport default CubeGeometry;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Projection, { ProjectionOptions } from \"./Projection\";\nimport UniformTextureCube from \"../uniform/UniformTextureCube\";\nimport UniformCanvasCube from \"../uniform/UniformCanvasCube\";\nimport TriangleMesh from \"../core/TriangleMesh\";\nimport ShaderProgram from \"../core/ShaderProgram\";\nimport WebGLContext from \"../core/WebGLContext\";\nimport Texture2D from \"../texture/Texture2D\";\nimport TextureCube from \"../texture/TextureCube\";\nimport CubeGeometry from \"../geometry/CubeGeometry\";\nimport vs from \"../shader/cube.vert\";\nimport fs from \"../shader/cube.frag\";\n\n/**\n * Options for {@link CubemapProjection}\n * @ko {@link CubemapProjection}의 옵션들\n * @since 4.0.0\n * @category Projection\n */\nexport interface CubemapProjectionOptions extends ProjectionOptions {\n  /**\n   * Order of the cubemap images.\n   * @ko 큐브맵 이미지의 순서.\n   * @since 4.0.0\n   * @default \"RLUDFB\" (Right - Left - Up - Down - Front - Back)\n   */\n  cubemapOrder?: string;\n  /**\n   * Whether to flip cubemap image horizontally.\n   * @ko 큐브맵 이미지를 좌우대칭할지 여부.\n   * @since 4.0.0\n   * @default false\n   */\n  cubemapFlipX?: boolean;\n}\n\n/**\n * Projection based on cubemap images, accepts both multiple or single images.\n * @ko 큐브맵 이미지 기반의 프로젝션, 단일 혹은 여러 장의 이미지를 모두 사용 가능합니다.\n * @since 4.0.0\n * @category Projection\n */\nclass CubemapProjection extends Projection<{\n  uTexture: UniformTextureCube | UniformCanvasCube;\n}> {\n  private _cubemapOrder: NonNullable<CubemapProjectionOptions[\"cubemapOrder\"]>;\n  private _cubemapFlipX: NonNullable<CubemapProjectionOptions[\"cubemapFlipX\"]>;\n\n  /**\n   * Create new instance.\n   * @ko 새 인스턴스를 생성합니다.\n   * @param options Options {@ko Options}\n   */\n  public constructor(options: CubemapProjectionOptions) {\n    super(options);\n\n    const {\n      cubemapOrder = \"RLUDFB\",\n      cubemapFlipX = false\n    } = options;\n\n    this._cubemapOrder = cubemapOrder;\n    this._cubemapFlipX = cubemapFlipX;\n  }\n\n  public applyTexture(ctx: WebGLContext, texture: Texture2D) {\n    const cubemapOrder = this._cubemapOrder;\n    const cubemapFlipX = this._cubemapFlipX;\n    const uniforms = {\n      uTexture: texture.isCube()\n        ? new UniformTextureCube(ctx, texture as TextureCube, cubemapOrder)\n        : new UniformCanvasCube(ctx, texture as Texture2D, cubemapOrder)\n    };\n\n    const geometry = new CubeGeometry({\n      order: cubemapOrder\n    });\n    const program = new ShaderProgram(ctx, vs, fs, uniforms);\n    const vao = ctx.createVAO(geometry, program);\n    const mesh = new TriangleMesh(vao, program);\n\n    if (cubemapFlipX) {\n      mesh.scale[0] = -1;\n    }\n    mesh.updateMatrix();\n\n    this._mesh = mesh;\n  }\n}\n\nexport default CubemapProjection;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Texture2D from \"../texture/Texture2D\";\nimport WebGLContext from \"../core/WebGLContext\";\nimport Uniform from \"./Uniform\";\n\nclass UniformTexture2D extends Uniform {\n  public readonly texture: Texture2D;\n  private _webglTexture: WebGLTexture;\n\n  public constructor(ctx: WebGLContext, texture: Texture2D) {\n    super();\n\n    this.texture = texture;\n    this._webglTexture = ctx.createWebGLTexture(texture);\n  }\n\n  public destroy(gl: WebGLRenderingContext | WebGL2RenderingContext): void {\n    this.texture.destroy();\n    gl.deleteTexture(this._webglTexture);\n  }\n\n  public update(gl: WebGLRenderingContext | WebGL2RenderingContext, location: WebGLUniformLocation, isWebGL2: boolean) {\n    const texture = this.texture;\n    const isVideo = texture.isVideo();\n\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, texture.flipY);\n    gl.uniform1i(location, 0);\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, this._webglTexture);\n\n    if (!isVideo && isWebGL2) {\n      gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, gl.RGBA, gl.UNSIGNED_BYTE, texture.source);\n    } else {\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture.source);\n    }\n\n    if (!isVideo) {\n      this.needsUpdate = false;\n    }\n  }\n}\n\nexport default UniformTexture2D;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Projection, { ProjectionOptions } from \"./Projection\";\nimport TriangleMesh from \"../core/TriangleMesh\";\nimport ShaderProgram from \"../core/ShaderProgram\";\nimport WebGLContext from \"../core/WebGLContext\";\nimport Texture2D from \"../texture/Texture2D\";\nimport UniformTexture2D from \"../uniform/UniformTexture2D\";\nimport CubeGeometry from \"../geometry/CubeGeometry\";\nimport vs from \"../shader/common.vert\";\nimport fs from \"../shader/common.frag\";\n\n/**\n * Options for {@link CubestripProjection}\n * @ko {@link CubestripProjection}의 옵션들\n * @since 4.0.0\n * @category Projection\n */\nexport interface CubestripProjectionOptions extends ProjectionOptions {\n  /**\n   * @copy CubemapProjectionOptions#cubemapOrder\n   */\n  cubemapOrder?: string;\n  /**\n   * @copy CubemapProjectionOptions#cubemapFlipX\n   */\n  cubemapFlipX?: boolean;\n}\n\n/**\n * Projection based on cubemap strip.\n * Slightly more efficient than {@link CubemapProjection} as it doesn't copy cubemap image to canvas while rendering.\n * Accepts only single image.\n * @ko 큐브맵 스트립 기반의 프로젝션.\n * {@link CubemapProjection}와 달리 렌더링하는 과정에 캔버스에 이미지를 복사하는 과정이 없기 때문에 살짝 더 효율적입니다.\n * 단일 이미지만 사용 가능합니다.\n * @since 4.0.0\n * @category Projection\n */\nclass CubestripProjection extends Projection<{\n  uTexture: UniformTexture2D;\n}> {\n  private _cubemapOrder: NonNullable<CubestripProjectionOptions[\"cubemapOrder\"]>;\n  private _cubemapFlipX: NonNullable<CubestripProjectionOptions[\"cubemapFlipX\"]>;\n\n  /**\n   * Create new instance.\n   * @ko 새 인스턴스를 생성합니다.\n   * @param options Options {@ko Options}\n   */\n  public constructor(options: CubestripProjectionOptions) {\n    super(options);\n\n    const {\n      cubemapOrder = \"RLUDFB\",\n      cubemapFlipX = false\n    } = options;\n\n    this._cubemapOrder = cubemapOrder;\n    this._cubemapFlipX = cubemapFlipX;\n  }\n\n  public applyTexture(ctx: WebGLContext, texture: Texture2D) {\n    const cubemapOrder = this._cubemapOrder;\n    const cubemapFlipX = this._cubemapFlipX;\n    const uniforms = {\n      uTexture: new UniformTexture2D(ctx, texture)\n    };\n    const geometry = new CubeGeometry({\n      order: cubemapOrder\n    });\n    const program = new ShaderProgram(ctx, vs, fs, uniforms);\n    const vao = ctx.createVAO(geometry, program);\n    const mesh = new TriangleMesh(vao, program);\n\n    if (cubemapFlipX) {\n      mesh.scale[0] = -1;\n    }\n    mesh.updateMatrix();\n\n    this._mesh = mesh;\n  }\n}\n\nexport default CubestripProjection;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Geometry from \"./Geometry\";\n\n/**\n * @hidden\n */\nclass CylinderGeometry extends Geometry {\n  public constructor(maxTheta: number) {\n    const vertices: number[] = [];\n    const indicies: number[] = [];\n    const uvs: number[] = [];\n\n    const height = 1;\n    const radialSegments = 60;\n    const halfHeight = height * 0.5;\n    const heightSegments = [-halfHeight, halfHeight];\n    const invRadialSegments = 1 / radialSegments;\n    const angleConst = maxTheta * invRadialSegments;\n\n    for (let yIdx = 0; yIdx < 2; yIdx++) {\n      const y = heightSegments[yIdx];\n\n      for (let lngIdx = 0; lngIdx <= radialSegments; lngIdx++) {\n        const angle = lngIdx * angleConst + Math.PI - maxTheta * 0.5;\n        const x = Math.cos(angle);\n        const z = Math.sin(angle);\n        const u = lngIdx * invRadialSegments;\n        const v = yIdx;\n\n        uvs.push(u, v);\n        vertices.push(x, y, z);\n\n        if (yIdx === 0 && lngIdx < radialSegments) {\n          const a = lngIdx;\n          const b = a + radialSegments + 1;\n\n          indicies.push(a, b, a + 1, b, b + 1, a + 1);\n        }\n      }\n    }\n\n    super(vertices, indicies, uvs);\n  }\n}\n\nexport default CylinderGeometry;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n*/\nimport { quat } from \"gl-matrix\";\nimport Projection, { ProjectionOptions } from \"./Projection\";\nimport UniformTexture2D from \"../uniform/UniformTexture2D\";\nimport WebGLContext from \"../core/WebGLContext\";\nimport Texture2D from \"../texture/Texture2D\";\nimport CylinderGeometry from \"../geometry/CylinderGeometry\";\nimport Camera from \"../core/Camera\";\nimport ShaderProgram from \"../core/ShaderProgram\";\nimport { DEG_TO_RAD, RAD_TO_DEG } from \"../const/internal\";\nimport vs from \"../shader/common.vert\";\nimport fs from \"../shader/common.frag\";\nimport TriangleMesh from \"../core/TriangleMesh\";\n\n/**\n * Options for {@link CylindricalProjection}\n * @ko {@link CylindricalProjection}의 옵션들\n * @since 4.0.0\n * @category Projection\n */\nexport interface CylindricalProjectionOptions extends ProjectionOptions {\n  src: string | HTMLElement;\n  /**\n   * Whether the panorama image covers full 360 degrees.\n   * @ko 파노라마 이미지가 360도를 전부 커버하는지 여부\n   * @since 4.0.0\n   * @default false\n   */\n  partial?: boolean;\n}\n\n/**\n * Projection based on cylindrical projection.\n * This can show panorama images taken from smartphones.\n * @ko 원통 투영법 기반의 프로젝션.\n * 일반적인 스마트폰 파노라마 사진을 표시하는데 사용될 수 있습니다.\n * @since 4.0.0\n * @category Projection\n */\nclass CylindricalProjection extends Projection<{\n  uTexture: UniformTexture2D;\n}> {\n  private _partial: boolean;\n\n  /**\n   * Create new instance.\n   * @ko 새 인스턴스를 생성합니다.\n   * @param options Options {@ko Options}\n   */\n  public constructor(options: CylindricalProjectionOptions) {\n    super(options);\n\n    const {\n      partial = false\n    } = options;\n\n    this._partial = partial;\n  }\n\n  public applyTexture(ctx: WebGLContext, texture: Texture2D) {\n    const partial = this._partial;\n    const { width, height } = texture;\n    const aspect = width / height;\n    const halfVFov = 180 / aspect;\n    const cylinderHeight = partial\n      ? 1\n      : 2 * Math.tan(halfVFov * DEG_TO_RAD);\n    const cylinderTheta = partial\n      ? aspect\n      : 2 * Math.PI;\n\n    const geometry = new CylinderGeometry(cylinderTheta);\n    const program = new ShaderProgram(ctx, vs, fs, {\n      uTexture: new UniformTexture2D(ctx, texture)\n    });\n    const vao = ctx.createVAO(geometry, program);\n    const mesh = new TriangleMesh(vao, program);\n\n    mesh.scale[1] = cylinderHeight;\n    quat.identity(mesh.rotation);\n    quat.rotateY(mesh.rotation, mesh.rotation, -Math.PI / 2);\n    mesh.updateMatrix();\n\n    this._mesh = mesh;\n  }\n\n  public updateCamera(camera: Camera) {\n    super.updateCamera(camera);\n\n    const mesh = this._mesh;\n    if (!mesh) return;\n\n    const uTexture = mesh.program.uniforms.uTexture;\n    const texture = uTexture.texture;\n    const { width, height } = texture;\n    const aspect = width / height;\n    const halfHeight = mesh.scale[1] * 0.5;\n\n    if (this._partial) {\n      const restrictedYaw = 0.5 * aspect * RAD_TO_DEG;\n      camera.restrictYawRange(-restrictedYaw, restrictedYaw);\n    }\n\n    const restrictedPitch = Math.atan2(halfHeight, 1) * RAD_TO_DEG;\n    const minZoom = Math.tan(camera.fov * DEG_TO_RAD * 0.5) / (halfHeight * camera.aspect);\n\n    camera.restrictPitchRange(-restrictedPitch, restrictedPitch);\n    camera.restrictZoomRange(minZoom, Infinity);\n    camera.restrictRenderHeight(halfHeight * 2);\n  }\n}\n\nexport default CylindricalProjection;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Projection, { ProjectionOptions } from \"./Projection\";\nimport TriangleMesh from \"../core/TriangleMesh\";\nimport ShaderProgram from \"../core/ShaderProgram\";\nimport UniformTexture2D from \"../uniform/UniformTexture2D\";\nimport WebGLContext from \"../core/WebGLContext\";\nimport Texture2D from \"../texture/Texture2D\";\nimport CubeGeometry from \"../geometry/CubeGeometry\";\nimport vs from \"../shader/common.vert\";\nimport fs from \"../shader/eac.frag\";\nimport { ROTATE } from \"../const/internal\";\n\n/**\n * Options for {@link EquiangularProjection}\n * @ko {@link EquiangularProjection}의 옵션들\n * @since 4.0.0\n * @category Projection\n */\nexport interface EquiangularProjectionOptions extends ProjectionOptions {}\n\n/**\n * Equi-Angular Cubemap Projection.\n * This format is used by Youtube's 360 videos.\n * @ko Equi-Angular Cubemap 프로젝션.\n * 이 포맷은 주로 Youtube의 360 비디오에 사용됩니다.\n * @since 4.0.0\n * @category Projection\n */\nclass EquiangularProjection extends Projection<{\n  uTexture: UniformTexture2D;\n}> {\n  public applyTexture(ctx: WebGLContext, texture: Texture2D) {\n    const uniforms = {\n      uTexture: new UniformTexture2D(ctx, texture)\n    };\n    const geometry = new CubeGeometry({\n      order: \"LFRDBU\",\n      rotateUV: [\n        ROTATE.ZERO, ROTATE.ZERO, ROTATE.ZERO,\n        ROTATE.CW_90, ROTATE.CCW_90, ROTATE.CW_90\n      ]\n    });\n    const program = new ShaderProgram(ctx, vs, fs, uniforms);\n    const vao = ctx.createVAO(geometry, program);\n    const mesh = new TriangleMesh(vao, program);\n\n    this._mesh = mesh;\n  }\n}\n\nexport default EquiangularProjection;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Geometry from \"./Geometry\";\n\n/**\n * @hidden\n */\nclass SphereGeometry extends Geometry {\n  /** */\n  public constructor() {\n    // const radius = 1;\n    const widthSegments = 60;\n    const heightSegments = 60;\n    const ANGLE_CORRECTION_FOR_CENTER_ALIGN = -0.5 * Math.PI;\n\n    const uvs: number[] = [];\n    const vertices: number[] = [];\n    const indicies: number[] = [];\n    let latIdx: number;\n    let lngIdx: number;\n\n    for (latIdx = 0; latIdx <= widthSegments; latIdx++) {\n      const theta = (latIdx / widthSegments - 0.5) * Math.PI;\n      const sinTheta = Math.sin(theta);\n      const cosTheta = Math.cos(theta);\n\n      for (lngIdx = 0; lngIdx <= heightSegments; lngIdx++) {\n        const phi = (lngIdx / heightSegments - 0.5) * 2 * Math.PI + ANGLE_CORRECTION_FOR_CENTER_ALIGN;\n        const sinPhi = Math.sin(phi);\n        const cosPhi = Math.cos(phi);\n        const x = cosPhi * cosTheta;\n        const y = sinTheta;\n        const z = sinPhi * cosTheta;\n        const u = lngIdx / heightSegments;\n        const v = latIdx / widthSegments;\n\n        uvs.push(u, v);\n        vertices.push(x, y, z);\n\n        if (lngIdx !== heightSegments && latIdx !== widthSegments) {\n          const a = latIdx * (heightSegments + 1) + lngIdx;\n          const b = a + heightSegments + 1;\n\n          indicies.push(a, a + 1, b, b, a + 1, b + 1);\n        }\n      }\n    }\n\n    super(vertices, indicies, uvs);\n  }\n}\n\nexport default SphereGeometry;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Projection, { ProjectionOptions } from \"./Projection\";\nimport WebGLContext from \"../core/WebGLContext\";\nimport UniformTexture2D from \"../uniform/UniformTexture2D\";\nimport Texture2D from \"../texture/Texture2D\";\nimport ShaderProgram from \"../core/ShaderProgram\";\nimport SphereGeometry from \"../geometry/SphereGeometry\";\nimport TriangleMesh from \"../core/TriangleMesh\";\nimport vs from \"../shader/common.vert\";\nimport fs from \"../shader/common.frag\";\n\n/**\n * Options for {@link EquirectProjection}\n * @ko {@link EquirectProjection}의 옵션들\n * @since 4.0.0\n * @category Projection\n */\nexport interface EquirectProjectionOptions extends ProjectionOptions {\n  src: string | HTMLElement;\n}\n\n/**\n * Projection based on equirectangular projection.\n * @ko 등 장방형 도법(Equirectangular projection) 기반의 프로젝션\n * @since 4.0.0\n * @category Projection\n */\nclass EquirectProjection extends Projection<{\n  uTexture: UniformTexture2D\n}> {\n  /**\n   * Create new instance\n   * @ko 새로운 인스턴스를 생성합니다.\n   * @param options - Options {@ko 옵션들}\n   */\n  public constructor(options: EquirectProjectionOptions) {\n    super(options);\n  }\n\n  public applyTexture(ctx: WebGLContext, texture: Texture2D) {\n    const uniforms = {\n      uTexture: new UniformTexture2D(ctx, texture)\n    };\n\n    const geometry = new SphereGeometry();\n    const program = new ShaderProgram(ctx, vs, fs, uniforms);\n\n    const vao = ctx.createVAO(geometry, program);\n    const mesh = new TriangleMesh(vao, program);\n\n    this._mesh = mesh;\n  }\n}\n\nexport default EquirectProjection;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Uniform from \"./Uniform\";\n\nclass UniformFloat extends Uniform {\n  public val: number;\n\n  public constructor(val: number) {\n    super();\n\n    this.val = val;\n  }\n\n  public update(gl: WebGLRenderingContext | WebGL2RenderingContext, location: WebGLUniformLocation) {\n    gl.uniform1f(location, this.val);\n\n    this.needsUpdate = false;\n  }\n}\n\nexport default UniformFloat;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Geometry from \"./Geometry\";\n\n/**\n * @hidden\n */\nclass PlaneGeometry extends Geometry {\n  /** */\n  public constructor(width: number = 2, height: number = 2, z: number = -1) {\n    const halfWidth = width * 0.5;\n    const halfHeight = height * 0.5;\n    const vertices = [\n      -halfWidth, -halfHeight, z,\n      halfWidth, -halfHeight, z,\n      -halfWidth, halfHeight, z,\n      halfWidth, halfHeight, z\n    ];\n    const indicies = [\n      0, 1, 2,\n      2, 1, 3\n    ];\n    const uvs = [\n      0, 0,\n      1, 0,\n      0, 1,\n      1, 1\n    ];\n\n    super(vertices, indicies, uvs);\n  }\n}\n\nexport default PlaneGeometry;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Projection, { ProjectionOptions } from \"./Projection\";\nimport WebGLContext from \"../core/WebGLContext\";\nimport UniformTexture2D from \"../uniform/UniformTexture2D\";\nimport UniformFloat from \"../uniform/UniformFloat\";\nimport Camera from \"../core/Camera\";\nimport PanoControl from \"../control/PanoControl\";\nimport ShaderProgram from \"../core/ShaderProgram\";\nimport Texture2D from \"../texture/Texture2D\";\nimport PlaneGeometry from \"../geometry/PlaneGeometry\";\nimport vs from \"../shader/little-planet.vert\";\nimport fs from \"../shader/little-planet.frag\";\nimport TriangleMesh from \"../core/TriangleMesh\";\n\n/**\n * Options for {@link LittlePlanetProjection}\n * @ko {@link LittlePlanetProjection}의 옵션들\n * @since 4.0.0\n * @category Projection\n */\nexport interface LittlePlanetProjectionOptions extends ProjectionOptions {\n  src: string | HTMLElement;\n}\n\n/**\n * Projection based on so-called \"Little planet\" or \"Tiny planet\" effect.\n * @ko \"Little planet\" 혹은 \"Tiny planet\"로 불리는 이펙트 기반의 프로젝션\n * @since 4.0.0\n * @category Projection\n */\nclass LittlePlanetProjection extends Projection<{\n  uTexture: UniformTexture2D;\n  uYaw: UniformFloat;\n  uPitch: UniformFloat;\n  uZoom: UniformFloat;\n}> {\n  /**\n   * Create new instance\n   * @ko 새로운 인스턴스를 생성합니다.\n   * @param options - Options {@ko 옵션들}\n   */\n  public constructor(options: LittlePlanetProjectionOptions) {\n    super(options);\n  }\n\n  public applyTexture(ctx: WebGLContext, texture: Texture2D) {\n    texture.wrapS = WebGLRenderingContext.REPEAT;\n    texture.wrapT = WebGLRenderingContext.REPEAT;\n\n    const uniforms = {\n      uTexture: new UniformTexture2D(ctx, texture),\n      uYaw: new UniformFloat(0),\n      uPitch: new UniformFloat(0.5),\n      uZoom: new UniformFloat(1)\n    };\n\n    const geometry = new PlaneGeometry();\n    const program = new ShaderProgram(ctx, vs, fs, uniforms);\n\n    const vao = ctx.createVAO(geometry, program);\n    const mesh = new TriangleMesh(vao, program);\n\n    this._mesh = mesh;\n  }\n\n  public updateControl(control: PanoControl) {\n    control.ignoreZoomScale = true;\n  }\n\n  public update(camera: Camera) {\n    const mesh = this._mesh;\n    if (!mesh) return;\n\n    const uniforms = mesh.program.uniforms;\n\n    uniforms.uYaw.val = camera.yaw / 360;\n    // Range from 0 ~ 1\n    uniforms.uPitch.val = (camera.pitch / 180) + 0.5;\n    uniforms.uZoom.val = camera.zoom;\n\n    uniforms.uYaw.needsUpdate = true;\n    uniforms.uPitch.needsUpdate = true;\n    uniforms.uZoom.needsUpdate = true;\n  }\n}\n\nexport default LittlePlanetProjection;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Uniform from \"./Uniform\";\n\nclass UniformVector4Array extends Uniform {\n  public val: number[][];\n\n  public constructor(val: number[][]) {\n    super();\n\n    this.val = val;\n  }\n\n  public update(gl: WebGLRenderingContext | WebGL2RenderingContext, location: WebGLUniformLocation) {\n    gl.uniform4fv(location, this.val.reduce((arr, vector) => [...arr, ...vector], []));\n\n    this.needsUpdate = false;\n  }\n}\n\nexport default UniformVector4Array;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Projection, { ProjectionOptions } from \"./Projection\";\nimport UniformTexture2D from \"../uniform/UniformTexture2D\";\nimport WebGLContext from \"../core/WebGLContext\";\nimport Texture2D from \"../texture/Texture2D\";\nimport SphereGeometry from \"../geometry/SphereGeometry\";\nimport ShaderProgram from \"../core/ShaderProgram\";\nimport TriangleMesh from \"../core/TriangleMesh\";\nimport UniformVector4Array from \"../uniform/UniformVector4Array\";\nimport UniformFloat from \"../uniform/UniformFloat\";\nimport vs from \"../shader/stereoequi.vert\";\nimport fs from \"../shader/common.frag\";\n\n/**\n * Options for {@link StereoEquiProjection}\n * @ko {@link StereoEquiProjection}의 옵션들\n * @since 4.0.0\n * @category Projection\n */\nexport interface StereoEquiProjectionOptions extends ProjectionOptions {\n  src: string | HTMLElement;\n  /**\n   * Stereoscopic mode of the image\n   * @ko 이미지의 스테레오스코픽 모드\n   * @since 4.0.0\n   * @default \"top_bottom\"\n   */\n  mode: typeof StereoEquiProjection.MODE[keyof typeof StereoEquiProjection.MODE]\n}\n\n/**\n * Projection based on stereo equirectangular images.\n * @ko Stereo equirectangular 이미지 기반의 프로젝션\n * @since 4.0.0\n * @category Projection\n */\nclass StereoEquiProjection extends Projection<{\n  uTexture: UniformTexture2D;\n  uEye: UniformFloat;\n  uTexScaleOffset: UniformVector4Array;\n}> {\n  /**\n   * Available stereoscopic modes\n   * @ko 사용가능한 스테레오스코픽 모드들\n   * @since 4.0.0\n   */\n  public static MODE = {\n    /**\n     * @ko 이미지가 왼쪽/오른쪽으로 구성되어있을 경우\n     * @since 4.0.0\n     */\n    LEFT_RIGHT: \"left_right\",\n    /**\n     * @ko 이미지가 위/아래로 구성되어있을 경우\n     * @since 4.0.0\n     */\n    TOP_BOTTOM: \"top_bottom\",\n  } as const;\n\n  private _mode: StereoEquiProjectionOptions[\"mode\"];\n\n  /**\n   * Create new instance\n   * @ko 새로운 인스턴스를 생성합니다.\n   * @param options - Options {@ko 옵션들}\n   */\n  public constructor(options: StereoEquiProjectionOptions) {\n    super(options);\n\n    this._mode = options.mode;\n  }\n\n  public applyTexture(ctx: WebGLContext, texture: Texture2D) {\n    let leftEye: number[];\n    let rightEye: number[];\n\n    switch (this._mode) {\n      case StereoEquiProjection.MODE.LEFT_RIGHT:\n        leftEye = [0.5, 1, 0, 0];\n        rightEye = [0.5, 1, 0.5, 0];\n        break;\n      default:\n        // Default, uses \"top_bottom\"\n        leftEye = [1, 0.5, 0, 0];\n        rightEye = [1, 0.5, 0, 0.5];\n    }\n\n\n    const uniforms = {\n      uTexture: new UniformTexture2D(ctx, texture),\n      uEye: new UniformFloat(0),\n      uTexScaleOffset: new UniformVector4Array([leftEye, rightEye])\n    };\n\n    const geometry = new SphereGeometry();\n    const program = new ShaderProgram(ctx, vs, fs, uniforms);\n\n    const vao = ctx.createVAO(geometry, program);\n    const mesh = new TriangleMesh(vao, program);\n\n    this._mesh = mesh;\n  }\n}\n\nexport default StereoEquiProjection;\n","import Component from \"@egjs/component\";\nimport View360 from \"../View360\";\n\n/**\n * @hidden\n */\nconst withMethods = (prototype: any, attr: string) => {\n  [Component.prototype, View360.prototype].forEach(proto => {\n    Object.getOwnPropertyNames(proto)\n      .filter(name => name.charAt(0) !== \"_\" && name !== \"constructor\")\n      .forEach((name: string) => {\n        const descriptor = Object.getOwnPropertyDescriptor(proto, name)!;\n\n        if (descriptor.value) {\n          // Public Function\n          Object.defineProperty(prototype, name, {\n            value: function(...args) {\n              return descriptor.value.call(this[attr], ...args);\n            }\n          });\n        } else {\n          const getterDescriptor: { get?: () => any; set?: (val: any) => void } = {};\n          if (descriptor.get) {\n            getterDescriptor.get = function() {\n              return this[attr] && descriptor.get?.call(this[attr]);\n            };\n          }\n          if (descriptor.set) {\n            getterDescriptor.set = function(...args) {\n              return descriptor.set?.call(this[attr], ...args);\n            };\n          }\n\n          Object.defineProperty(prototype, name, getterDescriptor);\n        }\n      });\n  });\n};\n\nexport default withMethods;\n","/**\n * @hidden\n */\nexport const getValidProps = (propsObj: any) => {\n  return Object.keys(propsObj).reduce((props, propName) => {\n    if (propsObj[propName] != null) {\n      props[propName] = propsObj[propName];\n    }\n\n    return props;\n  }, {});\n};\n","export const VIEW360_METHODS = [\n  \"destroy\",\n  \"init\",\n  \"load\",\n  \"resize\",\n  \"addPlugins\",\n  \"removePlugins\",\n  \"renderFrame\",\n  // @egjs/component methods\n  \"on\",\n  \"hasOn\",\n  \"once\",\n  \"off\",\n  \"trigger\"\n] as const;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport View360, { View360Options, View360Events } from \"./View360\";\n\nexport * from \"./core\";\nexport * from \"./control\";\nexport * from \"./plugin\";\nexport * from \"./projection\";\nexport * from \"./hotspot\";\nexport * from \"./const/external\";\nexport * from \"./type/external\";\nexport * from \"./cfc\";\n\nexport type {\n  View360Options,\n  View360Events\n};\n\nexport default View360;\n","/*\n * Copyright (c) 2023-present NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport View360, * as modules from \"./index\";\nimport { merge } from \"./utils\";\n\nmerge(View360, modules);\n\nexport default View360;\n"],"names":["View360Error","Error","constructor","message","code","Object","setPrototypeOf","prototype","name","ERROR_CODES","WRONG_TYPE","WRONG_OPTION","ELEMENT_NOT_FOUND","CANVAS_NOT_FOUND","WEBGL_NOT_SUPPORTED","FAILED_CREATE_CONTEXT_2D","PROVIDE_PROJECTION_FIRST","FAILED_LINKING_PROGRAM","INSUFFICIENT_ARGS","MESSAGES","val","types","map","type","join","optionName","query","msg","shaderLog","CODES","EVENTS","MOUSE_DOWN","MOUSE_MOVE","MOUSE_UP","TOUCH_START","TOUCH_MOVE","TOUCH_END","WHEEL","RESIZE","CONTEXT_MENU","MOUSE_ENTER","MOUSE_LEAVE","POINTER_DOWN","POINTER_MOVE","POINTER_UP","POINTER_CANCEL","POINTER_ENTER","POINTER_LEAVE","KEY_DOWN","KEY_UP","LOAD","ERROR","CLICK","DOUBLE_CLICK","CONTEXT_CREATE_ERROR","CONTEXT_LOST","CONTEXT_RESTORED","DEVICE_ORIENTATION","DEVICE_MOTION","ORIENTATION_CHANGE","VIDEO_PLAY","VIDEO_PAUSE","VIDEO_LOADED_DATA","VIDEO_VOLUME_CHANGE","VIDEO_TIME_UPDATE","VIDEO_DURATION_CHANGE","VIDEO_CAN_PLAYTHROUGH","TRANSITION_END","XR_END","EL_DIV","EL_BUTTON","MOUSE_BUTTON","CURSOR","GRAB","GRABBING","NONE","KEY_DIRECTION","DIRECTION_KEY_CODE","SPACE_KEY_CODE","DIRECTION_KEY_NAME","LEFT","UP","RIGHT","DOWN","SPACE_KEY_NAME","FULLSCREEN_REQUEST","FULLSCREEN_ELEMENT","FULLSCREEN_EXIT","FULLSCREEN_CHANGE","DEFAULT_CLASS","CONTAINER","CANVAS","CTX_LOST","IN_VR","HOTSPOT_CONTAINER","HOTSPOT","HOTSPOT_VISIBLE","HOTSPOT_FLIP_X","HOTSPOT_FLIP_Y","READY","LOAD_START","PROJECTION_CHANGE","BEFORE_RENDER","RENDER","INPUT_START","INPUT_END","VIEW_CHANGE","STATIC_CLICK","VR_START","VR_END","EASING","LINEAR","x","SINE_WAVE","Math","sin","PI","EASE_OUT_CUBIC","pow","EASE_OUT_BOUNCE","n1","d1","CAMERA_EVENTS","CHANGE","ANIMATION_END","CONTROL_EVENTS","ENABLE","DISABLE","DEG_TO_RAD","RAD_TO_DEG","DEFAULT_EASING","DEFAULT_ANIMATION_DURATION","INFINITE_RANGE","min","Infinity","max","DEFAULT_PITCH_RANGE","DEFAULT_ZOOM_RANGE","ROTATE","VIDEO_TIME_CHANGE_EVENT","SVG_NAMESPACE","SESSION_VR","XR_REFERENCE_SPACE","EPSILON","_a","Number","isString","isElement","nodeType","Node","ELEMENT_NODE","createElement","className","tag","BROWSER","el","document","classList","add","getNullableElement","parent","targetEl","parentEl","queryResult","querySelector","getElement","findCanvas","root","selector","canvas","range","end","Array","apply","undef","idx","clamp","lerp","a","b","t","circulate","size","abs","offset","merge","target","srcs","forEach","source","keys","key","value","isArray","findIndex","array","checker","length","getObjectOption","toVerticalFov","fovRadian","aspect","atan","tan","reorderCube","arr","order","defaultOrder","split","face","indexOf","index","isFullscreen","sensorCanBeEnabledIOS","DeviceMotionEvent","window","isSecureContext","hfovToZoom","baseFov","fov","renderingWidth","zoomedWidth","eulerToQuat","out","yaw","pitch","roll","quat","identity","pitchThreshold","pitchClamped","rotateY","rotateX","rotateZ","quatToEuler","quaternion","y","z","w","x2","y2","z2","w2","unit","test","atan2","view","vec3","fromValues","up","transformQuat","viewXZ","sqrt","Motion","_val","start","_start","_end","progress","_progress","activated","_activated","duration","_duration","loop","_loop","_range","easing","_easing","reset","update","deltaTime","prev","nextProgress","easedProgress","defaultVal","delta","setNewEndByDelta","setRange","CameraAnimation","_motion","camera","from","to","_camera","_from","_to","_finishPromise","Promise","resolve","_finish","getFinishPromise","motion","rotation","create","zoom","slerp","rotate","Camera","Component","_aspect","changed","_changed","yawRange","_initialYawRange","pitchRange","_initialPitchRange","zoomRange","_initialZoomRange","initialYaw","initialPitch","initialZoom","rollOffset","position","animation","_up","_yawRange","_pitchRange","_zoomRange","_updateQuaternion","viewMatrix","mat4","projectionMatrix","_maxRenderHeight","destroy","off","resize","width","height","prevAspect","updateMatrix","lookAt","prevQuaternion","clone","prevZoom","zoomDiff","equals","normalized","normalize","isSameRotation","copy","animateTo","finishPromise","then","trigger","restrictYawRange","restrictPitchRange","restrictZoomRange","restrictRenderHeight","resetRange","getYawRange","yawLimit","maxRenderHeight","halfHFov","getHorizontalFov","minYaw","maxYaw","halfVFovRad","h","d","theta","getPitchRange","pitchLimit","minPitch","maxPitch","halfVFov","getVerticalFov","getZoomRange","limit","minFov","maxFov","currentFov","current","_getZoomedHorizontalFov","hFov","vFov","fovToZoom","projMatrix","upDir","viewDir","perspective","onFrameRender","MouseInput","_onMouseDown","evt","_el","button","preventDefault","focus","_prevPos","clientX","clientY","addEventListener","_onMouseMove","_onMouseUp","srcEvent","isTouch","isKeyboard","prevPos","deltaX","deltaY","removeEventListener","scrolling","enable","element","disable","TouchInput","scrollable","_scrollable","_onTouchStart","touches","_scrolling","touch","_isFirstTouch","_onTouchMove","cancelable","_onTouchEnd","passive","KeyboardInput","active","pressed","_pressed","_onKeyDown","location","KeyboardEvent","DOM_KEY_LOCATION_STANDARD","_updateKeyPress","pressedCount","_getPressedKeyCount","repeat","_onKeyUp","_clearPressedKeys","_getDeltaByPressedKeys","reduce","obj","keyName","assign","event","isEnable","keyToUpdate","keyCode","filter","RotateControl","enabled","_enabled","enableBlocked","_enableBlocked","animating","_keyboardInput","_xMotion","_yMotion","_touchInput","pointerScale","_pointerScale","keyboardScale","_keyboardScale","disablePitch","_disablePitch","disableYaw","_disableYaw","disableKeyboard","_disableKeyboard","controlEl","_onInputStart","_changedWhileDragging","inputType","_onChange","invZoomScale","_zoomScale","screenScale","_screenScale","scale","scaledX","scaledY","_onInputEnd","_controlEl","_mouseInput","_bindInputs","xMotion","yMotion","keyboardInput","updateRange","setZoomScale","hfov","vfov","control","updateCursor","sync","mouseInput","touchInput","on","WheelInput","_onWheel","stopPropagation","_inputTimer","_clearTimer","_baseScale","setTimeout","capture","clearTimeout","PinchInput","prevDistance","_prevDistance","diff","pageX","pageY","distance","ZoomControl","_wheelInput","_scale","scaledDelta","_pinchInput","wheelInput","pinchInput","ROTATE_CONSTANT","PITCH_DELTA","YAW_DELTA_BY_ROLL","YAW_DELTA_BY_YAW","targetAxis","meshPoint","GyroInput","orientationUpdated","_orientationUpdated","ignoreRoll","_ignoreRoll","_onDeviceOrientation","prevOrientation","_orientation","alpha","beta","gamma","_needsCalibrate","_calibrateSensor","_updateScreenOrientation","screen","orientation","angle","undefined","_screenOrientation","_yawOrigin","_yawOffset","_updateRotation","collectDelta","prevRotation","_toEulerDelta","setInitialRotation","yawOrigin","sensorYaw","screenAngle","world","set","cos","multiply","prevQuat","currentQuat","_getDeltaYaw","_getDeltaPitch","prvQ","curQ","yawDeltaByYaw","_getRotationDelta","yawDeltaByRoll","_extractPitchFromQuat","prevQ","rotateKind","curQuaternion","prevPoint","curPoint","rotateDistance","dot","cross","rotateDirection","meshPoint2","meshPoint3","vecU","vecV","vecN","coefficientA","coefficientB","coefficientC","projectedPrevPoint","subtract","trigonometricRatio","acos","crossVec","thetaDirection","deltaRadian","baseV","GyroControl","_input","isAvailable","onDeviceMotionChange","listenDeviceMotion","res","rotationRate","timeout","race","available","requestSensorPermission","requestPermission","permissionState","catch","_updateYawPitch","input","yawDelta","pitchDelta","PanoControl","useGrabCursor","_useGrabCursor","_setCursor","disableContextMenu","_disableContextMenu","_blockContextMenu","_restoreContextMenu","_rotateControl","wheelScrollable","_zoomControl","ignoreZoomScale","_ignoreZoomScale","gyro","_gyroControl","_preventContextMenu","_onEnable","_onDisable","_onCameraAnimationEnd","_bindEvents","rotateControl","zoomControl","gyroControl","zoomScale","newCursor","style","cursor","Texture","flipY","wrapS","WebGLRenderingContext","CLAMP_TO_EDGE","wrapT","isVideo","isCube","Texture2D","TextureVideo","video","pause","removeAttribute","load","isPaused","paused","ended","readyState","hasAudio","audioTracks","webkitAudioDecodedByteCount","mozHasAudio","TextureCube","sources","TextureLoader","_loadChecker","ImReady","src","loadVideo","loadCubeImage","imgSrc","loadImage","images","_toImageArray","_load","image","naturalWidth","naturalHeight","videoConfig","config","autoplay","muted","volume","_toVideoElement","currentTime","play","videoWidth","videoHeight","content","onLoad","loader","reject","once","errorCount","check","imgEl","Image","crossOrigin","HTMLVideoElement","playsInline","setAttribute","_appendSourceElement","sourceCount","querySelectorAll","HTMLSourceElement","sourceEl","appendChild","FrameAnimator","maxDeltaTime","context","_context","_rafId","_rafTimer","_lastUpdateTime","callback","_time","frame","time","Date","now","requestAnimationFrame","stop","cancelAnimationFrame","changeContext","AutoResizer","useResizeObserver","_useResizeObserver","onResize","_skipFirstResize","isFirstResize","_onResize","_resizeObserver","ResizeObserver","bbox","getBoundingClientRect","resizeImmediate","resizeObserver","observe","disconnect","Autoplay","playing","_interrupted","delay","_delay","delayOnMouseLeave","_delayOnMouseLeave","speed","_speed","pauseOnHover","_pauseOnHover","canInterrupt","_canInterrupt","disableOnInterrupt","_disableOnInterrupt","viewer","options","_clearTimeout","_setUninterruptedAfterDelay","_onGyroEnable","_onMouseEnter","_hovering","_onMouseLeave","_control","_element","_interruptionTimer","enableAfterDelay","XRManager","ctx","exit","_onSessionEnd","_xrSession","_xrRefSpace","_ctx","_options","xr","navigator","isSessionSupported","enter","requiredFeatures","makeXRCompatible","session","requestSession","bindXRLayer","refSpace","requestReferenceSpace","_setSession","xrSession","canRender","pose","getViewerPose","getEyeParams","glLayer","renderState","baseLayer","views","viewport","getViewport","vMatrix","transform","inverse","matrix","pMatrix","Hotspot","HotspotRenderer","rootEl","renderer","_containerEl","_renderer","_hotspots","_zoom","refresh","container","hotspotEls","slice","_parseHotspot","render","hotspots","halfWidth","halfHeight","centerTransform","zoomTransform","hotspot","relPos","transformMat4","remove","screenPos","vec2","yawStr","dataset","pitchStr","positionStr","parseFloat","_yawPitchToVec3","pos","defaultPos","yawRad","pitchRad","VertexArrayObject","count","geometry","indicies","buffers","WebGLContext","_canvas","maxTextureSize","_maxTextureSize","isWebGL2","_isWebGL2","supportVAO","_extensions","vao","lost","_contextLost","debug","_debug","_onContextLost","_onContextRestore","loseContext","init","gl","_getContext","_gl","getParameter","MAX_TEXTURE_SIZE","getExtension","bindBuffer","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","forceLoseContext","extension","forceRestoreContext","restoreContext","clear","COLOR_BUFFER_BIT","drawingBufferWidth","drawingBufferHeight","createVAO","shaderProgram","nativeVAO","_createNativeVAO","_createBuffer","uv","_bindNativeVAO","_supplyGeometryData","_unbindBuffers","draw","drawElements","TRIANGLES","UNSIGNED_SHORT","releaseVAO","_deleteNativeVAO","_deleteBuffer","getUniformLocations","program","uniforms","uniformLocations","locations","getUniformLocation","_getCommonUniformLocations","updateCommonUniforms","entity","mvMatrix","uniformMatrix4fv","uMVMatrix","uPMatrix","updateVRUniforms","eyeIndex","uEye","uniform1f","updateUniforms","uniform","needsUpdate","releaseShaderResources","deleteProgram","useProgram","createProgram","vertexShader","fragmentShader","vs","_compileShader","VERTEX_SHADER","fs","FRAGMENT_SHADER","attachShader","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","getProgramInfoLog","deleteShader","createWebGLTexture","texData","texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","gl2","texStorage2D","RGBA8","createWebGLCubeTexture","TEXTURE_CUBE_MAP","attributes","getContextAttributes","xrCompatible","xrLayer","XRWebGLLayer","updateRenderState","bindXRFrame","bindFramebuffer","FRAMEBUFFER","framebuffer","useDefaultFrameBuffer","createBuffer","buffer","deleteBuffer","createVertexArray","ext","createVertexArrayOES","bindVertexArray","bindVertexArrayOES","deleteVertexArray","deleteVertexArrayOES","_supplyIndiciesData","_supplyAttributeData","vertices","uvs","bufferData","data","STATIC_DRAW","attribute","attribLocation","getAttribLocation","vertexAttribPointer","itemSize","FLOAT","enableVertexAttribArray","shader","createShader","shaderSource","compileShader","webglIdentifiers","contextAttributes","preserveDrawingBuffer","antialias","onWebglContextCreationError","e","statusMessage","identifier","getContext","WebGLRenderer","_elementSize","pixelRatio","_pixelRatio","canvasSize","devicePixelRatio","clientWidth","clientHeight","projection","mesh","getMesh","renderVR","vr","eyeParams","eye","View360","_rootEl","_vr","_hotspot","plugins","_plugins","_projection","_initialized","initialized","_autoplay","autoInit","_autoInit","autoResize","_autoResize","canvasSelector","_canvasSelector","tabIndex","_tabIndex","_animator","updateCamera","renderFrame","autoPlayer","_emit","_renderFrameOnDemand","getTexture","_renderVRFrame","_delta","_autoResizer","_addEventHandlers","releaseAllResources","plugin","animator","_bindComponentEvents","_resizeComponents","_loadTexture","_applyProjection","hasAttribute","addPlugins","push","removePlugins","pluginIdx","splice","eventName","params","evtParams","prevProjection","applyTexture","updateControl","contentLoader","events","evtName","controlEventsToPropagate","VERSION","Object3D","fromRotationTranslationScale","LoadingSpinner","_startLoading","_container","_detachElements","parentElement","removeChild","_createElements","ring","RING","ControlBarItem","CONTROL_BAR_DEFAULT_CLASS","CONTROLS_ROOT","CONTROLS_BG","CONTROLS_MAIN","CONTROLS_TOP","CONTROLS_BOTTOM","CONTROLS_MID","CONTROLS_LEFT","CONTROLS_RIGHT","CONTROLS_FLOAT_LEFT","CONTROLS_FLOAT_RIGHT","CONTROLS_BUTTON","PROGRESS_ROOT","VOLUME_ROOT","RANGE_ROOT","RANGE_TRACK","RANGE_THUMB","RANGE_FILLER","PLAY_BUTTON","PAUSE_BUTTON","UNMUTED_BUTTON","MUTED_BUTTON","FULLSCREEN_BUTTON","FULLSCREEN_EXIT_BUTTON","VR_BUTTON","GYRO_ENABLED","GYRO_DISABLED","VIDEO_TIME_DISPLAY","PIEVIEW_ROOT","FIXED","UNAVAILABLE","HIDDEN","CONTROL_BAR_ITEM_POSITION","TOP_LEFT","TOP_RIGHT","MAIN_TOP","MAIN_BOTTOM","MAIN_LEFT","MAIN_RIGHT","RangeControl","_onHold","_bbox","elX","scrollX","pageXOffset","clamepdX","thumbEl","_fixedClass","clampedX","_onRelease","track","thumb","filler","draggable","trackEl","fillerEl","left","right","bottom","top","updateStyle","clampedProgress","ProgressBar","_rangeControl","_onTimeUpdate","_video","_currentTime","_onDurationChange","controlBar","_controlBar","dispatchEvent","CustomEvent","detail","_wasPaused","_playPromise","_onControl","rangeControl","unavailableClass","PlayButton","_onClick","_paused","_onPlay","title","_onPause","VolumeControl","_updateDisplay","disabled","_onVolumeChange","_buttonEl","containerEl","buttonEl","FullscreenButton","_targetEl","_exitFullscreen","_requestFullscreen","_onFullscreenChange","_fullscreenAvailable","_addFullscreenHandlers","_removeFullscreenHandlers","some","request","call","VideoTime","_onCustomTimeChange","timeMinute","floor","timeSeconds","timeSecondsFormatted","durationMinute","durationSeconds","durationSecondsFormatted","innerText","PieView","resetCamera","_viewer","_updatePie","piePath","_piePathEl","rangeCircle","_rangeCircleEl","halfFov","pieRadius","pieDeg","pieOffset","isFinite","radius","rangeDiff","_createPieElements","rootClass","pieSVG","createElementNS","VRButton","GyroButton","_updateStyle","enableButton","AutoHide","hidden","contains","_hiddenClass","initialDelay","idleDelay","activationDelay","_isCursorInside","show","_hideAfterDelay","_isFullscreen","showTemporaliy","_isGrabbing","pointerType","_onVideoPlay","_onVideoPause","_initialDelay","_idleDelay","_timer","hide","_clearHideTimer","VideoControl","videoEl","keyPressed","_changeVideoTime","_changeVideoVolume","spacePressed","_toggleVideo","forward","increase","ControlBar","backgroundEl","_bgEl","items","_items","customItems","_customItems","autoHide","showBackground","clickToPlay","keyboardControls","progressBar","playButton","volumeButton","fullscreenButton","videoTime","pieView","vrButton","gyroButton","_onStaticClick","autoHider","_autoHider","_onNewSrcLoad","_updateBackground","_updateAutoHide","_updateKeyboardHandler","category","item","_createPositionWrappers","POSITION","_videoControl","panoRoot","controlsRoot","defaultItems","_createDefaultItems","_addItem","_clearItemElements","wrapper","_wrapperEl","nextSiblingIndex","sibling","nextSibling","insertBefore","floatLeftEl","floatRightEl","topWrapper","bottomWrapper","midWrapper","leftControlsWrapper","rightControlsWrapper","wrappers","firstChild","background","hiddenClass","_b","videoControl","Projection","_mesh","uTexture","Uniform","UniformTextureCube","cubemapOrder","_webglTexture","_cubemapOrder","deleteTexture","pixelStorei","UNPACK_FLIP_Y_WEBGL","uniform1i","activeTexture","TEXTURE0","texSubImage2D","TEXTURE_CUBE_MAP_POSITIVE_X","RGBA","UNSIGNED_BYTE","texImage2D","CubeTexturePainter","_size","_renderingOrder","_calcRenderingSize","surfaceIdx","row","_row","column","_column","renderingFace","drawImage","UniformCanvasCube","_painter","TriangleMesh","ShaderProgram","VertexData","Geometry","Float32Array","Uint16Array","CubeGeometry","rotateUV","oneThird","coords","r","c","coord","degree","ZERO","newOrder","CW_90","CCW_90","newCoords","uvIdx","acc","concat","CubemapProjection","cubemapFlipX","_cubemapFlipX","UniformTexture2D","CubestripProjection","CylinderGeometry","maxTheta","radialSegments","heightSegments","invRadialSegments","angleConst","yIdx","lngIdx","u","v","CylindricalProjection","partial","_partial","cylinderHeight","cylinderTheta","restrictedYaw","restrictedPitch","minZoom","EquiangularProjection","SphereGeometry","widthSegments","ANGLE_CORRECTION_FOR_CENTER_ALIGN","latIdx","sinTheta","cosTheta","phi","sinPhi","cosPhi","EquirectProjection","UniformFloat","PlaneGeometry","LittlePlanetProjection","REPEAT","uYaw","uPitch","uZoom","UniformVector4Array","uniform4fv","vector","StereoEquiProjection","_mode","mode","leftEye","rightEye","MODE","LEFT_RIGHT","uTexScaleOffset","TOP_BOTTOM","withMethods","attr","proto","getOwnPropertyNames","charAt","descriptor","getOwnPropertyDescriptor","defineProperty","args","getterDescriptor","get","getValidProps","propsObj","props","propName","VIEW360_METHODS","modules"],"mappings":"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"}