<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: src/PanoViewer/PanoViewer.js | egjs::view360 - API</title>
    
    <meta name="description" content="A module used to provide coordinate based on yaw/pitch orientation. This module receives user touch action, keyboard, mouse and device orientation(if it exists) as input, then combines them and converts it to yaw/pitch coordinates." />
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <link rel="canonical" href="http://naver.github.io/egjs-view360/release/latest/doc/"/>
    
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"eg.view360","disqus":"egjs","googleAnalytics":"UA-70842526-23","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"egjs::view360 - API","description":"A module used to provide coordinate based on yaw/pitch orientation. This module receives user touch action, keyboard, mouse and device orientation(if it exists) as input, then combines them and converts it to yaw/pitch coordinates.","keyword":""},"linenums":true,"link":{"canonical":"http://naver.github.io/egjs-view360/release/latest/doc/"}};
    </script>
    

    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', config.googleAnalytics]);
      _gaq.push(['_trackPageview']);
    
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName">
        <a href="//naver.github.io/egjs/"><img style="width:40px; height:20px;" src="img/type_white.svg"/></a>

        <!-- Homepage link (prefer link.home than applicationName) -->
        
        <a href="//naver.github.io/egjs-view360/">view360</a>
        
    </h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
        <li class="item">
            <span class="title">
                <a href="index.html">README</a>
            </span>
        </li>
    
        <!-- Non Grouping Version -->
        
            

        
            

<li class="item" data-name="eg.view360.PanoViewer">
    <span class="title">
        <a href="eg.view360.PanoViewer.html">eg.view360.PanoViewer</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.view360.PanoViewer.isGyroSensorAvailable"><a href="eg.view360.PanoViewer.html#.isGyroSensorAvailable">isGyroSensorAvailable</a></li>
    
        <li data-name="eg.view360.PanoViewer#destroy"><a href="eg.view360.PanoViewer.html#destroy">destroy</a></li>
    
        <li data-name="eg.view360.PanoViewer#getFov"><a href="eg.view360.PanoViewer.html#getFov">getFov</a></li>
    
        <li data-name="eg.view360.PanoViewer#getFovRange"><a href="eg.view360.PanoViewer.html#getFovRange">getFovRange</a></li>
    
        <li data-name="eg.view360.PanoViewer#getImage"><a href="eg.view360.PanoViewer.html#getImage">getImage</a></li>
    
        <li data-name="eg.view360.PanoViewer#getPitch"><a href="eg.view360.PanoViewer.html#getPitch">getPitch</a></li>
    
        <li data-name="eg.view360.PanoViewer#getPitchRange"><a href="eg.view360.PanoViewer.html#getPitchRange">getPitchRange</a></li>
    
        <li data-name="eg.view360.PanoViewer#getYaw"><a href="eg.view360.PanoViewer.html#getYaw">getYaw</a></li>
    
        <li data-name="eg.view360.PanoViewer#getYawRange"><a href="eg.view360.PanoViewer.html#getYawRange">getYawRange</a></li>
    
        <li data-name="eg.view360.PanoViewer#hasOn"><a href="eg.view360.PanoViewer.html#hasOn">hasOn</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.view360.PanoViewer#isResumed"><a href="eg.view360.PanoViewer.html#isResumed">isResumed</a></li>
    
        <li data-name="eg.view360.PanoViewer#lookAt"><a href="eg.view360.PanoViewer.html#lookAt">lookAt</a></li>
    
        <li data-name="eg.view360.PanoViewer#off"><a href="eg.view360.PanoViewer.html#off">off</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.view360.PanoViewer#on"><a href="eg.view360.PanoViewer.html#on">on</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.view360.PanoViewer#once"><a href="eg.view360.PanoViewer.html#once">once</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.view360.PanoViewer#resume"><a href="eg.view360.PanoViewer.html#resume">resume</a></li>
    
        <li data-name="eg.view360.PanoViewer#setFovRange"><a href="eg.view360.PanoViewer.html#setFovRange">setFovRange</a></li>
    
        <li data-name="eg.view360.PanoViewer#setImage"><a href="eg.view360.PanoViewer.html#setImage">setImage</a></li>
    
        <li data-name="eg.view360.PanoViewer#setPitchRange"><a href="eg.view360.PanoViewer.html#setPitchRange">setPitchRange</a></li>
    
        <li data-name="eg.view360.PanoViewer#setPitchRange"><a href="eg.view360.PanoViewer.html#setPitchRange">setPitchRange</a></li>
    
        <li data-name="eg.view360.PanoViewer#setUseKeyboard"><a href="eg.view360.PanoViewer.html#setUseKeyboard">setUseKeyboard</a></li>
    
        <li data-name="eg.view360.PanoViewer#setUseZoom"><a href="eg.view360.PanoViewer.html#setUseZoom">setUseZoom</a></li>
    
        <li data-name="eg.view360.PanoViewer#setYawRange"><a href="eg.view360.PanoViewer.html#setYawRange">setYawRange</a></li>
    
        <li data-name="eg.view360.PanoViewer#suspend"><a href="eg.view360.PanoViewer.html#suspend">suspend</a></li>
    
        <li data-name="eg.view360.PanoViewer#trigger"><a href="eg.view360.PanoViewer.html#trigger">trigger</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.view360.PanoViewer#updateViewportDimensions"><a href="eg.view360.PanoViewer.html#updateViewportDimensions">updateViewportDimensions</a></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    <span class="subtitle">Events</span>
    
        <li data-name="eg.view360.PanoViewer#event:animationEnd"><a href="eg.view360.PanoViewer.html#event:animationEnd">animationEnd</a></li>
    
        <li data-name="eg.view360.PanoViewer#event:error"><a href="eg.view360.PanoViewer.html#event:error">error</a></li>
    
        <li data-name="eg.view360.PanoViewer#event:resume"><a href="eg.view360.PanoViewer.html#event:resume">resume</a></li>
    
        <li data-name="eg.view360.PanoViewer#event:suspend"><a href="eg.view360.PanoViewer.html#event:suspend">suspend</a></li>
    
        <li data-name="eg.view360.PanoViewer#event:viewChange"><a href="eg.view360.PanoViewer.html#event:viewChange">viewChange</a></li>
    
    </ul>

    
</li>

        
            

<li class="item" data-name="eg.view360.SpinViewer">
    <span class="title">
        <a href="eg.view360.SpinViewer.html">eg.view360.SpinViewer</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.view360.SpinViewer#hasOn"><a href="eg.view360.SpinViewer.html#hasOn">hasOn</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.view360.SpinViewer#off"><a href="eg.view360.SpinViewer.html#off">off</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.view360.SpinViewer#on"><a href="eg.view360.SpinViewer.html#on">on</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.view360.SpinViewer#once"><a href="eg.view360.SpinViewer.html#once">once</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.view360.SpinViewer#setScale"><a href="eg.view360.SpinViewer.html#setScale">setScale</a></li>
    
        <li data-name="eg.view360.SpinViewer#spinBy"><a href="eg.view360.SpinViewer.html#spinBy">spinBy</a></li>
    
        <li data-name="eg.view360.SpinViewer#trigger"><a href="eg.view360.SpinViewer.html#trigger">trigger</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    <span class="subtitle">Events</span>
    
        <li data-name="eg.view360.SpinViewer#event:change"><a href="eg.view360.SpinViewer.html#event:change">change</a></li>
    
        <li data-name="eg.view360.SpinViewer#event:imageError"><a href="eg.view360.SpinViewer.html#event:imageError">imageError</a></li>
    
        <li data-name="eg.view360.SpinViewer#event:load"><a href="eg.view360.SpinViewer.html#event:load">load</a></li>
    
    </ul>

    
</li>

        
    
    </ul>
</div>

    <div class="main">
        <h1 class="page-title" data-filename="src_PanoViewer_PanoViewer.js.html">Source: src/PanoViewer/PanoViewer.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import Component from "@egjs/component";

import {YawPitchControl} from "../YawPitchControl";
import {PanoImageRenderer, WebGLUtils} from "../PanoImageRenderer";
import {ERROR_TYPE, EVENTS} from "./consts";
import {glMatrix} from "../utils/math-util.js";

export default class PanoViewer extends Component {
	/**
	 * @classdesc 360 media viewer
	 * @ko 360 미디어 뷰어
	 * @class
	 * @name eg.view360.PanoViewer
	 * @extends eg.Component
	 *
	 * @param {HTMLElement} container The container element for the renderer. &lt;ko>렌더러의 컨테이너 엘리먼트&lt;/ko>
	 * @param {Object} config
	 *
	 * @param {String|Image} config.image Input image &lt;ko>입력 이미지&lt;/ko>
	 * @param {String} [config.imageType=equirectangular] The type of the image: equirectangular, vertival_cubestrip &lt;ko>이미지 유형 : equirectangular, vertival_cubestrip&lt;/ko>
	 * @param {Number} [config.width=width of container] the viewer's width. (in px) &lt;ko>뷰어의 너비 (px 단위)&lt;/ko>
	 * @param {Number} [config.height=height of container] the viewer's height.(in px) &lt;ko>뷰어의 높이 (px 단위)&lt;/ko>
	 *
	 * @param {Number} [config.yaw=0] Initial Yaw of camera (in degree) &lt;ko>카메라의 초기 Yaw (degree 단위)&lt;/ko>
	 * @param {Number} [config.pitch=0] Initial Pitch of camera (in degree) &lt;ko>카메라의 초기 Pitch (degree 단위)&lt;/ko>
	 * @param {Number} [config.fov=65] Initial vertical field of view of camera (in degree) &lt;ko>카메라의 초기 수직 field of view (degree 단위)&lt;/ko>
	 * @param {Boolean} [config.showPolePoint=false] If false, the pole is not displayed inside the viewport &lt;ko>false 인 경우, 극점은 뷰포트 내부에 표시되지 않습니다&lt;/ko>
	 * @param {Boolean} [config.useZoom=true] When true, enables zoom with the wheel and Pinch gesture &lt;ko>true 일 때 휠 및 집기 제스춰로 확대 / 축소 할 수 있습니다.&lt;/ko>
	 * @param {Boolean} [config.useKeyboard=true] When true, enables the keyboard move key control: awsd, arrow keys &lt;ko>true 이면 키보드 이동 키 컨트롤을 활성화합니다: awsd, 화살표 키&lt;/ko>
	 * @param {Array} [config.yawRange=[-180, 180]] Range of controllable Yaw values &lt;ko>제어 가능한 Yaw 값의 범위&lt;/ko>
	 * @param {Array} [config.pitchRange=[-90, 90]] Range of controllable Pitch values &lt;ko>제어 가능한 Pitch 값의 범위&lt;/ko>
	 * @param {Array} [config.fovRange=[30, 110]] Range of controllable vertical field of view values &lt;ko>제어 가능한 수직 field of view 값의 범위&lt;/ko>
	 * @param {Function} [config.checkSupport] A function that returns a boolean value that determines whether the component is working. &lt;ko>뷰어가 작동할 지 여부를 결정하는 부울 값을 반환하는 함수입니다.&lt;/ko>
	 */
	constructor(container, options) {
		super();

		if (options.checkSupport &amp;&amp; !options.checkSupport()) {
			setTimeout(() => {
				this.trigger(EVENTS.ERROR, {
					type: ERROR_TYPE.INVALID_DEVICE,
					message: "invalid device"
				});
			}, 0);

			return this;
		}

		// Raises the error event if webgl is not supported.
		if (!WebGLUtils.isWebGLAvailable()) {
			setTimeout(() => {
				this.trigger(EVENTS.ERROR, {
					type: ERROR_TYPE.NO_WEBGL,
					message: "no webgl support"
				});
			}, 0);
			return this;
		}

		this._container = container;
		this._image = options.image;
		this._imageType = options.imageType || PanoImageRenderer.ImageType.EQUIRECTANGULAR;

		// If the width and height are not provided, will use the size of the container.
		this._width = options.width || parseInt(window.getComputedStyle(container).width, 10);
		this._height = options.height || parseInt(window.getComputedStyle(container).height, 10);

		this._yaw = options.yaw || 0;
		this._pitch = options.pitch || 0;
		this._fov = options.fov || 65;
		this._aspectRatio = this._width / this._height;
		const fovRange = options.fovRange || [30, 110];
		const fovAngle = fovRange[1] - fovRange[0];

		if (fovAngle &lt; this._fov) {
			this._fov = fovAngle;
		}

		const yawPitchConfig = Object.assign(options, {
			element: container,
			yaw: this._yaw,
			pitch: this._pitch,
			fov: this._fov,
			fovRange,
			aspectRatio: this._aspectRatio,
		});

		this._isResumed = false;

		try {
			this._initRenderer(this._yaw, this._pitch, this._fov, this._imageType);
		} catch (e) {
			setTimeout(() => {
				this._photoSphereRenderer &amp;&amp; this._photoSphereRenderer.destroy();
				this.trigger(EVENTS.ERROR, {
					type: ERROR_TYPE.NO_WEBGL,
					message: "no webgl support"
				});
			}, 0);
			return this;
		}

		this._yawPitchControl = new YawPitchControl(yawPitchConfig);

		this._initYawPitchControl();
	}

	/**
	 * @typedef {Object} ImageInfo
	 * @property {String|Image} image Input image url or Image object or Image element &lt;ko>입력 이미지 URL 이나 이미지 객체 나 엘리먼트&lt;/ko>
	 * @property {String} imageType The type of the image: equirectangular, vertival_cubestrip &lt;ko>이미지 유형 : equirectangular, vertival_cubestrip&lt;/ko>
	 */

	/**
	 * Getting the image information that the viewer is currently using.
	 * @ko 뷰어가 현재 사용하고있는 이미지 정보를 얻습니다.
	 * @method eg.view360.PanoViewer#getImage
	 * @return {ImageInfo}
	 */
	getImage() {
		return {
			image: this._image,
			imageType: this._imageType
		};
	}

	/**
	 * Setting the image information to be used by the viewer.
	 * @ko 뷰어가 사용할 이미지 정보를 설정 합니다.
	 * @method eg.view360.PanoViewer#setImage
	 * @param {ImageInfo} imageInfo Input image information  &lt;ko>입력 이미지 정보&lt;/ko>
	 */
	setImage({image, imageType}) {
		if (image) {
			this._image = image;
		}

		if (imageType &amp;&amp; this._imageType !== imageType) {
			this._imageType = imageType;

			if (this._isResumed) {
				this._stopRender();
			}
		}

		if (!this._photoSphereRenderer) {
			return;
		}

		this._photoSphereRenderer
			.setImage({image: this._image, imageType: this._imageType})
			.then(isSuccess => {
				if (!isSuccess || !this._isResumed) {
					return;
				}

				// if it was resume status, render new image.
				this._photoSphereRenderer
					.bindTexture()
					.then(() => {
						this._startRender();
					});
			});
	}

	_initRenderer(yaw, pitch, fov, imageType) {
		if (this._photoSphereRenderer) {
			this._photoSphereRenderer.destroy();
		}

		this._photoSphereRenderer = new PanoImageRenderer(
			this._image,
			this._width,
			this._height,
			{
				initialYaw: yaw,
				initialPitch: pitch,
				fieldOfView: fov,
				imageType
			}
		);
		this._bindRendererHandler();
	}

	_bindRendererHandler() {
		this._photoSphereRenderer.on(PanoImageRenderer.EVENTS.ERROR, e => {
			this.trigger(EVENTS.ERROR, e);
		});

		this._photoSphereRenderer.on(PanoImageRenderer.EVENTS.RENDERING_CONTEXT_LOST, e => {
			this.suspend();
		});

		this._photoSphereRenderer.on(PanoImageRenderer.EVENTS.RENDERING_CONTEXT_RESTORE, e => {
			this.resume();
		});
	}

	_initYawPitchControl() {
		this._yawPitchControl.on(EVENTS.ANIMATION_END, e => {
			this._triggerEvent(EVENTS.ANIMATION_END, e);
		});

		this._yawPitchControl.on("change", e => {
			this._yaw = e.yaw;
			this._pitch = e.pitch;
			this._fov = e.fov;

			this._triggerEvent(EVENTS.VIEW_CHANGE, e);
		});
	}

	_triggerEvent(name, param) {
		const evt = param || {};

		/**
		 * Events that is fired when error occurs
		 * @ko 에러 발생 시 발생하는 이벤트
		 * @name eg.view360.PanoViewer#error
		 * @event
		 * @param {Object} param The object of data to be sent to an event &lt;ko>이벤트에 전달되는 데이터 객체&lt;/ko>
		 * @param {Number} param.type Error type (10: INVALID_DEVICE, 11: NO_WEBGL, 12, FAIL_IMAGE_LOAD, 13: FAIL_BIND_TEXTURE)&lt;ko>에러 종류(10: INVALID_DEVICE, 11: NO_WEBGL, 12, FAIL_IMAGE_LOAD, 13: FAIL_BIND_TEXTURE)&lt;/ko>
		 * @param {String} param.message Error message &lt;ko>에러 메시지&lt;/ko>
		 *
		 * @example
		 *
		 * viwer.on({
		 *	"error" : function(evt) {
		 *		// evt.type === 13
		 *		// evt.messaeg === "failed to bind texture"
		 * });
		 */

		/**
		 * Events that is fired when PanoViewer is ready to go.
		 * @ko PanoViewer 가 준비된 상태에 발생하는 이벤트
		 * @name eg.view360.PanoViewer#resume
		 * @event
		 *
		 * @example
		 *
		 * viwer.on({
		 *	"resume" : function(evt) {
		 *		// PanoViewer is ready to show image and handle user interaction.
		 * });
		 */

		/**
		 * Events that is fired when PanoViewer is suspended
		 * @ko PanoViewer 를 중지했을때 발생하는 이벤트
		 * @name eg.view360.PanoViewer#suspend
		 * @event
		 *
		 * @example
		 *
		 * viwer.on({
		 *	"suspend" : function(evt) {
		 *		// PanoViewer is ready to show image and handle user interaction.
		 * });
		 */

		/**
		 * Events that is fired when direction or fov is changed.
		 * @ko PanoViewer 에서 바라보고 있는 방향이나 FOV(화각)가 변경되었을때 발생하는 이벤트
		 * @name eg.view360.PanoViewer#viewChange
		 * @event
		 * @param {Object} param The object of data to be sent to an event &lt;ko>이벤트에 전달되는 데이터 객체&lt;/ko>
		 * @param {Number} param.yaw yaw&lt;ko>yaw&lt;/ko>
		 * @param {Number} param.pitch pitch &lt;ko>pitch&lt;/ko>
		 * @param {Number} param.fov Field of view (fov) &lt;ko>화각&lt;/ko>
		 * @example
		 *
		 * viwer.on({
		 *	"viewChange" : function(evt) {
		 *		//evt.yaw, evt.pitch, evt.fov is available.
		 * });
		 */

		/**
		 * Events that is fired when animation which is triggered by inertia is ended.
		 * @ko 관성에 의한 애니메이션 동작이 완료되었을때 발생하는 이벤트
		 * @name eg.view360.PanoViewer#animationEnd
		 * @event
		 * @example
		 *
		 * viwer.on({
		 *	"animationEnd" : function(evt) {
		 *		// animation is ended.
		 * });
		 */
		return this.trigger(name, evt);
	}

	/**
	 * When set true, enables zoom with the wheel and Pinch gesture
	 * @ko true 로 설정 시 휠 및 집기 동작으로 확대 / 축소 할 수 있습니다.
	 * @method eg.view360.PanoViewer#setUseZoom
	 * @param {Boolean} useZoom
	 */
	setUseZoom(useZoom) {
		if (typeof useZoom !== "boolean") {
			return;
		}

		this._yawPitchControl.option("useZoom", useZoom);
	}

	/**
	 * When true, enables the keyboard move key control: awsd, arrow keys
	 * @ko true이면 키보드 이동 키 컨트롤을 활성화합니다. (awsd, 화살표 키)
	 * @method eg.view360.PanoViewer#setUseKeyboard
	 * @param {Boolean} useKeyboard
	 */
	setUseKeyboard(useKeyboard) {
		this._yawPitchControl.option("useKeyboard", useKeyboard);
	}

	/**
	 * Setting the range of controllable FOV values
	 * @ko 제어 가능한 FOV 값의 범위 설정
	 * @method eg.view360.PanoViewer#setFovRange
	 * @param {Array} range
	 */
	setFovRange(range) {
		this._yawPitchControl.option("fovRange", range);
	}

	/**
	 * Getting the range of controllable FOV values
	 * @ko 제어 가능한 FOV 값의 범위 가져 오기
	 * @method eg.view360.PanoViewer#getFovRange
	 * @return {Array}
	 */
	getFovRange() {
		return this._yawPitchControl.option("fovRange");
	}

	/**
	 * Update size of canvas element by it's container element's or specified size.
	 * @ko 캔버스 엘리먼트의 크기를 컨테이너 엘리먼트의 크기나 지정된 크기로 업데이트합니다.
	 * @method eg.view360.PanoViewer#updateViewportDimensions
	 * @param {Object} [size]
	 * @param {Number} [size.width=width of container]
	 * @param {Number} [size.height=height of container]
	 */
	updateViewportDimensions(size) {
		if (!this._isResumed) {
			return;
		}
		this._width = (size &amp;&amp; size.width) ||
			parseInt(window.getComputedStyle(this._container).width, 10);
		this._height = (size &amp;&amp; size.height) ||
									parseInt(window.getComputedStyle(this._container).height, 10);
		this._aspectRatio = this._width / this._height;
		this._photoSphereRenderer.updateViewportDimensions(this._width, this._height);
		this._yawPitchControl.option("aspectRatio", this._aspectRatio);

		const skip = false;

		this.lookAt({}, 0, skip);
	}

	/**
	 * Get the vertical field of view
	 * @ko 뷰어의 수직 field of view 값을 가져옵니다.
	 * @method eg.view360.PanoViewer#getFov
	 * @return {Number}
	 */
	getFov() {
		return this._fov;
	}

	/**
	 * Get the horizontal field of view in degree
	 */
	_getHFov() {
		return glMatrix.toDegree(
			2 * Math.atan(this._aspectRatio * Math.tan(glMatrix.toRadian(this._fov) / 2)));
	}

	/**
	 * Get current yaw value
	 * @ko 뷰어의 yaw 값을 가져옵니다.
	 * @method eg.view360.PanoViewer#getYaw
	 * @return {Number}
	 */
	getYaw() {
		return this._yaw;
	}

	/**
	 * Get current pitch value
	 * @ko 뷰어의 pitch 값을 가져옵니다.
	 * @method eg.view360.PanoViewer#getPitch
	 * @return {Number}
	 */
	getPitch() {
		return this._pitch;
	}

	/**
	 * Get the range of controllable Yaw values
	 * @ko 컨트롤 가능한 Yaw 구간을 가져옵니다.
	 * @method eg.view360.PanoViewer#getYawRange
	 * @return {Array}
	 */
	getYawRange() {
		return this._yawPitchControl.option("yawRange");
	}

	/**
	 * Get the range of controllable Pitch values
	 * @ko 컨트롤 가능한 Pitch 구간을 가져옵니다.
	 * @method eg.view360.PanoViewer#getPitchRange
	 * @return {Array}
	 */
	getPitchRange() {
		return this._yawPitchControl.option("pitchRange");
	}

	/**
	 * Set the range of controllable Yaw values
	 * @ko 컨트롤 가능한 Yaw 구간을 설정합니다.
	 * @method eg.view360.PanoViewer#setYawRange
	 * @param {Array} range
	 */
	setYawRange(yawRange) {
		return this._yawPitchControl.option("yawRange", yawRange);
	}

	/**
	 * Set the range of controllable Pitch values
	 * @ko 컨트롤 가능한 Pitch 구간을 설정합니다.
	 * @method eg.view360.PanoViewer#setPitchRange
	 * @param {Array} range
	 */
	setPitchRange(pitchRange) {
		return this._yawPitchControl.option("pitchRange", pitchRange);
	}

	/**
	 * If false, the pole is not displayed inside the viewport
	 * @ko false 인 경우, 폴은 뷰포트 내부에 표시되지 않습니다.
	 * @method eg.view360.PanoViewer#setPitchRange
	 * @param {Boolean} showPolePoint
	 */
	setShowPolePoint(showPolePoint) {
		return this._yawPitchControl.option("showPolePoint", showPolePoint);
	}

	/**
	 * Set a new view by setting camera configuration. Any parameters not specified remain the same.
	 * @ko 카메라 설정을 지정하여 화면을 갱신합니다. 지정되지 않은 매개 변수는 동일하게 유지됩니다.
	 * @method eg.view360.PanoViewer#lookAt
	 * @param {Object} orientation
	 * @param {Number} orientation.yaw Target yaw in degree &lt;ko>목표 yaw (degree 단위)&lt;/ko>
	 * @param {Number} orientation.pitch Target pitch in degree &lt;ko>목표 pitch (degree 단위)&lt;/ko>
	 * @param {Number} orientation.fov Target vertical fov in degree &lt;ko>목표 수직 fov (degree 단위)&lt;/ko>
	 * @param {Number} duration Animation duration in milliseconds &lt;ko>애니메이션 시간 (밀리 초)&lt;/ko>
	 */
	lookAt(orientation, duration, skip) {
		if (!this._isResumed) {
			return;
		}

		const yaw = orientation.yaw !== undefined ? orientation.yaw : this._yaw;
		const pitch = orientation.pitch !== undefined ? orientation.pitch : this._pitch;
		const pitchRange = this._yawPitchControl.option("pitchRange");
		const verticalAngleOfImage = pitchRange[1] - pitchRange[0];
		let fov = orientation.fov !== undefined ? orientation.fov : this._fov;

		if (verticalAngleOfImage &lt; fov) {
			fov = verticalAngleOfImage;
		}

		this._yawPitchControl.lookAt({yaw, pitch, fov}, duration, skip);

		if (duration === 0) {
			this._photoSphereRenderer.render(yaw, pitch, fov);
		}
	}

	/**
	 * Create webgl context and initiate user interaction and rendering
	 * @ko WebGl 컨텍스트 생성 및 사용자 상호 작용과 렌더링 시작
	 * @method eg.view360.PanoViewer#resume
	 */
	resume() {
		if (this._isResumed || !this._yawPitchControl) {
			return;
		}

		if (!this._photoSphereRenderer) {
			this._initRenderer(this._yaw, this._pitch, this._fov, this._imageType);
		}

		// do setTimeout for not blocking UI when resume is called in syncrounos code.
		setTimeout(() => {
			if (this._isResumed || !this._photoSphereRenderer) {
				return;
			}

			this._photoSphereRenderer
				.bindTexture()
				.then(() => this._resume())
				.catch(() => {
					this._triggerEvent(EVENTS.ERROR, {
						type: ERROR_TYPE.FAIL_BIND_TEXTURE,
						message: "failed to bind texture"
					});
				});
		}, 0);
	}

	_resume() {
		this._photoSphereRenderer.attachTo(this._container);
		this._yawPitchControl.enable();

		// Even if the size of the container changes after the suspend, it is detected at the time of resume and is adjusted again.
		this.updateViewportDimensions();

		this._isResumed = true;
		this._triggerEvent(EVENTS.RESUME);
		this._startRender();
	}

	/**
	 * Register the callback on the raf to call _renderLoop every frame.
	 */
	_startRender() {
		this._renderLoop = this._renderLoop.bind(this);
		this._rafId = window.requestAnimationFrame(this._renderLoop);
	}

	_renderLoop() {
		if (this._photoSphereRenderer &amp;&amp; this._photoSphereRenderer.isImageLoaded()) {
			this._photoSphereRenderer.render(this._yaw, this._pitch, this._fov);
		}
		this._rafId = window.requestAnimationFrame(this._renderLoop);
	}

	_stopRender() {
		if (this._rafId) {
			window.cancelAnimationFrame(this._rafId);
			delete this._rafId;
		}
	}

	/**
	 * Destroy webgl context and block user interaction and stop rendering
	 * @ko Webgl 컨텍스트를 삭제하고 사용자 상호 작용을 차단하고 렌더링을 중지합니다.
	 * @method eg.view360.PanoViewer#suspend
	 * @param {Boolean} persistOrientation When true, it persist last yaw, pitch, fov on next resume &lt;ko>true 지정 시, 다음 resume 때 기존의 카메라 설정을 유지합니다.&lt;/ko>
	 */
	suspend() {
		if (this._photoSphereRenderer) {
			this._photoSphereRenderer.cancelLoadImage();
			this._photoSphereRenderer.destroy();
			this._photoSphereRenderer = null;
		}

		if (this._isResumed) {
			this._yawPitchControl.disable();
			this._stopRender();
			this._isResumed = false;
		}

		this._triggerEvent(EVENTS.SUSPEND);
	}

	/**
	 * Returns whether the viewer is in resumed state.
	 * @ko 뷰어가 resume 된 상태인지 여부를 반환합니다.
	 * @method eg.view360.PanoViewer#isResumed
	 * @return {Boolean}
	 */
	isResumed() {
		return this._isResumed;
	}

	/**
	 * Destroy viewer. Remove all registered event listeners and remove viewer canvas.
	 * @ko 뷰어 인스턴스를 해제합니다. 모든 등록된 이벤트리스너를 제거하고 뷰어 캔버스를 삭제한다.
	 * @method eg.view360.PanoViewer#destroy
	 */
	destroy() {
		this.suspend();

		if (this._yawPitchControl) {
			this._yawPitchControl.destroy();
			this._yawPitchControl = null;
		}

		if (this._photoSphereRenderer) {
			this._photoSphereRenderer.destroy();
			this._photoSphereRenderer = null;
		}

		this._isResumed = false;
	}

	static isWebGLAvailable() {
		return WebGLUtils.isWebGLAvailable();
	}

	static isStableWebGL() {
		return WebGLUtils.isStableWebGL();
	}

	/**
	 * Check whether the current environment supports the gyro sensor.
	 * @ko 현재 브라우저 환경이 자이로 센서를 지원하는지 여부를 확인합니다.
	 * @function isGyroSensorAvailable
	 * @memberof eg.view360.PanoViewer
	 * @param {Function} callback Function to take the gyro sensor availability as argument &lt;ko>자이로 센서를 지원하는지 여부를 인자로 받는 함수&lt;/ko>
	 * @static
	 */
	static isGyroSensorAvailable(callback) {
		if (("DeviceMotionEvent" in window) === false || !window.DeviceMotionEvent) {
			callback &amp;&amp; callback(false);
			return;
		}

		let onDeviceMotionChange;

		function checkGyro() {
			return new Promise((res, rej) => {
				onDeviceMotionChange = function(deviceMotion) {
					const isGyroSensorAvailable = deviceMotion.rotationRate.alpha !== null;

					res(isGyroSensorAvailable);
				};

				window.addEventListener("devicemotion", onDeviceMotionChange);
			});
		}

		function timeout() {
			return new Promise((res, rej) => {
				setTimeout(() => res(false), 1000);
			});
		}

		Promise.race([checkGyro(), timeout()]).then(isGyroSensorAvailable => {
			window.removeEventListener("devicemotion", onDeviceMotionChange);

			callback &amp;&amp; callback(isGyroSensorAvailable);

			PanoViewer.isGyroSensorAvailable = function(fb) {
				fb &amp;&amp; fb(isGyroSensorAvailable);
				return isGyroSensorAvailable;
			};
		});
	}
}

PanoViewer.ERROR_TYPE = ERROR_TYPE;
PanoViewer.EVENTS = EVENTS;
PanoViewer.ImageType = PanoImageRenderer.ImageType;
</code></pre>
        </article>
    </section>






        
        <!-- disqus code -->
        <div id="disqus_thread"></div>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        <!-- // disqus code -->
        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Oct 13 2017 00:06:14 GMT+0900 (KST)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/main.js"></script>
</body>
</html>
