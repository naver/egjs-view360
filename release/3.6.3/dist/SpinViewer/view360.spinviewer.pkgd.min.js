/*
Copyright (c) 2017-present NAVER Corp.
name: @egjs/view360
license: MIT
author: NAVER Corp.
repository: https://github.com/naver/egjs-view360
version: 3.6.3
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):((t="undefined"!=typeof globalThis?globalThis:t||self).eg=t.eg||{},t.eg.view360=n())}(this,function(){"use strict";var e="3.6.3",i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function r(t,n){function e(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var a=function(){return(a=Object.assign||function(t){for(var n,e=1,i=arguments.length;e<i;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)};function o(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var i,r,o=e.call(t),a=[];try{for(;(void 0===n||0<n--)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return a}(arguments[n]));return t}function h(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var i,r,o=e.call(t),a=[];try{for(;(void 0===n||0<n--)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return a}(arguments[n]));return t}function l(t){return void 0===t}var u=function(){function t(t,n){var e,i;if(this.eventType=t,this._canceled=!1,n)try{for(var r=h(Object.keys(n)),o=r.next();!o.done;o=r.next()){var a=o.value;this[a]=n[a]}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}}var n=t.prototype;return n.stop=function(){this._canceled=!0},n.isCanceled=function(){return this._canceled},t}(),t=function(){function t(){this._eventHandler={}}var n=t.prototype;return n.trigger=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var i=n instanceof u?n.eventType:n,i=s(this._eventHandler[i]||[]);return i.length<=0||(n instanceof u?(n.currentTarget=this,i.forEach(function(t){t(n)})):i.forEach(function(t){t.apply(void 0,s(e))})),this},n.once=function(e,i){var r,o=this;if("object"==typeof e&&l(i)){var t,n=e;for(t in n)this.once(t,n[t]);return this}return"string"==typeof e&&"function"==typeof i&&(r=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i.apply(void 0,s(t)),o.off(e,r)},this.on(e,r)),this},n.hasOn=function(t){return!!this._eventHandler[t]},n.on=function(t,n){if("object"==typeof t&&l(n)){var e,i=t;for(e in i)this.on(e,i[e]);return this}var r;return"string"==typeof t&&"function"==typeof n&&(r=this._eventHandler[t],l(r)&&(this._eventHandler[t]=[],r=this._eventHandler[t]),r.push(n)),this},n.off=function(t,n){var e,i;if(l(t))return this._eventHandler={},this;if(l(n)){if("string"==typeof t)return delete this._eventHandler[t],this;var r,o=t;for(r in o)this.off(r,o[r]);return this}var a=this._eventHandler[t];if(a){var s=0;try{for(var u=h(a),c=u.next();!c.done;c=u.next()){if(c.value===n){a.splice(s,1),a.length<=0&&delete this._eventHandler[t];break}s++}}catch(t){e={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}}return this},t.VERSION="3.0.1",t}(),f=u;function c(t,n){for(var e=t.length,i=0;i<e;++i)if(n(t[i],i))return!0;return!1}function v(t,n){for(var e=t.length,i=0;i<e;++i)if(n(t[i],i))return t[i];return null}function d(t,n){try{return new RegExp(t,"g").exec(n)}catch(t){return null}}function g(t){return t.replace(/_/g,".")}function _(t,e){var i=null,r="-1";return c(t,function(t){var n=d("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return n&&!t.brand&&(i=t,r=n[3]||"-1",t.versionAlias?r=t.versionAlias:t.versionTest&&(t=t.versionTest.toLowerCase(),r=((t=d("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t=e))?t[3]:"")||r),r=g(r),1)}),{preset:i,version:r}}function p(t,n){return v(t,function(t){t=t.brand;return d(""+n.test,t.toLowerCase())})}var m=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],y=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",brand:!0}],E=[{test:"applewebkit",id:"webkit"}],w=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],x=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function M(t){var n=function(t){if(void 0===t){if("undefined"==typeof navigator||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}(t),e=!!/mobi/g.exec(n),i={name:"unknown",version:"-1",majorVersion:-1,webview:!!_(w,n).preset,chromium:!!_(y,n).preset,webkit:!1},r={name:"unknown",version:"-1",majorVersion:-1},o=_(m,n),a=o.preset,s=o.version,t=_(x,n),o=t.preset,t=t.version;return i.webkit=!i.chromium&&!!_(E,n).preset,o&&(r.name=o.id,r.version=t,r.majorVersion=parseInt(t,10)),a&&(i.name=a.id,i.version=s,i.webview&&"ios"===r.name&&"safari"!==i.name&&(i.webview=!1)),i.majorVersion=parseInt(i.version,10),{browser:i,os:r,isMobile:e,isHints:!1}}function n(t){return void 0===t&&function(){if("undefined"!=typeof navigator&&navigator&&navigator.userAgentData){var t=navigator.userAgentData,t=t.brands||t.uaList;return t&&t.length}}()?(i=((s=navigator.userAgentData).uaList||s.brands).slice(),r=s.mobile||!1,o=i[0],a={name:o.brand,version:o.version,majorVersion:-1,webkit:!1,webview:c(w,function(t){return p(i,t)}),chromium:c(y,function(t){return p(i,t)})},s={name:"unknown",version:"-1",majorVersion:-1},a.webkit=!a.chromium&&c(E,function(t){return p(i,t)}),e&&(n=e.platform.toLowerCase(),o=v(x,function(t){return new RegExp(""+t.test,"g").exec(n)}),s.name=o?o.id:n,s.version=e.platformVersion),c(m,function(t){var n=p(i,t);return n&&(a.name=t.id,a.version=e?e.uaFullVersion:n.version,1)}),"Linux armv8l"===navigator.platform?s.name="android":a.webkit&&(s.name=r?"ios":"mac"),"ios"===s.name&&a.webview&&(a.version="-1"),s.version=g(s.version),a.version=g(a.version),s.majorVersion=parseInt(s.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:s,isMobile:r,isHints:!0}):M(t);var e,n,i,r,o,a,s}var b=function(t,n){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function P(t,n){function e(){this.constructor=t}b(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}function T(t){for(var n=[],e=0,i=t.length;e<i;e++)n.push(t[e]);return n}var I,C,O=function(){return(O=Object.assign||function(t){for(var n,e=1,i=arguments.length;e<i;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)},A="undefined"==typeof window?{navigator:{userAgent:""}}:window,S=24,R="left",D="right",j="middle",B="ontouchstart"in A&&"safari"===n().browser.name,N=function(){if("undefined"==typeof document)return"";for(var t=(document.head||document.getElementsByTagName("head")[0]).style,n=["transform","webkitTransform","msTransform","mozTransform"],e=0,i=n.length;e<i;e++)if(n[e]in t)return n[e];return""}(),k={"user-select":"none","-webkit-user-drag":"none"},L=function(t,n){var e;return void 0===n&&(n=!1),"string"==typeof t?(e=t.match(/^<([a-z]+)\s*([^>]*)>/)?((e=document.createElement("div")).innerHTML=t,T(e.childNodes)):T(document.querySelectorAll(t)),n||(e=1<=e.length?e[0]:void 0)):t!==A&&(!t.nodeName||1!==t.nodeType&&9!==t.nodeType)?"jQuery"in A&&t instanceof jQuery||t.constructor.prototype.jquery?e=n?t.toArray():t.get(0):Array.isArray(t)&&(e=t.map(function(t){return L(t)}),n||(e=1<=e.length?e[0]:void 0)):e=t,e},F=A.requestAnimationFrame||A.webkitRequestAnimationFrame,V=A.cancelAnimationFrame||A.webkitCancelAnimationFrame;F&&!V?(I={},C=F,F=function(n){var e=C(function(t){I[e]&&n(t)});return I[e]=!0,e},V=function(t){delete I[t]}):F&&V||(F=function(t){return A.setTimeout(function(){t(A.performance&&A.performance.now&&A.performance.now()||(new Date).getTime())},16)},V=A.clearTimeout);function X(t,n){var e,i={};for(e in t)e&&(i[e]=n(t[e],e));return i}function Y(t,n){var e,i={};for(e in t)e&&n(t[e],e)&&(i[e]=t[e]);return i}function H(t,n){for(var e in t)if(e&&!n(t[e],e))return!1;return!0}function U(t,e){return H(t,function(t,n){return t===e[n]})}function W(t,n){return nt[n]||(nt[n]=et(n)),nt[n](t)}function q(t,e){return t&&e?X(t,function(t,n){return W(t,"number"==typeof e?e:e[n])}):t}function z(t){if(!isFinite(t))return 0;var n=""+t;if(0<=n.indexOf("e")){for(var e=0,i=1;Math.round(t*i)/i!==t;)i*=10,e++;return e}return 0<=n.indexOf(".")?n.length-n.indexOf(".")-1:0}function G(t,n,e,i){return n=[!e[0]&&i?n[0]-i[0]:n[0],!e[1]&&i?n[1]+i[1]:n[1]],t=Math.max(n[0],t),t=Math.min(n[1],t)}function Q(t,n){return t<n[0]||t>n[1]}function Z(t,n,e){return e[1]&&t>n[1]||e[0]&&t<n[0]}function J(t,n,e){var i=t,r=n[0],o=n[1],n=o-r;return e[1]&&o<t&&(i=(i-o)%n+r),e[0]&&t<r&&(i=(i-r)%n+o),i}function K(i,t){return t.reduce(function(t,n,e){return i[e]&&(t[i[e]]=n),t},{})}function $(t,n,e){return Math.max(Math.min(t,e),n)}function tt(t,n,e){return e?!!(30===n||n&t&&e&t):!!(n&t)}var nt={},et=function(n){var e=n<1?Math.pow(10,z(n)):1;return function(t){return 0===n?0:Math.round(Math.round(t/n)*n*e)/e}},it=function(){function t(t){this._axes=t}var n=t.prototype;return n.hold=function(t,n){t=this._getRoundPos(t).roundPos;this._axes.trigger(new f("hold",{pos:t,input:n.input||null,inputEvent:n.event||null,isTrusted:!0}))},n.triggerRelease=function(t){var n=this._getRoundPos(t.destPos,t.depaPos),e=n.roundPos,n=n.roundDepa;t.destPos=e,t.depaPos=n,t.setTo=this._createUserControll(t.destPos,t.duration),this._axes.trigger(new f("release",O(O({},t),{bounceRatio:this._getBounceRatio(e)})))},n.triggerChange=function(t,n,e,i){void 0===i&&(i=!1);var r=this.animationManager,o=r.axisManager,r=r.getEventInfo(),t=this._getRoundPos(t,n),n=t.roundPos,t=t.roundDepa,n=o.moveTo(n,t),t=(null==e?void 0:e.event)||(null==r?void 0:r.event)||null,r={pos:n.pos,delta:n.delta,bounceRatio:this._getBounceRatio(n.pos),holding:i,inputEvent:t,isTrusted:!!t,input:(null==e?void 0:e.input)||(null==r?void 0:r.input)||null,set:t?this._createUserControll(n.pos):function(){}},n=new f("change",r);return this._axes.trigger(n),t&&o.set(r.set().destPos),!n.isCanceled()},n.triggerAnimationStart=function(t){var n=this._getRoundPos(t.destPos,t.depaPos),e=n.roundPos,n=n.roundDepa;t.destPos=e,t.depaPos=n,t.setTo=this._createUserControll(t.destPos,t.duration);t=new f("animationStart",t);return this._axes.trigger(t),!t.isCanceled()},n.triggerAnimationEnd=function(t){void 0===t&&(t=!1),this._axes.trigger(new f("animationEnd",{isTrusted:t}))},n.triggerFinish=function(t){void 0===t&&(t=!1),this._axes.trigger(new f("finish",{isTrusted:t}))},n.setAnimationManager=function(t){this.animationManager=t},n.destroy=function(){this._axes.off()},n._createUserControll=function(t,n){void 0===n&&(n=0);var e={destPos:O({},t),duration:n};return function(t,n){return t&&(e.destPos=O({},t)),void 0!==n&&(e.duration=n),e}},n._getRoundPos=function(t,n){var e=this._axes.options.round;return{roundPos:q(t,e),roundDepa:q(n,e)}},n._getBounceRatio=function(t){return this._axes.axisManager.map(t,function(t,n){return t<n.range[0]&&0!==n.bounce[0]?(n.range[0]-t)/n.bounce[0]:t>n.range[1]&&0!==n.bounce[1]?(t-n.range[1])/n.bounce[1]:0})},t}(),rt=function(){function t(t){this._options=t,this._prevented=!1}var n=t.prototype;return n.isInterrupting=function(){return this._options.interruptable||this._prevented},n.isInterrupted=function(){return!this._options.interruptable&&this._prevented},n.setInterrupt=function(t){this._options.interruptable||(this._prevented=t)},t}(),ot=function(){function t(t){var e=this;this._axis=t,this._complementOptions(),this._pos=Object.keys(this._axis).reduce(function(t,n){return t[n]=e._axis[n].range[0],t},{})}var n=t.prototype;return n.getDelta=function(t,n){var e=this.get(t);return X(this.get(n),function(t,n){return t-e[n]})},n.get=function(t){var e=this;return t&&Array.isArray(t)?t.reduce(function(t,n){return n&&n in e._pos&&(t[n]=e._pos[n]),t},{}):O(O({},this._pos),t||{})},n.moveTo=function(e,i){void 0===i&&(i=this._pos);var t=X(this._pos,function(t,n){return n in e&&n in i?e[n]-i[n]:0});return this.set(this.map(e,function(t,n){return n?J(t,n.range,n.circular):0})),{pos:O({},this._pos),delta:t}},n.set=function(t){for(var n in t)n&&n in this._pos&&(this._pos[n]=t[n])},n.every=function(t,e){var i=this._axis;return H(t,function(t,n){return e(t,i[n],n)})},n.filter=function(t,e){var i=this._axis;return Y(t,function(t,n){return e(t,i[n],n)})},n.map=function(t,e){var i=this._axis;return X(t,function(t,n){return e(t,i[n],n)})},n.isOutside=function(t){return!this.every(t?this.get(t):this._pos,function(t,n){return!Q(t,n.range)})},n.getAxisOptions=function(t){return this._axis[t]},n._complementOptions=function(){var r=this;Object.keys(this._axis).forEach(function(i){r._axis[i]=O({range:[0,100],bounce:[0,0],circular:[!1,!1]},r._axis[i]),["bounce","circular"].forEach(function(t){var n=r._axis,e=n[i][t];/string|number|boolean/.test(typeof e)&&(n[i][t]=[e,e])})})},t}(),at="ontouchstart"in A,st="PointerEvent"in A,ut="MSPointerEvent"in A,ct=st||ut,ht=function(){function t(){var n=this;this._stopContextMenu=function(t){t.preventDefault(),A.removeEventListener("contextmenu",n._stopContextMenu)}}var n=t.prototype;return n.extendEvent=function(t){var n=this.prevEvent,e=this._getCenter(t),i=n?this._getMovement(t):{x:0,y:0},r=n?this._getScale(t):1,o=n?(f=e.x-n.center.x,l=e.y-n.center.y,180*Math.atan2(l,f)/Math.PI):0,a=n?n.deltaX+i.x:i.x,s=n?n.deltaY+i.y:i.y,u=i.x,c=i.y,h=this._latestInterval,l=Date.now(),f=h?l-h.timestamp:0,i=n?n.velocityX:0,n=n?n.velocityY:0;return(!h||16<=f)&&(h&&(i=(f=[(a-h.deltaX)/f,(s-h.deltaY)/f])[0],n=f[1]),this._latestInterval={timestamp:l,deltaX:a,deltaY:s}),{srcEvent:t,scale:r,angle:o,center:e,deltaX:a,deltaY:s,offsetX:u,offsetY:c,velocityX:i,velocityY:n,preventSystemEvent:!0}},n._getDistance=function(t,n){var e=n.clientX-t.clientX,t=n.clientY-t.clientY;return Math.sqrt(e*e+t*t)},n._getButton=function(t){var n={1:R,2:D,4:j},t=this._isTouchEvent(t)?R:n[t.buttons];return t||null},n._isTouchEvent=function(t){return-1<t.type.indexOf("touch")},n._isValidButton=function(t,n){return-1<n.indexOf(t)},n._preventMouseButton=function(t,n){n===D?A.addEventListener("contextmenu",this._stopContextMenu):n===j&&t.preventDefault()},t}(),lt=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.start=["mousedown"],t.move=["mousemove"],t.end=["mouseup"],t}P(t,n);var e=t.prototype;return e.onEventStart=function(t,n){var e=this._getButton(t);return n&&!this._isValidButton(e,n)?null:(this._preventMouseButton(t,e),this.extendEvent(t))},e.onEventMove=function(t,n){return n&&!this._isValidButton(this._getButton(t),n)?null:this.extendEvent(t)},e.onEventEnd=function(){},e.onRelease=function(){this.prevEvent=null},e.getTouches=function(){return 0},e._getScale=function(){return 1},e._getCenter=function(t){return{x:t.clientX,y:t.clientY}},e._getMovement=function(t){var n=this.prevEvent.srcEvent;return{x:t.clientX-n.clientX,y:t.clientY-n.clientY}},t}(ht),ft=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.start=["touchstart"],t.move=["touchmove"],t.end=["touchend","touchcancel"],t}P(t,n);var e=t.prototype;return e.onEventStart=function(t){return this._baseTouches=t.touches,this.extendEvent(t)},e.onEventMove=function(t){return this.extendEvent(t)},e.onEventEnd=function(t){this._baseTouches=t.touches},e.onRelease=function(){this.prevEvent=null,this._baseTouches=null},e.getTouches=function(t){return t.touches.length},e._getScale=function(t){return 2!==t.touches.length||this._baseTouches.length<2?null:this._getDistance(t.touches[0],t.touches[1])/this._getDistance(this._baseTouches[0],this._baseTouches[1])},e._getCenter=function(t){return{x:t.touches[0].clientX,y:t.touches[0].clientY}},e._getMovement=function(t){var n=this.prevEvent.srcEvent;return t.touches[0].identifier!==n.touches[0].identifier?{x:0,y:0}:{x:t.touches[0].clientX-n.touches[0].clientX,y:t.touches[0].clientY-n.touches[0].clientY}},t}(ht),vt=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.start=st?["pointerdown"]:["MSPointerDown"],t.move=st?["pointermove"]:["MSPointerMove"],t.end=st?["pointerup","pointercancel"]:["MSPointerUp","MSPointerCancel"],t._firstInputs=[],t._recentInputs=[],t}P(t,n);var e=t.prototype;return e.onEventStart=function(t,n){var e=this._getButton(t);return n&&!this._isValidButton(e,n)?null:(this._preventMouseButton(t,e),this._updatePointerEvent(t),this.extendEvent(t))},e.onEventMove=function(t,n){return n&&!this._isValidButton(this._getButton(t),n)?null:(this._updatePointerEvent(t),this.extendEvent(t))},e.onEventEnd=function(t){this._removePointerEvent(t)},e.onRelease=function(){this.prevEvent=null,this._firstInputs=[],this._recentInputs=[]},e.getTouches=function(){return this._recentInputs.length},e._getScale=function(){return 2!==this._recentInputs.length?null:this._getDistance(this._recentInputs[0],this._recentInputs[1])/this._getDistance(this._firstInputs[0],this._firstInputs[1])},e._getCenter=function(t){return{x:t.clientX,y:t.clientY}},e._getMovement=function(t){var n=this.prevEvent.srcEvent;return t.pointerId!==n.pointerId?{x:0,y:0}:{x:t.clientX-n.clientX,y:t.clientY-n.clientY}},e._updatePointerEvent=function(e){var i=this,r=!1;this._recentInputs.forEach(function(t,n){t.pointerId===e.pointerId&&(r=!0,i._recentInputs[n]=e)}),r||(this._firstInputs.push(e),this._recentInputs.push(e))},e._removePointerEvent=function(n){this._firstInputs=this._firstInputs.filter(function(t){return t.pointerId!==n.pointerId}),this._recentInputs=this._recentInputs.filter(function(t){return t.pointerId!==n.pointerId})},t}(ht),dt=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.start=["mousedown","touchstart"],t.move=["mousemove","touchmove"],t.end=["mouseup","touchend","touchcancel"],t}P(t,n);var e=t.prototype;return e.onEventStart=function(t,n){var e=this._getButton(t);return this._isTouchEvent(t)&&(this._baseTouches=t.touches),n&&!this._isValidButton(e,n)?null:(this._preventMouseButton(t,e),this.extendEvent(t))},e.onEventMove=function(t,n){return n&&!this._isValidButton(this._getButton(t),n)?null:this.extendEvent(t)},e.onEventEnd=function(t){this._isTouchEvent(t)&&(this._baseTouches=t.touches)},e.onRelease=function(){this.prevEvent=null,this._baseTouches=null},e.getTouches=function(t){return this._isTouchEvent(t)?t.touches.length:0},e._getScale=function(t){return this._isTouchEvent(t)?2!==t.touches.length||this._baseTouches.length<2?1:this._getDistance(t.touches[0],t.touches[1])/this._getDistance(this._baseTouches[0],this._baseTouches[1]):this.prevEvent.scale},e._getCenter=function(t){return this._isTouchEvent(t)?{x:t.touches[0].clientX,y:t.touches[0].clientY}:{x:t.clientX,y:t.clientY}},e._getMovement=function(t){var n=this,e=[t,this.prevEvent.srcEvent].map(function(t){return n._isTouchEvent(t)?{id:t.touches[0].identifier,x:t.touches[0].clientX,y:t.touches[0].clientY}:{id:null,x:t.clientX,y:t.clientY}}),t=e[0],e=e[1];return t.id===e.id?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}},t}(ht),gt=function(){function t(t){var n=t.options,e=t.interruptManager,i=t.eventManager,r=t.axisManager,t=t.animationManager;this._isOutside=!1,this._moveDistance=null,this._isStopped=!1,this.options=n,this._interruptManager=e,this._eventManager=i,this._axisManager=r,this._animationManager=t}var n=t.prototype;return n.get=function(t){return this._axisManager.get(t.axes)},n.hold=function(t,n){!this._interruptManager.isInterrupted()&&t.axes.length&&(n={input:t,event:n},this._isStopped=!1,this._interruptManager.setInterrupt(!0),this._animationManager.stopAnimation(n),this._moveDistance||this._eventManager.hold(this._axisManager.get(),n),this._isOutside=this._axisManager.isOutside(t.axes),this._moveDistance=this._axisManager.get(t.axes))},n.change=function(t,n,e,i){var r,o,a;this._isStopped||!this._interruptManager.isInterrupting()||this._axisManager.every(e,function(t){return 0===t})||((r=n.srcEvent||n).__childrenAxesAlreadyChanged||(o=this._moveDistance||this._axisManager.get(t.axes),a=X(o,function(t,n){return t+(e[n]||0)}),this._moveDistance&&(this._moveDistance=this._axisManager.map(a,function(t,n){var e=n.circular,n=n.range;return e&&(e[0]||e[1])?J(t,n,e):t})),this._isOutside&&this._axisManager.every(o,function(t,n){return!Q(t,n.range)})&&(this._isOutside=!1),o=this._atOutside(o),a=this._atOutside(a),this.options.nested&&this._isEndofAxis(e,o,a)||(r.__childrenAxesAlreadyChanged=!0),n={input:t,event:n},i?(i=this._animationManager.getDuration(a,o),this._animationManager.animateTo(a,i,n)):this._eventManager.triggerChange(a,o,n,!0)||(this._isStopped=!0,this._moveDistance=null,this._animationManager.finish(!1))))},n.release=function(t,n,e,i){var r,o,a;!this._isStopped&&this._interruptManager.isInterrupting()&&this._moveDistance&&((r=n.srcEvent||n).__childrenAxesAlreadyReleased&&(e=e.map(function(){return 0})),o=this._axisManager.get(t.axes),a=this._axisManager.get(),e=this._animationManager.getDisplacement(e),e=K(t.axes,e),e=this._axisManager.get(this._axisManager.map(e,function(t,n,e){return n.circular&&(n.circular[0]||n.circular[1])?o[e]+t:G(o[e]+t,n.range,n.circular,n.bounce)})),r.__childrenAxesAlreadyReleased=!0,0===(i=this._animationManager.getDuration(e,o,i))&&(e=O({},a)),e={depaPos:a,destPos:e,duration:i,delta:this._axisManager.getDelta(a,e),inputEvent:n,input:t,isTrusted:!0},this._eventManager.triggerRelease(e),this._moveDistance=null,e=this._animationManager.getUserControl(e),t={input:t,event:n},(n=U(e.destPos,a))||0===e.duration?(n||this._eventManager.triggerChange(e.destPos,a,t,!0),this._interruptManager.setInterrupt(!1),this._axisManager.isOutside()?this._animationManager.restore(t):this._eventManager.triggerFinish(!0)):this._animationManager.animateTo(e.destPos,e.duration,t))},n._atOutside=function(t){var o=this;return this._isOutside?this._axisManager.map(t,function(t,n){var e=n.range[0]-n.bounce[0],n=n.range[1]+n.bounce[1];return n<t?n:t<e?e:t}):this._axisManager.map(t,function(t,n){var e=n.range[0],i=n.range[1],r=n.bounce,n=n.circular;return n&&(n[0]||n[1])?t:t<e?e-o._animationManager.interpolate(e-t,r[0]):i<t?i+o._animationManager.interpolate(t-i,r[1]):t})},n._isEndofAxis=function(r,o,a){return this._axisManager.every(o,function(t,n,e){return 0===r[e]||o[e]===a[e]&&(i=t,e=n.range,t=n.bounce,!(n=n.circular)[0]&&i===e[0]-t[0]||!n[1]&&i===e[1]+t[1]);var i})},t}(),_t=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t._useDuration=!0,t}P(t,n);var e=t.prototype;return e.interpolate=function(t,n){var e=this._easing(1e-5)/1e-5;return this._easing(t/(n*e))*n},e.updateAnimation=function(t){var n,e,i,r,o=this._animateParam;o&&(n=(new Date).getTime()-o.startTime,e=(null==t?void 0:t.destPos)||o.destPos,i=(null==t?void 0:t.duration)||o.duration,null!=t&&t.restart||i<=n?this.setTo(e,i-n):(null!=t&&t.destPos&&(r=this.axisManager.get(),this._initialEasingPer=this._prevEasingPer,o.delta=this.axisManager.getDelta(r,e),o.destPos=e),null!=t&&t.duration&&(t=(n+this._durationOffset)/o.duration,this._durationOffset=t*i-n,o.duration=i)))},e._initState=function(t){return this._initialEasingPer=0,this._prevEasingPer=0,this._durationOffset=0,{pos:t.depaPos,easingPer:0,finished:!1}},e._getNextState=function(t){var r=this,o=this._animateParam,a=t.pos,s=o.destPos,u=X(a,function(t,n){return t<=s[n]?1:-1}),c=((new Date).getTime()-o.startTime+this._durationOffset)/o.duration,h=this._easing(c);return{pos:this.axisManager.map(a,function(t,n,e){var i=1<=c?s[e]:t+o.delta[e]*(h-r._prevEasingPer)/(1-r._initialEasingPer),t=J(i,n.range,n.circular);return i!==t&&(n=u[e]*(n.range[1]-n.range[0]),s[e]-=n,a[e]-=n),t}),easingPer:this._prevEasingPer=h,finished:1<=h}},e._easing=function(t){return 1<t?1:this._options.easing(t)},t}(function(){function t(t){var n=t.options,e=t.interruptManager,i=t.eventManager,t=t.axisManager;this._options=n,this.interruptManager=e,this.eventManager=i,this.axisManager=t,this.animationEnd=this.animationEnd.bind(this)}var n=t.prototype;return n.getDuration=function(e,t,n){var i,r=this;return t=void 0!==n?n:(i=X(t,function(t,n){return function(t,n){n=Math.sqrt(t/n*2);return n<100?0:n}(Math.abs(t-e[n]),r._options.deceleration)}),Object.keys(i).reduce(function(t,n){return Math.max(t,i[n])},-1/0)),$(t,this._options.minimumDuration,this._options.maximumDuration)},n.getDisplacement=function(t){var n=Math.pow(t.reduce(function(t,n){return t+n*n},0),1/t.length),e=Math.abs(n/-this._options.deceleration);return t.map(function(t){return t/2*e})},n.stopAnimation=function(t){var e,n;this._animateParam&&(e=this.axisManager.get(),n=this.axisManager.map(e,function(t,n){return J(t,n.range,n.circular)}),H(n,function(t,n){return e[n]===t})||this.eventManager.triggerChange(n,e,t,!!t),this._animateParam=null,this._raf&&(n=this._raf,V(n)),this._raf=null,this.eventManager.triggerAnimationEnd(!(null==t||!t.event)))},n.getEventInfo=function(){return this._animateParam&&this._animateParam.input&&this._animateParam.inputEvent?{input:this._animateParam.input,event:this._animateParam.inputEvent}:null},n.restore=function(t){var n=this.axisManager.get(),e=this.axisManager.map(n,function(t,n){return Math.min(n.range[1],Math.max(n.range[0],t))});this.stopAnimation(),this.animateTo(e,this.getDuration(n,e),t)},n.animationEnd=function(){var t=this.getEventInfo();this._animateParam=null;var n=this.axisManager.filter(this.axisManager.get(),function(t,n){return Z(t,n.range,n.circular)});0<Object.keys(n).length&&this.setTo(this.axisManager.map(n,function(t,n){return J(t,n.range,n.circular)})),this.interruptManager.setInterrupt(!1),this.eventManager.triggerAnimationEnd(!!t),this.axisManager.isOutside()?this.restore(t):this.finish(!!t)},n.finish=function(t){this._animateParam=null,this.interruptManager.setInterrupt(!1),this.eventManager.triggerFinish(t)},n.getUserControl=function(t){t=t.setTo();return t.destPos=this.axisManager.get(t.destPos),t.duration=$(t.duration,this._options.minimumDuration,this._options.maximumDuration),t},n.animateTo=function(t,n,e){var i=this;this.stopAnimation();var r=this._createAnimationParam(t,n,e),t=O({},r.depaPos),n=this.eventManager.triggerAnimationStart(r),r=this.getUserControl(r);!n&&this.axisManager.every(r.destPos,function(t,n){return Z(t,n.range,n.circular)})&&console.warn("You can't stop the 'animation' event when 'circular' is true."),n&&!U(r.destPos,t)&&(n=(null==e?void 0:e.event)||null,this._animateLoop({depaPos:t,destPos:r.destPos,duration:r.duration,delta:this.axisManager.getDelta(t,r.destPos),isTrusted:!!n,inputEvent:n,input:(null==e?void 0:e.input)||null},function(){return i.animationEnd()}))},n.setTo=function(t,n){void 0===n&&(n=0);var e=Object.keys(t),i=this.axisManager.get(e);if(U(t,i))return this;this.interruptManager.setInterrupt(!0);t=Y(t,function(t,n){return i[n]!==t});return Object.keys(t).length?(t=this.axisManager.map(t,function(t,n){var e=n.range,n=n.circular;return n&&(n[0]||n[1])?t:G(t,e,n)}),U(t,i)||(0<n?this.animateTo(t,n):(this.stopAnimation(),this.eventManager.triggerChange(t),this.finish(!1))),this):this},n.setBy=function(e,t){return void 0===t&&(t=0),this.setTo(X(this.axisManager.get(Object.keys(e)),function(t,n){return t+e[n]}),t)},n._createAnimationParam=function(t,n,e){var i=this.axisManager.get(),r=t,t=(null==e?void 0:e.event)||null;return{depaPos:i,destPos:r,duration:$(n,this._options.minimumDuration,this._options.maximumDuration),delta:this.axisManager.getDelta(i,r),inputEvent:t,input:(null==e?void 0:e.input)||null,isTrusted:!!t,done:this.animationEnd}},n._animateLoop=function(t,i){var r,o,a,s=this;t.duration?(this._animateParam=O(O({},t),{startTime:(new Date).getTime()}),r=X(t.destPos,function(t){return t}),o=this._initState(this._animateParam),(a=function(){s._raf=null;var t=s._animateParam,n=s._getNextState(o),e=!s.eventManager.triggerChange(n.pos,o.pos);(o=n).finished?(t.destPos=s._getFinalPos(t.destPos,r),U(t.destPos,s.axisManager.get(Object.keys(t.destPos)))||s.eventManager.triggerChange(t.destPos,n.pos),i()):e?s.finish(!1):s._raf=F(a)})()):(this.eventManager.triggerChange(t.destPos),i())},n._getFinalPos=function(t,e){var i=this;return X(t,function(t,n){if(t>=e[n]-1e-6&&t<=e[n]+1e-6)return e[n];n=i._getRoundUnit(t,n);return W(t,n)})},n._getRoundUnit=function(t,n){var e=this._options.round,i=null;return e||(n=this.axisManager.getAxisOptions(n),t=Math.max(z(n.range[0]),z(n.range[1]),z(t)),i=1/Math.pow(10,t)),i||e},t}()),pt=function(r){function t(t,n,e){void 0===t&&(t={}),void 0===n&&(n={}),void 0===e&&(e=null);var i=r.call(this)||this;return i.axis=t,i._inputs=[],i.options=O({easing:function(t){return 1-Math.pow(1-t,3)},interruptable:!0,maximumDuration:1/0,minimumDuration:0,deceleration:6e-4,round:null,nested:!1},n),i.interruptManager=new rt(i.options),i.axisManager=new ot(i.axis),i.eventManager=new it(i),i.animationManager=new _t(i),i.inputObserver=new gt(i),i.eventManager.setAnimationManager(i.animationManager),e&&i.eventManager.triggerChange(e),i}P(t,r);var n=t.prototype;return n.connect=function(t,n){t="string"==typeof t?t.split(" "):t.concat();return~this._inputs.indexOf(n)&&this.disconnect(n),n.mapAxes(t),n.connect(this.inputObserver),this._inputs.push(n),this},n.disconnect=function(t){return t?0<=(t=this._inputs.indexOf(t))&&(this._inputs[t].disconnect(),this._inputs.splice(t,1)):(this._inputs.forEach(function(t){return t.disconnect()}),this._inputs=[]),this},n.get=function(t){return this.axisManager.get(t)},n.setTo=function(t,n){return void 0===n&&(n=0),this.animationManager.setTo(t,n),this},n.setBy=function(t,n){return void 0===n&&(n=0),this.animationManager.setBy(t,n),this},n.stopAnimation=function(){return this.animationManager.stopAnimation(),this},n.updateAnimation=function(t){return this.animationManager.updateAnimation(t),this},n.isBounceArea=function(t){return this.axisManager.isOutside(t)},n.destroy=function(){this.disconnect(),this.eventManager.destroy()},t.VERSION="3.3.0",t.TRANSFORM=N,t.DIRECTION_NONE=1,t.DIRECTION_LEFT=2,t.DIRECTION_RIGHT=4,t.DIRECTION_UP=8,t.DIRECTION_DOWN=16,t.DIRECTION_HORIZONTAL=6,t.DIRECTION_VERTICAL=S,t.DIRECTION_ALL=30,t}(t),mt=function(){function t(t,n){var e=this;this.axes=[],this.element=null,this._enabled=!1,this._activeEvent=null,this._atRightEdge=!1,this._rightEdgeTimer=0,this._forceRelease=function(){var t=e._activeEvent,n=t.prevEvent;t.onRelease(),e._observer.release(e,n,[0,0]),e._detachWindowEvent(t)},this._voidFunction=function(){},this.element=L(t),this.options=O({inputType:["touch","mouse","pointer"],inputButton:[R],scale:[1,1],thresholdAngle:45,threshold:0,iOSEdgeSwipeThreshold:30,releaseOnScroll:!1,touchAction:null},n),this._onPanstart=this._onPanstart.bind(this),this._onPanmove=this._onPanmove.bind(this),this._onPanend=this._onPanend.bind(this)}var n=t.prototype;return n.mapAxes=function(t){var n=!!t[0],e=!!t[1];this._direction=n&&e?30:n?6:e?S:1,this.axes=t},n.connect=function(t){var n,e,i,r,o;return this._activeEvent&&(this._detachElementEvent(),this._detachWindowEvent(this._activeEvent)),this._attachElementEvent(t),this._originalCssProps=(n=this.element,e=this.options,i=this._direction,(t={})[1]="auto",t[30]="none",t[S]="pan-x",t[6]="pan-y",t,o={},n&&n.style&&(i=e.touchAction||t[i],r=O(O({},k),{"touch-action":"none"===n.style["touch-action"]?"none":i}),Object.keys(r).forEach(function(t){o[t]=n.style[t],n.style[t]=r[t]})),o),this},n.disconnect=function(){var n,e,i,r;return this._detachElementEvent(),this._detachWindowEvent(this._activeEvent),i=this._originalCssProps,r=!0,Object.keys(k).forEach(function(t){i&&i[t]===k[t]||(r=!1)}),r||(n=this.element,e=this._originalCssProps,n&&n.style&&e&&Object.keys(e).forEach(function(t){n.style[t]=e[t]})),this._direction=1,this},n.destroy=function(){this.disconnect(),this.element=null},n.enable=function(){return this._enabled=!0,this},n.disable=function(){return this._enabled=!1,this},n.isEnabled=function(){return this._enabled},n._onPanstart=function(t){var n=this._activeEvent,e=n.onEventStart(t,this.options.inputButton);!e||!this._enabled||1<n.getTouches(t)||!1!==e.srcEvent.cancelable&&(t=this.options.iOSEdgeSwipeThreshold,this._observer.hold(this,e),this._atRightEdge=B&&e.center.x>window.innerWidth-t,this._attachWindowEvent(n),n.prevEvent=e)},n._onPanmove=function(t){var n=this,e=this._activeEvent,i=e.onEventMove(t,this.options.inputButton);if(i&&this._enabled&&!(1<e.getTouches(t))){var r=this.options,o=r.iOSEdgeSwipeThreshold,a=r.releaseOnScroll,r=function(t,n){if(n<0||90<n)return 1;t=Math.abs(t);return n<t&&t<180-n?S:6}(i.angle,this.options.thresholdAngle);if(!a||i.srcEvent.cancelable){if(e.prevEvent&&B){if(i.center.x<0)return void this._forceRelease();this._atRightEdge&&(clearTimeout(this._rightEdgeTimer),i.deltaX<-o?this._atRightEdge=!1:this._rightEdgeTimer=window.setTimeout(function(){return n._forceRelease()},100))}o=this._getOffset([i.offsetX,i.offsetY],[tt(6,this._direction,r),tt(S,this._direction,r)]),r=o.some(function(t){return 0!==t});r&&(!1!==i.srcEvent.cancelable&&i.srcEvent.preventDefault(),i.srcEvent.stopPropagation()),(i.preventSystemEvent=r)&&this._observer.change(this,i,K(this.axes,o)),e.prevEvent=i}else this._onPanend(t)}},n._onPanend=function(t){var n,e=this._activeEvent;e.onEventEnd(t),this._enabled&&0===e.getTouches(t)&&(this._detachWindowEvent(e),clearTimeout(this._rightEdgeTimer),n=e.prevEvent,t=this._getOffset([Math.abs(n.velocityX)*(n.offsetX<0?-1:1),Math.abs(n.velocityY)*(n.offsetY<0?-1:1)],[tt(6,this._direction),tt(S,this._direction)]),e.onRelease(),this._observer.release(this,n,t))},n._attachWindowEvent=function(t){var n=this;null!=t&&t.move.forEach(function(t){window.addEventListener(t,n._onPanmove,{passive:!1})}),null!=t&&t.end.forEach(function(t){window.addEventListener(t,n._onPanend,{passive:!1})})},n._detachWindowEvent=function(t){var n=this;null!=t&&t.move.forEach(function(t){window.removeEventListener(t,n._onPanmove)}),null!=t&&t.end.forEach(function(t){window.removeEventListener(t,n._onPanend)})},n._getOffset=function(t,n){var e=[0,0],i=this.options.scale;return n[0]&&(e[0]=t[0]*i[0]),n[1]&&(e[1]=t[1]*i[1]),e},n._attachElementEvent=function(t){var e=this,n=function(t){void 0===t&&(t=[]);var n=!1,e=!1,i=!1;return t.forEach(function(t){switch(t){case"mouse":e=!0;break;case"touch":n=at;break;case"pointer":i=ct}}),i?new vt:n&&e?new dt:n?new ft:e?new lt:null}(this.options.inputType);n&&(this._observer=t,this._enabled=!0,(this._activeEvent=n).start.forEach(function(t){var n;null!==(n=e.element)&&void 0!==n&&n.addEventListener(t,e._onPanstart)}),n.move.forEach(function(t){var n;null!==(n=e.element)&&void 0!==n&&n.addEventListener(t,e._voidFunction)}))},n._detachElementEvent=function(){var e=this,t=this._activeEvent;null!=t&&t.start.forEach(function(t){var n;null!==(n=e.element)&&void 0!==n&&n.removeEventListener(t,e._onPanstart)}),null!=t&&t.move.forEach(function(t){var n;null!==(n=e.element)&&void 0!==n&&n.removeEventListener(t,e._voidFunction)}),this._enabled=!1,this._observer=null},t}(),ut="undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")(),yt=ut.document,ht=(ut.navigator,n());ht.os.name,ht.browser.name;ut.Float32Array=void 0!==ut.Float32Array?ut.Float32Array:ut.Array;ut.Float32Array,ut.getComputedStyle,ut.navigator&&ut.navigator.userAgent,ut.DeviceMotionEvent,ut.devicePixelRatio;var Et=function(){for(var t,n=null!==(t=null==yt?void 0:yt.documentElement.style)&&void 0!==t?t:{},e=["transform","webkitTransform","msTransform","mozTransform"],i=0,r=e.length;i<r;i++)if(e[i]in n)return e[i];return""}(),wt=ut.CSS&&ut.CSS.supports&&ut.CSS.supports("will-change","transform"),xt="view360-wrapper",Mt="view360-image",ut={__proto__:null,SPINVIEWER_OPTIONS:{imageUrl:!0,rowCount:!0,colCount:!0,width:!0,height:!0,autoHeight:!0,colRow:!0,scale:!0,frameIndex:!0,wrapperClass:!0,imageClass:!0},SPINVIEWER_EVENTS:{LOAD:"load",IMAGE_ERROR:"imageError",CHANGE:"change",ANIMATION_END:"animationEnd"},DEFAULT_WRAPPER_CLASS:xt,DEFAULT_IMAGE_CLASS:Mt},bt=function(u){function c(t,n){void 0===n&&(n={});var e=u.call(this)||this,i=n||{};e._el=t,e._rowCount=i.rowCount||1,e._colCount=i.colCount||1,e._totalCount=e._rowCount*e._colCount,e._width=i.width||"auto",e._height=i.height||"auto",e._autoHeight=null==i.autoHeight||i.autoHeight,e._colRow=[0,0],i.colRow?e._colRow=i.colRow:i.frameIndex&&e.setFrameIndex(i.frameIndex),e._el.style.width=c._getSizeString(e._width),e._el.style.height=c._getSizeString(e._height);var r=i.wrapperClass||xt,n=i.imageClass||Mt;if(!i.imageUrl)return setTimeout(function(){e.trigger(new f("imageError",{imageUrl:i.imageUrl}))},0),e;var o=t.querySelector("."+n),a=t.querySelector("."+r);a&&o&&(o.style.display="none"),e._image=o||new Image;var s=e._image;return s.onload=function(){a&&o&&(o.style.display=""),e._bg=c._createBgDiv(a,s,e._rowCount,e._colCount,e._autoHeight),e._el.appendChild(e._bg),e.setColRow(e._colRow[0],e._colRow[1]),e.trigger(new f("load",{target:e._el,bgElement:e._bg})),e._autoPlayReservedInfo&&(e.play(e._autoPlayReservedInfo),e._autoPlayReservedInfo=null)},s.onerror=function(){e.trigger(new f("imageError",{imageUrl:i.imageUrl}))},s.src=i.imageUrl,e}r(c,u);var t=c.prototype;return c._createBgDiv=function(t,n,e,i,r){t=t||document.createElement("div");t.style.position="relative",t.style.overflow="hidden",n.style.position="absolute",n.style.width=100*i+"%",n.style.height=100*e+"%",n.ondragstart=function(){return!1},wt&&(n.style.willChange="transform"),t.appendChild(n);i=n.naturalWidth/i,e=n.naturalHeight/e;return r?(i=e/i,t.style.paddingBottom=100*i+"%"):t.style.height="100%",t},c._getSizeString=function(t){return"number"==typeof t?t+"px":t},t.setFrameIndex=function(t){t=this.toColRow(t);this.setColRow(t[0],t[1])},t.getFrameIndex=function(){return this._colRow[1]*this._colCount+this._colRow[0]},t.setColRow=function(t,n){n>this._rowCount-1||t>this._colCount-1||(this._image&&Et&&(this._image.style[Et]="translate("+-(t/this._colCount)*100+"%, "+-(n/this._rowCount)*100+"%)"),this._colRow=[t,n])},t.getColRow=function(){return this._colRow},t.stop=function(){this._autoPlayTimer&&(clearInterval(this._autoPlayTimer),this._autoPlayTimer=-1)},t.play=function(t){var n,e,i,r=this,o=void 0===t?{interval:1e3/this._totalCount,playCount:0}:t,t=o.interval,a=o.playCount;this._bg?(this._autoPlayTimer&&(clearInterval(this._autoPlayTimer),this._autoPlayTimer=-1),n=this.getFrameIndex(),i=e=0,this._autoPlayTimer=window.setInterval(function(){n%=r._totalCount;var t=r.toColRow(n);r.setColRow(t[0],t[1]),n++,++i===r._totalCount&&(i=0,e++),0<a&&e===a&&clearInterval(r._autoPlayTimer)},t)):this._autoPlayReservedInfo={interval:t,playCount:a}},t.toColRow=function(t){var n=this._colCount,e=this._rowCount;return t<0?[0,0]:t>=this._totalCount?[n-1,e-1]:[t%n,Math.floor(t/n)]},c.VERSION=e,c}(t),t={SpinViewer:function(o){function t(t,n){void 0===n&&(n={});var e=o.call(this)||this;e._el=t;var i=a({},n),r=i.colCount||1,n=i.rowCount||1;return e._scale=i.scale||1,e._panScale=.21*e._scale,e._frameCount=r*n,e._sprites=new bt(t,i).on({load:function(t){e.trigger(new f("load",t))},imageError:function(t){e.trigger(new f("imageError",{imageUrl:t.imageUrl}))}}),e._panInput=new mt(e._el,{scale:[e._panScale,e._panScale]}),e._axes=new pt({angle:{range:[0,359],circular:!0}}).on({change:function(t){var n=Math.floor(t.pos.angle/(360/e._frameCount)),n=e._frameCount-n-1;e._sprites.setFrameIndex(n),e.trigger(new f("change",{frameIndex:n,colRow:e._sprites.getColRow(),angle:t.pos.angle}))},animationEnd:function(t){e.trigger(new f("animationEnd",{isTrusted:t.isTrusted}))}}),e._axes.connect("angle",e._panInput),e}r(t,o);var n=t.prototype;return n.setScale=function(t){return isNaN(t)||t<0||(this._scale=t,this._panScale=.21*t,this._panInput.options.scale=[this._panScale,this._panScale]),this},n.getScale=function(){return this._scale},n.spinBy=function(t,n){return void 0===t&&(t=0),void 0===n&&(n={duration:0}),this._axes.setBy({angle:t},n.duration),this},n.spinTo=function(t,n){return void 0===t&&(t=0),void 0===n&&(n={duration:0}),this._axes.setTo({angle:t},n.duration),this},n.getAngle=function(){return this._axes.get().angle||0},t.VERSION=e,t}(t),SpriteImage:bt,VERSION:e};return function(i){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];t.forEach(function(e){Object.keys(e).forEach(function(t){var n=e[t];Array.isArray(i[t])&&Array.isArray(n)?i[t]=o(i[t],n):i[t]=n})})}(t,ut),t});
//# sourceMappingURL=view360.spinviewer.pkgd.min.js.map
