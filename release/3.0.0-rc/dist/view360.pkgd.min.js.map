{"version":3,"file":"view360.pkgd.min.js","sources":["webpack:///view360.pkgd.min.js"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"view360\",[],t):\"object\"==typeof exports?exports.view360=t():(e.eg=e.eg||{},e.eg.view360=t())}(this,function(){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e[\"default\"]}:function(){return e};return __webpack_require__.d(t,\"a\",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=44)}([function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e[\"default\"]}:function(){return e};return __webpack_require__.d(t,\"a\",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=0)}([function(e,t,n){\"use strict\";var i=n(1),r=function(e){return e&&e.__esModule?e:{\"default\":e}}(i);r[\"default\"].VERSION=\"2.1.0\",e.exports=r[\"default\"]},function(e,t,n){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}t.__esModule=!0;var i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},r=function(){function Component(){_classCallCheck(this,Component),this._eventHandler={},this.options={}}return Component.prototype.trigger=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=this._eventHandler[e]||[];if(!(n.length>0))return!0;n=n.concat(),t.eventType=e;var i=!1,r=[t],o=0;t.stop=function(){i=!0},t.currentTarget=this;for(var a=arguments.length,s=Array(a>2?a-2:0),u=2;u<a;u++)s[u-2]=arguments[u];for(s.length>=1&&(r=r.concat(s)),o=0;n[o];o++)n[o].apply(this,r);return!i},Component.prototype.once=function(e,t){if(\"object\"===(void 0===e?\"undefined\":i(e))&&void 0===t){var n=e,r=void 0;for(r in n)this.once(r,n[r]);return this}if(\"string\"==typeof e&&\"function\"==typeof t){var o=this;this.on(e,function listener(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];t.apply(o,i),o.off(e,listener)})}return this},Component.prototype.hasOn=function(e){return!!this._eventHandler[e]},Component.prototype.on=function(e,t){if(\"object\"===(void 0===e?\"undefined\":i(e))&&void 0===t){var n=e,r=void 0;for(r in n)this.on(r,n[r]);return this}if(\"string\"==typeof e&&\"function\"==typeof t){var o=this._eventHandler[e];void 0===o&&(this._eventHandler[e]=[],o=this._eventHandler[e]),o.push(t)}return this},Component.prototype.off=function(e,t){if(void 0===e)return this._eventHandler={},this;if(void 0===t){if(\"string\"==typeof e)return this._eventHandler[e]=undefined,this;var n=e,i=void 0;for(i in n)this.off(i,n[i]);return this}var r=this._eventHandler[e];if(r){var o=void 0,a=void 0;for(o=0;(a=r[o])!==undefined;o++)if(a===t){r=r.splice(o,1);break}}return this},Component}();t[\"default\"]=r,e.exports=t[\"default\"]}])})},function(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function quatToVec3(e){var t=a[\"default\"].fromValues(0,0,1);return a[\"default\"].transformQuat(t,t,e),t}function getRotationDelta(e,t,n){var i=a[\"default\"].fromValues(d[n].targetAxis[0],d[n].targetAxis[1],d[n].targetAxis[2]),o=d[n].meshPoint,s=h[\"default\"].clone(e),u=h[\"default\"].clone(t);h[\"default\"].normalize(s,s),h[\"default\"].normalize(u,u);var c=a[\"default\"].fromValues(0,0,1),l=a[\"default\"].fromValues(0,0,1);a[\"default\"].transformQuat(c,c,s),a[\"default\"].transformQuat(l,l,u),a[\"default\"].transformQuat(i,i,u);var p=a[\"default\"].dot(i,a[\"default\"].cross(a[\"default\"].create(),c,l)),f=p>0?1:-1,_=a[\"default\"].fromValues(o[0],o[1],o[2]),m=void 0;m=n!==d.YAW_DELTA_BY_YAW?a[\"default\"].fromValues(0,f,0):a[\"default\"].fromValues(f,0,0),a[\"default\"].transformQuat(_,_,u),a[\"default\"].transformQuat(m,m,u);var g=_,v=m,y=a[\"default\"].create();a[\"default\"].cross(y,g,v),a[\"default\"].normalize(y,y);var w=y[0],E=y[1],T=y[2];l=a[\"default\"].fromValues(o[0],o[1],o[2]),a[\"default\"].transformQuat(l,l,u),c=a[\"default\"].fromValues(o[0],o[1],o[2]),a[\"default\"].transformQuat(c,c,s);var I=Math.abs(c[0]*w+c[1]*E+c[2]*T),b=a[\"default\"].create();a[\"default\"].subtract(b,c,a[\"default\"].scale(a[\"default\"].create(),y,I));var R=(b[0]*l[0]+b[1]*l[1]+b[2]*l[2])/(a[\"default\"].length(b)*a[\"default\"].length(l));R>1&&(R=1);var x=Math.acos(R),P=a[\"default\"].cross(a[\"default\"].create(),l,b);I=w*P[0]+E*P[1]+T*P[2];var A=void 0;A=n!==d.YAW_DELTA_BY_YAW?I>0?1:-1:I<0?1:-1;var C=x*A*f;return r[\"default\"].toDegree(C)}t.__esModule=!0,t.ROTATE_CONSTANT=t.vec3=t.vec2=t.quat=t.mat4=t.glMatrix=t.util=undefined;var i=n(2),r=_interopRequireDefault(i),o=n(37),a=_interopRequireDefault(o),s=n(36),u=_interopRequireDefault(s),c=n(35),h=_interopRequireDefault(c),l=n(34),p=_interopRequireDefault(l),f={};f.isPowerOfTwo=function(e){return e&&0==(e&e-1)},f.extractPitchFromQuat=function(e){var t=quatToVec3(e);return-1*Math.atan2(t[1],Math.sqrt(Math.pow(t[0],2)+Math.pow(t[2],2)))};var d={PITCH_DELTA:1,YAW_DELTA_BY_ROLL:2,YAW_DELTA_BY_YAW:3};d[d.PITCH_DELTA]={targetAxis:[0,1,0],meshPoint:[0,0,1]},d[d.YAW_DELTA_BY_ROLL]={targetAxis:[0,1,0],meshPoint:[1,0,0]},d[d.YAW_DELTA_BY_YAW]={targetAxis:[1,0,0],meshPoint:[0,0,1]},f.getRotationDelta=getRotationDelta,t.util=f,t.glMatrix=r[\"default\"],t.mat4=p[\"default\"],t.quat=h[\"default\"],t.vec2=u[\"default\"],t.vec3=a[\"default\"],t.ROTATE_CONSTANT=d},function(e,t,n){\"use strict\";var i={};i.ARRAY_TYPE=\"undefined\"!=typeof Float32Array?Float32Array:Array;var r=Math.PI/180;i.toRadian=function(e){return e*r},i.toDegree=function(e){return e/r},i.EPSILON=1e-4,e.exports=i},function(e,t,n){(function(t,i){!function(t,n){e.exports=n()}(0,function(){\"use strict\";function objectOrFunction(e){var t=typeof e;return null!==e&&(\"object\"===t||\"function\"===t)}function isFunction(e){return\"function\"==typeof e}function setScheduler(e){s=e}function setAsap(e){u=e}function useVertxTimer(){return void 0!==a?function(){a(flush)}:useSetTimeout()}function useSetTimeout(){var e=setTimeout;return function(){return e(flush,1)}}function flush(){for(var e=0;e<o;e+=2){(0,d[e])(d[e+1]),d[e]=undefined,d[e+1]=undefined}o=0}function then(e,t){var n=this,i=new this.constructor(noop);i[m]===undefined&&makePromise(i);var r=n._state;if(r){var o=arguments[r-1];u(function(){return invokeCallback(r,i,o,n._result)})}else subscribe(n,i,e,t);return i}function resolve$1(e){var t=this;if(e&&\"object\"==typeof e&&e.constructor===t)return e;var n=new t(noop);return resolve(n,e),n}function noop(){}function selfFulfillment(){return new TypeError(\"You cannot resolve a promise with itself\")}function cannotReturnOwn(){return new TypeError(\"A promises callback cannot return that same promise.\")}function getThen(e){try{return e.then}catch(t){return w.error=t,w}}function tryThen(e,t,n,i){try{e.call(t,n,i)}catch(r){return r}}function handleForeignThenable(e,t,n){u(function(e){var i=!1,r=tryThen(n,t,function(n){i||(i=!0,t!==n?resolve(e,n):fulfill(e,n))},function(t){i||(i=!0,reject(e,t))},\"Settle: \"+(e._label||\" unknown promise\"));!i&&r&&(i=!0,reject(e,r))},e)}function handleOwnThenable(e,t){t._state===v?fulfill(e,t._result):t._state===y?reject(e,t._result):subscribe(t,undefined,function(t){return resolve(e,t)},function(t){return reject(e,t)})}function handleMaybeThenable(e,t,n){t.constructor===e.constructor&&n===then&&t.constructor.resolve===resolve$1?handleOwnThenable(e,t):n===w?(reject(e,w.error),w.error=null):n===undefined?fulfill(e,t):isFunction(n)?handleForeignThenable(e,t,n):fulfill(e,t)}function resolve(e,t){e===t?reject(e,selfFulfillment()):objectOrFunction(t)?handleMaybeThenable(e,t,getThen(t)):fulfill(e,t)}function publishRejection(e){e._onerror&&e._onerror(e._result),publish(e)}function fulfill(e,t){e._state===g&&(e._result=t,e._state=v,0!==e._subscribers.length&&u(publish,e))}function reject(e,t){e._state===g&&(e._state=y,e._result=t,u(publishRejection,e))}function subscribe(e,t,n,i){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+v]=n,r[o+y]=i,0===o&&e._state&&u(publish,e)}function publish(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,o=e._result,a=0;a<t.length;a+=3)i=t[a],r=t[a+n],i?invokeCallback(n,i,r,o):r(o);e._subscribers.length=0}}function ErrorObject(){this.error=null}function tryCatch(e,t){try{return e(t)}catch(n){return E.error=n,E}}function invokeCallback(e,t,n,i){var r=isFunction(n),o=void 0,a=void 0,s=void 0,u=void 0;if(r){if(o=tryCatch(n,i),o===E?(u=!0,a=o.error,o.error=null):s=!0,t===o)return void reject(t,cannotReturnOwn())}else o=i,s=!0;t._state!==g||(r&&s?resolve(t,o):u?reject(t,a):e===v?fulfill(t,o):e===y&&reject(t,o))}function initializePromise(e,t){try{t(function(t){resolve(e,t)},function(t){reject(e,t)})}catch(n){reject(e,n)}}function nextId(){return T++}function makePromise(e){e[m]=T++,e._state=undefined,e._result=undefined,e._subscribers=[]}function validationError(){return new Error(\"Array Methods must be provided an Array\")}function validationError(){return new Error(\"Array Methods must be provided an Array\")}function all(e){return new I(this,e).promise}function race(e){var t=this;return new t(r(e)?function(n,i){for(var r=e.length,o=0;o<r;o++)t.resolve(e[o]).then(n,i)}:function(e,t){return t(new TypeError(\"You must pass an array to race.\"))})}function reject$1(e){var t=this,n=new t(noop);return reject(n,e),n}function needsResolver(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}function needsNew(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}function polyfill(){var e=void 0;if(void 0!==i)e=i;else if(\"undefined\"!=typeof self)e=self;else try{e=Function(\"return this\")()}catch(r){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(r){}if(\"[object Promise]\"===n&&!t.cast)return}e.Promise=b}var e=void 0;e=Array.isArray?Array.isArray:function(e){return\"[object Array]\"===Object.prototype.toString.call(e)};var r=e,o=0,a=void 0,s=void 0,u=function(e,t){d[o]=e,d[o+1]=t,2===(o+=2)&&(s?s(flush):_())},c=\"undefined\"!=typeof window?window:undefined,h=c||{},l=h.MutationObserver||h.WebKitMutationObserver,p=\"undefined\"==typeof self&&void 0!==t&&\"[object process]\"==={}.toString.call(t),f=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel,d=new Array(1e3),_=void 0;_=p?function(){return function(){return t.nextTick(flush)}}():l?function(){var e=0,t=new l(flush),n=document.createTextNode(\"\");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():f?function(){var e=new MessageChannel;return e.port1.onmessage=flush,function(){return e.port2.postMessage(0)}}():c===undefined?function(){try{var e=n(43);return a=e.runOnLoop||e.runOnContext,useVertxTimer()}catch(t){return useSetTimeout()}}():useSetTimeout();var m=Math.random().toString(36).substring(16),g=void 0,v=1,y=2,w=new ErrorObject,E=new ErrorObject,T=0,I=function(){function Enumerator(e,t){this._instanceConstructor=e,this.promise=new e(noop),this.promise[m]||makePromise(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&fulfill(this.promise,this._result))):reject(this.promise,validationError())}return Enumerator.prototype._enumerate=function(e){for(var t=0;this._state===g&&t<e.length;t++)this._eachEntry(e[t],t)},Enumerator.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===resolve$1){var r=getThen(e);if(r===then&&e._state!==g)this._settledAt(e._state,t,e._result);else if(\"function\"!=typeof r)this._remaining--,this._result[t]=e;else if(n===b){var o=new n(noop);handleMaybeThenable(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},Enumerator.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===g&&(this._remaining--,e===y?reject(i,n):this._result[t]=n),0===this._remaining&&fulfill(i,this._result)},Enumerator.prototype._willSettleAt=function(e,t){var n=this;subscribe(e,undefined,function(e){return n._settledAt(v,t,e)},function(e){return n._settledAt(y,t,e)})},Enumerator}(),b=function(){function Promise(e){this[m]=nextId(),this._result=this._state=undefined,this._subscribers=[],noop!==e&&(\"function\"!=typeof e&&needsResolver(),this instanceof Promise?initializePromise(this,e):needsNew())}return Promise.prototype[\"catch\"]=function(e){return this.then(null,e)},Promise.prototype[\"finally\"]=function(e){var t=this,n=t.constructor;return t.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})},Promise}();return b.prototype.then=then,b.all=all,b.race=race,b.resolve=resolve$1,b.reject=reject$1,b._setScheduler=setScheduler,b._setAsap=setAsap,b._asap=u,b.polyfill=polyfill,b.Promise=b,b})}).call(t,n(38),n(39))},function(e,t){var n=window.MathUtil||{};n.degToRad=Math.PI/180,n.radToDeg=180/Math.PI,n.Vector2=function(e,t){this.x=e||0,this.y=t||0},n.Vector2.prototype={constructor:n.Vector2,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},n.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},n.Vector3.prototype={constructor:n.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*i-a*n,c=s*n+a*t-r*i,h=s*i+r*n-o*t,l=-r*t-o*n-a*i;return this.x=u*s+l*-r+c*-a-h*-o,this.y=c*s+l*-o+h*-r-u*-a,this.z=h*s+l*-a+u*-o-c*-r,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,o=t.x,a=t.y,s=t.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this}},n.Quaternion=function(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=i!==undefined?i:1},n.Quaternion.prototype={constructor:n.Quaternion,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,n){var i=Math.cos(e/2),r=Math.cos(t/2),o=Math.cos(n/2),a=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(n/2);return this.x=a*r*o+i*s*u,this.y=i*s*o-a*r*u,this.z=i*r*u+a*s*o,this.w=i*r*o-a*s*u,this},setFromEulerYXZ:function(e,t,n){var i=Math.cos(e/2),r=Math.cos(t/2),o=Math.cos(n/2),a=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(n/2);return this.x=a*r*o+i*s*u,this.y=i*s*o-a*r*u,this.z=i*r*u-a*s*o,this.w=i*r*o+a*s*u,this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(n),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e.x,i=e.y,r=e.z,o=e.w,a=t.x,s=t.y,u=t.z,c=t.w;return this.x=n*c+o*a+i*u-r*s,this.y=i*c+o*s+r*a-n*u,this.z=r*c+o*u+n*s-i*a,this.w=o*c-n*a-i*s-r*u,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this.x,i=this.y,r=this.z,o=this.w,a=o*e.w+n*e.x+i*e.y+r*e.z;if(a<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,a=-a):this.copy(e),a>=1)return this.w=o,this.x=n,this.y=i,this.z=r,this;var s=Math.acos(a),u=Math.sqrt(1-a*a);if(Math.abs(u)<.001)return this.w=.5*(o+this.w),this.x=.5*(n+this.x),this.y=.5*(i+this.y),this.z=.5*(r+this.z),this;var c=Math.sin((1-t)*s)/u,h=Math.sin(t*s)/u;return this.w=o*c+this.w*h,this.x=n*c+this.x*h,this.y=i*c+this.y*h,this.z=r*c+this.z*h,this},setFromUnitVectors:function(){var e,t;return function(i,r){return e===undefined&&(e=new n.Vector3),t=i.dot(r)+1,t<1e-6?(t=0,Math.abs(i.x)>Math.abs(i.z)?e.set(-i.y,i.x,0):e.set(0,-i.z,i.y)):e.crossVectors(i,r),this.x=e.x,this.y=e.y,this.z=e.z,this.w=t,this.normalize(),this}}()},e.exports=n},function(e,t,n){\"use strict\";t.__esModule=!0;var i=\"undefined\"!=typeof window&&window.Math===Math?window:\"undefined\"!=typeof self&&self.Math===Math?self:Function(\"return this\")();i.Float32Array=\"undefined\"!=typeof i.Float32Array?i.Float32Array:i.Array,t.window=i;t.document=i.document,t.Float32Array=i.Float32Array,t.getComputedStyle=i.getComputedStyle,t.SUPPORT_TOUCH=\"ontouchstart\"in i,t.SUPPORT_DEVICEMOTION=\"ondevicemotion\"in i},function(e,t,n){\"use strict\";t.__esModule=!0;var i=[.2,.2],r={LEFT_ARROW:37,A:65,UP_ARROW:38,W:87,RIGHT_ARROW:39,D:68,DOWN_ARROW:40,S:83},o={NONE:\"none\",YAWPITCH:\"yawPitch\"};t.GYRO_MODE=o,t.CONTROL_MODE_VR=1,t.CONTROL_MODE_YAWPITCH=2,t.TOUCH_DIRECTION_NONE=1,t.TOUCH_DIRECTION_YAW=2,t.TOUCH_DIRECTION_PITCH=4,t.TOUCH_DIRECTION_ALL=6,t.MC_DECELERATION=.0014,t.MC_MAXIMUM_DURATION=1e3,t.MC_BIND_SCALE=i,t.MIN_FIELD_OF_VIEW=20,t.MAX_FIELD_OF_VIEW=110,t.PAN_SCALE=320,t.DELTA_THRESHOLD=.0375,t.YAW_RANGE_HALF=180,t.PITCH_RANGE_HALF=90,t.PINCH_EVENTS=\"pinchstart pinchmove pinchend\",t.KEYMAP=r},function(e,t){var n=window.Util||{};n.MIN_TIMESTEP=.001,n.MAX_TIMESTEP=1,n.base64=function(e,t){return\"data:\"+e+\";base64,\"+t},n.clamp=function(e,t,n){return Math.min(Math.max(t,e),n)},n.lerp=function(e,t,n){return e+(t-e)*n},n.race=function(e){return Promise.race?Promise.race(e):new Promise(function(t,n){for(var i=0;i<e.length;i++)e[i].then(t,n)})},n.isIOS=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),n.isWebViewAndroid=function(){var e=-1!==navigator.userAgent.indexOf(\"Version\")&&-1!==navigator.userAgent.indexOf(\"Android\")&&-1!==navigator.userAgent.indexOf(\"Chrome\");return function(){return e}}(),n.isSafari=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return e}}(),n.isFirefoxAndroid=function(){var e=-1!==navigator.userAgent.indexOf(\"Firefox\")&&-1!==navigator.userAgent.indexOf(\"Android\");return function(){return e}}(),n.isR7=function(){var e=-1!==navigator.userAgent.indexOf(\"R7 Build\");return function(){return e}}(),n.isLandscapeMode=function(){var e=90==window.orientation||-90==window.orientation;return n.isR7()?!e:e},n.isTimestampDeltaValid=function(e){return!isNaN(e)&&(!(e<=n.MIN_TIMESTEP)&&!(e>n.MAX_TIMESTEP))},n.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},n.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},n.requestFullscreen=function(e){if(n.isWebViewAndroid())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0},n.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},n.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},n.linkProgram=function(e,t,n,i){var r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t),e.compileShader(r);var o=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(o,n),e.compileShader(o);var a=e.createProgram();e.attachShader(a,r),e.attachShader(a,o);for(var s in i)e.bindAttribLocation(a,i[s],s);return e.linkProgram(a),e.deleteShader(r),e.deleteShader(o),a},n.getProgramUniforms=function(e,t){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=\"\",o=0;o<i;o++){r=e.getActiveUniform(t,o).name.replace(\"[0]\",\"\"),n[r]=e.getUniformLocation(t,r)}return n},n.orthoMatrix=function(e,t,n,i,r,o,a){var s=1/(t-n),u=1/(i-r),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(r+i)*u,e[14]=(a+o)*c,e[15]=1,e},n.copyArray=function(e,t){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]},n.isMobile=function(){var e=!1;return function(t){(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},n.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},n.safariCssSizeWorkaround=function(e){if(n.isIOS()){var t=e.style.width,i=e.style.height;e.style.width=parseInt(t)+1+\"px\",e.style.height=parseInt(i)+\"px\",setTimeout(function(){e.style.width=t,e.style.height=i},100)}window.Util=n,window.canvas=e},n.isDebug=function(){return n.getQueryParameter(\"debug\")},n.getQueryParameter=function(e){var e=e.replace(/[\\[]/,\"\\\\[\").replace(/[\\]]/,\"\\\\]\"),t=new RegExp(\"[\\\\?&]\"+e+\"=([^&#]*)\"),n=t.exec(location.search);return null===n?\"\":decodeURIComponent(n[1].replace(/\\+/g,\" \"))},n.frameDataFromPose=function(){function mat4_perspectiveFromFieldOfView(n,i,r,o){var a=Math.tan(i?i.upDegrees*e:t),s=Math.tan(i?i.downDegrees*e:t),u=Math.tan(i?i.leftDegrees*e:t),c=Math.tan(i?i.rightDegrees*e:t),h=2/(u+c),l=2/(a+s);return n[0]=h,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=l,n[6]=0,n[7]=0,n[8]=-(u-c)*h*.5,n[9]=(a-s)*l*.5,n[10]=o/(r-o),n[11]=-1,n[12]=0,n[13]=0,n[14]=o*r/(r-o),n[15]=0,n}function mat4_fromRotationTranslation(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=i+i,u=r+r,c=o+o,h=i*s,l=i*u,p=i*c,f=r*u,d=r*c,_=o*c,m=a*s,g=a*u,v=a*c;return e[0]=1-(f+_),e[1]=l+v,e[2]=p-g,e[3]=0,e[4]=l-v,e[5]=1-(h+_),e[6]=d+m,e[7]=0,e[8]=p+g,e[9]=d-m,e[10]=1-(h+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function mat4_translate(e,t,n){var i,r,o,a,s,u,c,h,l,p,f,d,_=n[0],m=n[1],g=n[2];return t===e?(e[12]=t[0]*_+t[4]*m+t[8]*g+t[12],e[13]=t[1]*_+t[5]*m+t[9]*g+t[13],e[14]=t[2]*_+t[6]*m+t[10]*g+t[14],e[15]=t[3]*_+t[7]*m+t[11]*g+t[15]):(i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],h=t[7],l=t[8],p=t[9],f=t[10],d=t[11],e[0]=i,e[1]=r,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=c,e[7]=h,e[8]=l,e[9]=p,e[10]=f,e[11]=d,e[12]=i*_+s*m+l*g+t[12],e[13]=r*_+u*m+p*g+t[13],e[14]=o*_+c*m+f*g+t[14],e[15]=a*_+h*m+d*g+t[15]),e}function mat4_invert(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],h=t[8],l=t[9],p=t[10],f=t[11],d=t[12],_=t[13],m=t[14],g=t[15],v=n*s-i*a,y=n*u-r*a,w=n*c-o*a,E=i*u-r*s,T=i*c-o*s,I=r*c-o*u,b=h*_-l*d,R=h*m-p*d,x=h*g-f*d,P=l*m-p*_,A=l*g-f*_,C=p*g-f*m,O=v*C-y*A+w*P+E*x-T*R+I*b;return O?(O=1/O,e[0]=(s*C-u*A+c*P)*O,e[1]=(r*A-i*C-o*P)*O,e[2]=(_*I-m*T+g*E)*O,e[3]=(p*T-l*I-f*E)*O,e[4]=(u*x-a*C-c*R)*O,e[5]=(n*C-r*x+o*R)*O,e[6]=(m*w-d*I-g*y)*O,e[7]=(h*I-p*w+f*y)*O,e[8]=(a*A-s*x+c*b)*O,e[9]=(i*x-n*A-o*b)*O,e[10]=(d*T-_*w+g*v)*O,e[11]=(l*w-h*T-f*v)*O,e[12]=(s*R-a*P-u*b)*O,e[13]=(n*P-i*R+r*b)*O,e[14]=(_*y-d*E-m*v)*O,e[15]=(h*E-l*y+p*v)*O,e):null}function updateEyeMatrices(e,t,r,o,a){mat4_perspectiveFromFieldOfView(e,o?o.fieldOfView:null,a.depthNear,a.depthFar),mat4_fromRotationTranslation(t,r.orientation||n,r.position||i),o&&mat4_translate(t,t,o.offset),mat4_invert(t,t)}var e=Math.PI/180,t=.25*Math.PI,n=new Float32Array([0,0,0,1]),i=new Float32Array([0,0,0]);return function(e,t,n){return!(!e||!t)&&(e.pose=t,e.timestamp=t.timestamp,updateEyeMatrices(e.leftProjectionMatrix,e.leftViewMatrix,t,n.getEyeParameters(\"left\"),n),updateEyeMatrices(e.rightProjectionMatrix,e.rightViewMatrix,t,n.getEyeParameters(\"right\"),n),!0)}}(),n.isInsideCrossDomainIFrame=function(){var e=window.self!==window.top,t=n.getDomainFromUrl(document.referrer),i=n.getDomainFromUrl(window.location.href);return e&&t!==i},n.getDomainFromUrl=function(e){var t;return t=e.indexOf(\"://\")>-1?e.split(\"/\")[2]:e.split(\"/\")[0],t=t.split(\":\")[0]},e.exports=n},function(e,t,n){!function(t,i){e.exports=i(n(14),n(0))}(\"undefined\"!=typeof self&&self,function(e,t){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e[\"default\"]}:function(){return e};return __webpack_require__.d(t,\"a\",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=6)}([function(e,t,n){\"use strict\";function toArray(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n]);return t}function $(e,t){void 0===t&&(t=!1);var n;if(\"string\"==typeof e){if(e.match(/^<([a-z]+)\\s*([^>]*)>/)){var i=document.createElement(\"div\");i.innerHTML=e,n=toArray(i.childNodes)}else n=toArray(document.querySelectorAll(e));t||(n=n.length>=1?n[0]:undefined)}else e===window?n=e:!e.nodeName||1!==e.nodeType&&9!==e.nodeType?\"jQuery\"in window&&e instanceof jQuery||e.constructor.prototype.jquery?n=t?e.toArray():e.get(0):Array.isArray(e)&&(n=e.map(function(e){return $(e)}),t||(n=n.length>=1?n[0]:undefined)):n=e;return n}function requestAnimationFrame(e){return i(e)}function cancelAnimationFrame(e){r(e)}t.__esModule=!0,t.toArray=toArray,t.$=$;var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame,r=window.cancelAnimationFrame||window.webkitCancelAnimationFrame;if(i&&!r){var o={},a=i;i=function(e){function wrapCallback(n){o[t]&&e(n)}var t=a(wrapCallback);return o[t]=!0,t},r=function(e){delete o[e]}}else i&&r||(i=function(e){return window.setTimeout(function(){e(window.performance&&window.performance.now&&window.performance.now()||(new Date).getTime())},16)},r=window.clearTimeout);t.requestAnimationFrame=requestAnimationFrame,t.cancelAnimationFrame=cancelAnimationFrame},function(e,t,n){\"use strict\";function toAxis(e,t){return t.reduce(function(t,n,i){return e[i]&&(t[e[i]]=n),t},{})}function createHammer(e,t){try{return new r.Manager(e,i({},t))}catch(n){return null}}function convertInputType(e){void 0===e&&(e=[]);var n=!1,i=!1;return e.forEach(function(e){switch(e){case\"mouse\":i=!0;break;case\"touch\":n=t.SUPPORT_TOUCH}}),n&&r.TouchInput||i&&r.MouseInput||null}var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};t.__esModule=!0;var r=n(4);t.SUPPORT_TOUCH=\"ontouchstart\"in window,t.UNIQUEKEY=\"_EGJS_AXES_INPUTTYPE_\",t.toAxis=toAxis,t.createHammer=createHammer,t.convertInputType=convertInputType},function(e,t,n){\"use strict\";t.__esModule=!0;var i={getInsidePosition:function(e,t,n,i){var r=e,o=[n[0]?t[0]:i?t[0]-i[0]:t[0],n[1]?t[1]:i?t[1]+i[1]:t[1]];return r=Math.max(o[0],r),r=Math.min(o[1],r),+r.toFixed(5)},isOutside:function(e,t){return e<t[0]||e>t[1]},getDuration:function(e,t){var n=Math.sqrt(e/t*2);return n<100?0:n},isCircularable:function(e,t,n){return n[1]&&e>t[1]||n[0]&&e<t[0]},getCirculatedPos:function(e,t,n){var i=e,r=t[0],o=t[1],a=o-r;return n[1]&&e>o&&(i=(i-o)%a+r),n[0]&&e<r&&(i=(i-r)%a+o),+i.toFixed(5)}};t[\"default\"]=i},function(e,t,n){\"use strict\";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};t.__esModule=!0;var r=n(2),o=function(){function AxisManager(e,t){var n=this;this.axis=e,this.options=t,this._complementOptions(),this._pos=Object.keys(this.axis).reduce(function(e,t){return e[t]=n.axis[t].range[0],e},{})}return AxisManager.equal=function(e,t){for(var n in e)if(e[n]!==t[n])return!1;return!0},AxisManager.prototype._complementOptions=function(){var e=this;Object.keys(this.axis).forEach(function(t){e.axis[t]=i({range:[0,100],bounce:[0,0],circular:[!1,!1]},e.axis[t]),[\"bounce\",\"circular\"].forEach(function(n){var i=e.axis,r=i[t][n];/string|number|boolean/.test(typeof r)&&(i[t][n]=[r,r])})})},AxisManager.prototype.getDelta=function(e,t){var n=this.get(e);return this.map(this.get(t),function(e,t){return e-n[t]})},AxisManager.prototype.get=function(e){var t=this;return e&&Array.isArray(e)?e.reduce(function(e,n){return n&&n in t._pos&&(e[n]=t._pos[n]),e},{}):i({},this._pos,e||{})},AxisManager.prototype.moveTo=function(e){var t=this,n=this.map(this._pos,function(n,i){return e[i]?e[i]-t._pos[i]:0});return this.set(e),{pos:i({},this._pos),delta:n}},AxisManager.prototype.set=function(e){for(var t in e)t&&t in this._pos&&(this._pos[t]=e[t])},AxisManager.prototype.every=function(e,t){var n=this.axis;for(var i in e)if(i&&!t(e[i],i,n[i]))return!1;return!0},AxisManager.prototype.filter=function(e,t){var n={},i=this.axis;for(var r in e)r&&t(e[r],r,i[r])&&(n[r]=e[r]);return n},AxisManager.prototype.map=function(e,t){var n={},i=this.axis;for(var r in e)r&&(n[r]=t(e[r],r,i[r]));return n},AxisManager.prototype.isOutside=function(e){return!this.every(e?this.get(e):this._pos,function(e,t,n){return!r[\"default\"].isOutside(e,n.range)})},AxisManager}();t.AxisManager=o},function(t,n){t.exports=e},function(e,t,n){\"use strict\";t.__esModule=!0;!function(e){e[e.DIRECTION_NONE=1]=\"DIRECTION_NONE\",e[e.DIRECTION_LEFT=2]=\"DIRECTION_LEFT\",e[e.DIRECTION_RIGHT=4]=\"DIRECTION_RIGHT\",e[e.DIRECTION_HORIZONTAL=6]=\"DIRECTION_HORIZONTAL\",e[e.DIRECTION_UP=8]=\"DIRECTION_UP\",e[e.DIRECTION_DOWN=16]=\"DIRECTION_DOWN\",e[e.DIRECTION_VERTICAL=24]=\"DIRECTION_VERTICAL\",e[e.DIRECTION_ALL=30]=\"DIRECTION_ALL\"}(t.DIRECTION||(t.DIRECTION={})),t.TRANSFORM=function(){for(var e=(document.head||document.getElementsByTagName(\"head\")[0]).style,t=[\"transform\",\"webkitTransform\",\"msTransform\",\"mozTransform\"],n=0,i=t.length;n<i;n++)if(t[n]in e)return t[n];return\"\"}()},function(e,t,n){\"use strict\";var i=n(7),r=n(13),o=n(14),a=n(15),s=n(16);i[\"default\"].PanInput=r.PanInput,i[\"default\"].PinchInput=o.PinchInput,i[\"default\"].WheelInput=a.WheelInput,i[\"default\"].MoveKeyInput=s.MoveKeyInput,e.exports=i[\"default\"]},function(e,t,n){\"use strict\";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};t.__esModule=!0;var o=n(8),a=n(9),s=n(10),u=n(11),c=n(3),h=n(12),l=n(5),p=function(e){function Axes(t,n,i){void 0===t&&(t={});var o=e.call(this)||this;return o.axis=t,o._inputs=[],o.options=r({easing:function(e){return 1-Math.pow(1-e,3)},interruptable:!0,maximumDuration:Infinity,minimumDuration:0,deceleration:6e-4},n),o.itm=new u.InterruptManager(o.options),o.axm=new c.AxisManager(o.axis,o.options),o.em=new s.EventManager(o),o.am=new a.AnimationManager(o),o.io=new h.InputObserver(o),o.em.setAnimationManager(o.am),i&&o.em.triggerChange(i),o}return i(Axes,e),Axes.prototype.connect=function(e,t){var n;if(n=\"string\"==typeof e?e.split(\" \"):e.concat(),~this._inputs.indexOf(t)&&this.disconnect(t),\"hammer\"in t){var i=this._inputs.filter(function(e){return e.hammer&&e.element===t.element});i.length&&(t.hammer=i[0].hammer)}return t.mapAxes(n),t.connect(this.io),this._inputs.push(t),this},Axes.prototype.disconnect=function(e){if(e){var t=this._inputs.indexOf(e);t>=0&&(this._inputs[t].disconnect(),this._inputs.splice(t,1))}else this._inputs.forEach(function(e){return e.disconnect()}),this._inputs=[];return this},Axes.prototype.get=function(e){return this.axm.get(e)},Axes.prototype.setTo=function(e,t){return void 0===t&&(t=0),this.am.setTo(e,t),this},Axes.prototype.setBy=function(e,t){return void 0===t&&(t=0),this.am.setBy(e,t),this},Axes.prototype.isBounceArea=function(e){return this.axm.isOutside(e)},Axes.prototype.destroy=function(){this.disconnect(),this.em.destroy()},Axes.VERSION=\"3.0.0-rc\",Axes.TRANSFORM=l.TRANSFORM,Axes.DIRECTION_NONE=l.DIRECTION.DIRECTION_NONE,Axes.DIRECTION_LEFT=l.DIRECTION.DIRECTION_LEFT,Axes.DIRECTION_RIGHT=l.DIRECTION.DIRECTION_RIGHT,Axes.DIRECTION_UP=l.DIRECTION.DIRECTION_UP,Axes.DIRECTION_DOWN=l.DIRECTION.DIRECTION_DOWN,Axes.DIRECTION_HORIZONTAL=l.DIRECTION.DIRECTION_HORIZONTAL,Axes.DIRECTION_VERTICAL=l.DIRECTION.DIRECTION_VERTICAL,Axes.DIRECTION_ALL=l.DIRECTION.DIRECTION_ALL,Axes}(o);t[\"default\"]=p},function(e,n){e.exports=t},function(e,t,n){\"use strict\";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};t.__esModule=!0;var r=n(2),o=n(3),a=n(0),s=function(){function AnimationManager(e){var t=e.options,n=e.itm,i=e.em,r=e.axm;this.options=t,this.itm=n,this.em=i,this.axm=r,this.animationEnd=this.animationEnd.bind(this)}return AnimationManager.getDuration=function(e,t,n){return Math.max(Math.min(e,n),t)},AnimationManager.prototype.getDuration=function(e,t,n){var i,o=this;if(void 0!==n)i=n;else{var a=this.axm.map(t,function(t,n){return r[\"default\"].getDuration(Math.abs(Math.abs(t)-Math.abs(e[n])),o.options.deceleration)});i=Object.keys(a).reduce(function(e,t){return Math.max(e,a[t])},-Infinity)}return AnimationManager.getDuration(i,this.options.minimumDuration,this.options.maximumDuration)},AnimationManager.prototype.createAnimationParam=function(e,t,n){var i=this.axm.get(),r=e,o=n&&n.event||null;return{depaPos:i,destPos:r,duration:AnimationManager.getDuration(t,this.options.minimumDuration,this.options.maximumDuration),delta:this.axm.getDelta(i,r),inputEvent:o,input:n&&n.input||null,isTrusted:!!o,done:this.animationEnd}},AnimationManager.prototype.grab=function(e,t){if(this._animateParam&&e.length){var n=this.axm.get(e),i=this.axm.map(n,function(e,t,n){return r[\"default\"].getCirculatedPos(e,n.range,n.circular)});this.axm.every(i,function(e,t){return n[t]===e})||this.em.triggerChange(i,t,!!t),this._animateParam=null,this._raf&&a.cancelAnimationFrame(this._raf),this._raf=null,this.em.triggerAnimationEnd(!(!t||!t.event))}},AnimationManager.prototype.getEventInfo=function(){return this._animateParam&&this._animateParam.input&&this._animateParam.inputEvent?{input:this._animateParam.input,event:this._animateParam.inputEvent}:null},AnimationManager.prototype.restore=function(e){var t=this.axm.get(),n=this.axm.map(t,function(e,t,n){return Math.min(n.range[1],Math.max(n.range[0],e))});this.animateTo(n,this.getDuration(t,n),e)},AnimationManager.prototype.animationEnd=function(){var e=this.getEventInfo();this._animateParam=null;var t=this.axm.filter(this.axm.get(),function(e,t,n){return r[\"default\"].isCircularable(e,n.range,n.circular)});Object.keys(t).length>0&&this.setTo(this.axm.map(t,function(e,t,n){return r[\"default\"].getCirculatedPos(e,n.range,n.circular)})),this.itm.setInterrupt(!1),this.em.triggerAnimationEnd(!!e),this.axm.isOutside()?this.restore(e):this.em.triggerFinish(!!e)},AnimationManager.prototype.animateLoop=function(e,t){if(this._animateParam=i({},e),this._animateParam.startTime=(new Date).getTime(),e.duration){var n=this._animateParam,r=this;!function loop(){if(r._raf=null,r.frame(n)>=1)return o.AxisManager.equal(e.destPos,r.axm.get(Object.keys(e.destPos)))||r.em.triggerChange(e.destPos),void t();r._raf=a.requestAnimationFrame(loop)}()}else this.em.triggerChange(e.destPos),t()},AnimationManager.prototype.getUserControll=function(e){var t=e.setTo();return t.destPos=this.axm.get(t.destPos),t.duration=AnimationManager.getDuration(t.duration,this.options.minimumDuration,this.options.maximumDuration),t},AnimationManager.prototype.animateTo=function(e,t,n){var a=this,s=this.createAnimationParam(e,t,n),u=i({},s.depaPos),c=this.em.triggerAnimationStart(s),h=this.getUserControll(s);if(!c&&this.axm.every(h.destPos,function(e,t,n){return r[\"default\"].isCircularable(e,n.range,n.circular)})&&console.warn(\"You can't stop the 'animation' event when 'circular' is true.\"),c&&!o.AxisManager.equal(h.destPos,u)){var l=n&&n.event||null;this.animateLoop({depaPos:u,destPos:h.destPos,duration:h.duration,delta:this.axm.getDelta(u,h.destPos),isTrusted:!!l,inputEvent:l,input:n&&n.input||null},function(){return a.animationEnd()})}},AnimationManager.prototype.frame=function(e){var t=(new Date).getTime()-e.startTime,n=this.easing(t/e.duration),i=e.depaPos;return i=this.axm.map(i,function(t,i,o){return t+=e.delta[i]*n,r[\"default\"].getCirculatedPos(t,o.range,o.circular)}),this.em.triggerChange(i),n},AnimationManager.prototype.easing=function(e){return e>1?1:this.options.easing(e)},AnimationManager.prototype.setTo=function(e,t){void 0===t&&(t=0);var n=Object.keys(e);this.grab(n);var i=this.axm.get(n);if(o.AxisManager.equal(e,i))return this;this.itm.setInterrupt(!0);var a=this.axm.filter(e,function(e,t){return i[t]!==e});return Object.keys(a).length?(a=this.axm.map(a,function(e,n,i){return i.circular&&(i.circular[0]||i.circular[1])?t>0?e:r[\"default\"].getCirculatedPos(e,i.range,i.circular):r[\"default\"].getInsidePosition(e,i.range,i.circular)}),o.AxisManager.equal(a,i)?this:(t>0?this.animateTo(a,t):(this.em.triggerChange(a),this.itm.setInterrupt(!1)),this)):this},AnimationManager.prototype.setBy=function(e,t){return void 0===t&&(t=0),this.setTo(this.axm.map(this.axm.get(Object.keys(e)),function(t,n){return t+e[n]}),t)},AnimationManager}();t.AnimationManager=s},function(e,t,n){\"use strict\";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};t.__esModule=!0;var r=function(){function EventManager(e){this.axes=e}return EventManager.prototype.triggerHold=function(e,t){this.axes.trigger(\"hold\",{pos:e,input:t.input||null,inputEvent:t.event||null,isTrusted:!0})},EventManager.prototype.triggerRelease=function(e){e.setTo=this.createUserControll(e.destPos,e.duration),this.axes.trigger(\"release\",e)},EventManager.prototype.triggerChange=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var i=this.am.getEventInfo(),r=this.am.axm.moveTo(e),o=t&&t.event||i&&i.event||null,a={pos:r.pos,delta:r.delta,holding:n,inputEvent:o,isTrusted:!!o,input:t&&t.input||i&&i.input||null,set:o?this.createUserControll(r.pos):function(){}};this.axes.trigger(\"change\",a),o&&this.am.axm.set(a.set().destPos)},EventManager.prototype.triggerAnimationStart=function(e){return e.setTo=this.createUserControll(e.destPos,e.duration),this.axes.trigger(\"animationStart\",e)},EventManager.prototype.triggerAnimationEnd=function(e){void 0===e&&(e=!1),this.axes.trigger(\"animationEnd\",{isTrusted:e})},EventManager.prototype.triggerFinish=function(e){void 0===e&&(e=!1),this.axes.trigger(\"finish\",{isTrusted:e})},EventManager.prototype.createUserControll=function(e,t){void 0===t&&(t=0);var n={destPos:i({},e),duration:t};return function(e,t){return e&&(n.destPos=i({},e)),t!==undefined&&(n.duration=t),n}},EventManager.prototype.setAnimationManager=function(e){this.am=e},EventManager.prototype.destroy=function(){this.axes.off()},EventManager}();t.EventManager=r},function(e,t,n){\"use strict\";t.__esModule=!0;var i=function(){function InterruptManager(e){this.options=e,this._prevented=!1}return InterruptManager.prototype.isInterrupting=function(){return this.options.interruptable||this._prevented},InterruptManager.prototype.isInterrupted=function(){return!this.options.interruptable&&this._prevented},InterruptManager.prototype.setInterrupt=function(e){!this.options.interruptable&&(this._prevented=e)},InterruptManager}();t.InterruptManager=i},function(e,t,n){\"use strict\";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};t.__esModule=!0;var r=n(3),o=n(2),a=function(){function InputObserver(e){var t=e.options,n=e.itm,i=e.em,r=e.axm,o=e.am;this.isOutside=!1,this.moveDistance=null,this.options=t,this.itm=n,this.em=i,this.axm=r,this.am=o}return InputObserver.prototype.atOutside=function(e){var t=this;if(this.isOutside)return this.axm.map(e,function(e,t,n){var i=n.range[0]-n.bounce[0],r=n.range[1]+n.bounce[1];return e>r?r:e<i?i:e});var n=this.am.easing(1e-5)/1e-5;return this.axm.map(e,function(e,i,r){var o=r.range[0],a=r.range[1],s=r.bounce;return e<o?o-t.am.easing((o-e)/(s[0]*n))*s[0]:e>a?a+t.am.easing((e-a)/(s[1]*n))*s[1]:e})},InputObserver.prototype.get=function(e){return this.axm.get(e.axes)},InputObserver.prototype.hold=function(e,t){if(!this.itm.isInterrupted()&&e.axes.length){var n={input:e,event:t};this.itm.setInterrupt(!0),this.am.grab(e.axes,n),!this.moveDistance&&this.em.triggerHold(this.axm.get(),n),this.isOutside=this.axm.isOutside(e.axes),this.moveDistance=this.axm.get(e.axes)}},InputObserver.prototype.change=function(e,t,n){if(this.itm.isInterrupting()&&!this.axm.every(n,function(e){return 0===e})){var i,r=this.axm.get(e.axes);i=this.axm.map(this.moveDistance||r,function(e,t){return e+(n[t]||0)}),this.moveDistance&&(this.moveDistance=i),i=this.axm.map(i,function(e,t,n){return o[\"default\"].getCirculatedPos(e,n.range,n.circular)}),this.isOutside&&this.axm.every(r,function(e,t,n){return!o[\"default\"].isOutside(e,n.range)})&&(this.isOutside=!1),i=this.atOutside(i),this.em.triggerChange(i,{input:e,event:t},!0)}},InputObserver.prototype.release=function(e,t,n,a){if(this.itm.isInterrupting()&&this.moveDistance){var s=this.axm.get(e.axes),u=this.axm.get(),c=this.axm.get(this.axm.map(n,function(e,t,n){return n.circular&&(n.circular[0]||n.circular[1])?s[t]+e:o[\"default\"].getInsidePosition(s[t]+e,n.range,n.circular,n.bounce)})),h=this.am.getDuration(c,s,a);0===h&&(c=i({},u));var l={depaPos:u,destPos:c,duration:h,delta:this.axm.getDelta(u,c),inputEvent:t,input:e,isTrusted:!0};this.em.triggerRelease(l),this.moveDistance=null;var p=this.am.getUserControll(l),f=r.AxisManager.equal(p.destPos,u),d={input:e,event:t};f||0===p.duration?(!f&&this.em.triggerChange(p.destPos,d,!0),this.itm.setInterrupt(!1),this.axm.isOutside()?this.am.restore(d):this.em.triggerFinish(!0)):this.am.animateTo(p.destPos,p.duration,d)}},InputObserver}();t.InputObserver=a},function(e,t,n){\"use strict\";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};t.__esModule=!0;var r=n(4),o=n(5),a=n(0),s=n(1),u=function(){function PanInput(e,t){if(this.axes=[],this.hammer=null,this.element=null,void 0===r)throw new Error(\"The Hammerjs must be loaded before eg.Axes.PanInput.\\nhttp://hammerjs.github.io/\");this.element=a.$(e),this.options=i({inputType:[\"touch\",\"mouse\"],scale:[1,1],thresholdAngle:45,threshold:0,hammerManagerOptions:{cssProps:{userSelect:\"none\",touchSelect:\"none\",touchCallout:\"none\",userDrag:\"none\"}}},t),this.onHammerInput=this.onHammerInput.bind(this),this.onPanmove=this.onPanmove.bind(this),this.onPanend=this.onPanend.bind(this)}return PanInput.getDirectionByAngle=function(e,t){if(t<0||t>90)return o.DIRECTION.DIRECTION_NONE;var n=Math.abs(e);return n>t&&n<180-t?o.DIRECTION.DIRECTION_VERTICAL:o.DIRECTION.DIRECTION_HORIZONTAL},PanInput.getNextOffset=function(e,t){var n=Math.sqrt(e[0]*e[0]+e[1]*e[1]),i=Math.abs(n/-t);return[e[0]/2*i,e[1]/2*i]},PanInput.useDirection=function(e,t,n){return n?!!(t===o.DIRECTION.DIRECTION_ALL||t&e&&n&e):!!(t&e)},PanInput.prototype.mapAxes=function(e){var t=!!e[0],n=!!e[1];this._direction=t&&n?o.DIRECTION.DIRECTION_ALL:t?o.DIRECTION.DIRECTION_HORIZONTAL:n?o.DIRECTION.DIRECTION_VERTICAL:o.DIRECTION.DIRECTION_NONE,this.axes=e},PanInput.prototype.connect=function(e){var t={direction:this._direction,threshold:this.options.threshold};if(this.hammer)this.dettachEvent(),this.hammer.add(new r.Pan(t));else{var n=this.element[s.UNIQUEKEY];n?this.hammer&&this.hammer.destroy():n=String(Math.round(Math.random()*(new Date).getTime()));var o=s.convertInputType(this.options.inputType);if(!o)throw new Error(\"Wrong inputType parameter!\");this.hammer=s.createHammer(this.element,i({recognizers:[[r.Pan,t]],inputClass:o},this.options.hammerManagerOptions)),this.element[s.UNIQUEKEY]=n}return this.attachEvent(e),this},PanInput.prototype.disconnect=function(){return this.hammer&&this.dettachEvent(),this._direction=o.DIRECTION.DIRECTION_NONE,this},PanInput.prototype.destroy=function(){this.disconnect(),this.hammer&&this.hammer.destroy(),delete this.element[s.UNIQUEKEY],this.element=null,this.hammer=null},PanInput.prototype.enable=function(){return this.hammer&&(this.hammer.get(\"pan\").options.enable=!0),this},PanInput.prototype.disable=function(){return this.hammer&&(this.hammer.get(\"pan\").options.enable=!1),this},PanInput.prototype.isEnable=function(){return!(!this.hammer||!this.hammer.get(\"pan\").options.enable)},PanInput.prototype.onHammerInput=function(e){this.isEnable()&&(e.isFirst?this.observer.hold(this,e):e.isFinal&&this.onPanend(e))},PanInput.prototype.onPanmove=function(e){var t=PanInput.getDirectionByAngle(e.angle,this.options.thresholdAngle),n=this.hammer.session.prevInput;n?(e.offsetX=e.deltaX-n.deltaX,e.offsetY=e.deltaY-n.deltaY):(e.offsetX=0,e.offsetY=0);var i=this.getOffset([e.offsetX,e.offsetY],[PanInput.useDirection(o.DIRECTION.DIRECTION_HORIZONTAL,this._direction,t),PanInput.useDirection(o.DIRECTION.DIRECTION_VERTICAL,this._direction,t)]),r=i.some(function(e){return 0!==e});r&&(e.srcEvent.preventDefault(),e.srcEvent.stopPropagation()),e.preventSystemEvent=r,r&&this.observer.change(this,e,s.toAxis(this.axes,i))},PanInput.prototype.onPanend=function(e){var t=this.getOffset([Math.abs(e.velocityX)*(e.deltaX<0?-1:1),Math.abs(e.velocityY)*(e.deltaY<0?-1:1)],[PanInput.useDirection(o.DIRECTION.DIRECTION_HORIZONTAL,this._direction),PanInput.useDirection(o.DIRECTION.DIRECTION_VERTICAL,this._direction)]);t=PanInput.getNextOffset(t,this.observer.options.deceleration),this.observer.release(this,e,s.toAxis(this.axes,t))},PanInput.prototype.attachEvent=function(e){this.observer=e,this.hammer.on(\"hammer.input\",this.onHammerInput).on(\"panstart panmove\",this.onPanmove)},PanInput.prototype.dettachEvent=function(){this.hammer.off(\"hammer.input\",this.onHammerInput).off(\"panstart panmove\",this.onPanmove),this.observer=null},PanInput.prototype.getOffset=function(e,t){var n=[0,0],i=this.options.scale;return t[0]&&(n[0]=e[0]*i[0]),t[1]&&(n[1]=e[1]*i[1]),n},PanInput}();t.PanInput=u},function(e,t,n){\"use strict\";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};t.__esModule=!0;var r=n(4),o=n(0),a=n(1),s=function(){function PinchInput(e,t){if(this.axes=[],this.hammer=null,this.element=null,this._base=null,this._prev=null,void 0===r)throw new Error(\"The Hammerjs must be loaded before eg.Axes.PinchInput.\\nhttp://hammerjs.github.io/\");this.element=o.$(e),this.options=i({scale:1,threshold:0,hammerManagerOptions:{cssProps:{userSelect:\"none\",touchSelect:\"none\",touchCallout:\"none\",userDrag:\"none\"}}},t),this.onPinchStart=this.onPinchStart.bind(this),this.onPinchMove=this.onPinchMove.bind(this),this.onPinchEnd=this.onPinchEnd.bind(this)}return PinchInput.prototype.mapAxes=function(e){this.axes=e},PinchInput.prototype.connect=function(e){var t={threshold:this.options.threshold};if(this.hammer)this.dettachEvent(),this.hammer.add(new r.Pinch(t));else{var n=this.element[a.UNIQUEKEY];n?this.hammer.destroy():n=String(Math.round(Math.random()*(new Date).getTime())),this.hammer=a.createHammer(this.element,i({recognizers:[[r.Pinch,t]],inputClass:r.TouchInput},this.options.hammerManagerOptions)),this.element[a.UNIQUEKEY]=n}return this.attachEvent(e),this},PinchInput.prototype.disconnect=function(){return this.hammer&&this.dettachEvent(),this},PinchInput.prototype.destroy=function(){this.disconnect(),this.hammer&&this.hammer.destroy(),delete this.element[a.UNIQUEKEY],this.element=null,this.hammer=null},PinchInput.prototype.onPinchStart=function(e){this._base=this.observer.get(this)[this.axes[0]];var t=this.getOffset(e.scale);this.observer.hold(this,e),this.observer.change(this,e,a.toAxis(this.axes,[t])),this._prev=e.scale},PinchInput.prototype.onPinchMove=function(e){var t=this.getOffset(e.scale,this._prev);this.observer.change(this,e,a.toAxis(this.axes,[t])),this._prev=e.scale},PinchInput.prototype.onPinchEnd=function(e){var t=this.getOffset(e.scale,this._prev);this.observer.change(this,e,a.toAxis(this.axes,[t])),this.observer.release(this,e,a.toAxis(this.axes,[0]),0),this._base=null,this._prev=null},PinchInput.prototype.getOffset=function(e,t){return void 0===t&&(t=1),this._base*(e-t)*this.options.scale},PinchInput.prototype.attachEvent=function(e){this.observer=e,this.hammer.on(\"pinchstart\",this.onPinchStart).on(\"pinchmove\",this.onPinchMove).on(\"pinchend\",this.onPinchEnd)},PinchInput.prototype.dettachEvent=function(){this.hammer.off(\"pinchstart\",this.onPinchStart).off(\"pinchmove\",this.onPinchMove).off(\"pinchend\",this.onPinchEnd),this.observer=null,this._prev=null},PinchInput.prototype.enable=function(){return this.hammer&&(this.hammer.get(\"pinch\").options.enable=!0),this},PinchInput.prototype.disable=function(){return this.hammer&&(this.hammer.get(\"pinch\").options.enable=!1),this},PinchInput.prototype.isEnable=function(){return!(!this.hammer||!this.hammer.get(\"pinch\").options.enable)},PinchInput}();t.PinchInput=s},function(e,t,n){\"use strict\";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};t.__esModule=!0;var r=n(0),o=n(1),a=function(){function WheelInput(e,t){this.axes=[],this.element=null,this._isEnabled=!1,this._isHolded=!1,this._timer=null,this.element=r.$(e),this.options=i({scale:1},t),this.onWheel=this.onWheel.bind(this)}return WheelInput.prototype.mapAxes=function(e){this.axes=e},WheelInput.prototype.connect=function(e){return this.dettachEvent(),this.attachEvent(e),this},WheelInput.prototype.disconnect=function(){return this.dettachEvent(),this},WheelInput.prototype.destroy=function(){this.disconnect(),this.element=null},WheelInput.prototype.onWheel=function(e){var t=this;if(this._isEnabled&&(e.preventDefault(),0!==e.deltaY)){this._isHolded||(this.observer.hold(this,e),this._isHolded=!0);var n=(e.deltaY>0?-1:1)*this.options.scale;this.observer.change(this,e,o.toAxis(this.axes,[n])),clearTimeout(this._timer),this._timer=setTimeout(function(){t._isHolded&&(t.observer.release(t,e,o.toAxis(t.axes,[0])),t._isHolded=!1)},50)}},WheelInput.prototype.attachEvent=function(e){this.observer=e,this.element.addEventListener(\"wheel\",this.onWheel),this._isEnabled=!0},WheelInput.prototype.dettachEvent=function(){this.element.removeEventListener(\"wheel\",this.onWheel),this._isEnabled=!1,this.observer=null},WheelInput.prototype.enable=function(){return this._isEnabled=!0,this},WheelInput.prototype.disable=function(){return this._isEnabled=!1,this},WheelInput.prototype.isEnable=function(){return this._isEnabled},WheelInput}();t.WheelInput=a},function(e,t,n){\"use strict\";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};t.__esModule=!0;var r=n(0),o=n(1);t.KEYMAP={LEFT_ARROW:37,A:65,UP_ARROW:38,W:87,RIGHT_ARROW:39,D:68,DOWN_ARROW:40,S:83};var a=function(){function MoveKeyInput(e,t){this.axes=[],this.element=null,this._isEnabled=!1,this._isHolded=!1,this.element=r.$(e),this.options=i({scale:[1,1]},t),this.onKeydown=this.onKeydown.bind(this)}return MoveKeyInput.prototype.mapAxes=function(e){this.axes=e},MoveKeyInput.prototype.connect=function(e){return this.dettachEvent(),\"0\"!==this.element.getAttribute(\"tabindex\")&&this.element.setAttribute(\"tabindex\",\"0\"),this.attachEvent(e),this},MoveKeyInput.prototype.disconnect=function(){return this.dettachEvent(),this},MoveKeyInput.prototype.destroy=function(){this.disconnect(),this.element=null},MoveKeyInput.prototype.onKeydown=function(e){if(this._isEnabled){e.preventDefault();var n,i=!0,r=e;switch(r.keyCode){case t.KEYMAP.LEFT_ARROW:case t.KEYMAP.A:n=[-this.options.scale[0],0];break;case t.KEYMAP.RIGHT_ARROW:case t.KEYMAP.D:n=[this.options.scale[0],0];break;case t.KEYMAP.UP_ARROW:case t.KEYMAP.W:n=[0,this.options.scale[1]];break;case t.KEYMAP.DOWN_ARROW:case t.KEYMAP.S:n=[0,-this.options.scale[1]];break;default:i=!1}i&&(this.observer.change(this,e,o.toAxis(this.axes,n)),r.preventDefault())}},MoveKeyInput.prototype.attachEvent=function(e){this.observer=e,this.element.addEventListener(\"keydown\",this.onKeydown,!1),this._isEnabled=!0},MoveKeyInput.prototype.dettachEvent=function(){this.element.removeEventListener(\"keydown\",this.onKeydown,!1),this._isEnabled=!1,this.observer=null},MoveKeyInput.prototype.enable=function(){return this._isEnabled=!0,this},MoveKeyInput.prototype.disable=function(){return this._isEnabled=!1,this},MoveKeyInput.prototype.isEnable=function(){return this._isEnabled},MoveKeyInput}();t.MoveKeyInput=a}])})},function(e,t,n){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=n(0),r=function(e){return e&&e.__esModule?e:{\"default\":e}}(i),o=function(e){function SpriteImage(t,n){_classCallCheck(this,SpriteImage);var i=_possibleConstructorReturn(this,e.call(this)),r=n||{};return i._el=t,i._rowCount=r.rowCount||1,i._colCount=r.colCount||1,i._totalCount=i._rowCount*i._colCount,i._width=r.width||\"auto\",i._height=r.height||\"auto\",i._autoHeight=null!=r.autoHeight?r.autoHeight:\"true\",i._colRow=[0,0],r.colRow?i._colRow=r.colRow:r.frameIndex&&i.setFrameIndex(r.frameIndex),i._el.style.width=SpriteImage._getSizeString(i._width),i._el.style.height=SpriteImage._getSizeString(i._height),r.imageUrl?(i._image=new Image,i._image.onload=function(){i._bg=SpriteImage._createBgDiv(i._image,i._rowCount,i._colCount,i._autoHeight),i._el.appendChild(i._bg),i.setColRow(i._colRow[0],i._colRow[1]),i.trigger(\"load\",{target:i._el,bgElement:i._bg}),i._autoPlayReservedInfo&&(i.play(i._autoPlayReservedInfo),i._autoPlayReservedInfo=null)},i._image.onerror=function(e){i.trigger(\"imageError\",{imageUrl:r.imageUrl})},i._image.src=r.imageUrl,i):(setTimeout(function(){i.trigger(\"imageError\",{imageUrl:r.imageUrl})},0),_possibleConstructorReturn(i))}return _inherits(SpriteImage,e),SpriteImage._createBgDiv=function(e,t,n,i){var r=document.createElement(\"div\");r.style.backgroundImage=\"url(\"+e.src+\")\",r.style.backgroundSize=100*n+\"% \"+100*t+\"%\";var o=e.width/n,a=e.height/t;if(i){var s=a/o;r.style.paddingBottom=100*s+\"%\"}else r.style.height=\"100%\";return r},SpriteImage.prototype.setFrameIndex=function(e){var t=this.toColRow(e);this.setColRow(t[0],t[1])},SpriteImage.prototype.getFrameIndex=function(){return this._colRow[1]*this._colCount+this._colRow[0]},SpriteImage.prototype.setColRow=function(e,t){t>this._rowCount-1||e>this._colCount-1||(this._bg&&(this._bg.style.backgroundPosition=100*-e+\"% \"+100*-t+\"%\"),this._colRow=[e,t])},SpriteImage.prototype.getColRow=function(){return this._colRow},SpriteImage._getSizeString=function(e){return\"number\"==typeof e?e+\"px\":e},SpriteImage.prototype.stop=function(){this._autoPlayTimer&&(clearInterval(this._autoPlayTimer),this._autoPlayTimer=null)},SpriteImage.prototype.play=function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{interval:1e3/this._totalCount,playCount:0},n=t.interval,i=t.playCount;if(!this._bg)return void(this._autoPlayReservedInfo={interval:n,playCount:i});this._autoPlayTimer&&(clearInterval(this._autoPlayTimer),this._autoPlayTimer=null);var r=this.getFrameIndex(),o=0,a=0;this._autoPlayTimer=setInterval(function(){r%=e._totalCount;var t=e.toColRow(r);e.setColRow(t[0],t[1]),r++,++a===e._totalCount&&(a=0,o++),i>0&&o===i&&clearInterval(e._autoPlayTimer)},n)},SpriteImage.prototype.toColRow=function(e){var t=this._colCount,n=this._rowCount;return e<0?[0,0]:e>=this._totalCount?[t-1,n-1]:[e%t,Math.floor(e/t)]},SpriteImage}(r[\"default\"]);t[\"default\"]=o},function(e,t,n){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}t.__esModule=!0;var i=n(13),r=function(e){return e&&e.__esModule?e:{\"default\":e}}(i),o={0:\"NO_ERROR\",1280:\"INVALID_ENUM\",1281:\"INVALID_VALUE\",1282:\"INVALID_OPERATION\",1285:\"OUT_OF_MEMORY\",1286:\"INVALID_FRAMEBUFFER_OPERATION\",37442:\"CONTEXT_LOST_WEBGL\"},a=null,s=function(){function WebGLUtils(){_classCallCheck(this,WebGLUtils)}return WebGLUtils.createShader=function(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(e.deleteShader(i),null)},WebGLUtils.createProgram=function(e,t,n){var i=e.createProgram();return e.attachShader(i,t),e.attachShader(i,n),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)?i:(e.deleteProgram(i),null)},WebGLUtils.initBuffer=function(e,t,n,i,r){var o=e.createBuffer();return e.bindBuffer(t,o),e.bufferData(t,n,e.STATIC_DRAW),o&&(o.itemSize=i,o.numItems=n.length/i),r!==undefined&&(e.enableVertexAttribArray(r),e.vertexAttribPointer(r,o.itemSize,e.FLOAT,!1,0,0)),o},WebGLUtils.bindBufferToAttribute=function(e,t,n){null!==t&&null!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t),e.vertexAttribPointer(n,t.itemSize,e.FLOAT,!1,0,0))},WebGLUtils.getWebglContext=function(e){function onWebglcontextcreationerror(e){return e.statusMessage}var t=[\"webgl\",\"experimental-webgl\",\"webkit-3d\",\"moz-webgl\"],n=null;e.addEventListener(\"webglcontextcreationerror\",onWebglcontextcreationerror);for(var i=0;i<t.length;i++){try{n=e.getContext(t[i],{preserveDrawingBuffer:!0,antialias:!1})}catch(r){}if(n)break}return e.removeEventListener(\"webglcontextcreationerror\",onWebglcontextcreationerror),n},WebGLUtils.createTexture=function(e,t){var n=e.createTexture();return e.bindTexture(t,n),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(t,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(t,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(t,null),n},WebGLUtils.isWebGLAvailable=function(){if(null===a){var e=document.createElement(\"canvas\"),t=WebGLUtils.getWebglContext(e);if(a=!!t,t){var n=t.getExtension(\"WEBGL_lose_context\");n&&n.loseContext()}}return a},WebGLUtils.isStableWebGL=function(){var e=!0,t=(0,r[\"default\"])();return\"android\"===t.os.name&&parseFloat(t.os.version)<=4.3?e=!1:\"android\"===t.os.name&&4.4===parseFloat(t.os.version)?\"chrome\"!==t.browser.name&&(e=!1):\"ios\"===t.os.name&&parseInt(t.os.version,10)<=7&&(e=!1),e},WebGLUtils.getErrorNameFromWebGLErrorCode=function(e){return e in o?o[e]:\"UNKNOWN_ERROR\"},WebGLUtils}();t[\"default\"]=s},function(e,t,n){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}t.__esModule=!0;var i=function Renderer(){_classCallCheck(this,Renderer)};t[\"default\"]=i},function(e,t,n){\"use strict\";function toAxis(e,t){return t.reduce(function(t,n,i){return e[i]&&(t[e[i]]=n),t},{})}t.__esModule=!0;var i={};i.toAxis=toAxis,t[\"default\"]=i,t.toAxis=toAxis},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e[\"default\"]}:function(){return e};return __webpack_require__.d(t,\"a\",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=0)}([function(e,t,n){\"use strict\";var i=n(1),r=function(e){return e&&e.__esModule?e:{\"default\":e}}(i);e.exports=r[\"default\"]},function(e,t,n){\"use strict\";function agent(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:i.navigator.userAgent;o[\"default\"].setUa(e);var t={os:o[\"default\"].getOs(),browser:o[\"default\"].getBrowser(),isMobile:o[\"default\"].getIsMobile()};return t.browser.name=t.browser.name.toLowerCase(),t.os.name=t.os.name.toLowerCase(),t.os.version=t.os.version.toLowerCase(),\"ios\"===t.os.name&&t.browser.webview&&(t.browser.version=\"-1\"),t}t.__esModule=!0;var i=n(2),r=n(3),o=function(e){return e&&e.__esModule?e:{\"default\":e}}(r);agent.VERSION=\"2.1.2\",t[\"default\"]=agent,e.exports=t[\"default\"]},function(e,t,n){\"use strict\";t.__esModule=!0;var i=\"undefined\"!=typeof window&&window||{};t.RegExp=i.RegExp,t.navigator=i.navigator},function(e,t,n){\"use strict\";function setUa(e){o=e}function isMatched(e,t){return t&&t.test?!!t.test(e):e.indexOf(t)>-1}function getIdentityStringFromArray(e,t){var n=e.filter(function(e){return isMatched(o,e.criteria)})[0];return n&&n.identity||t.name}function getRule(e,t){return e.filter(function(e){var n=e.criteria,i=new RegExp(e.identity,\"i\").test(t);return!!(n?i&&isMatched(o,n):i)})[0]}function getBrowserName(){return getIdentityStringFromArray(r[\"default\"].browser,r[\"default\"].defaultString.browser)}function getBrowserRule(e){var t=getRule(r[\"default\"].browser,e);return t||(t={criteria:e,versionSearch:e,identity:e}),t}function extractBrowserVersion(e,t){var n=r[\"default\"].defaultString.browser.version,i=new RegExp(\"(\"+e+\")\",\"i\").exec(t);if(!i)return n;var o=i.index,a=i[0];if(o>-1){var s=o+a.length+1;n=t.substring(s).split(\" \")[0].replace(/_/g,\".\").replace(/;|\\)/g,\"\")}return n}function getBrowserVersion(e){return e?extractBrowserVersion(getBrowserRule(e).versionSearch||e,o):undefined}function isWebview(){var e=r[\"default\"].webview,t=void 0;return e.filter(function(e){return isMatched(o,e.criteria)}).some(function(e){return t=extractBrowserVersion(e.browserVersionSearch,o),!(!isMatched(o,e.webviewToken)&&!isMatched(t,e.webviewBrowserVersion))})}function getOSRule(e){return getRule(r[\"default\"].os,e)}function getOsName(){return getIdentityStringFromArray(r[\"default\"].os,r[\"default\"].defaultString.os)}function getOsVersion(e){var t=getOSRule(e)||{},n=r[\"default\"].defaultString.os.version,i=void 0;if(!e)return undefined;if(t.versionAlias)return t.versionAlias;var a=t.versionSearch||e,s=new RegExp(\"(\"+a+\")\\\\s([\\\\d_\\\\.]+|\\\\d_0)\",\"i\");return s.exec(o)&&(i=s.exec(o)[2].replace(/_/g,\".\").replace(/;|\\)/g,\"\")),i||n}function getOs(){var e=getOsName();return{name:e,version:getOsVersion(e)}}function getBrowser(){var e=getBrowserName();return{name:e,version:getBrowserVersion(e),webview:isWebview()}}function getIsMobile(){return-1!==o.indexOf(\"Mobi\")}t.__esModule=!0;var i=n(4),r=function(e){return e&&e.__esModule?e:{\"default\":e}}(i),o=void 0;t[\"default\"]={getOs:getOs,getBrowser:getBrowser,getIsMobile:getIsMobile,setUa:setUa},e.exports=t[\"default\"]},function(e,t,n){\"use strict\";t.__esModule=!0;var i={browser:[{criteria:\"PhantomJS\",identity:\"PhantomJS\"},{criteria:/Whale/,identity:\"Whale\",versionSearch:\"Whale\"},{criteria:/Edge/,identity:\"Edge\",versionSearch:\"Edge\"},{criteria:/MSIE|Trident|Windows Phone/,identity:\"IE\",versionSearch:\"IEMobile|MSIE|rv\"},{criteria:/MiuiBrowser/,identity:\"MIUI Browser\",versionSearch:\"MiuiBrowser\"},{criteria:/SamsungBrowser/,identity:\"Samsung Internet\",versionSearch:\"SamsungBrowser\"},{criteria:/SAMSUNG /,identity:\"Samsung Internet\",versionSearch:\"Version\"},{criteria:/Chrome|CriOS/,identity:\"Chrome\"},{criteria:/Android/,identity:\"Android Browser\",versionSearch:\"Version\"},{criteria:/iPhone|iPad/,identity:\"Safari\",versionSearch:\"Version\"},{criteria:\"Apple\",identity:\"Safari\",versionSearch:\"Version\"},{criteria:\"Firefox\",identity:\"Firefox\"}],os:[{criteria:/Windows Phone/,identity:\"Windows Phone\",versionSearch:\"Windows Phone\"},{criteria:\"Windows 2000\",identity:\"Window\",versionAlias:\"5.0\"},{criteria:/Windows NT/,identity:\"Window\",versionSearch:\"Windows NT\"},{criteria:/iPhone|iPad/,identity:\"iOS\",versionSearch:\"iPhone OS|CPU OS\"},{criteria:\"Mac\",versionSearch:\"OS X\",identity:\"MAC\"},{criteria:/Android/,identity:\"Android\"},{criteria:/Tizen/,identity:\"Tizen\"},{criteria:/Web0S/,identity:\"WebOS\"}],webview:[{criteria:/iPhone|iPad/,browserVersionSearch:\"Version\",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],defaultString:{browser:{version:\"-1\",name:\"unknown\"},os:{version:\"-1\",name:\"unknown\"}}};t[\"default\"]=i,e.exports=t[\"default\"]}])})},function(e,t,n){var i;!function(r,o,a,s){\"use strict\";function setTimeoutContext(e,t,n){return setTimeout(bindFn(e,n),t)}function invokeArrayArg(e,t,n){return!!Array.isArray(e)&&(each(e,n[t],n),!0)}function each(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function deprecate(e,t,n){var i=\"DEPRECATED METHOD: \"+t+\"\\n\"+n+\" AT \\n\";return function(){var t=new Error(\"get-stack-trace\"),n=t&&t.stack?t.stack.replace(/^[^\\(]+?[\\n$]/gm,\"\").replace(/^\\s+at\\s+/gm,\"\").replace(/^Object.<anonymous>\\s*\\(/gm,\"{anonymous}()@\"):\"Unknown Stack Trace\",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,i,n),e.apply(this,arguments)}}function inherit(e,t,n){var i,r=t.prototype;i=e.prototype=Object.create(r),i.constructor=e,i._super=r,n&&u(i,n)}function bindFn(e,t){return function(){return e.apply(t,arguments)}}function boolOrFn(e,t){return typeof e==l?e.apply(t?t[0]||s:s,t):e}function ifUndefined(e,t){return e===s?t:e}function addEventListeners(e,t,n){each(splitStr(t),function(t){e.addEventListener(t,n,!1)})}function removeEventListeners(e,t,n){each(splitStr(t),function(t){e.removeEventListener(t,n,!1)})}function hasParent(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function inStr(e,t){return e.indexOf(t)>-1}function splitStr(e){return e.trim().split(/\\s+/g)}function inArray(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function toArray(e){return Array.prototype.slice.call(e,0)}function uniqueArray(e,t,n){for(var i=[],r=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];inArray(r,a)<0&&i.push(e[o]),r[o]=a,o++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function prefixed(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),o=0;o<c.length;){if(n=c[o],(i=n?n+r:t)in e)return i;o++}return s}function uniqueId(){return g++}function getWindowForElement(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||r}function Input(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){boolOrFn(e.options.enable,[e])&&n.handler(t)},this.init()}function createInputInstance(e){var t=e.options.inputClass;return new(t||(w?PointerEventInput:E?TouchInput:y?TouchMouseInput:MouseInput))(e,inputHandler)}function inputHandler(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=t&I&&i-r==0,a=t&(R|x)&&i-r==0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,computeInputData(e,n),e.emit(\"hammer.input\",n),e.recognize(n),e.session.prevInput=n}function computeInputData(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=simpleCloneInputData(t)),r>1&&!n.firstMultiple?n.firstMultiple=simpleCloneInputData(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=t.center=getCenter(i);t.timeStamp=d(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=getAngle(s,u),t.distance=getDistance(s,u),computeDeltaXY(n,t),t.offsetDirection=getDirection(t.deltaX,t.deltaY);var c=getVelocity(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=f(c.x)>f(c.y)?c.x:c.y,t.scale=a?getScale(a.pointers,i):1,t.rotation=a?getRotation(a.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,computeIntervalInputData(n,t);var h=e.element;hasParent(t.srcEvent.target,h)&&(h=t.srcEvent.target),t.target=h}function computeDeltaXY(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};t.eventType!==I&&o.eventType!==R||(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}function computeIntervalInputData(e,t){var n,i,r,o,a=e.lastInterval||t,u=t.timeStamp-a.timeStamp;if(t.eventType!=x&&(u>T||a.velocity===s)){var c=t.deltaX-a.deltaX,h=t.deltaY-a.deltaY,l=getVelocity(u,c,h);i=l.x,r=l.y,n=f(l.x)>f(l.y)?l.x:l.y,o=getDirection(c,h),e.lastInterval=t}else n=a.velocity,i=a.velocityX,r=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=o}function simpleCloneInputData(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:p(e.pointers[n].clientX),clientY:p(e.pointers[n].clientY)},n++;return{timeStamp:d(),pointers:t,center:getCenter(t),deltaX:e.deltaX,deltaY:e.deltaY}}function getCenter(e){var t=e.length;if(1===t)return{x:p(e[0].clientX),y:p(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:p(n/t),y:p(i/t)}}function getVelocity(e,t,n){return{x:t/e||0,y:n/e||0}}function getDirection(e,t){return e===t?P:f(e)>=f(t)?e<0?A:C:t<0?O:M}function getDistance(e,t,n){n||(n=L);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function getAngle(e,t,n){n||(n=L);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}function getRotation(e,t){return getAngle(t[1],t[0],V)+getAngle(e[1],e[0],V)}function getScale(e,t){return getDistance(t[0],t[1],V)/getDistance(e[0],e[1],V)}function MouseInput(){this.evEl=U,this.evWin=W,this.pressed=!1,Input.apply(this,arguments)}function PointerEventInput(){this.evEl=z,this.evWin=j,Input.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function SingleTouchInput(){this.evTarget=q,this.evWin=H,this.started=!1,Input.apply(this,arguments)}function normalizeSingleTouches(e,t){var n=toArray(e.touches),i=toArray(e.changedTouches);return t&(R|x)&&(n=uniqueArray(n.concat(i),\"identifier\",!0)),[n,i]}function TouchInput(){this.evTarget=B,this.targetIds={},Input.apply(this,arguments)}function getTouches(e,t){var n=toArray(e.touches),i=this.targetIds;if(t&(I|b)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,a=toArray(e.changedTouches),s=[],u=this.target;if(o=n.filter(function(e){return hasParent(e.target,u)}),t===I)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<a.length;)i[a[r].identifier]&&s.push(a[r]),t&(R|x)&&delete i[a[r].identifier],r++;return s.length?[uniqueArray(o.concat(s),\"identifier\",!0),s]:void 0}function TouchMouseInput(){Input.apply(this,arguments);var e=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,e),this.mouse=new MouseInput(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function recordTouches(e,t){e&I?(this.primaryTouch=t.changedPointers[0].identifier,setLastTouch.call(this,t)):e&(R|x)&&setLastTouch.call(this,t)}function setLastTouch(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches,r=function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)};setTimeout(r,X)}}function isSyntheticEvent(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(t-r.x),a=Math.abs(n-r.y);if(o<=K&&a<=K)return!0}return!1}function TouchAction(e,t){this.manager=e,this.set(t)}function cleanTouchActions(e){if(inStr(e,te))return te;var t=inStr(e,ne),n=inStr(e,ie);return t&&n?te:t||n?t?ne:ie:inStr(e,ee)?ee:J}function Recognizer(e){this.options=u({},this.defaults,e||{}),this.id=uniqueId(),this.manager=null,this.options.enable=ifUndefined(this.options.enable,!0),this.state=oe,this.simultaneous={},this.requireFail=[]}function stateStr(e){return e&he?\"cancel\":e&ue?\"end\":e&se?\"move\":e&ae?\"start\":\"\"}function directionStr(e){return e==M?\"down\":e==O?\"up\":e==A?\"left\":e==C?\"right\":\"\"}function getRecognizerByNameIfManager(e,t){var n=t.manager;return n?n.get(e):e}function AttrRecognizer(){Recognizer.apply(this,arguments)}function PanRecognizer(){AttrRecognizer.apply(this,arguments),this.pX=null,this.pY=null}function PinchRecognizer(){AttrRecognizer.apply(this,arguments)}function PressRecognizer(){Recognizer.apply(this,arguments),this._timer=null,this._input=null}function RotateRecognizer(){AttrRecognizer.apply(this,arguments)}function SwipeRecognizer(){AttrRecognizer.apply(this,arguments)}function TapRecognizer(){Recognizer.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Hammer(e,t){return t=t||{},t.recognizers=ifUndefined(t.recognizers,Hammer.defaults.preset),new Manager(e,t)}function Manager(e,t){this.options=u({},Hammer.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=createInputInstance(this),this.touchAction=new TouchAction(this,this.options.touchAction),toggleCssProps(this,!0),each(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function toggleCssProps(e,t){var n=e.element;if(n.style){var i;each(e.options.cssProps,function(r,o){i=prefixed(n.style,o),t?(e.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=e.oldCssProps[i]||\"\"}),t||(e.oldCssProps={})}}function triggerDomEvent(e,t){var n=o.createEvent(\"Event\");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}var u,c=[\"\",\"webkit\",\"Moz\",\"MS\",\"ms\",\"o\"],h=o.createElement(\"div\"),l=\"function\",p=Math.round,f=Math.abs,d=Date.now;u=\"function\"!=typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError(\"Cannot convert undefined or null to object\");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==s&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var _=deprecate(function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&e[i[r]]===s)&&(e[i[r]]=t[i[r]]),r++;return e},\"extend\",\"Use `assign`.\"),m=deprecate(function(e,t){return _(e,t,!0)},\"merge\",\"Use `assign`.\"),g=1,v=/mobile|tablet|ip(ad|hone|od)|android/i,y=\"ontouchstart\"in r,w=prefixed(r,\"PointerEvent\")!==s,E=y&&v.test(navigator.userAgent),T=25,I=1,b=2,R=4,x=8,P=1,A=2,C=4,O=8,M=16,S=A|C,D=O|M,N=S|D,L=[\"x\",\"y\"],V=[\"clientX\",\"clientY\"];Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)}};var F={mousedown:I,mousemove:b,mouseup:R},U=\"mousedown\",W=\"mousemove mouseup\";inherit(MouseInput,Input,{handler:function(e){var t=F[e.type];t&I&&0===e.button&&(this.pressed=!0),t&b&&1!==e.which&&(t=R),this.pressed&&(t&R&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:\"mouse\",srcEvent:e}))}});var k={pointerdown:I,pointermove:b,pointerup:R,pointercancel:x,pointerout:x},Y={2:\"touch\",3:\"pen\",4:\"mouse\",5:\"kinect\"},z=\"pointerdown\",j=\"pointermove pointerup pointercancel\";r.MSPointerEvent&&!r.PointerEvent&&(z=\"MSPointerDown\",j=\"MSPointerMove MSPointerUp MSPointerCancel\"),inherit(PointerEventInput,Input,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace(\"ms\",\"\"),r=k[i],o=Y[e.pointerType]||e.pointerType,a=\"touch\"==o,s=inArray(t,e.pointerId,\"pointerId\");r&I&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):r&(R|x)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var G={touchstart:I,touchmove:b,touchend:R,touchcancel:x},q=\"touchstart\",H=\"touchstart touchmove touchend touchcancel\";inherit(SingleTouchInput,Input,{handler:function(e){var t=G[e.type];if(t===I&&(this.started=!0),this.started){var n=normalizeSingleTouches.call(this,e,t);t&(R|x)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:\"touch\",srcEvent:e})}}});var Q={touchstart:I,touchmove:b,touchend:R,touchcancel:x},B=\"touchstart touchmove touchend touchcancel\";inherit(TouchInput,Input,{handler:function(e){var t=Q[e.type],n=getTouches.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:\"touch\",srcEvent:e})}});var X=2500,K=25;inherit(TouchMouseInput,Input,{handler:function(e,t,n){var i=\"touch\"==n.pointerType,r=\"mouse\"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)recordTouches.call(this,t,n);else if(r&&isSyntheticEvent.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Z=prefixed(h.style,\"touchAction\"),$=Z!==s,J=\"auto\",ee=\"manipulation\",te=\"none\",ne=\"pan-x\",ie=\"pan-y\",re=function(){if(!$)return!1;var e={},t=r.CSS&&r.CSS.supports;return[\"auto\",\"manipulation\",\"pan-y\",\"pan-x\",\"pan-x pan-y\",\"none\"].forEach(function(n){e[n]=!t||r.CSS.supports(\"touch-action\",n)}),e}();TouchAction.prototype={set:function(e){\"compute\"==e&&(e=this.compute()),$&&this.manager.element.style&&re[e]&&(this.manager.element.style[Z]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return each(this.manager.recognizers,function(t){boolOrFn(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),cleanTouchActions(e.join(\" \"))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var i=this.actions,r=inStr(i,te)&&!re[te],o=inStr(i,ie)&&!re[ie],a=inStr(i,ne)&&!re[ne];if(r){var s=1===e.pointers.length,u=e.distance<2,c=e.deltaTime<250;if(s&&u&&c)return}return a&&o?void 0:r||o&&n&S||a&&n&D?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var oe=1,ae=2,se=4,ue=8,ce=ue,he=16;Recognizer.prototype={defaults:{},set:function(e){return u(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(invokeArrayArg(e,\"recognizeWith\",this))return this;var t=this.simultaneous;return e=getRecognizerByNameIfManager(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return invokeArrayArg(e,\"dropRecognizeWith\",this)?this:(e=getRecognizerByNameIfManager(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(invokeArrayArg(e,\"requireFailure\",this))return this;var t=this.requireFail;return e=getRecognizerByNameIfManager(e,this),-1===inArray(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(invokeArrayArg(e,\"dropRequireFailure\",this))return this;e=getRecognizerByNameIfManager(e,this);var t=inArray(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function emit(n){t.manager.emit(n,e)}var t=this,n=this.state;n<ue&&emit(t.options.event+stateStr(n)),emit(t.options.event),e.additionalEvent&&emit(e.additionalEvent),n>=ue&&emit(t.options.event+stateStr(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|oe)))return!1;e++}return!0},recognize:function(e){var t=u({},e);if(!boolOrFn(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(ce|he|32)&&(this.state=oe),this.state=this.process(t),this.state&(ae|se|ue|he)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(ae|se),r=this.attrTest(e);return i&&(n&x||!r)?t|he:i||r?n&R?t|ue:t&ae?t|se:ae:32}}),inherit(PanRecognizer,AttrRecognizer,{defaults:{event:\"pan\",threshold:10,pointers:1,direction:N},getTouchAction:function(){var e=this.options.direction,t=[];return e&S&&t.push(ie),e&D&&t.push(ne),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,a=e.deltaY;return r&t.direction||(t.direction&S?(r=0===o?P:o<0?A:C,n=o!=this.pX,i=Math.abs(e.deltaX)):(r=0===a?P:a<0?O:M,n=a!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return AttrRecognizer.prototype.attrTest.call(this,e)&&(this.state&ae||!(this.state&ae)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=directionStr(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:\"pinch\",threshold:0,pointers:2},getTouchAction:function(){return[te]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&ae)},emit:function(e){if(1!==e.scale){var t=e.scale<1?\"in\":\"out\";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),inherit(PressRecognizer,Recognizer,{defaults:{event:\"press\",pointers:1,time:251,threshold:9},getTouchAction:function(){return[J]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(R|x)&&!r)this.reset();else if(e.eventType&I)this.reset(),this._timer=setTimeoutContext(function(){this.state=ce,this.tryEmit()},t.time,this);else if(e.eventType&R)return ce;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===ce&&(e&&e.eventType&R?this.manager.emit(this.options.event+\"up\",e):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:\"rotate\",threshold:0,pointers:2},getTouchAction:function(){return[te]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&ae)}}),inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:\"swipe\",threshold:10,velocity:.3,direction:S|D,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(S|D)?t=e.overallVelocity:n&S?t=e.overallVelocityX:n&D&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&f(t)>this.options.velocity&&e.eventType&R},emit:function(e){var t=directionStr(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),inherit(TapRecognizer,Recognizer,{defaults:{event:\"tap\",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ee]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&I&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=R)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||getDistance(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e;if(0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=setTimeoutContext(function(){this.state=ce,this.tryEmit()},t.interval,this),ae):ce}return 32},failTimeout:function(){return this._timer=setTimeoutContext(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ce&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Hammer.VERSION=\"2.0.7\",Hammer.defaults={domEvents:!1,touchAction:\"compute\",enable:!0,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:!1}],[PinchRecognizer,{enable:!1},[\"rotate\"]],[SwipeRecognizer,{direction:S}],[PanRecognizer,{direction:S},[\"swipe\"]],[TapRecognizer],[TapRecognizer,{event:\"doubletap\",taps:2},[\"tap\"]],[PressRecognizer]],cssProps:{userSelect:\"none\",touchSelect:\"none\",touchCallout:\"none\",contentZooming:\"none\",userDrag:\"none\",tapHighlightColor:\"rgba(0,0,0,0)\"}};Manager.prototype={set:function(e){return u(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,i=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&ce)&&(r=t.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===t.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&n.state&(ae|se|ue)&&(r=t.curRecognizer=n),o++}},get:function(e){if(e instanceof Recognizer)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(invokeArrayArg(e,\"add\",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(invokeArrayArg(e,\"remove\",this))return this;if(e=this.get(e)){var t=this.recognizers,n=inArray(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return each(splitStr(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==s){var n=this.handlers;return each(splitStr(e),function(e){t?n[e]&&n[e].splice(inArray(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&triggerDomEvent(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&toggleCssProps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(Hammer,{INPUT_START:I,INPUT_MOVE:b,INPUT_END:R,INPUT_CANCEL:x,STATE_POSSIBLE:oe,STATE_BEGAN:ae,STATE_CHANGED:se,STATE_ENDED:ue,STATE_RECOGNIZED:ce,STATE_CANCELLED:he,STATE_FAILED:32,DIRECTION_NONE:P,DIRECTION_LEFT:A,DIRECTION_RIGHT:C,DIRECTION_UP:O,DIRECTION_DOWN:M,DIRECTION_HORIZONTAL:S,DIRECTION_VERTICAL:D,DIRECTION_ALL:N,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:m,extend:_,assign:u,inherit:inherit,bindFn:bindFn,prefixed:prefixed}),(void 0!==r?r:\"undefined\"!=typeof self?self:{}).Hammer=Hammer,(i=function(){return Hammer}.call(t,n,t,e))!==s&&(e.exports=i)}(window,document)},function(e,t,n){\"use strict\";t.__esModule=!0,t.YawPitchControl=undefined;var i=n(28),r=function(e){return e&&e.__esModule?e:{\"default\":e}}(i),o=n(6);r[\"default\"].CONTROL_MODE_VR=o.CONTROL_MODE_VR,r[\"default\"].CONTROL_MODE_YAWPITCH=o.CONTROL_MODE_YAWPITCH,r[\"default\"].TOUCH_DIRECTION_ALL=o.TOUCH_DIRECTION_ALL,r[\"default\"].TOUCH_DIRECTION_YAW=o.TOUCH_DIRECTION_YAW,r[\"default\"].TOUCH_DIRECTION_PITCH=o.TOUCH_DIRECTION_PITCH,r[\"default\"].TOUCH_DIRECTION_NONE=o.TOUCH_DIRECTION_NONE,t.YawPitchControl=r[\"default\"]},function(e,t,n){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(0),o=function(e){return e&&e.__esModule?e:{\"default\":e}}(r),a=n(15),s=n(24),u=n(27),c=n(1),h=\"undefined\"==typeof Promise?n(3).Promise:Promise,l=function(e){function PanoViewer(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,PanoViewer);var r=_possibleConstructorReturn(this,e.call(this));if(n.checkSupport&&!n.checkSupport()){var o;return setTimeout(function(){r.trigger(u.EVENTS.ERROR,{type:u.ERROR_TYPE.INVALID_DEVICE,message:\"invalid device\"})},0),o=r,_possibleConstructorReturn(r,o)}if(!s.WebGLUtils.isWebGLAvailable()){var a;return setTimeout(function(){r.trigger(u.EVENTS.ERROR,{type:u.ERROR_TYPE.NO_WEBGL,message:\"no webgl support\"})},0),a=r,_possibleConstructorReturn(r,a)}if(n.image&&n.video){var c;return setTimeout(function(){r.trigger(u.EVENTS.ERROR,{type:u.ERROR_TYPE.INVALID_RESOURCE,message:\"Specifying multi resouces(both image and video) is not valid.\"})},0),c=r,_possibleConstructorReturn(r,c)}r._container=t,r._image=n.image||n.video,r._isVideo=!!n.video,r._projectionType=n.projectionType||s.PanoImageRenderer.ImageType.EQUIRECTANGULAR,r._width=n.width||parseInt(window.getComputedStyle(t).width,10),r._height=n.height||parseInt(window.getComputedStyle(t).height,10),r._yaw=n.yaw||0,r._pitch=n.pitch||0,r._fov=n.fov||65,r._useGyro=n.useGyro||u.GYRO_MODE.YAWPITCH,r._aspectRatio=r._width/r._height;var h=n.fovRange||[30,110],l=i(n,{element:t,yaw:r._yaw,pitch:r._pitch,fov:r._fov,useGyro:r._useGyro,fovRange:h,aspectRatio:r._aspectRatio});return r._isReady=!1,r._initYawPitchControl(l),r._initRenderer(r._yaw,r._pitch,r._fov,r._projectionType),r}return _inherits(PanoViewer,e),PanoViewer.prototype.getVideo=function(){return this._isVideo?this._photoSphereRenderer.getContent():null},PanoViewer.prototype.setVideo=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{projectionType:s.PanoImageRenderer.ImageType.EQUIRECTANGULAR};return e?(this.setImage(e,{projectionType:t.projectionType,isVideo:!0}),this):this},PanoViewer.prototype.getImage=function(){return this._isVideo?null:this._photoSphereRenderer.getContent()},PanoViewer.prototype.setImage=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{projectionType:s.PanoImageRenderer.ImageType.EQUIRECTANGULAR,isVideo:!1},n=t.projectionType||s.PanoImageRenderer.ImageType.EQUIRECTANGULAR,i=t.isVideo||!1;return this._image&&i!==this._isVideo?(console.warn(\"Currently not supporting to change content type(Image <--\\x3e Video)\"),this):e?(this._image=e,this._isVideo=i,this._projectionType=n,this._deactivate(),this._initRenderer(this._yaw,this._pitch,this._fov,this._projectionType),this):this},PanoViewer.prototype.keepUpdate=function(e){return this._photoSphereRenderer.keepUpdate(e),this},PanoViewer.prototype.getProjectionType=function(){return this._projectionType},PanoViewer.prototype._initRenderer=function(e,t,n,i){var r=this;this._photoSphereRenderer=new s.PanoImageRenderer(this._image,this._width,this._height,this._isVideo,{initialYaw:e,initialPitch:t,fieldOfView:n,imageType:i}),this._bindRendererHandler(),this._photoSphereRenderer.bindTexture().then(function(){return r._activate()})[\"catch\"](function(){r._triggerEvent(u.EVENTS.ERROR,{type:u.ERROR_TYPE.FAIL_BIND_TEXTURE,message:\"failed to bind texture\"})})},PanoViewer.prototype._bindRendererHandler=function(){var e=this;this._photoSphereRenderer.on(s.PanoImageRenderer.EVENTS.IMAGE_LOADED,function(t){e.trigger(u.EVENTS.CONTENT_LOADED,t)}),this._photoSphereRenderer.on(s.PanoImageRenderer.EVENTS.ERROR,function(t){e.trigger(u.EVENTS.ERROR,t)}),this._photoSphereRenderer.on(s.PanoImageRenderer.EVENTS.RENDERING_CONTEXT_LOST,function(t){e._deactivate(),e.trigger(u.EVENTS.ERROR,{type:u.ERROR_TYPE.RENDERING_CONTEXT_LOST,message:\"webgl rendering context lost\"})})},PanoViewer.prototype._initYawPitchControl=function(e){var t=this;this._yawPitchControl=new a.YawPitchControl(e),this._yawPitchControl.on(u.EVENTS.ANIMATION_END,function(e){t._triggerEvent(u.EVENTS.ANIMATION_END,e)}),this._yawPitchControl.on(\"change\",function(e){t._yaw=e.yaw,t._pitch=e.pitch,t._fov=e.fov,t._triggerEvent(u.EVENTS.VIEW_CHANGE,e)})},PanoViewer.prototype._triggerEvent=function(e,t){var n=t||{};return this.trigger(e,n)},PanoViewer.prototype.setUseZoom=function(e){\"boolean\"==typeof e&&this._yawPitchControl.option(\"useZoom\",e)},PanoViewer.prototype.setUseKeyboard=function(e){this._yawPitchControl.option(\"useKeyboard\",e)},PanoViewer.prototype.setUseGyro=function(e){this._yawPitchControl.option(\"useGyro\",e)},PanoViewer.prototype.setFovRange=function(e){this._yawPitchControl.option(\"fovRange\",e)},PanoViewer.prototype.getFovRange=function(){return this._yawPitchControl.option(\"fovRange\")},PanoViewer.prototype.updateViewportDimensions=function(e){this._isReady&&(this._width=e&&e.width||parseInt(window.getComputedStyle(this._container).width,10),this._height=e&&e.height||parseInt(window.getComputedStyle(this._container).height,10),this._aspectRatio=this._width/this._height,this._photoSphereRenderer.updateViewportDimensions(this._width,this._height),this._yawPitchControl.option(\"aspectRatio\",this._aspectRatio),this.lookAt({},0))},PanoViewer.prototype.getFov=function(){return this._fov},PanoViewer.prototype._getHFov=function(){return c.glMatrix.toDegree(2*Math.atan(this._aspectRatio*Math.tan(c.glMatrix.toRadian(this._fov)/2)))},PanoViewer.prototype.getYaw=function(){return this._yaw},PanoViewer.prototype.getPitch=function(){return this._pitch},PanoViewer.prototype.getYawRange=function(){return this._yawPitchControl.option(\"yawRange\")},PanoViewer.prototype.getPitchRange=function(){return this._yawPitchControl.option(\"pitchRange\")},PanoViewer.prototype.setYawRange=function(e){return this._yawPitchControl.option(\"yawRange\",e)},PanoViewer.prototype.setPitchRange=function(e){return this._yawPitchControl.option(\"pitchRange\",e)},PanoViewer.prototype.setShowPolePoint=function(e){return this._yawPitchControl.option(\"showPolePoint\",e)},PanoViewer.prototype.lookAt=function(e,t){if(this._isReady){var n=e.yaw!==undefined?e.yaw:this._yaw,i=e.pitch!==undefined?e.pitch:this._pitch,r=this._yawPitchControl.option(\"pitchRange\"),o=r[1]-r[0],a=e.fov!==undefined?e.fov:this._fov;o<a&&(a=o),this._yawPitchControl.lookAt({yaw:n,pitch:i,fov:a},t),0===t&&this._photoSphereRenderer.render(n,i,a)}},PanoViewer.prototype._activate=function(){this._photoSphereRenderer.attachTo(this._container),this._yawPitchControl.enable(),this.updateViewportDimensions(),this._isReady=!0,this._triggerEvent(u.EVENTS.READY),this._startRender()},PanoViewer.prototype._startRender=function(){this._renderLoop=this._renderLoop.bind(this),this._rafId=window.requestAnimationFrame(this._renderLoop)},PanoViewer.prototype._renderLoop=function(){this._photoSphereRenderer&&this._photoSphereRenderer.render(this._yaw,this._pitch,this._fov),this._rafId=window.requestAnimationFrame(this._renderLoop)},PanoViewer.prototype._stopRender=function(){this._rafId&&(window.cancelAnimationFrame(this._rafId),delete this._rafId)},PanoViewer.prototype._deactivate=function(){this._photoSphereRenderer&&(this._photoSphereRenderer.destroy(),this._photoSphereRenderer=null),this._isReady&&(this._yawPitchControl.disable(),this._stopRender(),this._isReady=!1)},PanoViewer.prototype.destroy=function(){this._deactivate(),this._yawPitchControl&&(this._yawPitchControl.destroy(),this._yawPitchControl=null),this._photoSphereRenderer&&(this._photoSphereRenderer.destroy(),this._photoSphereRenderer=null),this._isReady=!1},PanoViewer.isWebGLAvailable=function(){return s.WebGLUtils.isWebGLAvailable()},PanoViewer.isStableWebGL=function(){return s.WebGLUtils.isStableWebGL()},PanoViewer.isGyroSensorAvailable=function(e){if(\"DeviceMotionEvent\"in window==!1||!window.DeviceMotionEvent)return void(e&&e(!1));var t=void 0;h.race([function(){return new h(function(e,n){t=function(t){var n=null!==t.rotationRate.alpha;e(n)},window.addEventListener(\"devicemotion\",t)})}(),function(){return new h(function(e,t){setTimeout(function(){return e(!1)},1e3)})}()]).then(function(n){window.removeEventListener(\"devicemotion\",t),e&&e(n),PanoViewer.isGyroSensorAvailable=function(e){return e&&e(n),n}})},PanoViewer}(o[\"default\"]);t[\"default\"]=l,l.ERROR_TYPE=u.ERROR_TYPE,l.EVENTS=u.EVENTS,l.ProjectionType=s.PanoImageRenderer.ImageType},function(e,t,n){\"use strict\";t.__esModule=!0,t.PanoViewer=undefined;var i=n(16),r=function(e){return e&&e.__esModule?e:{\"default\":e}}(i);t.PanoViewer=r[\"default\"]},function(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=n(0),r=_interopRequireDefault(i),o=n(8),a=_interopRequireDefault(o),s=n(9),u=_interopRequireDefault(s),c=.21,h=function(e){function SpinViewer(t,n){_classCallCheck(this,SpinViewer);var i=_possibleConstructorReturn(this,e.call(this));i._el=t;var r=n||{},o=r.colCount||1,s=r.rowCount||1;return i._scale=(r.scale||1)*c,i._frameCount=o*s,i._sprites=new u[\"default\"](t,r).on({load:function(e){i.trigger(\"load\",e)},imageError:function(e){i.trigger(\"imageError\",{imageUrl:e.imageUrl})}}),i._panInput=new a[\"default\"].PanInput(i._el,{scale:[i._scale,i._scale]}),i._axes=new a[\"default\"]({angle:{range:[0,359],circular:!0}}).on({change:function(e){var t=Math.floor(e.pos.angle/(360/i._frameCount)),n=i._frameCount-t-1;i._sprites.setFrameIndex(n),i.trigger(\"change\",{frameIndex:n,colRow:i._sprites.getColRow(),angle:e.pos.angle})}}),i._axes.connect(\"angle\",i._panInput),i}return _inherits(SpinViewer,e),SpinViewer.prototype.setScale=function(e){return isNaN(e)||e<0?this:(this._scale=e*c,this._panInput.options.scale=[this._scale,this._scale],this)},SpinViewer.prototype.spinBy=function(e){var t=e.angle,n=t===undefined?0:t,i=e.duration,r=i===undefined?400:i;return this._axes.setBy({angle:n},r),this},SpinViewer}(r[\"default\"]);t[\"default\"]=h},function(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}t.__esModule=!0,t.SpriteImage=t.SpinViewer=undefined;var i=n(18),r=_interopRequireDefault(i),o=n(9),a=_interopRequireDefault(o);t.SpinViewer=r[\"default\"],t.SpriteImage=a[\"default\"],r[\"default\"].VERSION=\"3.0.0-rc\"},function(e,t,n){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=n(0),r=function(e){return e&&e.__esModule?e:{\"default\":e}}(i),o=\"undefined\"==typeof Promise?n(3).Promise:Promise,a={NONE:0,LOADING:1,LOADED:2,ERROR:3},s={READYSTATECHANGE:\"readystatechange\"},u=function(e){function ImageLoader(t){_classCallCheck(this,ImageLoader);var n=_possibleConstructorReturn(this,e.call(this));return n._image=null,n._onceHandlers=[],n._loadStatus=a.NONE,t&&n.set(t),n}return _inherits(ImageLoader,e),ImageLoader.prototype.get=function(){var e=this;return new o(function(t,n){e._image?e._loadStatus===a.LOADED?t(e.getElement()):e._loadStatus===a.LOADING?ImageLoader.isMaybeLoaded(e._image)?(e._loadStatus=a.LOADED,t(e.getElement())):e.on(s.READYSTATECHANGE,function(i){i.type===a.LOADED?t(e.getElement()):n(\"ImageLoader: failed to load images.\")}):n(\"ImageLoader: failed to load images\"):n(\"ImageLoader: image is not defiend\")})},ImageLoader.prototype.set=function(e){var t=this;if(this._loadStatus=a.LOADING,this._image=ImageLoader.createElement(e),ImageLoader.isMaybeLoaded(this._image))return void(this._loadStatus=a.LOADED);this.onceLoaded(this._image,function(){t._loadStatus=a.LOADED,t.trigger(s.READYSTATECHANGE,{type:a.LOADED})},function(){t._loadStatus=a.ERROR,t.trigger(s.READYSTATECHANGE,{type:a.ERROR})})},ImageLoader.createElement=function(e){return(e instanceof Array?e:[e]).map(function(e){var t=e;return\"string\"==typeof e&&(t=new Image,t.crossOrigin=\"anonymous\",t.src=e),t})},ImageLoader.prototype.getElement=function(){return 1===this._image.length?this._image[0]:this._image},ImageLoader.isMaybeLoaded=function(e){return e instanceof Image?0!==e.naturalWidth:!e.some(function(e){return 0===e.naturalWidth})},ImageLoader.prototype.onceLoaded=function(e,t,n){var i=this,r=e instanceof Array?e:[e],a=r.filter(function(e){return!ImageLoader.isMaybeLoaded(e)}),s=a.map(function(e){return new o(function(t,n){i._once(e,\"load\",function(){return t(e)}),i._once(e,\"error\",function(){return n(e)})})});o.all(s).then(function(e){return t(1===r.length?r[0]:r)},function(e){return n(e)})},ImageLoader.prototype._once=function(e,t,n){var i=function fn(i){e.removeEventListener(t,fn),n(i)};e.addEventListener(t,i),this._onceHandlers.push({target:e,type:t,fn:i})},ImageLoader.prototype.getStatus=function(){return this._loadStatus},ImageLoader.prototype.destroy=function(){this._onceHandlers.forEach(function(e){e.target.removeEventListener(e.type,e.fn)}),this._onceHandlers=[],this._image.src=\"\",this._image=null,this._loadStatus=a.NONE},ImageLoader}(r[\"default\"]);t[\"default\"]=u,u.STATUS=a},function(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(0),o=_interopRequireDefault(r),a=n(20),s=_interopRequireDefault(a),u=n(22),c=_interopRequireDefault(u),h=n(10),l=_interopRequireDefault(h),p=n(25),f=_interopRequireDefault(p),d=n(26),_=_interopRequireDefault(d),m=n(1),g=n(23),v=\"undefined\"==typeof Promise?n(3).Promise:Promise,y={EQUIRECTANGULAR:\"equirectangular\",CUBEMAP:\"cubemap\"},w=g.devicePixelRatio||1;w>2&&(w=2);var E={BIND_TEXTURE:\"bindTexture\",IMAGE_LOADED:\"imageLoaded\",ERROR:\"error\",RENDERING_CONTEXT_LOST:\"renderingContextLost\",RENDERING_CONTEXT_RESTORE:\"renderingContextRestore\"},T={INVALID_DEVICE:10,NO_WEBGL:11,FAIL_IMAGE_LOAD:12},I=function(e){function PanoImageRenderer(t,n,i,r,o){_classCallCheck(this,PanoImageRenderer);var a=_possibleConstructorReturn(this,e.call(this));return a.sphericalConfig=o,a.fieldOfView=o.fieldOfView,a.width=n,a.height=i,a._lastQuaternion=null,a._lastYaw=null,a._lastPitch=null,a._lastFieldOfView=null,a.pMatrix=m.mat4.create(),a.mvMatrix=m.mat4.create(),m.mat4.perspective(a.pMatrix,m.glMatrix.toRadian(a.fieldOfView),n/i,.1,100),a.textureCoordBuffer=null,a.vertexBuffer=null,a.indexBuffer=null,a.canvas=a._initCanvas(n,i),a._image=null,a._imageConfig=t&&PanoImageRenderer.extractImageConfig(t),a._imageOrder=t&&t.order,a._imageIsReady=!1,a._shouldForceDraw=!1,a._keepUpdate=!1,a._onContentLoad=a._onContentLoad.bind(a),a._onContentError=a._onContentError.bind(a),t&&a.setImage({image:t,imageType:o.imageType,isVideo:r}),a}return _inherits(PanoImageRenderer,e),PanoImageRenderer.prototype.getContent=function(){return this._image},PanoImageRenderer.prototype.setImage=function(e){var t=e.image,n=e.imageType,i=e.isVideo,r=i!==undefined&&i;return this._imageIsReady=!1,this._isVideo=r,this._setImageType(n),this._contentLoader&&this._contentLoader.destroy(),r?(this._contentLoader=new c[\"default\"],this._keepUpdate=!0):(this._contentLoader=new s[\"default\"],this._keepUpdate=!1),this._contentLoader.set(PanoImageRenderer.extractImageSource(t)),this._image=this._contentLoader.getElement(),this._contentLoader.get().then(this._onContentLoad,this._onContentError)[\"catch\"](function(e){return setTimeout(function(){throw e})})},PanoImageRenderer.extractImageSource=function(e){return\"string\"==typeof e||e instanceof Array||\"IMG\"===e.tagName||\"VIDEO\"===e.tagName?e:e.src},PanoImageRenderer.extractImageConfig=function(e){if(\"string\"==typeof e||e instanceof Array||\"IMG\"===e.tagName||\"VIDEO\"===e.tagName)return{};var t=i({},e);return delete t.src,t},PanoImageRenderer.prototype._setImageType=function(e){e&&this._imageType!==e&&(this._imageType=e,this._isCubeMap=e===y.CUBEMAP,this._renderer=this._isCubeMap?f[\"default\"]:_[\"default\"],this._initWebGL())},PanoImageRenderer.prototype._initCanvas=function(e,t){var n=document.createElement(\"canvas\");return n.width=e,n.height=t,n.style.bottom=0,n.style.left=0,n.style.right=0,n.style.top=0,n.style.margin=\"auto\",n.style.maxHeight=\"100%\",n.style.maxWidth=\"100%\",n.style.outline=\"none\",n.style.position=\"absolute\",this._onWebglcontextlost=this._onWebglcontextlost.bind(this),this._onWebglcontextrestored=this._onWebglcontextrestored.bind(this),n.addEventListener(\"webglcontextlost\",this._onWebglcontextlost),n.addEventListener(\"webglcontextrestored\",this._onWebglcontextrestored),n},PanoImageRenderer.prototype._onContentError=function(e){return this._imageIsReady=!1,this._image=null,this.trigger(E.ERROR,{type:T.FAIL_IMAGE_LOAD,message:\"failed to load image\"}),!1},PanoImageRenderer.prototype._onContentLoad=function(e){return this._imageIsReady=!0,this.trigger(E.IMAGE_LOADED,{content:this._image,isVideo:this._isVideo,projectionType:this._imageType}),!0},PanoImageRenderer.prototype.isImageLoaded=function(){return!!this._image&&this._imageIsReady&&(!this._isVideo||this._image.readyState>=2)},PanoImageRenderer.prototype.bindTexture=function(){var e=this;return new v(function(t,n){if(!e._contentLoader)return void n(\"ImageLoader is not initialized\");e._contentLoader.get().then(function(){return e._bindTexture()},n).then(t)})},PanoImageRenderer.prototype.attachTo=function(e){this.detach(),e.appendChild(this.canvas)},PanoImageRenderer.prototype.forceContextLoss=function(){if(this.hasRenderingContext()){var e=this.context.getExtension(\"WEBGL_lose_context\");e&&e.loseContext()}},PanoImageRenderer.prototype.detach=function(){this.canvas.parentElement&&this.canvas.parentElement.removeChild(this.canvas)},PanoImageRenderer.prototype.destroy=function(){this._contentLoader&&this._contentLoader.destroy(),this.detach(),this.forceContextLoss(),this.off(),this.canvas.removeEventListener(\"webglcontextlost\",this._onWebglcontextlost),this.canvas.removeEventListener(\"webglcontextrestored\",this._onWebglcontextrestored)},PanoImageRenderer.prototype.hasRenderingContext=function(){return!(!this.context||this.context.isContextLost())&&!(this.context&&!this.context.getProgramParameter(this.shaderProgram,this.context.LINK_STATUS))},PanoImageRenderer.prototype._onWebglcontextlost=function(e){e.preventDefault(),this.trigger(E.RENDERING_CONTEXT_LOST)},PanoImageRenderer.prototype._onWebglcontextrestored=function(e){this._initWebGL(),this.trigger(E.RENDERING_CONTEXT_RESTORE)},PanoImageRenderer.prototype.updateFieldOfView=function(e){this.fieldOfView=e,this._updateViewport()},PanoImageRenderer.prototype.updateViewportDimensions=function(e,t){var n=!1;this.width=e,this.height=t;var i=e*w,r=t*w;i!==this.canvas.width&&(this.canvas.width=i,n=!0),r!==this.canvas.height&&(this.canvas.height=r,n=!0),n&&(this._updateViewport(),this._shouldForceDraw=!0)},PanoImageRenderer.prototype._updateViewport=function(){m.mat4.perspective(this.pMatrix,m.glMatrix.toRadian(this.fieldOfView),this.canvas.width/this.canvas.height,.1,100),this.context.viewport(0,0,this.context.drawingBufferWidth,this.context.drawingBufferHeight)},PanoImageRenderer.prototype._initWebGL=function(){try{if(this._initRenderingContext(),this.updateViewportDimensions(this.width,this.height),this.shaderProgram&&this.context.deleteProgram(this.shaderProgram),this.shaderProgram=this._initShaderProgram(this.context),!this.shaderProgram)throw new Error(\"Failed to intialize shaders: \"+l[\"default\"].getErrorNameFromWebGLErrorCode(this.context.getError()));this._initBuffers()}catch(t){return this.trigger(E.ERROR,{type:T.NO_WEBGL,message:\"no webgl support\"}),void this.destroy()}this.context.clearColor(0,0,0,0);var e=this._isCubeMap?this.context.TEXTURE_CUBE_MAP:this.context.TEXTURE_2D;this.texture&&this.context.deleteTexture(this.texture),this.texture=l[\"default\"].createTexture(this.context,e)},PanoImageRenderer.prototype._initRenderingContext=function(){if(!this.hasRenderingContext()){if(!window.WebGLRenderingContext)throw new Error(\"WebGLRenderingContext not available.\");if(this.context=l[\"default\"].getWebglContext(this.canvas),!this.context)throw new Error(\"Failed to acquire 3D rendering context\")}},PanoImageRenderer.prototype._initShaderProgram=function(e){var t=this._renderer.getVertexShaderSource(),n=l[\"default\"].createShader(e,e.VERTEX_SHADER,t);if(!n)return!1;var i=this._renderer.getFragmentShaderSource(),r=l[\"default\"].createShader(e,e.FRAGMENT_SHADER,i);if(!r)return!1;var o=l[\"default\"].createProgram(e,n,r);return o?(e.useProgram(o),o.vertexPositionAttribute=e.getAttribLocation(o,\"aVertexPosition\"),e.enableVertexAttribArray(o.vertexPositionAttribute),o.pMatrixUniform=e.getUniformLocation(o,\"uPMatrix\"),o.mvMatrixUniform=e.getUniformLocation(o,\"uMVMatrix\"),o.samplerUniform=e.getUniformLocation(o,\"uSampler\"),o.textureCoordAttribute=e.getAttribLocation(o,\"aTextureCoord\"),e.enableVertexAttribArray(o.textureCoordAttribute),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT),e.uniform1i(o.samplerUniform,0),o):null},PanoImageRenderer.prototype._initBuffers=function(){var e=this._renderer.getVertexPositionData(),t=this._renderer.getIndexData(),n=this._renderer.getTextureCoordData(this._imageConfig),i=this.context;this.vertexBuffer=l[\"default\"].initBuffer(i,i.ARRAY_BUFFER,new Float32Array(e),3,this.shaderProgram.vertexPositionAttribute),this.indexBuffer=l[\"default\"].initBuffer(i,i.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),1),this.textureCoordBuffer=l[\"default\"].initBuffer(i,i.ARRAY_BUFFER,new Float32Array(n),this._isCubeMap?3:2,this.shaderProgram.textureCoordAttribute)},PanoImageRenderer.prototype._bindTexture=function(){this._renderer.bindTexture(this.context,this.texture,this._image,this._imageConfig),this._shouldForceDraw=!0,this.trigger(E.BIND_TEXTURE)},PanoImageRenderer.prototype.keepUpdate=function(e){e&&!1===this.isImageLoaded()&&(this._shouldForceDraw=!0),this._keepUpdate=e},PanoImageRenderer.prototype.render=function(e,t,n){this.isImageLoaded()&&(!1===this._keepUpdate&&null!==this._lastYaw&&this._lastYaw===e&&null!==this._lastPitch&&this._lastPitch===t&&this.fieldOfView&&this.fieldOfView===n&&!1===this._shouldForceDraw||(n!==undefined&&n!==this.fieldOfView&&this.updateFieldOfView(n),m.mat4.identity(this.mvMatrix),m.mat4.rotateX(this.mvMatrix,this.mvMatrix,-m.glMatrix.toRadian(t)),m.mat4.rotateY(this.mvMatrix,this.mvMatrix,-m.glMatrix.toRadian(e-(this._isCubeMap?0:90))),this._draw(),this._lastYaw=e,this._lastPitch=t,this._shouldForceDraw&&(this._shouldForceDraw=!1)))},PanoImageRenderer.prototype._draw=function(){var e=this.context;e.uniformMatrix4fv(this.shaderProgram.pMatrixUniform,!1,this.pMatrix),e.uniformMatrix4fv(this.shaderProgram.mvMatrixUniform,!1,this.mvMatrix),this._isVideo&&this._bindTexture(),this.indexBuffer&&e.drawElements(e.TRIANGLES,this.indexBuffer.numItems,e.UNSIGNED_SHORT,0)},PanoImageRenderer}(o[\"default\"]);t[\"default\"]=I,I.EVENTS=E,I.ERROR_TYPE=T,I.ImageType=y},function(e,t,n){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}t.__esModule=!0;var i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},r=\"undefined\"==typeof Promise?n(3).Promise:Promise,o={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},a=function(){function VideoLoader(e){_classCallCheck(this,VideoLoader),this._handlers=[],this._sourceCount=0,e&&this.set(e)}return VideoLoader.prototype._appendSourceElement=function(e){var t=void 0,n=void 0;if(\"object\"===(void 0===e?\"undefined\":i(e))?(t=e.src,n=e.type):\"string\"==typeof e&&(t=e),!t)return!1;var r=document.createElement(\"source\");return r.src=t,n&&(r.type=n),this._video.appendChild(r),this._sourceCount++,!0},VideoLoader.prototype.set=function(e){var t=this;this._reset(),e instanceof HTMLVideoElement?this._video=e:\"string\"!=typeof e&&\"object\"!==(void 0===e?\"undefined\":i(e))||(this._video=document.createElement(\"video\"),this._video.crossOrigin=\"anonymous\",e instanceof Array?e.forEach(function(e){return t._appendSourceElement(e)}):this._appendSourceElement(e),this._sourceCount>0?this._video.load():this._video=null)},VideoLoader.prototype.get=function(){var e=this;return new r(function(t,n){e._video?e._video.readyState>=o.HAVE_CURRENT_DATA?t(e._video):e._once(\"loadeddata\",function(){return t(e._video)}):n(\"VideoLoader: video is undefined\")})},VideoLoader.prototype.getElement=function(){return this._video},VideoLoader.prototype.destroy=function(){this._reset()},VideoLoader.prototype._reset=function(){var e=this;this._handlers.forEach(function(t){e._video.removeEventListener(t.type,t.fn)}),this._handlers=[],this._video=null,this._sourceCount=0},VideoLoader.prototype._once=function(e,t){var n=this._video,i=function fn(i){n.removeEventListener(e,fn),t(i)};n.addEventListener(e,i,!0),this._handlers.push({type:e,fn:i})},VideoLoader}();t[\"default\"]=a},function(e,t,n){\"use strict\";t.__esModule=!0;t.devicePixelRatio=window.devicePixelRatio},function(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}t.__esModule=!0,t.WebGLUtils=t.PanoImageRenderer=undefined;var i=n(21),r=_interopRequireDefault(i),o=n(10),a=_interopRequireDefault(o);t.PanoImageRenderer=r[\"default\"],t.WebGLUtils=a[\"default\"]},function(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(13),o=_interopRequireDefault(r),a=n(11),s=_interopRequireDefault(a),u=n(1),c=function(e){function CubeRenderer(){return _classCallCheck(this,CubeRenderer),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(CubeRenderer,e),CubeRenderer.getVertexPositionData=function(){return CubeRenderer._VERTEX_POSITION_DATA=null!==CubeRenderer._VERTEX_POSITION_DATA?CubeRenderer._VERTEX_POSITION_DATA:[1,-1,1,-1,-1,1,-1,1,1,1,1,1,-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,1,-1,1,1,-1,1,1,1,-1,1,1,1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,1,1,-1,-1,1,-1,1,1,1,1,1,1,-1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1],CubeRenderer._VERTEX_POSITION_DATA},CubeRenderer.getIndexData=function(){if(CubeRenderer._INDEX_DATA)return CubeRenderer._INDEX_DATA;for(var e=[],t=CubeRenderer.getVertexPositionData(),n=0;n<t.length/3;n+=4)e.push(n,n+2,n+1,n,n+3,n+2);return CubeRenderer._INDEX_DATA=e,e},CubeRenderer.extractTileConfig=function(e){var t=Array.isArray(e.tileConfig)?e.tileConfig:Array.apply(undefined,Array(6)).map(function(){return e.tileConfig});return t=t.map(function(e){return i({flipHorizontal:!1,rotation:0},e)})},CubeRenderer.extractOrder=function(e){return e.order||\"RLUDBF\"},CubeRenderer.getTextureCoordData=function(e){var t=CubeRenderer.extractOrder(e),n=CubeRenderer.getVertexPositionData(),i=CubeRenderer.extractTileConfig(e);return\"BFUDRL\".split(\"\").map(function(e){return i[t.indexOf(e)]}).map(function(e,t){for(var i=parseInt(e.rotation/90,10),r=e.flipHorizontal?[0,1,2,3]:[1,0,3,2],o=0;o<Math.abs(i);o++)e.flipHorizontal&&i>0||!e.flipHorizontal&&i<0?r.push(r.shift()):r.unshift(r.pop());for(var a=n.slice(12*t,12*t+12),s=[],u=0;u<4;u++)s[r[u]]=a.splice(0,3);return s}).join().split(\",\").map(function(e){return parseInt(e,10)})},CubeRenderer.getVertexShaderSource=function(){return\"\\n\\t\\t\\tattribute vec3 aVertexPosition;\\n\\t\\t\\tattribute vec3 aTextureCoord;\\n\\t\\t\\tuniform mat4 uMVMatrix;\\n\\t\\t\\tuniform mat4 uPMatrix;\\n\\t\\t\\tvarying highp vec3 vVertexDirectionVector;\\n\\t\\t\\tvoid main(void) {\\n\\t\\t\\t\\tgl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\\n\\t\\t\\t\\tvVertexDirectionVector = aTextureCoord;\\n\\t\\t\\t}\"},CubeRenderer.getFragmentShaderSource=function(){return\"\\n\\t\\t\\tvarying highp vec3 vVertexDirectionVector;\\n\\t\\t\\tuniform samplerCube uSampler;\\n\\t\\t\\tvoid main(void) {\\n\\t\\t\\t\\tgl_FragColor = textureCube(uSampler, vVertexDirectionVector);\\n\\t\\t\\t}\"},CubeRenderer.bindTexture=function(e,t,n,i){var r=CubeRenderer.extractOrder(i),a={};if(r.split(\"\").forEach(function(e,t){a[e]=t}),n)try{if(e.bindTexture(e.TEXTURE_CUBE_MAP,t),n instanceof Array)for(var s=0;s<6;s++){var u=a[\"RLUDBF\"[s]];e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n[u])}else for(var c=(0,o[\"default\"])(),h=CubeRenderer.getMaxCubeMapTextureSize(e,n,c),l=0;l<6;l++){var p=a[\"RLUDBF\"[l]],f=CubeRenderer.extractTileFromImage(n,p,h);e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,f)}}catch(d){}},CubeRenderer.getSourceTileSize=function(e){var t=e.naturalWidth||e.videoWidth,n=e.naturalHeight||e.videoHeight,i=t/n;return i===1/6?t:6===i?n:i===2/3?t/2:t/3},CubeRenderer.extractTileFromImage=function(e,t,n){var i=e.naturalWidth||e.videoWidth,r=CubeRenderer.getSourceTileSize(e),o=document.createElement(\"canvas\");o.width=n,o.height=n;var a=o.getContext(\"2d\"),s=i/r,u=r*t%(r*s),c=parseInt(t/s,10)*r;return a.drawImage(e,u,c,r,r,0,0,n,n),o},CubeRenderer.texImage2D=function(e,t){var n=(0,o[\"default\"])(),i=t.naturalWidth||t.videoWidth,r=t.naturalHeight||t.videoHeight,a=CubeRenderer.hasDrawImageBug(n),s=CubeRenderer.getMaxCubeMapTextureSize(e,t,n),u=CubeRenderer.getHightScale(i,n),c=i/r,h=void 0;if(h=c===1/6?i:6===c?r:c===2/3?i/2:i/3,a){var l=document.createElement(\"canvas\"),p=l.getContext(\"2d\");l.width=3*s,l.height=s;var f=document.createElement(\"canvas\"),d=f.getContext(\"2d\");f.width=s,f.height=s;for(var _=0;_<2;_++){p.save(),p.translate(0,s),p.rotate(-Math.PI/2),p.scale(1/3,3),p.drawImage(t,0,3*i*_*u,i,r/2*u,0,0,l.width,l.height),p.restore();for(var m=0;m<3;m++)d.save(),d.translate(s,0),d.rotate(Math.PI/2),d.drawImage(l,m*i,0,i,i,0,0,s,s),d.restore(),e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+3*_+m,0,e.RGBA,s,s,0,e.RGBA,e.UNSIGNED_BYTE,f)}}else{var g=document.createElement(\"canvas\");g.width=s,g.height=s;for(var v=g.getContext(\"2d\"),y=i/h,w=0;w<6;w++){var E=h*w%h,T=parseInt(w/y,10)*(h*u);v.drawImage(t,E,T,h,h*u,0,0,s,s),e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+w,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,g)}}},CubeRenderer.getMaxCubeMapTextureSize=function(e,t,n){var i=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),r=CubeRenderer.getSourceTileSize(t);if(\"ie\"===n.browser.name&&11===parseInt(n.browser.version,10)&&!u.util.isPowerOfTwo(r))for(var o=1;o<i;o*=2)if(!(o<r)){r=o;break}return\"ios\"===n.os.name&&9===parseInt(n.os.version,10)&&(r=1024),\"ios\"===n.os.name&&8===parseInt(n.os.version,10)&&(r=512),Math.min(i,r)},CubeRenderer.getHightScale=function(e,t){var n=1;return\"android\"===t.os.name&&(parseFloat(t.os.version)<=4.3&&\"chrome\"===t.browser.name||\"5.0.2\"===t.os.version&&\"samsung internet\"===t.browser.name||\"5.1.1\"===t.os.version&&\"samsung internet\"===t.browser.name&&-1!==window.navigator.userAgent.indexOf(\"SM-N920\")&&parseFloat(window.navigator.userAgent.split(\"SamsungBrowser/\")[1].split(\" \")[0])<4?n=768/e:\"5.0\"===t.os.version&&\"samsung internet\"===t.browser.name&&-1!==window.navigator.userAgent.indexOf(\"SM-G900\")&&(n=1344/e)),n},CubeRenderer.hasDrawImageBug=function(e){var t=!1;return(\"samsung internet\"===e.browser.name&&parseFloat(window.navigator.userAgent.split(\"SamsungBrowser/\")[1].split(\" \")[0])<5||\"ios\"===e.os.name&&parseInt(e.os.version,10)<=9)&&(t=!0),t},CubeRenderer}(s[\"default\"]);t[\"default\"]=c,c._VERTEX_POSITION_DATA=null,c._INDEX_DATA=null},function(e,t,n){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=n(11),r=function(e){return e&&e.__esModule?e:{\"default\":e}}(i),o=function(e){function SphereRenderer(){return _classCallCheck(this,SphereRenderer),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(SphereRenderer,e),SphereRenderer.getVertexPositionData=function(){return null===SphereRenderer._VERTEX_POSITION_DATA&&SphereRenderer._initData(),SphereRenderer._VERTEX_POSITION_DATA},SphereRenderer.getIndexData=function(){return null===SphereRenderer._INDEX_DATA&&SphereRenderer._initData(),SphereRenderer._INDEX_DATA},SphereRenderer.getTextureCoordData=function(){return null===SphereRenderer._TEXTURE_COORD_DATA&&SphereRenderer._initData(),SphereRenderer._TEXTURE_COORD_DATA},SphereRenderer.getVertexShaderSource=function(){return\"\\n\\t\\t\\tattribute vec3 aVertexPosition;\\n\\t\\t\\tattribute vec2 aTextureCoord;\\n\\t\\t\\tuniform mat4 uMVMatrix;\\n\\t\\t\\tuniform mat4 uPMatrix;\\n\\t\\t\\tvarying highp vec2 vTextureCoord;\\n\\t\\t\\tvoid main(void) {\\n\\t\\t\\t\\tgl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\\n\\t\\t\\t\\tvTextureCoord = aTextureCoord;\\n\\t\\t\\t}\"},SphereRenderer.getFragmentShaderSource=function(){return\"\\n\\t\\t\\tvarying highp vec2 vTextureCoord;\\n\\t\\t\\tuniform sampler2D uSampler;\\n\\t\\t\\tvoid main(void) {\\n\\t\\t\\t\\tgl_FragColor = texture2D(\\n\\t\\t\\t\\t\\tuSampler,\\n\\t\\t\\t\\t\\tvec2(vTextureCoord.s, vTextureCoord.t)\\n\\t\\t\\t\\t);\\n\\t\\t\\t}\"},SphereRenderer.bindTexture=function(e,t,n){if(n){var i=Math.max(n.width,n.height),r=e.getParameter(e.MAX_TEXTURE_SIZE);if(i>r)return void console.warn(\"Image width(\"+i+\") exceeds device limit(\"+r+\"))\");e.activeTexture(e.TEXTURE0),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.bindTexture(e.TEXTURE_2D,t),this.texImage2D(e,n)}},SphereRenderer.texImage2D=function(e,t){e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t)},SphereRenderer._initData=function(){var e=[],t=[],n=[],i=void 0,r=void 0;for(i=0;i<=60;i++){var o=(i/60-.5)*Math.PI,a=Math.sin(o),s=Math.cos(o);for(r=0;r<=60;r++){var u=2*(r/60-.5)*Math.PI,c=Math.sin(u),h=Math.cos(u),l=h*s,p=a,f=c*s,d=r/60,_=i/60;if(e.push(d,_),t.push(2*l,2*p,2*f),60!==r&&60!==i){var m=61*i+r,g=m+60+1;n.push(m,g,m+1,g,g+1,m+1)}}}SphereRenderer._VERTEX_POSITION_DATA=t,SphereRenderer._TEXTURE_COORD_DATA=e,SphereRenderer._INDEX_DATA=n},SphereRenderer}(r[\"default\"]);t[\"default\"]=o,o._VERTEX_POSITION_DATA=null,o._TEXTURE_COORD_DATA=null,o._INDEX_DATA=null},function(e,t,n){\"use strict\";var i=n(6),r={INVALID_DEVICE:10,NO_WEBGL:11,FAIL_IMAGE_LOAD:12,FAIL_BIND_TEXTURE:13,INVALID_RESOURCE:14,RENDERING_CONTEXT_LOST:15},o={READY:\"ready\",VIEW_CHANGE:\"viewChange\",ANIMATION_END:\"animationEnd\",ERROR:\"error\",CONTENT_LOADED:\"contentLoaded\"};e.exports={GYRO_MODE:i.GYRO_MODE,EVENTS:o,ERROR_TYPE:r}},function(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(0),o=_interopRequireDefault(r),a=n(8),s=_interopRequireDefault(a),u=n(5),c=n(33),h=_interopRequireDefault(c),l=n(32),p=_interopRequireDefault(l),f=n(1),d=n(6),_=[-d.YAW_RANGE_HALF,d.YAW_RANGE_HALF],m=[-d.PITCH_RANGE_HALF,d.PITCH_RANGE_HALF],g=function(e){function YawPitchControl(t){_classCallCheck(this,YawPitchControl);var n=_possibleConstructorReturn(this,e.call(this)),r=i({element:null,yaw:0,pitch:0,fov:65,showPolePoint:!1,useZoom:!0,useKeyboard:!0,useGyro:d.GYRO_MODE.YAWPITCH,touchDirection:d.TOUCH_DIRECTION_ALL,yawRange:_,pitchRange:m,fovRange:[30,110],aspectRatio:1},t);return n._element=r.element,n._initialFov=r.fov,n._enabled=!1,n._isAnimating=!1,n._initAxes(r),n.option(r),n}return _inherits(YawPitchControl,e),YawPitchControl.prototype._initAxes=function(e){var t=this,n=YawPitchControl._updateYawRange(e.yawRange,e.fov,e.aspectRatio),i=YawPitchControl._updatePitchRange(e.pitchRange,e.fov,e.showPolePoint),r=n[1]-n[0]<360?[!1,!1]:[!0,!0];this.axesPanInput=new s[\"default\"].PanInput(this._element),this.axesWheelInput=new h[\"default\"](this._element,{scale:4}),this.axesTiltMotionInput=u.SUPPORT_DEVICEMOTION?new p[\"default\"](this._element):null,this.axesPinchInput=u.SUPPORT_TOUCH?new s[\"default\"].PinchInput(this._element,{scale:-1}):null,this.axesMoveKeyInput=new s[\"default\"].MoveKeyInput(this._element,{scale:[-6,6]}),this.axes=new s[\"default\"]({yaw:{range:n,circular:r,bounce:[0,0]},pitch:{range:i,circular:[!1,!1],bounce:[0,0]},fov:{range:e.fovRange,circular:[!1,!1],bounce:[0,0]}},{deceleration:d.MC_DECELERATION,maximumDuration:d.MC_MAXIMUM_DURATION},{yaw:e.yaw,pitch:e.pitch,fov:e.fov}).on({hold:function(e){t.trigger(\"hold\",{isTrusted:e.isTrusted})},change:function(e){0!==e.delta.fov&&(t._setPanScale(e.pos.fov),t._updateControlScale(e)),t._triggerChange(e)},release:function(e){t._triggerChange(e)},animationStart:function(e){},animationEnd:function(e){t.trigger(\"animationEnd\",{isTrusted:e.isTrusted})}})},YawPitchControl.prototype._setPanScale=function(e){var t=parseInt((0,u.getComputedStyle)(this._element).height,10),n=d.MC_BIND_SCALE[0]*e/this._initialFov*d.PAN_SCALE/t;this.axesPanInput.options.scale=[n,n],this.axes.options.deceleration=d.MC_DECELERATION*e/d.MAX_FIELD_OF_VIEW},YawPitchControl.prototype.option=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.length;if(0===r)return this._getOptions();if(1===r&&\"string\"==typeof t[0])return this._getOptions(t[0]);var o=i({},this.options),a={},s=[];return 1===r?(s=Object.keys(t[0]),a=i({},t[0])):r>=2&&(s.push(t[0]),a[t[0]]=t[1]),this._setOptions(this._getValidatedOptions(a)),this._applyOptions(s,o),this},YawPitchControl.prototype._getValidatedOptions=function(e){return e.yawRange&&(e.yawRange=this._getValidYawRange(e.yawRange,e.fov,e.aspectRatio)),e.pitchRange&&(e.pitchRange=this._getValidPitchRange(e.pitchRange,e.fov)),e},YawPitchControl.prototype._getOptions=function(e){var t=void 0;return\"string\"==typeof e?t=this.options[e]:0===arguments.length&&(t=this.options),t},YawPitchControl.prototype._setOptions=function(e){for(var t in e)this.options[t]=e[t]},YawPitchControl.prototype._applyOptions=function(e,t){if(e.some(function(e){return\"showPolePoint\"===e||\"fov\"===e||\"aspectRatio\"===e||\"yawRange\"===e||\"pitchRange\"===e})&&this._updateControlScale(),e.some(function(e){return\"fovRange\"===e})){var n=this.options.fovRange,i=this.axes.get().fov,r=this.axes.get().fov;f.vec2.copy(this.axes.axis.fov.range,n),r<n[0]?r=n[0]:i>n[1]&&(r=n[1]),i!==r&&(this.axes.setTo({fov:r},0),this._updateControlScale())}if(e.some(function(e){return\"useGyro\"===e})&&this.axesTiltMotionInput){var o=this.options.useGyro;o===d.GYRO_MODE.YAWPITCH?this.axes.connect([\"yaw\",\"pitch\"],this.axesTiltMotionInput):o===d.GYRO_MODE.NONE&&this.axes.disconnect(this.axesTiltMotionInput)}if(e.some(function(e){return\"useKeyboard\"===e})){this.options.useKeyboard?this.axes.connect([\"yaw\",\"pitch\"],this.axesMoveKeyInput):this.axes.disconnect(this.axesMoveKeyInput)}if(e.some(function(e){return\"useZoom\"===e})){this.options.useZoom?(this.axes.connect([\"fov\"],this.axesWheelInput),this.axesPinchInput&&this.axes.connect([\"fov\"],this.axesPinchInput)):(this.axes.disconnect(this.axesWheelInput),this.axesPinchInput&&this.axes.disconnect(this.axesPinchInput))}},YawPitchControl.prototype._getValidYawRange=function(e,t,n){var i=YawPitchControl.adjustAspectRatio(n||this.options.aspectRatio||1),r=t||this.axes.get().fov,o=r*i;return e[1]-e[0]>=o?e:this.options.yawRange||_},YawPitchControl.prototype._getValidPitchRange=function(e,t){var n=t||this.axes.get().fov;return e[1]-e[0]>=n?e:this.options.pitchRange||m},YawPitchControl.prototype._updateControlScale=function(e){var t=this.options,n=this.axes.get().fov,i=YawPitchControl._updatePitchRange(t.pitchRange,n,t.showPolePoint),r=YawPitchControl._updateYawRange(t.yawRange,n,t.aspectRatio),o=this.axes.get(),a=o.yaw,s=o.pitch;return f.vec2.copy(this.axes.axis.yaw.range,r),f.vec2.copy(this.axes.axis.pitch.range,i),this.axes.axis.yaw.circular=r[1]-r[0]<360?[!1,!1]:[!0,!0],a<r[0]?a=r[0]:a>r[1]&&(a=r[1]),s<i[0]?s=i[0]:s>i[1]&&(s=i[1]),e&&e.set({yaw:a,pitch:s}),this.axes.setTo({yaw:a,pitch:s},0),this},YawPitchControl._updatePitchRange=function(e,t,n){var i=e[1]-e[0],r=t/2,o=i<180;return n&&!o?e.map(function(e){return+e.toFixed(5)}):[e[0]+r,e[1]-r].map(function(e){return+e.toFixed(5)})},YawPitchControl._updateYawRange=function(e,t,n){var i=e[1]-e[0];if(i>=360)return e.map(function(e){return+e.toFixed(5)});var r=1,o=YawPitchControl.adjustAspectRatio(n),a=t/2*o;return i>290?r=.794:i>125&&(r=.98),[e[0]*r+a,e[1]*r-a].map(function(e){return+e.toFixed(5)})},YawPitchControl.prototype._triggerChange=function(e){var t=this.axes.get(),n=this.options,i={targetElement:n.element,isTrusted:e.isTrusted};i.yaw=t.yaw,i.pitch=t.pitch,i.fov=t.fov,this.trigger(\"change\",i)},YawPitchControl.adjustAspectRatio=function(e){for(var t=[.52,.54,.563,.57,.584,.59,.609,.67,.702,.72,.76,.78,.82,.92,.97,1,1.07,1.14,1.19,1.25,1.32,1.38,1.4,1.43,1.53,1.62,1.76,1.77,1.86,1.96,2.26,2.3,2.6,3,5,6],n=[.51,.54,.606,.56,.628,.63,.647,.71,.736,.757,.78,.77,.8,.89,.975,1,1.07,1.1,1.15,1.18,1.22,1.27,1.3,1.33,1.39,1.45,1.54,1.55,1.58,1.62,1.72,1.82,1.92,2,2.24,2.3],i=-1,r=0;r<t.length-1;r++)if(t[r]<=e&&t[r+1]>=e){i=r;break}if(-1===i)return t[0]>e?n[0]:n[n[0].length-1];var o=t[i],a=t[i+1],s=n[i],u=n[i+1];return YawPitchControl.lerp(s,u,(e-o)/(a-o))},YawPitchControl.lerp=function(e,t,n){return e+n*(t-e)},YawPitchControl.prototype.enable=function(){return this._enabled?this:(this.axes.connect([\"yaw\",\"pitch\"],this.axesPanInput),this._applyOptions(Object.keys(this.options),this.options),this._setPanScale(this.getFov()),this._enabled=!0,this)},YawPitchControl.prototype.disable=function(e){return this._enabled?(e||this._resetOrientation(),this.axes.disconnect(),this._enabled=!1,this):this},YawPitchControl.prototype._resetOrientation=function(){var e=this.options;return this.axes.setTo({yaw:e.yaw,pitch:e.pitch,fov:e.fov},0),this},YawPitchControl.prototype.lookAt=function(e,t){var n=e.yaw,i=e.pitch,r=e.fov,o=this.axes.get(),a=n===undefined?0:n-o.yaw,s=i===undefined?0:i-o.pitch,u=r===undefined?0:r-o.fov;this.axes.setBy({yaw:a,pitch:s,fov:u},t)},YawPitchControl.prototype.get=function(){return this.axes.get()},YawPitchControl.prototype.getYaw=function(){return this.axes.get().yaw},YawPitchControl.prototype.getPitch=function(){return this.axes.get().pitch},YawPitchControl.prototype.getFov=function(){return this.axes.get().fov},YawPitchControl.prototype.destroy=function(){this.axes&&this.axes.destroy(),this.axisPanInput&&this.axisPanInput.destroy(),this.axesWheelInput&&this.axesWheelInput.destroy(),this.axesTiltMotionInput&&this.axesTiltMotionInput.destroy(),this.axesPinchInput&&this.axesPinchInput.destroy(),this.axesMoveKeyInput&&this.axesMoveKeyInput.destroy()},YawPitchControl}(o[\"default\"]);g.VERSION=\"3.0.0-rc\",t[\"default\"]=g},function(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}t.__esModule=!0;var i=n(4),r=_interopRequireDefault(i),o=n(40),a=_interopRequireDefault(o);a[\"default\"].prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var n=new r[\"default\"].Quaternion;n.copy(this.filterQ),n.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(n),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var i=new r[\"default\"].Quaternion;i.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),i.inverse();var o=new r[\"default\"].Quaternion;o.copy(this.filterQ),o.multiply(i),this.filterQ.slerp(o,1-this.kFilter),this.previousFilterQ.copy(this.filterQ),this.isFilterQuaternionInitialized||(this.isFilterQuaternionInitialized=!0)},a[\"default\"].prototype.getOrientation=function(){return this.isFilterQuaternionInitialized?this.filterQ:null},t[\"default\"]=a[\"default\"]},function(e,t,n){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=n(0),r=function(e){return e&&e.__esModule?e:{\"default\":e}}(i),o=n(1),a=n(5),s=function(e){function DeviceMotion(){_classCallCheck(this,DeviceMotion);var t=_possibleConstructorReturn(this,e.call(this));return t._onDeviceMotion=t._onDeviceMotion.bind(t),t._onDeviceOrientation=t._onDeviceOrientation.bind(t),t.isAndroid=-1!==a.window.navigator.userAgent.indexOf(\"Android\"),t.stillGyroVec=o.vec3.create(),t.rawGyroVec=o.vec3.create(),t.adjustedGyroVec=o.vec3.create(),t._timer=null,t.lastDevicemotionTimestamp=0,t._isEnabled=!1,t.enable(),t}return _inherits(DeviceMotion,e),DeviceMotion.prototype._onDeviceOrientation=function(){var e=this;this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){(new Date).getTime()-e.lastDevicemotionTimestamp<200&&o.vec3.copy(e.stillGyroVec,e.rawGyroVec)},200)},DeviceMotion.prototype._onDeviceMotion=function(e){0!==e.interval&&(this.isAndroid&&(o.vec3.set(this.rawGyroVec,e.rotationRate.alpha||0,e.rotationRate.beta||0,e.rotationRate.gamma||0),o.vec3.subtract(this.adjustedGyroVec,this.rawGyroVec,this.stillGyroVec),this.lastDevicemotionTimestamp=(new Date).getTime(),e.adjustedRotationRate={alpha:this.adjustedGyroVec[0],beta:this.adjustedGyroVec[1],gamma:this.adjustedGyroVec[2]}),this.trigger(\"devicemotion\",{inputEvent:e}))},DeviceMotion.prototype.enable=function(){this.isAndroid&&a.window.addEventListener(\"deviceorientation\",this._onDeviceOrientation),a.window.addEventListener(\"devicemotion\",this._onDeviceMotion),this._isEnabled=!0},DeviceMotion.prototype.disable=function(){this.isAndroid&&a.window.removeEventListener(\"deviceorientation\",this._onDeviceOrientation),a.window.removeEventListener(\"devicemotion\",this._onDeviceMotion),this._isEnabled=!1},DeviceMotion.prototype.isEnabled=function(){return this._isEnabled},DeviceMotion}(r[\"default\"]);t[\"default\"]=s},function(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=n(0),r=_interopRequireDefault(i),o=n(41),a=_interopRequireDefault(o),s=n(4),u=_interopRequireDefault(s),c=n(7),h=_interopRequireDefault(c),l=n(5),p=n(1),f=n(30),d=_interopRequireDefault(f),_=n(29),m=_interopRequireDefault(_),g=.98,v=.04,y=function(e){function FusionPoseSensor(){_classCallCheck(this,FusionPoseSensor);var t=_possibleConstructorReturn(this,e.call(this));return t.deviceMotion=new d[\"default\"],t.accelerometer=new u[\"default\"].Vector3,t.gyroscope=new u[\"default\"].Vector3,t._onDeviceMotionChange=t._onDeviceMotionChange.bind(t),t._onScreenOrientationChange=t._onScreenOrientationChange.bind(t),t.filter=new m[\"default\"](g),t.posePredictor=new a[\"default\"](v),t.filterToWorldQ=new u[\"default\"].Quaternion,t.isFirefoxAndroid=h[\"default\"].isFirefoxAndroid(),t.isIOS=h[\"default\"].isIOS(),t._isEnabled=!1,t.isIOS?t.filterToWorldQ.setFromAxisAngle(new u[\"default\"].Vector3(1,0,0),Math.PI/2):t.filterToWorldQ.setFromAxisAngle(new u[\"default\"].Vector3(1,0,0),-Math.PI/2),t.inverseWorldToScreenQ=new u[\"default\"].Quaternion,t.worldToScreenQ=new u[\"default\"].Quaternion,t.originalPoseAdjustQ=new u[\"default\"].Quaternion,t.originalPoseAdjustQ.setFromAxisAngle(new u[\"default\"].Vector3(0,0,1),-l.window.orientation*Math.PI/180),t._setScreenTransform(),h[\"default\"].isLandscapeMode()&&t.filterToWorldQ.multiply(t.inverseWorldToScreenQ),t.resetQ=new u[\"default\"].Quaternion,t.deviceMotion.on(\"devicemotion\",t._onDeviceMotionChange),t.enable(),t}return _inherits(FusionPoseSensor,e),FusionPoseSensor.prototype.enable=function(){this.isEnabled()||(this.deviceMotion.enable(),this._isEnabled=!0,l.window.addEventListener(\"orientationchange\",this._onScreenOrientationChange))},FusionPoseSensor.prototype.disable=function(){this.isEnabled()&&(this.deviceMotion.disable(),this._isEnabled=!1,l.window.removeEventListener(\"orientationchange\",this._onScreenOrientationChange))},FusionPoseSensor.prototype.isEnabled=function(){return this._isEnabled},FusionPoseSensor.prototype.destroy=function(){this.disable(),this.deviceMotion=null},FusionPoseSensor.prototype._triggerChange=function(){var e=this.getOrientation();if(e)return this._prevOrientation?void(p.quat.equals(this._prevOrientation,e)||this.trigger(\"change\",{quaternion:e})):void(this._prevOrientation=e)},FusionPoseSensor.prototype.getOrientation=function(){var e=this.filter.getOrientation();if(!e)return null;var t=this._convertFusionToPredicted(e);return t=p.quat.fromValues(t.x,t.y,t.z,t.w),p.quat.normalize(t,t)},FusionPoseSensor.prototype._convertFusionToPredicted=function(e){this.predictedQ=this.posePredictor.getPrediction(e,this.gyroscope,this.previousTimestampS);var t=new u[\"default\"].Quaternion;return t.copy(this.filterToWorldQ),t.multiply(this.resetQ),t.multiply(this.predictedQ),t.multiply(this.worldToScreenQ),t},FusionPoseSensor.prototype._onDeviceMotionChange=function(e){var t=e.inputEvent,n=t,i=n.accelerationIncludingGravity,r=n.adjustedRotationRate||n.rotationRate,o=n.timeStamp/1e3;this.isFirefoxAndroid&&(o/=1e3),this.accelerometer.set(-i.x,-i.y,-i.z),this.gyroscope.set(r.alpha,r.beta,r.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,o),this.filter.addGyroMeasurement(this.gyroscope,o),this._triggerChange(),this.previousTimestampS=o},FusionPoseSensor.prototype._onScreenOrientationChange=function(e){this._setScreenTransform(l.window.orientation)},FusionPoseSensor.prototype._setScreenTransform=function(){switch(this.worldToScreenQ.set(0,0,0,1),l.window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new u[\"default\"].Vector3(0,0,1),-.5*Math.PI);break;case-90:this.worldToScreenQ.setFromAxisAngle(new u[\"default\"].Vector3(0,0,1),.5*Math.PI);break;case 180:this.worldToScreenQ.setFromAxisAngle(new u[\"default\"].Vector3(0,0,1),-1*Math.PI)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},FusionPoseSensor}(r[\"default\"]);t[\"default\"]=y},function(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function getDeltaYaw(e,t){var n=c.util.getRotationDelta(e,t,c.ROTATE_CONSTANT.YAW_DELTA_BY_YAW);return c.util.getRotationDelta(e,t,c.ROTATE_CONSTANT.YAW_DELTA_BY_ROLL)*Math.sin(c.util.extractPitchFromQuat(t))+n}function getDeltaPitch(e,t){return c.util.getRotationDelta(e,t,c.ROTATE_CONSTANT.PITCH_DELTA)}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(0),o=_interopRequireDefault(r),a=n(12),s=n(31),u=_interopRequireDefault(s),c=n(1),h=function(e){function TiltMotionInput(t,n){_classCallCheck(this,TiltMotionInput);var r=_possibleConstructorReturn(this,e.call(this));return r.element=t,r._prevQuaternion=null,r._quaternion=null,r.fusionPoseSensor=null,r.options=i({scale:1,threshold:0},n),r._onPoseChange=r._onPoseChange.bind(r),r}return _inherits(TiltMotionInput,e),TiltMotionInput.prototype.mapAxes=function(e){this.axes=e},TiltMotionInput.prototype.connect=function(e){return this.observer?this:(this.observer=e,this.fusionPoseSensor=new u[\"default\"],this.fusionPoseSensor.enable(),this._attachEvent(),this)},TiltMotionInput.prototype.disconnect=function(){return this.observer?(this._dettachEvent(),this.fusionPoseSensor.disable(),this.fusionPoseSensor.destroy(),this.fusionPoseSensor=null,this.observer=null,this):this},TiltMotionInput.prototype.destroy=function(){this.disconnect(),this.element=null,this.options=null,this.axes=null,this._prevQuaternion=null,this._quaternion=null},TiltMotionInput.prototype._onPoseChange=function(e){if(!this._prevQuaternion)return this._prevQuaternion=c.quat.clone(e.quaternion),void(this._quaternion=c.quat.clone(e.quaternion));c.quat.copy(this._prevQuaternion,this._quaternion),c.quat.copy(this._quaternion,e.quaternion),this.observer.change(this,e,(0,a.toAxis)(this.axes,[getDeltaYaw(this._prevQuaternion,this._quaternion),getDeltaPitch(this._prevQuaternion,this._quaternion)]))},TiltMotionInput.prototype._attachEvent=function(){this.fusionPoseSensor.on(\"change\",this._onPoseChange)},TiltMotionInput.prototype._dettachEvent=function(){this.fusionPoseSensor.off(\"change\",this._onPoseChange)},TiltMotionInput}(o[\"default\"]);t[\"default\"]=h},function(e,t,n){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(0),o=function(e){return e&&e.__esModule?e:{\"default\":e}}(r),a=n(12),s=function(e){function WheelInput(t,n){_classCallCheck(this,WheelInput);var r=_possibleConstructorReturn(this,e.call(this));return r.element=t,r.options=i({scale:1,threshold:0},n),r._onWheel=r._onWheel.bind(r),r}return _inherits(WheelInput,e),WheelInput.prototype.mapAxes=function(e){this.axes=e},WheelInput.prototype.connect=function(e){return this.observer?this:(this.observer=e,this._attachEvent(),this)},WheelInput.prototype.disconnect=function(){return this.observer?(this.observer=null,this._dettachEvent(),this):this},WheelInput.prototype.destroy=function(){this.disconnect(),this.element=null,this.options=null,this.axes=null},WheelInput.prototype._onWheel=function(e){e.preventDefault(),0!==e.deltaY&&this.observer.change(this,e,(0,a.toAxis)(this.axes,[(e.deltaY<0?-1:1)*this.options.scale]))},WheelInput.prototype._attachEvent=function(){this.element.addEventListener(\"wheel\",this._onWheel,!1)},WheelInput.prototype._dettachEvent=function(){this.element.removeEventListener(\"wheel\",this._onWheel,!1)},WheelInput}(o[\"default\"]);t[\"default\"]=s},function(e,t,n){\"use strict\";var i=n(2),r=function(e){return e&&e.__esModule?e:{\"default\":e}}(i),o={};o.create=function(){var e=new r[\"default\"].ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.rotateX=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],h=t[9],l=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*r+c*i,e[5]=a*r+h*i,e[6]=s*r+l*i,e[7]=u*r+p*i,e[8]=c*r-o*i,e[9]=h*r-a*i,e[10]=l*r-s*i,e[11]=p*r-u*i,e},o.rotateY=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],c=t[8],h=t[9],l=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r-c*i,e[1]=a*r-h*i,e[2]=s*r-l*i,e[3]=u*r-p*i,e[8]=o*i+c*r,e[9]=a*i+h*r,e[10]=s*i+l*r,e[11]=u*i+p*r,e},o.perspective=function(e,t,n,i,r){var o=1/Math.tan(t/2),a=1/(i-r);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(r+i)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*r*i*a,e[15]=0,e},e.exports=o},function(e,t,n){\"use strict\";var i=n(2),r=function(e){return e&&e.__esModule?e:{\"default\":e}}(i),o={};o.clone=function(e){var t=new r[\"default\"].ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.fromValues=function(e,t,n,i){var o=new r[\"default\"].ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=i,o},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.normalize=function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=n*n+i*i+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=i*a,e[2]=r*a,e[3]=o*a),e},o.equals=function(e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=t[0],u=t[1],c=t[2],h=t[3];return Math.abs(n-s)<=r[\"default\"].EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r[\"default\"].EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=r[\"default\"].EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-h)<=r[\"default\"].EPSILON*Math.max(1,Math.abs(a),Math.abs(h))},e.exports=o},function(e,t,n){\"use strict\";var i=n(2),r=(function(e){e&&e.__esModule}(i),{});r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},e.exports=r},function(e,t,n){\"use strict\";var i=n(2),r=function(e){return e&&e.__esModule?e:{\"default\":e}}(i),o={};o.create=function(){var e=new r[\"default\"].ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},o.fromValues=function(e,t,n){var i=new r[\"default\"].ARRAY_TYPE(3);return i[0]=e,i[1]=t,i[2]=n,i},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},o.length=function(e){var t=e[0],n=e[1],i=e[2];return Math.sqrt(t*t+n*n+i*i)},o.normalize=function(e,t){var n=t[0],i=t[1],r=t[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.cross=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=n[0],s=n[1],u=n[2];return e[0]=r*u-o*s,e[1]=o*a-i*u,e[2]=i*s-r*a,e},o.transformQuat=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=n[0],s=n[1],u=n[2],c=n[3],h=c*i+s*o-u*r,l=c*r+u*i-a*o,p=c*o+a*r-s*i,f=-a*i-s*r-u*o;return e[0]=h*c+f*-a+l*-u-p*-s,e[1]=l*c+f*-s+p*-a-h*-u,e[2]=p*c+f*-u+h*-s-l*-a,e},e.exports=o},function(e,t){function defaultSetTimout(){throw new Error(\"setTimeout has not been defined\")}function defaultClearTimeout(){throw new Error(\"clearTimeout has not been defined\")}function runTimeout(e){if(n===setTimeout)return setTimeout(e,0);if((n===defaultSetTimout||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function runClearTimeout(e){if(i===clearTimeout)return clearTimeout(e);if((i===defaultClearTimeout||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}function cleanUpNextTick(){s&&o&&(s=!1,o.length?a=o.concat(a):u=-1,a.length&&drainQueue())}function drainQueue(){if(!s){var e=runTimeout(cleanUpNextTick);s=!0;for(var t=a.length;t;){for(o=a,a=[];++u<t;)o&&o[u].run();u=-1,t=a.length}o=null,s=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var n,i,r=e.exports={};!function(){try{n=\"function\"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){n=defaultSetTimout}try{i=\"function\"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){i=defaultClearTimeout}}();var o,a=[],s=!1,u=-1;r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new Item(e,t)),1!==a.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},r.title=\"browser\",r.browser=!0,r.env={},r.argv=[],r.version=\"\",r.versions={},r.on=noop,r.addListener=noop,r.once=noop,r.off=noop,r.removeListener=noop,r.removeAllListeners=noop,r.emit=noop,r.prependListener=noop,r.prependOnceListener=noop,r.listeners=function(e){return[]},r.binding=function(e){throw new Error(\"process.binding is not supported\")},r.cwd=function(){return\"/\"},r.chdir=function(e){throw new Error(\"process.chdir is not supported\")},r.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||Function(\"return this\")()||(0,eval)(\"this\")}catch(i){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t,n){function ComplementaryFilter(e){this.kFilter=e,this.currentAccelMeasurement=new i,this.currentGyroMeasurement=new i,this.previousGyroMeasurement=new i,o.isIOS()?this.filterQ=new r.Quaternion(-1,0,0,1):this.filterQ=new r.Quaternion(1,0,0,1),this.previousFilterQ=new r.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new r.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new r.Vector3,this.measuredGravity=new r.Vector3,this.gyroIntegralQ=new r.Quaternion}var i=n(42),r=n(4),o=n(7);ComplementaryFilter.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},ComplementaryFilter.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var n=t-this.previousGyroMeasurement.timestampS;o.isTimestampDeltaValid(n)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},ComplementaryFilter.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var n=new r.Quaternion;n.copy(this.filterQ),n.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(n),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var i=new r.Quaternion;i.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),i.inverse(),o.isDebug()&&console.log(\"Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)\",r.radToDeg*o.getQuaternionAngle(i),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var a=new r.Quaternion;a.copy(this.filterQ),a.multiply(i),this.filterQ.slerp(a,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},ComplementaryFilter.prototype.getOrientation=function(){return this.filterQ},ComplementaryFilter.prototype.accelToQuaternion_=function(e){var t=new r.Vector3;t.copy(e),t.normalize();var n=new r.Quaternion;return n.setFromUnitVectors(new r.Vector3(0,0,-1),t),n.inverse(),n},ComplementaryFilter.prototype.gyroToQuaternionDelta_=function(e,t){var n=new r.Quaternion,i=new r.Vector3;return i.copy(e),i.normalize(),n.setFromAxisAngle(i,e.length()*t),n},e.exports=ComplementaryFilter},function(e,t,n){function PosePredictor(e){this.predictionTimeS=e,this.previousQ=new i.Quaternion,this.previousTimestampS=null,this.deltaQ=new i.Quaternion,this.outQ=new i.Quaternion}var i=n(4),r=n(7);PosePredictor.prototype.getPrediction=function(e,t,n){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=n,e;var o=new i.Vector3;o.copy(t),o.normalize();var a=t.length();if(a<20*i.degToRad)return r.isDebug()&&console.log(\"Moving slowly, at %s deg/s: no prediction\",(i.radToDeg*a).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var s=(this.previousTimestampS,a*this.predictionTimeS);return this.deltaQ.setFromAxisAngle(o,s),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=n,this.outQ},e.exports=PosePredictor},function(e,t){function SensorSample(e,t){this.set(e,t)}SensorSample.prototype.set=function(e,t){this.sample=e,this.timestampS=t},SensorSample.prototype.copy=function(e){this.set(e.sample,e.timestampS)},e.exports=SensorSample},function(e,t){},function(e,t,n){\"use strict\";t.__esModule=!0,t.VERSION=t.SpriteImage=t.SpinViewer=t.PanoViewer=t.YawPitchControl=undefined;var i=n(15),r=n(17),o=n(19);t.YawPitchControl=i.YawPitchControl,t.PanoViewer=r.PanoViewer,t.SpinViewer=o.SpinViewer,t.SpriteImage=o.SpriteImage,t.VERSION=\"3.0.0-rc\"}])});\n\n\n// WEBPACK FOOTER //\n// view360.pkgd.min.js"],"mappings":";;;;;;;;;;;;;AAAA","sourceRoot":""}