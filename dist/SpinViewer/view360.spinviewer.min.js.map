{"version":3,"file":"SpinViewer/view360.spinviewer.min.js","sources":["webpack:///SpinViewer/view360.spinviewer.min.js"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t(require(\"@egjs/component\"),require(\"@egjs/axes\")):\"function\"==typeof define&&define.amd?define(\"view360\",[\"@egjs/component\",\"@egjs/axes\"],t):\"object\"==typeof exports?exports.view360=t(require(\"@egjs/component\"),require(\"@egjs/axes\")):(e.eg=e.eg||{},e.eg.view360=t(e.eg.Component,e.eg.Axes))}(this,function(e,t){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e[\"default\"]}:function(){return e};return __webpack_require__.d(t,\"a\",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=21)}({0:function(t,r){t.exports=e},11:function(e,t,r){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(0),o=function(e){return e&&e.__esModule?e:{\"default\":e}}(n),i=function(e){function SpriteImage(t,r){_classCallCheck(this,SpriteImage);var n=_possibleConstructorReturn(this,e.call(this)),o=r||{};return n._el=t,n._rowCount=o.rowCount||1,n._colCount=o.colCount||1,n._totalCount=n._rowCount*n._colCount,n._width=o.width||\"auto\",n._height=o.height||\"auto\",n._autoHeight=null!=o.autoHeight?o.autoHeight:\"true\",n._colRow=[0,0],o.colRow?n._colRow=o.colRow:o.frameIndex&&n.setFrameIndex(o.frameIndex),n._el.style.width=SpriteImage._getSizeString(n._width),n._el.style.height=SpriteImage._getSizeString(n._height),o.imageUrl?(n._image=new Image,n._image.onload=function(){n._bg=SpriteImage._createBgDiv(n._image,n._rowCount,n._colCount,n._autoHeight),n._el.appendChild(n._bg),n.setColRow(n._colRow[0],n._colRow[1]),n.trigger(\"load\",{target:n._el,bgElement:n._bg}),n._autoPlayReservedInfo&&(n.play(n._autoPlayReservedInfo),n._autoPlayReservedInfo=null)},n._image.onerror=function(e){n.trigger(\"imageError\",{imageUrl:o.imageUrl})},n._image.src=o.imageUrl,n):(setTimeout(function(){n.trigger(\"imageError\",{imageUrl:o.imageUrl})},0),_possibleConstructorReturn(n))}return _inherits(SpriteImage,e),SpriteImage._createBgDiv=function(e,t,r,n){var o=document.createElement(\"div\");o.style.backgroundImage=\"url(\"+e.src+\")\",o.style.backgroundSize=100*r+\"% \"+100*t+\"%\";var i=e.width/r,a=e.height/t;if(n){var u=a/i;o.style.paddingBottom=100*u+\"%\"}else o.style.height=\"100%\";return o},SpriteImage.prototype.setFrameIndex=function(e){var t=this.toColRow(e);this.setColRow(t[0],t[1])},SpriteImage.prototype.getFrameIndex=function(){return this._colRow[1]*this._colCount+this._colRow[0]},SpriteImage.prototype.setColRow=function(e,t){t>this._rowCount-1||e>this._colCount-1||(this._bg&&(this._bg.style.backgroundPosition=100*-e+\"% \"+100*-t+\"%\"),this._colRow=[e,t])},SpriteImage.prototype.getColRow=function(){return this._colRow},SpriteImage._getSizeString=function(e){return\"number\"==typeof e?e+\"px\":e},SpriteImage.prototype.stop=function(){this._autoPlayTimer&&(clearInterval(this._autoPlayTimer),this._autoPlayTimer=null)},SpriteImage.prototype.play=function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{interval:1e3/this._totalCount,playCount:0},r=t.interval,n=t.playCount;if(!this._bg)return void(this._autoPlayReservedInfo={interval:r,playCount:n});this._autoPlayTimer&&(clearInterval(this._autoPlayTimer),this._autoPlayTimer=null);var o=this.getFrameIndex(),i=0,a=0;this._autoPlayTimer=setInterval(function(){o%=e._totalCount;var t=e.toColRow(o);e.setColRow(t[0],t[1]),o++,++a===e._totalCount&&(a=0,i++),n>0&&i===n&&clearInterval(e._autoPlayTimer)},r)},SpriteImage.prototype.toColRow=function(e){var t=this._colCount,r=this._rowCount;return e<0?[0,0]:e>=this._totalCount?[t-1,r-1]:[e%t,Math.floor(e/t)]},SpriteImage}(o[\"default\"]);t[\"default\"]=i},20:function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(0),i=_interopRequireDefault(o),a=r(7),u=_interopRequireDefault(a),l=r(11),s=_interopRequireDefault(l),_=.21,c=function(e){function SpinViewer(t,r){_classCallCheck(this,SpinViewer);var o=_possibleConstructorReturn(this,e.call(this));o._el=t;var i=n({},r),l=i.colCount||1,c=i.rowCount||1;return o._scale=i.scale||1,o._panScale=o._scale*_,o._frameCount=l*c,o._sprites=new s[\"default\"](t,i).on({load:function(e){o.trigger(\"load\",e)},imageError:function(e){o.trigger(\"imageError\",{imageUrl:e.imageUrl})}}),o._panInput=new a.PanInput(o._el,{scale:[o._panScale,o._panScale]}),o._axes=new u[\"default\"]({angle:{range:[0,359],circular:!0}}).on({change:function(e){var t=Math.floor(e.pos.angle/(360/o._frameCount)),r=o._frameCount-t-1;o._sprites.setFrameIndex(r),o.trigger(\"change\",{frameIndex:r,colRow:o._sprites.getColRow(),angle:e.pos.angle})},animationEnd:function(e){o.trigger(\"animationEnd\",{isTrusted:e.isTrusted})}}),o._axes.connect(\"angle\",o._panInput),o}return _inherits(SpinViewer,e),SpinViewer.prototype.setScale=function(e){return isNaN(e)||e<0?this:(this._scale=e,this._panScale=e*_,this._panInput.options.scale=[this._panScale,this._panScale],this)},SpinViewer.prototype.getScale=function(){return this._scale},SpinViewer.prototype.spinBy=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{duration:0};return this._axes.setBy({angle:e},t.duration),this},SpinViewer.prototype.spinTo=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{duration:0};return this._axes.setTo({angle:e},t.duration),this},SpinViewer.prototype.getAngle=function(){return this._axes.get().angle||0},SpinViewer}(i[\"default\"]);t[\"default\"]=c},21:function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}t.__esModule=!0,t.SpriteImage=t.SpinViewer=undefined;var n=r(20),o=_interopRequireDefault(n),i=r(11),a=_interopRequireDefault(i);t.SpinViewer=o[\"default\"],t.SpriteImage=a[\"default\"],o[\"default\"].VERSION=\"3.0.0-rc\"},7:function(e,r){e.exports=t}})});\n\n\n// WEBPACK FOOTER //\n// SpinViewer/view360.spinviewer.min.js"],"mappings":";;;;;;;;;AAAA","sourceRoot":""}