/*!
 * Copyright (c) 2017 NAVER Corp.
 * @egjs/view360 project is licensed under the MIT license
 * 
 * @egjs/view360 JavaScript library
 * 
 * 
 * @version 3.0.0-rc
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@egjs/component"),require("@egjs/axes")):"function"==typeof define&&define.amd?define("view360",["@egjs/component","@egjs/axes"],t):"object"==typeof exports?exports.view360=t(require("@egjs/component"),require("@egjs/axes")):(e.eg=e.eg||{},e.eg.view360=t(e.eg.Component,e.eg.Axes))}(this,function(e,t){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=21)}({0:function(t,r){t.exports=e},11:function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(0),o=function(e){return e&&e.__esModule?e:{"default":e}}(n),i=function(e){function SpriteImage(t,r){_classCallCheck(this,SpriteImage);var n=_possibleConstructorReturn(this,e.call(this)),o=r||{};return n._el=t,n._rowCount=o.rowCount||1,n._colCount=o.colCount||1,n._totalCount=n._rowCount*n._colCount,n._width=o.width||"auto",n._height=o.height||"auto",n._autoHeight=null!=o.autoHeight?o.autoHeight:"true",n._colRow=[0,0],o.colRow?n._colRow=o.colRow:o.frameIndex&&n.setFrameIndex(o.frameIndex),n._el.style.width=SpriteImage._getSizeString(n._width),n._el.style.height=SpriteImage._getSizeString(n._height),o.imageUrl?(n._image=new Image,n._image.onload=function(){n._bg=SpriteImage._createBgDiv(n._image,n._rowCount,n._colCount,n._autoHeight),n._el.appendChild(n._bg),n.setColRow(n._colRow[0],n._colRow[1]),n.trigger("load",{target:n._el,bgElement:n._bg}),n._autoPlayReservedInfo&&(n.play(n._autoPlayReservedInfo),n._autoPlayReservedInfo=null)},n._image.onerror=function(e){n.trigger("imageError",{imageUrl:o.imageUrl})},n._image.src=o.imageUrl,n):(setTimeout(function(){n.trigger("imageError",{imageUrl:o.imageUrl})},0),_possibleConstructorReturn(n))}return _inherits(SpriteImage,e),SpriteImage._createBgDiv=function(e,t,r,n){var o=document.createElement("div");o.style.backgroundImage="url("+e.src+")",o.style.backgroundSize=100*r+"% "+100*t+"%";var i=e.width/r,a=e.height/t;if(n){var u=a/i;o.style.paddingBottom=100*u+"%"}else o.style.height="100%";return o},SpriteImage.prototype.setFrameIndex=function(e){var t=this.toColRow(e);this.setColRow(t[0],t[1])},SpriteImage.prototype.getFrameIndex=function(){return this._colRow[1]*this._colCount+this._colRow[0]},SpriteImage.prototype.setColRow=function(e,t){t>this._rowCount-1||e>this._colCount-1||(this._bg&&(this._bg.style.backgroundPosition=100*-e+"% "+100*-t+"%"),this._colRow=[e,t])},SpriteImage.prototype.getColRow=function(){return this._colRow},SpriteImage._getSizeString=function(e){return"number"==typeof e?e+"px":e},SpriteImage.prototype.stop=function(){this._autoPlayTimer&&(clearInterval(this._autoPlayTimer),this._autoPlayTimer=null)},SpriteImage.prototype.play=function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{interval:1e3/this._totalCount,playCount:0},r=t.interval,n=t.playCount;if(!this._bg)return void(this._autoPlayReservedInfo={interval:r,playCount:n});this._autoPlayTimer&&(clearInterval(this._autoPlayTimer),this._autoPlayTimer=null);var o=this.getFrameIndex(),i=0,a=0;this._autoPlayTimer=setInterval(function(){o%=e._totalCount;var t=e.toColRow(o);e.setColRow(t[0],t[1]),o++,++a===e._totalCount&&(a=0,i++),n>0&&i===n&&clearInterval(e._autoPlayTimer)},r)},SpriteImage.prototype.toColRow=function(e){var t=this._colCount,r=this._rowCount;return e<0?[0,0]:e>=this._totalCount?[t-1,r-1]:[e%t,Math.floor(e/t)]},SpriteImage}(o["default"]);t["default"]=i},20:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(0),o=_interopRequireDefault(n),i=r(7),a=_interopRequireDefault(i),u=r(11),l=_interopRequireDefault(u),s=.21,_=function(e){function SpinViewer(t,r){_classCallCheck(this,SpinViewer);var n=_possibleConstructorReturn(this,e.call(this));n._el=t;var o=r||{},u=o.colCount||1,_=o.rowCount||1;return n._scale=o.scale||1,n._panScale=n._scale*s,n._frameCount=u*_,n._sprites=new l["default"](t,o).on({load:function(e){n.trigger("load",e)},imageError:function(e){n.trigger("imageError",{imageUrl:e.imageUrl})}}),n._panInput=new i.PanInput(n._el,{scale:[n._panScale,n._panScale]}),n._axes=new a["default"]({angle:{range:[0,359],circular:!0}}).on({change:function(e){var t=Math.floor(e.pos.angle/(360/n._frameCount)),r=n._frameCount-t-1;n._sprites.setFrameIndex(r),n.trigger("change",{frameIndex:r,colRow:n._sprites.getColRow(),angle:e.pos.angle})},animationEnd:function(e){n.trigger("spinEnd",{isTrusted:e.isTrusted})}}),n._axes.connect("angle",n._panInput),n}return _inherits(SpinViewer,e),SpinViewer.prototype.setScale=function(e){return isNaN(e)||e<0?this:(this._scale=e,this._panScale=e*s,this._panInput.options.scale=[this._panScale,this._panScale],this)},SpinViewer.prototype.getScale=function(){return this._scale},SpinViewer.prototype.spinBy=function(e){var t=e.angle,r=t===undefined?0:t,n=e.duration,o=n===undefined?400:n;return this._axes.setBy({angle:r},o),0!==o&&0!==r||this.trigger("spinEnd",{isTrusted:!1}),this},SpinViewer.prototype.spinTo=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{duration:400},r=e===this.getAngle();return this._axes.setTo({angle:e},t.duration),(0===t.duration||r)&&this.trigger("spinEnd",{isTrusted:!1}),this},SpinViewer.prototype.getAngle=function(){return this._axes.get().angle||0},SpinViewer}(o["default"]);t["default"]=_},21:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.SpriteImage=t.SpinViewer=undefined;var n=r(20),o=_interopRequireDefault(n),i=r(11),a=_interopRequireDefault(i);t.SpinViewer=o["default"],t.SpriteImage=a["default"],o["default"].VERSION="3.0.0-rc"},7:function(e,r){e.exports=t}})});
//# sourceMappingURL=view360.spinviewer.min.js.map